(self.webpackChunkantd=self.webpackChunkantd||[]).push([[94393],{62238:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var z=function(k,P){var N=k.nodes,D=k.edges,E=[],y={};if(!N)throw new Error("invalid nodes data!");return N&&N.forEach(function(M,S){y[M.id]=S;var m=[];E.push(m)}),D&&D.forEach(function(M){var S=M.source,m=M.target,I=y[S],A=y[m];!I&&I!==0||!A&&A!==0||(E[I][A]=1,P||(E[A][I]=1))}),E},B=z;R.default=B},810369:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"GADDIAsync",{enumerable:!0,get:function(){return B.GADDIAsync}}),Object.defineProperty(R,"connectedComponentAsync",{enumerable:!0,get:function(){return B.connectedComponentAsync}}),R.default=void 0,Object.defineProperty(R,"detectAllCyclesAsync",{enumerable:!0,get:function(){return B.detectAllCyclesAsync}}),Object.defineProperty(R,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return B.detectAllDirectedCycleAsync}}),Object.defineProperty(R,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return B.detectAllUndirectedCycleAsync}}),Object.defineProperty(R,"detectCycleAsync",{enumerable:!0,get:function(){return B.detectCycleAsync}}),R.detectDirectedCycleAsync=void 0,Object.defineProperty(R,"dijkstraAsync",{enumerable:!0,get:function(){return B.dijkstraAsync}}),Object.defineProperty(R,"findAllPathAsync",{enumerable:!0,get:function(){return B.findAllPathAsync}}),Object.defineProperty(R,"findShortestPathAsync",{enumerable:!0,get:function(){return B.findShortestPathAsync}}),Object.defineProperty(R,"floydWarshallAsync",{enumerable:!0,get:function(){return B.floydWarshallAsync}}),Object.defineProperty(R,"getAdjMatrixAsync",{enumerable:!0,get:function(){return B.getAdjMatrixAsync}}),Object.defineProperty(R,"getDegreeAsync",{enumerable:!0,get:function(){return B.getDegreeAsync}}),Object.defineProperty(R,"getInDegreeAsync",{enumerable:!0,get:function(){return B.getInDegreeAsync}}),Object.defineProperty(R,"getNeighborsAsync",{enumerable:!0,get:function(){return B.getNeighborsAsync}}),Object.defineProperty(R,"getOutDegreeAsync",{enumerable:!0,get:function(){return B.getOutDegreeAsync}}),Object.defineProperty(R,"labelPropagationAsync",{enumerable:!0,get:function(){return B.labelPropagationAsync}}),Object.defineProperty(R,"louvainAsync",{enumerable:!0,get:function(){return B.louvainAsync}}),Object.defineProperty(R,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return B.minimumSpanningTreeAsync}}),Object.defineProperty(R,"pageRankAsync",{enumerable:!0,get:function(){return B.pageRankAsync}});var B=z(430485),Y=B.detectCycleAsync;R.detectDirectedCycleAsync=Y;var k={getAdjMatrixAsync:B.getAdjMatrixAsync,connectedComponentAsync:B.connectedComponentAsync,getDegreeAsync:B.getDegreeAsync,getInDegreeAsync:B.getInDegreeAsync,getOutDegreeAsync:B.getOutDegreeAsync,detectCycleAsync:B.detectCycleAsync,detectDirectedCycleAsync:Y,detectAllCyclesAsync:B.detectAllCyclesAsync,detectAllDirectedCycleAsync:B.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:B.detectAllUndirectedCycleAsync,dijkstraAsync:B.dijkstraAsync,findAllPathAsync:B.findAllPathAsync,findShortestPathAsync:B.findShortestPathAsync,floydWarshallAsync:B.floydWarshallAsync,labelPropagationAsync:B.labelPropagationAsync,louvainAsync:B.louvainAsync,minimumSpanningTreeAsync:B.minimumSpanningTreeAsync,pageRankAsync:B.pageRankAsync,getNeighborsAsync:B.getNeighborsAsync,GADDIAsync:B.GADDIAsync};R.default=k},683764:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=k(z(893026)),Y=z(770643);function k(E){return E&&E.__esModule?E:{default:E}}function P(E){E===void 0&&(E={});var y=E,M=function(){},S=function(){var m={};return function(I){var A=I.next,L=A;return m[L]?!1:(m[L]=!0,!0)}}();return y.allowTraversal=E.allowTraversal||S,y.enter=E.enter||M,y.leave=E.leave||M,y}var N=function(y,M,S,m){m===void 0&&(m=!0);var I=P(S),A=new B.default,L=y.edges,U=L===void 0?[]:L;A.enqueue(M);for(var V="",x=function(){var at=A.dequeue();I.enter({current:at,previous:V}),(0,Y.getNeighbors)(at,U,m?"target":void 0).forEach(function(W){I.allowTraversal({previous:V,current:at,next:W})&&A.enqueue(W)}),I.leave({current:at,previous:V}),V=at};!A.isEmpty();)x()},D=N;R.default=D},759527:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=P,R.detectStrongConnectComponents=R.detectConnectedComponents=void 0;var B=z(770643),Y=function(D){for(var E=D.nodes,y=E===void 0?[]:E,M=D.edges,S=M===void 0?[]:M,m=[],I={},A=[],L=function d(at){A.push(at),I[at.id]=!0;for(var W=(0,B.getNeighbors)(at.id,S),j=function(et){var Q=W[et];if(!I[Q]){var it=y.filter(function(ht){return ht.id===Q});it.length>0&&d(it[0])}},$=0;$<W.length;++$)j($)},U=0;U<y.length;U++){var V=y[U];if(!I[V.id]){L(V);for(var x=[];A.length>0;)x.push(A.pop());m.push(x)}}return m};R.detectConnectedComponents=Y;var k=function(D){for(var E=D.nodes,y=E===void 0?[]:E,M=D.edges,S=M===void 0?[]:M,m=[],I={},A={},L={},U=[],V=0,x=function j($){A[$.id]=V,L[$.id]=V,V+=1,m.push($),I[$.id]=!0;for(var q=(0,B.getNeighbors)($.id,S,"target").filter(function(dt){return y.map(function(Ot){return Ot.id}).indexOf(dt)>-1}),et=function(Ot){var It=q[Ot];if(!A[It]&&A[It]!==0){var Kt=y.filter(function(Ft){return Ft.id===It});Kt.length>0&&j(Kt[0]),L[$.id]=Math.min(L[$.id],L[It])}else I[It]&&(L[$.id]=Math.min(L[$.id],A[It]))},Q=0;Q<q.length;Q++)et(Q);if(L[$.id]===A[$.id]){for(var it=[];m.length>0;){var ht=m.pop();if(I[ht.id]=!1,it.push(ht),ht===$)break}it.length>0&&U.push(it)}},d=0,at=y;d<at.length;d++){var W=at[d];!A[W.id]&&A[W.id]!==0&&x(W)}return U};R.detectStrongConnectComponents=k;function P(N,D){return D?k(N):Y(N)}},592935:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.secondReg=R.dateReg=void 0;var z=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;R.secondReg=z;var B=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;R.dateReg=B},182556:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getOutDegree=R.getInDegree=R.default=void 0;var z=function(N){var D={},E=N.nodes,y=E===void 0?[]:E,M=N.edges,S=M===void 0?[]:M;return y.forEach(function(m){D[m.id]={degree:0,inDegree:0,outDegree:0}}),S.forEach(function(m){D[m.source].degree++,D[m.source].outDegree++,D[m.target].degree++,D[m.target].inDegree++}),D},B=z;R.default=B;var Y=function(N,D){var E=z(N);return E[D]?z(N)[D].inDegree:0};R.getInDegree=Y;var k=function(N,D){var E=z(N);return E[D]?z(N)[D].outDegree:0};R.getOutDegree=k},994282:function(yr,R,z){"use strict";function B(A){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},B(A)}Object.defineProperty(R,"__esModule",{value:!0}),R.detectAllUndirectedCycle=R.detectAllDirectedCycle=R.detectAllCycles=R.default=void 0;var Y=E(z(45891)),k=D(z(759527)),P=z(770643);function N(A){if(typeof WeakMap!="function")return null;var L=new WeakMap,U=new WeakMap;return(N=function(x){return x?U:L})(A)}function D(A,L){if(!L&&A&&A.__esModule)return A;if(A===null||B(A)!=="object"&&typeof A!="function")return{default:A};var U=N(L);if(U&&U.has(A))return U.get(A);var V={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in A)if(d!=="default"&&Object.prototype.hasOwnProperty.call(A,d)){var at=x?Object.getOwnPropertyDescriptor(A,d):null;at&&(at.get||at.set)?Object.defineProperty(V,d,at):V[d]=A[d]}return V.default=A,U&&U.set(A,V),V}function E(A){return A&&A.__esModule?A:{default:A}}var y=function(L){var U=null,V=L.nodes,x=V===void 0?[]:V,d={},at={},W={},j={};x.forEach(function(et){at[et.id]=et});for(var $={enter:function(Q){var it=Q.current,ht=Q.previous;if(W[it]){U={};for(var dt=it,Ot=ht;Ot!==it;)U[dt]=Ot,dt=Ot,Ot=d[Ot];U[dt]=Ot}else W[it]=it,delete at[it],d[it]=ht},leave:function(Q){var it=Q.current;j[it]=it,delete W[it]},allowTraversal:function(Q){var it=Q.next;return U?!1:!j[it]}};Object.keys(at).length;){var q=Object.keys(at)[0];(0,Y.default)(L,q,$)}return U},M=function(L,U,V){var x,d;V===void 0&&(V=!0);for(var at=[],W=(0,k.default)(L,!1),j=0,$=W;j<$.length;j++){var q=$[j];if(q.length)for(var et=q[0],Q=et.id,it=[et],ht=(x={},x[Q]=et,x),dt=(d={},d[Q]=new Set,d);it.length>0;)for(var Ot=it.pop(),It=Ot.id,Kt=(0,P.getNeighbors)(It,L.edges),Ft=function(yt){var kt,ee=Kt[yt],$t=L.nodes.find(function(Se){return Se.id===ee});if(ee===It)at.push((kt={},kt[ee]=Ot,kt));else if(!(ee in dt))ht[ee]=Ot,it.push($t),dt[ee]=new Set([Ot]);else if(!dt[It].has($t)){for(var ge=!0,Pe=[$t,Ot],tr=ht[It];dt[ee].size&&!dt[ee].has(tr)&&(Pe.push(tr),tr!==ht[tr.id]);)tr=ht[tr.id];if(Pe.push(tr),U&&V?(ge=!1,Pe.findIndex(function(Se){return U.indexOf(Se.id)>-1})>-1&&(ge=!0)):U&&!V&&Pe.findIndex(function(Se){return U.indexOf(Se.id)>-1})>-1&&(ge=!1),ge){for(var Jt={},ae=1;ae<Pe.length;ae+=1)Jt[Pe[ae-1].id]=Pe[ae];Pe.length&&(Jt[Pe[Pe.length-1].id]=Pe[0]),at.push(Jt)}dt[ee].add(Ot)}},Nt=0;Nt<Kt.length;Nt+=1)Ft(Nt)}return at};R.detectAllUndirectedCycle=M;var S=function(L,U,V){V===void 0&&(V=!0);for(var x=[],d=new Set,at=[],W=[],j={},$={},q=function(tr){for(var Jt=[tr];Jt.length>0;){var ae=Jt.pop();d.has(ae)&&(d.delete(ae),at[ae.id].forEach(function(Se){Jt.push(Se)}),at[ae.id].clear())}},et=function Pe(tr,Jt,ae){var Se=!1;if(U&&V===!1&&U.indexOf(tr.id)>-1)return Se;x.push(tr),d.add(tr);for(var xe=ae[tr.id],we=0;we<xe.length;we+=1){var zt=j[xe[we]];if(zt===Jt){for(var Wt={},Ie=1;Ie<x.length;Ie+=1)Wt[x[Ie-1].id]=x[Ie];x.length&&(Wt[x[x.length-1].id]=x[0]),W.push(Wt),Se=!0}else d.has(zt)||Pe(zt,Jt,ae)&&(Se=!0)}if(Se)q(tr);else for(var we=0;we<xe.length;we+=1){var zt=j[xe[we]];at[zt.id].has(tr)||at[zt.id].add(tr)}return x.pop(),Se},Q=L.nodes,it=Q===void 0?[]:Q,ht=0;ht<it.length;ht+=1){var dt=it[ht],Ot=dt.id;$[Ot]=ht,j[ht]=dt}if(U&&V)for(var It=function(tr){var Jt=U[tr];$[it[tr].id]=$[Jt],$[Jt]=0,j[0]=it.find(function(ae){return ae.id===Jt}),j[$[it[tr].id]]=it[tr]},ht=0;ht<U.length;ht++)It(ht);for(var Kt=function(tr){for(var Jt,ae,Se=1/0,xe=0;xe<tr.length;xe+=1)for(var we=tr[xe],zt=0;zt<we.length;zt++){var Wt=$[we[zt].id];Wt<Se&&(Se=Wt,ae=xe)}for(var Ie=tr[ae],Yt=[],xe=0;xe<Ie.length;xe+=1){var ie=Ie[xe];Yt[ie.id]=[];for(var Oe=0,re=(0,P.getNeighbors)(ie.id,L.edges,"target").filter(function(Ct){return Ie.map(function(Nr){return Nr.id}).indexOf(Ct)>-1});Oe<re.length;Oe++){var _e=re[Oe];_e===ie.id&&!(V===!1&&U.indexOf(ie.id)>-1)?W.push((Jt={},Jt[ie.id]=ie,Jt)):Yt[ie.id].push($[_e])}}return{component:Ie,adjList:Yt,minIdx:Se}},Ft=0;Ft<it.length;){var Nt=it.filter(function(Pe){return $[Pe.id]>=Ft}),st=(0,k.detectStrongConnectComponents)({nodes:Nt,edges:L.edges}).filter(function(Pe){return Pe.length>1});if(st.length===0)break;var yt=Kt(st),kt=yt.minIdx,ee=yt.adjList,$t=yt.component;if($t.length>1){$t.forEach(function(Pe){at[Pe.id]=new Set});var ge=j[kt];if(U&&V&&U.indexOf(ge.id)===-1)return W;et(ge,ge,ee),Ft=kt+1}else break}return W};R.detectAllDirectedCycle=S;var m=function(L,U,V,x){return x===void 0&&(x=!0),U?S(L,V,x):M(L,V,x)};R.detectAllCycles=m;var I=y;R.default=I},45891:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=P;var B=z(770643);function Y(N){N===void 0&&(N={});var D=N,E=function(){},y=function(){var M={};return function(S){var m=S.next;return M[m]?!1:(M[m]=!0,!0)}}();return D.allowTraversal=N.allowTraversal||y,D.enter=N.enter||E,D.leave=N.leave||E,D}function k(N,D,E,y,M){M===void 0&&(M=!0),y.enter({current:D,previous:E});var S=N.edges,m=S===void 0?[]:S;(0,B.getNeighbors)(D,m,M?"target":void 0).forEach(function(I){y.allowTraversal({previous:E,current:D,next:I})&&k(N,I,D,y,M)}),y.leave({current:D,previous:E})}function P(N,D,E,y){y===void 0&&(y=!0),k(N,D,"",Y(E),y)}},878089:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(197582),Y=z(413810),k=z(770643),P=function(M,S,m){for(var I=1/0,A,L=0;L<S.length;L++){var U=S[L].id;!m[U]&&M[U]<=I&&(I=M[U],A=S[L])}return A},N=function(M,S,m,I){var A=M.nodes,L=A===void 0?[]:A,U=M.edges,V=U===void 0?[]:U,x=[],d={},at={},W={};L.forEach(function(ht,dt){var Ot=ht.id;x.push(Ot),at[Ot]=1/0,Ot===S&&(at[Ot]=0)});for(var j=L.length,$=function(dt){var Ot=P(at,L,d),It=Ot.id;if(d[It]=!0,at[It]===1/0)return"continue";var Kt=[];m?Kt=(0,k.getOutEdgesNodeId)(It,V):Kt=(0,k.getEdgesByNodeId)(It,V),Kt.forEach(function(Ft){var Nt=Ft.target,st=Ft.source,yt=Nt===It?st:Nt,kt=I&&Ft[I]?Ft[I]:1;at[yt]>at[Ot.id]+kt?(at[yt]=at[Ot.id]+kt,W[yt]=[Ot.id]):at[yt]===at[Ot.id]+kt&&W[yt].push(Ot.id)})},q=0;q<j;q++)$(q);W[S]=[S];var et={};for(var Q in at)at[Q]!==1/0&&E(S,Q,W,et);var it={};for(var Q in et)it[Q]=et[Q][0];return{length:at,path:it,allPath:et}},D=N;R.default=D;function E(y,M,S,m){if(y===M)return[y];if(m[M])return m[M];for(var I=[],A=0,L=S[M];A<L.length;A++){var U=L[A],V=E(y,U,S,m);if(!V)return;for(var x=0,d=V;x<d.length;x++){var at=d[x];(0,Y.isArray)(at)?I.push((0,B.__spreadArray)((0,B.__spreadArray)([],at,!0),[M],!1)):I.push([at,M])}}return m[M]=I,m[M]}},241727:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.findShortestPath=R.findAllPath=void 0;var B=k(z(878089)),Y=z(770643);function k(D){return D&&D.__esModule?D:{default:D}}var P=function(E,y,M,S,m){var I=(0,B.default)(E,y,S,m),A=I.length,L=I.path,U=I.allPath;return{length:A[M],path:L[M],allPath:U[M]}};R.findShortestPath=P;var N=function(E,y,M,S){var m;if(y===M)return[[y]];var I=E.edges,A=I===void 0?[]:I,L=[y],U=(m={},m[y]=!0,m),V=[],x=[],d=S?(0,Y.getNeighbors)(y,A,"target"):(0,Y.getNeighbors)(y,A);for(V.push(d);L.length>0&&V.length>0;){var at=V[V.length-1];if(at.length){var W=at.shift();W&&(L.push(W),U[W]=!0,d=S?(0,Y.getNeighbors)(W,A,"target"):(0,Y.getNeighbors)(W,A),V.push(d.filter(function(q){return!U[q]})))}else{var j=L.pop();U[j]=!1,V.pop();continue}if(L[L.length-1]===M){var $=L.map(function(et){return et});x.push($);var j=L.pop();U[j]=!1,V.pop()}}return x};R.findAllPath=N},975033:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=Y(z(62238));function Y(N){return N&&N.__esModule?N:{default:N}}var k=function(D,E){for(var y=(0,B.default)(D,E),M=[],S=y.length,m=0;m<S;m+=1){M[m]=[];for(var I=0;I<S;I+=1)m===I?M[m][I]=0:y[m][I]===0||!y[m][I]?M[m][I]=1/0:M[m][I]=y[m][I]}for(var A=0;A<S;A+=1)for(var m=0;m<S;m+=1)for(var I=0;I<S;I+=1)M[m][I]>M[m][A]+M[A][I]&&(M[m][I]=M[m][A]+M[A][I]);return M},P=k;R.default=P},821146:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(413810),Y=z(368575),k=function(){function I(A,L,U,V,x){this.fromNode=A,this.toNode=L,this.nodeEdgeNodeLabel={nodeLabel1:U||Y.VACANT_NODE_LABEL,edgeLabel:V||Y.VACANT_EDGE_LABEL,nodeLabel2:x||Y.VACANT_NODE_LABEL}}return I.prototype.equalTo=function(A){return this.fromNode===A.formNode&&this.toNode===A.toNode&&this.nodeEdgeNodeLabel===A.nodeEdgeNodeLabel},I.prototype.notEqualTo=function(A){return!this.equalTo(A)},I}(),P=function(){function I(){this.rmpath=[],this.dfsEdgeList=[]}return I.prototype.equalTo=function(A){var L=this.dfsEdgeList.length,U=A.length;if(L!==U)return!1;for(var V=0;V<L;V++)if(this.dfsEdgeList[V]!==A[V])return!1;return!0},I.prototype.notEqualTo=function(A){return!this.equalTo(A)},I.prototype.pushBack=function(A,L,U,V,x){return this.dfsEdgeList.push(new k(A,L,U,V,x)),this.dfsEdgeList},I.prototype.toGraph=function(A,L){A===void 0&&(A=Y.VACANT_GRAPH_ID),L===void 0&&(L=!1);var U=new Y.Graph(A,!0,L);return this.dfsEdgeList.forEach(function(V){var x=V.fromNode,d=V.toNode,at=V.nodeEdgeNodeLabel,W=at.nodeLabel1,j=at.edgeLabel,$=at.nodeLabel2;W!==Y.VACANT_NODE_LABEL&&U.addNode(x,W),$!==Y.VACANT_NODE_LABEL&&U.addNode(d,$),W!==Y.VACANT_NODE_LABEL&&$!==W&&U.addEdge(void 0,x,d,j)}),U},I.prototype.buildRmpath=function(){this.rmpath=[];for(var A=void 0,L=this.dfsEdgeList.length,U=L-1;U>=0;U--){var V=this.dfsEdgeList[U],x=V.fromNode,d=V.toNode;x<d&&(A===void 0||d===A)&&(this.rmpath.push(U),A=x)}return this.rmpath},I.prototype.getNodeNum=function(){var A={};return this.dfsEdgeList.forEach(function(L){A[L.fromNode]||(A[L.fromNode]=!0),A[L.toNode]||(A[L.toNode]=!0)}),Object.keys(A).length},I}(),N=function(){function I(A){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!A){for(;A;){var L=A.edge;this.edges.push(L),this.nodesUsed[L.from]=1,this.nodesUsed[L.to]=1,this.edgesUsed[L.id]=1,A=A.preNode}this.edges=this.edges.reverse()}}return I.prototype.hasNode=function(A){return this.nodesUsed[A.id]===1},I.prototype.hasEdge=function(A){return this.edgesUsed[A.id]===1},I}(),D=function(){function I(A){var L=A.graphs,U=A.minSupport,V=U===void 0?2:U,x=A.minNodeNum,d=x===void 0?1:x,at=A.maxNodeNum,W=at===void 0?4:at,j=A.top,$=j===void 0?10:j,q=A.directed,et=q===void 0?!1:q,Q=A.verbose,it=Q===void 0?!1:Q;this.graphs=L,this.dfsCode=new P,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=V,this.top=$,this.directed=et,this.counter=0,this.maxNodeNum=W,this.minNodeNum=d,this.verbose=it,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return I.prototype.findForwardRootEdges=function(A,L){var U=this,V=[],x=A.nodeMap;return L.edges.forEach(function(d){(U.directed||L.label<=x[d.to].label)&&V.push(d)}),V},I.prototype.findBackwardEdge=function(A,L,U,V){if(!this.directed&&L===U)return null;for(var x=A.nodeMap,d=x[U.to],at=d.edges,W=at.length,j=0;j<W;j++){var $=at[j];if(!(V.hasEdge($)||$.to!==L.from)){if(this.directed){if(x[L.from].label<x[U.to].label||x[L.from].label===x[U.to].label&&L.label<=$.label)return $}else if(L.label<$.label||L.label===$.label&&x[L.to].label<=x[U.to].label)return $}}return null},I.prototype.findForwardPureEdges=function(A,L,U,V){for(var x=[],d=L.to,at=A.nodeMap[d].edges,W=at.length,j=0;j<W;j++){var $=at[j],q=A.nodeMap[$.to];U<=q.label&&!V.hasNode(q)&&x.push($)}return x},I.prototype.findForwardRmpathEdges=function(A,L,U,V){for(var x=[],d=A.nodeMap,at=d[L.to].label,W=d[L.from],j=W.edges,$=j.length,q=0;q<$;q++){var et=j[q],Q=d[et.to].label;L.to===et.to||U>Q||V.hasNode(d[et.to])||(L.label<et.label||L.label===et.label&&at<=Q)&&x.push(et)}return x},I.prototype.getSupport=function(A){var L={};return A.forEach(function(U){L[U.graphId]||(L[U.graphId]=!0)}),Object.keys(L).length},I.prototype.findMinLabel=function(A){var L=void 0;return Object.keys(A).forEach(function(U){var V=A[U],x=V.nodeLabel1,d=V.edgeLabel,at=V.nodeLabel2;if(!L){L={nodeLabel1:x,edgeLabel:d,nodeLabel2:at};return}(x<L.nodeLabel1||x===L.nodeLabel1&&d<L.edgeLabel||x===L.nodeLabel1&&d===L.edgeLabel&&at<L.nodeLabel2)&&(L={nodeLabel1:x,edgeLabel:d,nodeLabel2:at})}),L},I.prototype.isMin=function(){var A=this,L=this.dfsCode;if(this.verbose&&console.log("isMin checking",L),L.dfsEdgeList.length===1)return!0;var U=this.directed,V=L.toGraph(Y.VACANT_GRAPH_ID,U),x=V.nodeMap,d=new P,at={};V.nodes.forEach(function(q){var et=A.findForwardRootEdges(V,q);et.forEach(function(Q){var it=x[Q.to],ht="".concat(q.label,"-").concat(Q.label,"-").concat(it.label);at[ht]||(at[ht]={projected:[],nodeLabel1:q.label,edgeLabel:Q.label,nodeLabel2:it.label});var dt={graphId:V.id,edge:Q,preNode:null};at[ht].projected.push(dt)})});var W=this.findMinLabel(at);if(W){d.dfsEdgeList.push(new k(0,1,W.nodeLabel1,W.edgeLabel,W.nodeLabel2));var j=function q(et){for(var Q=d.buildRmpath(),it=d.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ht=d.dfsEdgeList[Q[0]].toNode,dt={},Ot=!1,It=0,Kt=U?-1:0,Ft=function(xe){if(Ot)return"break";et.forEach(function(we){var zt=new N(we),Wt=A.findBackwardEdge(V,zt.edges[Q[xe]],zt.edges[Q[0]],zt);Wt&&(dt[Wt.label]||(dt[Wt.label]={projected:[],edgeLabel:Wt.label}),dt[Wt.label].projected.push({graphId:V.id,edge:dt,preNode:we}),It=d.dfsEdgeList[Q[xe]].fromNode,Ot=!0)})},Nt=Q.length-1;Nt>Kt;Nt--){var st=Ft(Nt);if(st==="break")break}if(Ot){var yt=A.findMinLabel(dt);d.dfsEdgeList.push(new k(ht,It,Y.VACANT_NODE_LABEL,yt.edgeLabel,Y.VACANT_NODE_LABEL));var kt=d.dfsEdgeList.length-1;return A.dfsCode.dfsEdgeList[kt]!==d.dfsEdgeList[kt]?!1:q(dt[yt.edgeLabel].projected)}var ee={};Ot=!1;var $t=0;et.forEach(function(Se){var xe=new N(Se),we=A.findForwardPureEdges(V,xe.edges[Q[0]],it,xe);we.length>0&&(Ot=!0,$t=ht,we.forEach(function(zt){var Wt="".concat(zt.label,"-").concat(x[zt.to].label);ee[Wt]||(ee[Wt]={projected:[],edgeLabel:zt.label,nodeLabel2:x[zt.to].label}),ee[Wt].projected.push({graphId:V.id,edge:zt,preNode:Se})}))});for(var ge=Q.length,Pe=function(xe){if(Ot)return"break";var we=Q[xe];et.forEach(function(zt){var Wt=new N(zt),Ie=A.findForwardRmpathEdges(V,Wt.edges[we],it,Wt);Ie.length>0&&(Ot=!0,$t=d.dfsEdgeList[we].fromNode,Ie.forEach(function(Yt){var ie="".concat(Yt.label,"-").concat(x[Yt.to].label);ee[ie]||(ee[ie]={projected:[],edgeLabel:Yt.label,nodeLabel2:x[Yt.to].label}),ee[ie].projected.push({graphId:V.id,edge:Yt,preNode:zt})}))})},Nt=0;Nt<ge;Nt++){var tr=Pe(Nt);if(tr==="break")break}if(!Ot)return!0;var Jt=A.findMinLabel(ee);d.dfsEdgeList.push(new k($t,ht+1,Y.VACANT_NODE_LABEL,Jt.edgeLabel,Jt.nodeLabel2));var ae=d.dfsEdgeList.length-1;return L.dfsEdgeList[ae]!==d.dfsEdgeList[ae]?!1:q(ee["".concat(Jt.edgeLabel,"-").concat(Jt.nodeLabel2)].projected)},$="".concat(W.nodeLabel1,"-").concat(W.edgeLabel,"-").concat(W.nodeLabel2);return j(at[$].projected)}},I.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var A=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,B.clone)(A))}},I.prototype.subGraphMining=function(A){var L=this,U=this.getSupport(A);if(!(U<this.minSupport)&&this.isMin()){this.report();var V=this.dfsCode.getNodeNum(),x=this.dfsCode.buildRmpath(),d=this.dfsCode.dfsEdgeList[x[0]].toNode,at=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,W={},j={};A.forEach(function($){for(var q=L.graphs[$.graphId],et=q.nodeMap,Q=new N($),it=x.length-1;it>=0;it--){var ht=L.findBackwardEdge(q,Q.edges[x[it]],Q.edges[x[0]],Q);if(ht){var dt="".concat(L.dfsCode.dfsEdgeList[x[it]].fromNode,"-").concat(ht.label);j[dt]||(j[dt]={projected:[],toNodeId:L.dfsCode.dfsEdgeList[x[it]].fromNode,edgeLabel:ht.label}),j[dt].projected.push({graphId:$.graphId,edge:ht,preNode:$})}}if(!(V>=L.maxNodeNum)){var Ot=L.findForwardPureEdges(q,Q.edges[x[0]],at,Q);Ot.forEach(function(Kt){var Ft="".concat(d,"-").concat(Kt.label,"-").concat(et[Kt.to].label);W[Ft]||(W[Ft]={projected:[],fromNodeId:d,edgeLabel:Kt.label,nodeLabel2:et[Kt.to].label}),W[Ft].projected.push({graphId:$.graphId,edge:Kt,preNode:$})});for(var It=function(Ft){var Nt=L.findForwardRmpathEdges(q,Q.edges[x[Ft]],at,Q);Nt.forEach(function(st){var yt="".concat(L.dfsCode.dfsEdgeList[x[Ft]].fromNode,"-").concat(st.label,"-").concat(et[st.to].label);W[yt]||(W[yt]={projected:[],fromNodeId:L.dfsCode.dfsEdgeList[x[Ft]].fromNode,edgeLabel:st.label,nodeLabel2:et[st.to].label}),W[yt].projected.push({graphId:$.graphId,edge:st,preNode:$})})},it=0;it<x.length;it++)It(it)}}),Object.keys(j).forEach(function($){var q=j[$],et=q.toNodeId,Q=q.edgeLabel;L.dfsCode.dfsEdgeList.push(new k(d,et,"-1",Q,"-1")),L.subGraphMining(j[$].projected),L.dfsCode.dfsEdgeList.pop()}),Object.keys(W).forEach(function($){var q=W[$],et=q.fromNodeId,Q=q.edgeLabel,it=q.nodeLabel2;L.dfsCode.dfsEdgeList.push(new k(et,d+1,Y.VACANT_NODE_LABEL,Q,it)),L.subGraphMining(W[$].projected),L.dfsCode.dfsEdgeList.pop()})}},I.prototype.generate1EdgeFrequentSubGraphs=function(){var A=this.graphs,L=this.directed,U=this.minSupport,V=this.frequentSize1Subgraphs,x={},d={},at={},W={};return Object.keys(A).forEach(function(j){var $=A[j],q=$.nodeMap;$.nodes.forEach(function(et,Q){var it=et.label,ht="".concat(j,"-").concat(it);if(!at[ht]){var dt=x[it]||0;dt++,x[it]=dt}at[ht]={graphKey:j,label:it},et.edges.forEach(function(Ot){var It=it,Kt=q[Ot.to].label;if(!L&&It>Kt){var Ft=Kt;Kt=It,It=Ft}var Nt=Ot.label,st="".concat(j,"-").concat(It,"-").concat(Nt,"-").concat(Kt),yt="".concat(It,"-").concat(Nt,"-").concat(Kt);if(!d[yt]){var kt=d[yt]||0;kt++,d[yt]=kt}W[st]={graphId:j,nodeLabel1:It,edgeLabel:Nt,nodeLabel2:Kt}})})}),Object.keys(x).forEach(function(j){var $=x[j];if(!($<U)){var q={nodes:[],edges:[]};q.nodes.push({id:"0",label:j}),V.push(q)}}),V},I.prototype.run=function(){var A=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var L=this.graphs,U=this.directed,V={};Object.keys(L).forEach(function(x){var d=L[x],at=d.nodeMap;d.nodes.forEach(function(W){var j=A.findForwardRootEdges(d,W);j.forEach(function($){var q=at[$.to],et="".concat(W.label,"-").concat($.label,"-").concat(q.label);V[et]||(V[et]={projected:[],nodeLabel1:W.label,edgeLabel:$.label,nodeLabel2:q.label});var Q={graphId:x,edge:$,preNode:null};V[et].projected.push(Q)})})}),Object.keys(V).forEach(function(x){var d=V[x],at=d.projected,W=d.nodeLabel1,j=d.edgeLabel,$=d.nodeLabel2;A.dfsCode.dfsEdgeList.push(new k(0,1,W,j,$)),A.subGraphMining(at),A.dfsCode.dfsEdgeList.pop()})}},I}(),E=function(A,L,U,V){var x={};return Object.keys(A).forEach(function(d,at){var W=A[d],j=new Y.Graph(at,!0,L),$={};W.nodes.forEach(function(q,et){j.addNode(et,q[U]),$[q.id]=et}),W.edges.forEach(function(q,et){var Q=$[q.source],it=$[q.target];j.addEdge(-1,Q,it,q[V])}),j&&j.getNodeNum()&&(x[j.id]=j)}),x},y=function(A,L,U){var V=[];return A.forEach(function(x){var d={nodes:[],edges:[]};x.nodes.forEach(function(at){var W;d.nodes.push((W={id:"".concat(at.id)},W[L]=at.label,W))}),x.edges.forEach(function(at){var W;d.edges.push((W={source:"".concat(at.from),target:"".concat(at.to)},W[U]=at.label,W))}),V.push(d)}),V},M="cluster",S=function(A){var L=A.graphs,U=A.directed,V=U===void 0?!1:U,x=A.nodeLabelProp,d=x===void 0?M:x,at=A.edgeLabelProp,W=at===void 0?M:at,j=E(L,V,d,W),$=A.minSupport,q=A.maxNodeNum,et=A.minNodeNum,Q=A.verbose,it=A.top,ht={graphs:j,minSupport:$,maxNodeNum:q,minNodeNum:et,top:it,verbose:Q,directed:V},dt=new D(ht);dt.run();var Ot=y(dt.frequentSubgraphs,d,W);return Ot},m=S;R.default=m},368575:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.VACANT_NODE_LABEL=R.VACANT_NODE_ID=R.VACANT_GRAPH_ID=R.VACANT_EDGE_LABEL=R.VACANT_EDGE_ID=R.Node=R.Graph=R.Edge=R.AUTO_EDGE_ID=void 0;var z=-1;R.VACANT_EDGE_ID=z;var B=-1;R.VACANT_NODE_ID=B;var Y="-1";R.VACANT_EDGE_LABEL=Y;var k="-1";R.VACANT_NODE_LABEL=k;var P=-1;R.VACANT_GRAPH_ID=P;var N="-1";R.AUTO_EDGE_ID=N;var D=function(){function M(S,m,I,A){S===void 0&&(S=z),m===void 0&&(m=B),I===void 0&&(I=B),A===void 0&&(A=Y),this.id=S,this.from=m,this.to=I,this.label=A}return M}();R.Edge=D;var E=function(){function M(S,m){S===void 0&&(S=B),m===void 0&&(m=k),this.id=S,this.label=m,this.edges=[],this.edgeMap={}}return M.prototype.addEdge=function(S){this.edges.push(S),this.edgeMap[S.id]=S},M}();R.Node=E;var y=function(){function M(S,m,I){S===void 0&&(S=B),m===void 0&&(m=!0),I===void 0&&(I=!1),this.id=S,this.edgeIdAutoIncrease=m,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=I}return M.prototype.getNodeNum=function(){return this.nodes.length},M.prototype.addNode=function(S,m){if(!this.nodeMap[S]){var I=new E(S,m);this.nodes.push(I),this.nodeMap[S]=I,this.nodeLabelMap[m]||(this.nodeLabelMap[m]=[]),this.nodeLabelMap[m].push(S)}},M.prototype.addEdge=function(S,m,I,A){if((this.edgeIdAutoIncrease||S===void 0)&&(S=this.counter++),!(this.nodeMap[m]&&this.nodeMap[I]&&this.nodeMap[I].edgeMap[S])){var L=new D(S,m,I,A);if(this.edges.push(L),this.edgeMap[S]=L,this.nodeMap[m].addEdge(L),this.edgeLabelMap[A]||(this.edgeLabelMap[A]=[]),this.edgeLabelMap[A].push(L),!this.directed){var U=new D(S,I,m,A);this.nodeMap[I].addEdge(U),this.edgeLabelMap[A].push(U)}}},M}();R.Graph=y},882812:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(197582),Y=D(z(975033)),k=D(z(821146)),P=D(z(878089)),N=z(770643);function D(W){return W&&W.__esModule?W:{default:W}}var E=function(j,$,q,et){q===void 0&&(q="cluster"),et===void 0&&(et=2);var Q=[],it=j.nodes;return $.forEach(function(ht,dt){Q.push(y(it,ht,dt,q,et))}),Q},y=function(j,$,q,et,Q){var it=[q],ht=[],dt={};return $.forEach(function(Ot,It){if(Ot<=Q&&q!==It){it.push(It),ht.push(j[It]);var Kt=j[It][et];dt[Kt]?(dt[Kt].count++,dt[Kt].dists.push(Ot)):dt[Kt]={count:1,dists:[Ot]}}}),Object.keys(dt).forEach(function(Ot){dt[Ot].dists=dt[Ot].dists.sort(function(It,Kt){return It-Kt})}),{nodeIdx:q,nodeId:j[q].id,nodeIdxs:it,neighbors:ht,neighborNum:it.length-1,nodeLabelCountMap:dt}},M=function(j,$,q,et,Q){var it=Math.ceil(q/$),ht={},dt=0;return et.forEach(function(Ot,It){for(var Kt=0,Ft=0,Nt=Ot.nodeIdxs,st=Ot.neighborNum-1;Kt<it;){for(var yt=Nt[1+Math.floor(Math.random()*st)],kt=0;(ht["".concat(It,"-").concat(yt)]||ht["".concat(yt,"-").concat(It)])&&(yt=Math.floor(Math.random()*$),kt++,!(kt>2*$)););if(kt<2*$&&(ht["".concat(It,"-").concat(yt)]={start:It,end:yt,distance:Q[It][yt]},Kt++,dt++,dt>=q))return ht;if(Ft++,Ft>2*$)break}if(Kt<it){var ee=it-Kt;it=(it+ee)/($-It-1)}}),ht},S=function(j,$,q,et){var Q=q.nodes;return et||(et={}),Object.keys(j).forEach(function(it){var ht,dt;if(!(et&&et[it])){et[it]={nodes:[],edges:[]};var Ot=j[it],It=(ht=$[Ot.start])===null||ht===void 0?void 0:ht.nodeIdxs,Kt=(dt=$[Ot.end])===null||dt===void 0?void 0:dt.nodeIdxs;if(!(!It||!Kt)){var Ft=new Set(Kt),Nt=It.filter(function($t){return Ft.has($t)});if(!(!Nt||!Nt.length)){for(var st={},yt=Nt.length,kt=0;kt<yt;kt++){var ee=Q[Nt[kt]];et[it].nodes.push(ee),st[ee.id]=!0}q.edges.forEach(function($t){st[$t.source]&&st[$t.target]&&et[it].edges.push($t)})}}}}),et},m=function(j,$,q,et){var Q,it,ht={};j.nodes.forEach(function(Ot){ht[Ot.id]=Ot});var dt=0;return!(!((Q=$==null?void 0:$.edges)===null||Q===void 0)&&Q.length)||((it=$==null?void 0:$.nodes)===null||it===void 0?void 0:it.length)<2?0:(j.edges.forEach(function(Ot){var It=ht[Ot.source][q],Kt=ht[Ot.target][q],Ft=$==null?void 0:$.nodes[0][q],Nt=$==null?void 0:$.nodes[1][q],st=$==null?void 0:$.edges[0][et];Ot[et]===st&&(It===Ft&&Kt===Nt||It===Nt&&Kt===Ft)&&dt++}),dt)},I=function(j,$,q){for(var et=1/0,Q=0,it=function(Ot){var It=j[Ot],Kt=Object.keys(It).sort(function($t,ge){return It[$t]-It[ge]}),Ft=10,Nt=[];Kt.forEach(function($t,ge){Nt[ge%Ft]||(Nt[ge%Ft]={graphs:[],totalCount:0,aveCount:0}),Nt[ge%Ft].graphs.push($t),Nt[ge%Ft].totalCount+=It[$t]});var st=0,yt=[];Nt.forEach(function($t){var ge=$t.totalCount/$t.graphs.length;$t.aveCount=ge,yt.push(ge);var Pe=0,tr=$t.length;$t.graphs.forEach(function(Jt,ae){var Se=It[Jt];$t.graphs.forEach(function(xe,we){ae!==we&&(Pe+=Math.abs(Se-It[xe]))})}),Pe/=tr*(tr-1)/2,st+=Pe}),st/=Nt.length;var kt=0;yt.forEach(function($t,ge){yt.forEach(function(Pe,tr){ge!==tr&&(kt+=Math.abs($t-Pe))}),kt/=yt.length*(yt.length-1)/2});var ee=kt-st;et<ee&&(et=ee,Q=Ot)},ht=0;ht<$;ht++)it(ht);return{structure:q[Q],structureCountMap:j[Q]}},A=function(j,$){var q={},et={};return j.forEach(function(Q,it){q[Q.id]={idx:it,node:Q,degree:0,inDegree:0,outDegree:0};var ht=Q[$];et[ht]||(et[ht]=[]),et[ht].push(Q)}),{nodeMap:q,nodeLabelMap:et}},L=function(j,$,q){var et={},Q={};return j.forEach(function(it,ht){et["".concat(N.uniqueId)]={idx:ht,edge:it};var dt=it[$];Q[dt]||(Q[dt]=[]),Q[dt].push(it);var Ot=q[it.source];Ot&&(Ot.degree++,Ot.outDegree++);var It=q[it.target];It&&(It.degree++,It.inDegree++)}),{edgeMap:et,edgeLabelMap:Q}},U=function(j,$,q){var et=$.length,Q={};return $.forEach(function(it,ht){for(var dt=q?0:ht+1,Ot=j[ht].id,It=dt;It<et;It++)if(ht!==It){var Kt=j[It].id,Ft=it[It];Q["".concat(Ot,"-").concat(Kt)]=Ft,q||(Q["".concat(Kt,"-").concat(Ot)]=Ft)}}),Q},V=function(j,$,q,et,Q,it,ht,dt,Ot,It,Kt){var Ft,Nt="".concat($.id,"-").concat(q.id);if(It&&It[Nt])return It[Nt];var st=Kt?Kt[Nt]:void 0;if(!st){var yt=(Ft={},Ft[Nt]={start:et[$.id].idx,end:et[q.id].idx,distance:Q},Ft);Kt=S(yt,it,j,Kt),st=Kt[Nt]}return m(st,ht,dt,Ot)},x=function(j,$,q,et){var Q,it,ht,dt=(Q=j[$])===null||Q===void 0?void 0:Q.degree,Ot=(it=j[$])===null||it===void 0?void 0:it.inDegree,It=(ht=j[$])===null||ht===void 0?void 0:ht.outDegree;return j[$]===void 0&&(dt=1/0,Ot=1/0,It=1/0,et[$].forEach(function(Kt){var Ft=q[Kt.id].degree;dt>Ft&&(dt=Ft);var Nt=q[Kt.id].inDegree;Ot>Nt&&(Ot=Nt);var st=q[Kt.id].outDegree;It>st&&(It=st)}),j[$]={degree:dt,inDegree:Ot,outDegree:It}),{minPatternNodeLabelDegree:dt,minPatternNodeLabelInDegree:Ot,minPatternNodeLabelOutDegree:It}},d=function(j,$,q,et,Q,it,ht){var dt;if(q===void 0&&(q=!1),it===void 0&&(it="cluster"),ht===void 0&&(ht="cluster"),!(!j||!j.nodes)){var Ot=j.nodes.length;if(Ot){var It=(0,Y.default)(j,q),Kt=(0,Y.default)($,q),Ft=U(j.nodes,It,q),Nt=U($.nodes,Kt,q),st=A(j.nodes,it),yt=st.nodeMap,kt=st.nodeLabelMap,ee=A($.nodes,it),$t=ee.nodeMap,ge=ee.nodeLabelMap;L(j.edges,ht,yt);var Pe=L($.edges,ht,$t).edgeLabelMap,tr=[];Kt==null||Kt.forEach(function(dn){tr=tr.concat(dn)}),Q||(Q=Math.max.apply(Math,(0,B.__spreadArray)((0,B.__spreadArray)([],tr,!1),[2],!1))),et||(et=Q);var Jt=E(j,It,it,et),ae=E($,Kt,it,et),Se=Math.min(100,Ot*(Ot-1)/2),xe=M(et,Ot,Se,Jt,It),we=S(xe,Jt,j),zt=10,Wt=1,Ie=1,Yt=4,ie={graphs:we,nodeLabelProp:it,edgeLabelProp:ht,minSupport:Wt,minNodeNum:Ie,maxNodeNum:Yt,directed:q},Oe=(0,k.default)(ie).slice(0,zt),re=Oe.length,_e=[];Oe.forEach(function(dn,Wn){_e[Wn]={},Object.keys(we).forEach(function(Dn){var Cn=we[Dn],la=m(Cn,dn,it,ht);_e[Wn][Dn]=la})});var Ge=I(_e,re,Oe),Ct=Ge.structure,Nr=Ge.structureCountMap,Or=$.nodes[0],Ur=[],Sr=(dt=$.nodes[0])===null||dt===void 0?void 0:dt[it],gn=-1/0;$.nodes.forEach(function(dn){var Wn=dn[it],Dn=kt[Wn];(Dn==null?void 0:Dn.length)>gn&&(gn=Dn.length,Ur=Dn,Sr=Wn,Or=dn)});var Rr={},ln={},Nn={},Ln={},fn={},qe={};Object.keys(ge).forEach(function(dn,Wn){fn[dn]=[],q&&(qe[dn]=[]);var Dn=-1/0,Cn=ge[dn],la={};Cn.forEach(function(b){var w=Nt["".concat(Or.id,"-").concat(b.id)];if(w&&fn[dn].push(w),Dn<w&&(Dn=w),la["".concat(Or.id,"-").concat(b.id)]={start:0,end:$t[b.id].idx,distance:w},q){var X=Nt["".concat(b.id,"-").concat(Or.id)];X&&qe[dn].push(X)}}),fn[dn]=fn[dn].sort(function(b,w){return b-w}),q&&(qe[dn]=qe[dn].sort(function(b,w){return b-w})),ln=S(la,ae,$,ln);var K=[];if(Object.keys(la).forEach(function(b){if(Nn[b]){K.push(Nn[b]);return}var w=ln[b];Nn[b]=m(w,Ct,it,ht),K.push(Nn[b])}),K=K.sort(function(b,w){return w-b}),Ln["".concat(Or.id,"-").concat(dn)]=K,dn!==Sr)for(var ft=(Ur==null?void 0:Ur.length)||0,rt=function(w){var X=Ur[w],xt=Jt[yt[X.id].idx],At=xt.nodeLabelCountMap[dn],wt=ge[dn].length;if(!At||At.count<wt)return Ur.splice(w,1),"continue";for(var Pt=!1,Me=0;Me<wt;Me++)if(At.dists[Me]>fn[dn][Me]){Pt=!0;break}if(Pt)return Ur.splice(w,1),"continue";var ve={};xt.neighbors.forEach(function(ar){var mr=Ft["".concat(X.id,"-").concat(ar.id)];ve["".concat(X.id,"-").concat(ar.id)]={start:yt[X.id].idx,end:yt[ar.id].idx,distance:mr}}),we=S(ve,Jt,j,we);var He=[];Object.keys(ve).forEach(function(ar){if(Nr[ar]){He.push(Nr[ar]);return}var mr=we[ar];Nr[ar]=m(mr,Ct,it,ht),He.push(Nr[ar])}),He=He.sort(function(ar,mr){return mr-ar});for(var br=!1,Me=0;Me<wt;Me++)if(He[Me]<K[Me]){br=!0;break}if(br)return Ur.splice(w,1),"continue"},O=ft-1;O>=0;O--)rt(O)});var rr=[];Ur==null||Ur.forEach(function(dn){for(var Wn=yt[dn.id].idx,Dn=y(j.nodes,It[Wn],Wn,it,Q),Cn=Dn.neighbors,la=Cn.length,K=!1,ft=la-1;ft>=0;ft--){if(Cn.length+1<$.nodes.length){K=!0;return}var rt=Cn[ft],O=rt[it];if(!ge[O]||!ge[O].length){Cn.splice(ft,1);continue}if(!fn[O]||!fn[O].length){Cn.splice(ft,1);continue}var b="".concat(dn.id,"-").concat(rt.id),w=Ft[b],X=fn[O].length-1,xt=fn[O][X];if(w>xt){Cn.splice(ft,1);continue}if(q){var At="".concat(rt.id,"-").concat(dn.id),wt=Ft[At];X=qe[O].length-1;var Pt=qe[O][X];if(wt>Pt){Cn.splice(ft,1);continue}}var Me=Nr[b]?Nr[b]:V(j,dn,rt,yt,w,Jt,Ct,it,ht,Nr,we),ve="".concat(Or.id,"-").concat(O),He=Ln[ve][Ln[ve].length-1];if(Me<He){Cn.splice(ft,1);continue}var br=x(Rr,O,$t,ge),ar=br.minPatternNodeLabelDegree,mr=br.minPatternNodeLabelInDegree,Mn=br.minPatternNodeLabelOutDegree;if(yt[rt.id].degree<ar){Cn.splice(ft,1);continue}}K||rr.push({nodes:[dn].concat(Cn)})});var vr=(0,P.default)($,Or.id,!1).length,Pr={};q?(Object.keys(vr).forEach(function(dn){var Wn=$t[dn].node[it];Pr[Wn]?Pr[Wn].push(vr[dn]):Pr[Wn]=[vr[dn]]}),Object.keys(Pr).forEach(function(dn){Pr[dn].sort(function(Wn,Dn){return Wn-Dn})})):Pr=fn;for(var en=rr.length,pn=function(Wn){var Dn=rr[Wn],Cn=Dn.nodes[0],la={},K={};Dn.nodes.forEach(function(Vn,me){K[Vn.id]={idx:me,node:Vn,degree:0,inDegree:0,outDegree:0};var Dt=Vn[it];la[Dt]?la[Dt]++:la[Dt]=1});var ft=[],rt={};j.edges.forEach(function(Vn){K[Vn.source]&&K[Vn.target]&&(ft.push(Vn),rt[Vn[ht]]?rt[Vn[ht]]++:rt[Vn[ht]]=1,K[Vn.source].degree++,K[Vn.target].degree++,K[Vn.source].outDegree++,K[Vn.target].inDegree++)});for(var O=Object.keys(Pe).length,b=!1,w=0;w<O;w++){var X=Object.keys(Pe)[w];if(!rt[X]||rt[X]<Pe[X].length){b=!0;break}}if(b)return rr.splice(Wn,1),"continue";var xt=ft.length;if(xt<$.edges.length)return rr.splice(Wn,1),"break";for(var At=!1,wt=function(me){var Dt=ft[me],fe=Dt[ht],Ae=Pe[fe];if(!Ae||!Ae.length)return rt[fe]--,Ae&&rt[fe]<Ae.length?(At=!0,"break"):(ft.splice(me,1),K[Dt.source].degree--,K[Dt.target].degree--,K[Dt.source].outDegree--,K[Dt.target].inDegree--,"continue");var be=K[Dt.source].node[it],De=K[Dt.target].node[it],or=!1;if(Ae.forEach(function(Fr){var Jr=$t[Fr.source].node,Pn=$t[Fr.target].node;Jr[it]===be&&Pn[it]===De&&(or=!0),!q&&Jr[it]===De&&Pn[it]===be&&(or=!0)}),!or)return rt[fe]--,Ae&&rt[fe]<Ae.length?(At=!0,"break"):(ft.splice(me,1),K[Dt.source].degree--,K[Dt.target].degree--,K[Dt.source].outDegree--,K[Dt.target].inDegree--,"continue")},w=xt-1;w>=0;w--){var Pt=wt(w);if(Pt==="break")break}if(At)return rr.splice(Wn,1),"continue";Dn.edges=ft;var Me=(0,P.default)(Dn,Dn.nodes[0].id,!1).length;if(Object.keys(Me).reverse().forEach(function(Vn){if(!(Vn===Dn.nodes[0].id||At)){if(Me[Vn]===1/0){var me=K[Vn].node[it];if(la[me]--,la[me]<ge[me].length){At=!0;return}var Dt=Dn.nodes.indexOf(K[Vn].node);Dn.nodes.splice(Dt,1),K[Vn]=void 0;return}var fe=yt[Vn].node[it];if(!Pr[fe]||!Pr[fe].length||Me[Vn]>Pr[fe][Pr[fe].length-1]){var me=K[Vn].node[it];if(la[me]--,la[me]<ge[me].length){At=!0;return}var Dt=Dn.nodes.indexOf(K[Vn].node);Dn.nodes.splice(Dt,1),K[Vn]=void 0}}}),At)return rr.splice(Wn,1),"continue";for(var ve=!0,He=0;ve&&!At;){ve=!1;var br=q?K[Cn.id].degree<$t[Or.id].degree||K[Cn.id].inDegree<$t[Or.id].inDegree||K[Cn.id].outDegree<$t[Or.id].outDegree:K[Cn.id].degree<$t[Or.id].degree;if(br){At=!0;break}if(la[Cn[it]]<ge[Cn[it]].length){At=!0;break}for(var ar=Dn.nodes.length,mr=ar-1;mr>=0;mr--){var Mn=Dn.nodes[mr],Xe=K[Mn.id].degree,hr=K[Mn.id].inDegree,Er=K[Mn.id].outDegree,on=Mn[it],Wr=x(Rr,on,$t,ge),xa=Wr.minPatternNodeLabelDegree,Ta=Wr.minPatternNodeLabelInDegree,Rn=Wr.minPatternNodeLabelOutDegree,Jn=q?Xe<xa||hr<Ta||Er<Rn:Xe<xa;if(Jn){if(la[Mn[it]]--,la[Mn[it]]<ge[Mn[it]].length){At=!0;break}Dn.nodes.splice(mr,1),K[Mn.id]=void 0,ve=!0}}if(At||!ve&&He!==0)break;xt=ft.length;for(var Ga=xt-1;Ga>=0;Ga--){var Aa=ft[Ga];if(!K[Aa.source]||!K[Aa.target]){ft.splice(Ga,1);var an=Aa[ht];if(rt[an]--,K[Aa.source]&&(K[Aa.source].degree--,K[Aa.source].outDegree--),K[Aa.target]&&(K[Aa.target].degree--,K[Aa.target].inDegree--),Pe[an]&&rt[an]<Pe[an].length){At=!0;break}ve=!0}}He++}if(At||At||Dn.nodes.length<$.nodes.length||ft.length<$.edges.length)return rr.splice(Wn,1),"continue"},rn=en-1;rn>=0;rn--){var jn=pn(rn);if(jn==="break")break}for(var Hn=rr.length,oa=function(Wn){var Dn=rr[Wn],Cn={};Dn.edges.forEach(function(ft){var rt="".concat(ft.source,"-").concat(ft.target,"-").concat(ft.label);Cn[rt]?Cn[rt]++:Cn[rt]=1});for(var la=function(rt){var O=rr[rt],b={};O.edges.forEach(function(X){var xt="".concat(X.source,"-").concat(X.target,"-").concat(X.label);b[xt]?b[xt]++:b[xt]=1});var w=!0;Object.keys(b).length!==Object.keys(Cn).length?w=!1:Object.keys(Cn).forEach(function(X){b[X]!==Cn[X]&&(w=!1)}),w&&rr.splice(rt,1)},K=Hn-1;K>Wn;K--)la(K);Hn=rr.length},rn=0;rn<=Hn-1;rn++)oa(rn);return rr}}},at=d;R.default=at},505170:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=k(z(62238)),Y=z(770643);function k(D){return D&&D.__esModule?D:{default:D}}var P=function(E,y,M,S){y===void 0&&(y=!1),M===void 0&&(M="weight"),S===void 0&&(S=1e3);var m=E.nodes,I=m===void 0?[]:m,A=E.edges,L=A===void 0?[]:A,U={},V={};I.forEach(function(it,ht){var dt=(0,Y.uniqueId)();it.clusterId=dt,U[dt]={id:dt,nodes:[it]},V[it.id]={node:it,idx:ht}});var x=(0,B.default)(E,y),d=[],at={};x.forEach(function(it,ht){var dt=0,Ot=I[ht].id;at[Ot]={},it.forEach(function(It,Kt){if(It){dt+=It;var Ft=I[Kt].id;at[Ot][Ft]=It}}),d.push(dt)});for(var W=0,j=function(){var ht=!1;if(I.forEach(function(dt){var Ot={};Object.keys(at[dt.id]).forEach(function(ee){var $t=at[dt.id][ee],ge=V[ee].node,Pe=ge.clusterId;Ot[Pe]||(Ot[Pe]=0),Ot[Pe]+=$t});var It=-1/0,Kt=[];if(Object.keys(Ot).forEach(function(ee){It<Ot[ee]?(It=Ot[ee],Kt=[ee]):It===Ot[ee]&&Kt.push(ee)}),!(Kt.length===1&&Kt[0]===dt.clusterId)){var Ft=Kt.indexOf(dt.clusterId);if(Ft>=0&&Kt.splice(Ft,1),Kt&&Kt.length){ht=!0;var Nt=U[dt.clusterId],st=Nt.nodes.indexOf(dt);Nt.nodes.splice(st,1);var yt=Math.floor(Math.random()*Kt.length),kt=U[Kt[yt]];kt.nodes.push(dt),dt.clusterId=kt.id}}}),!ht)return"break";W++};W<S;){var $=j();if($==="break")break}Object.keys(U).forEach(function(it){var ht=U[it];(!ht.nodes||!ht.nodes.length)&&delete U[it]});var q=[],et={};L.forEach(function(it){var ht=it.source,dt=it.target,Ot=it[M]||1,It=V[ht].node.clusterId,Kt=V[dt].node.clusterId,Ft="".concat(It,"---").concat(Kt);if(et[Ft])et[Ft].weight+=Ot,et[Ft].count++;else{var Nt={source:It,target:Kt,weight:Ot,count:1};et[Ft]=Nt,q.push(Nt)}});var Q=[];return Object.keys(U).forEach(function(it){Q.push(U[it])}),{clusters:Q,clusterEdges:q}},N=P;R.default=N},135179:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(413810),Y=D(z(62238)),k=D(z(29741)),P=z(103665),N=z(526838);function D(m){return m&&m.__esModule?m:{default:m}}var E=function(I,A,L,U){for(var V=A.length,x=2*U,d=0,at=0;at<V;at++)for(var W=I[at].clusterId,j=0;j<V;j++){var $=I[j].clusterId;if(W===$){var q=A[at][j]||0,et=L[at]||0,Q=L[j]||0;d+=q-et*Q/x}}return d*=1/x,d},y=function(I,A){I===void 0&&(I=[]);for(var L=I.length,U=new k.default([]),V=0;V<L;V++)U=U.add(new k.default(A[V]));var x=U.avg(L);x.normalize();for(var d=0,V=0;V<L;V++){var at=new k.default(A[V]),W=at.squareEuclideanDistance(x);d+=W}var j=[];I.forEach(function(){j.push([])});for(var V=0;V<L;V++){var at=new k.default(A[V]);I[V].clusterInertial=0;for(var $=0;$<L;$++){if(V===$){j[V][$]=0;continue}var q=new k.default(A[$]);j[V][$]=at.squareEuclideanDistance(q),I[V].clusterInertial+=j[V][$]}}for(var et=0,Q=2*L*d,V=0;V<L;V++)for(var it=I[V].clusterId,$=0;$<L;$++){var ht=I[$].clusterId;if(!(V===$||it!==ht)){var dt=I[V].clusterInertial*I[$].clusterInertial/Math.pow(Q,2)-j[V][$]/Q;et+=dt}}return Number(et.toFixed(4))},M=function(I,A,L,U,V,x,d,at,W){A===void 0&&(A=!1),L===void 0&&(L="weight"),U===void 0&&(U=1e-4),V===void 0&&(V=!1),x===void 0&&(x=void 0),d===void 0&&(d=[]),at===void 0&&(at=["id"]),W===void 0&&(W=1);var j=I.nodes,$=j===void 0?[]:j,q=I.edges,et=q===void 0?[]:q,Q=[];if(V){$.forEach(function(we,zt){we.properties=we.properties||{},we.originIndex=zt});var it=[];$.every(function(we){return we.hasOwnProperty("nodeType")})&&(it=Array.from(new Set($.map(function(we){return we.nodeType}))),$.forEach(function(we){we.properties.nodeType=it.findIndex(function(zt){return zt===we.nodeType})}));var ht=(0,P.getAllProperties)($,x);Q=(0,N.oneHot)(ht,d,at)}var dt=1,Ot={},It={};$.forEach(function(we,zt){var Wt=String(dt++);we.clusterId=Wt,Ot[Wt]={id:Wt,nodes:[we]},It[we.id]={node:we,idx:zt}});var Kt=(0,Y.default)(I,A),Ft=[],Nt={},st=0;Kt.forEach(function(we,zt){var Wt=0,Ie=$[zt].id;Nt[Ie]={},we.forEach(function(Yt,ie){if(Yt){Wt+=Yt;var Oe=$[ie].id;Nt[Ie][Oe]=Yt,st+=Yt}}),Ft.push(Wt)}),st/=2;for(var yt=1/0,kt=1/0,ee=0,$t=[],ge={};;){V&&$.every(function(we){return we.hasOwnProperty("properties")})?yt=E($,Kt,Ft,st)+y($,Q)*W:yt=E($,Kt,Ft,st),ee===0&&(kt=yt,$t=$,ge=Ot);var Pe=yt>0&&yt>kt&&yt-kt<U;if(yt>kt&&($t=$.map(function(we){return{node:we,clusterId:we.clusterId}}),ge=(0,B.clone)(Ot),kt=yt),Pe||ee>100)break;ee++,Object.keys(Ot).forEach(function(we){var zt=0;et.forEach(function(Wt){var Ie=Wt.source,Yt=Wt.target,ie=It[Ie].node.clusterId,Oe=It[Yt].node.clusterId;(ie===we&&Oe!==we||Oe===we&&ie!==we)&&(zt=zt+(Wt[L]||1))}),Ot[we].sumTot=zt}),$.forEach(function(we,zt){var Wt=Ot[we.clusterId],Ie=0,Yt,ie=Ft[zt]/(2*st),Oe=0,re=Wt.nodes;re.forEach(function(ln){var Nn=It[ln.id].idx;Oe+=Kt[zt][Nn]||0});var _e=Oe-Wt.sumTot*ie,Ge=re.filter(function(ln){return ln.id!==we.id}),Ct=[];Ge.forEach(function(ln,Nn){Ct[Nn]=Q[ln.originIndex]});var Nr=y(Ge,Q)*W,Or=Nt[we.id];if(Object.keys(Or).forEach(function(ln){var Nn=It[ln].node,Ln=Nn.clusterId;if(Ln!==we.clusterId){var fn=Ot[Ln],qe=fn.nodes;if(!(!qe||!qe.length)){var rr=0;qe.forEach(function(jn){var Hn=It[jn.id].idx;rr+=Kt[zt][Hn]||0});var vr=rr-fn.sumTot*ie,Pr=qe.concat([we]),en=[];Pr.forEach(function(jn,Hn){en[Hn]=Q[jn.originIndex]});var pn=y(Pr,Q)*W,rn=vr-_e;V&&(rn=vr+pn-(_e+Nr)),rn>Ie&&(Ie=rn,Yt=fn)}}}),Ie>0){Yt.nodes.push(we);var Ur=we.clusterId;we.clusterId=Yt.id;var Sr=Wt.nodes.indexOf(we);Wt.nodes.splice(Sr,1);var gn=0,Rr=0;et.forEach(function(ln){var Nn=ln.source,Ln=ln.target,fn=It[Nn].node.clusterId,qe=It[Ln].node.clusterId;(fn===Yt.id&&qe!==Yt.id||qe===Yt.id&&fn!==Yt.id)&&(gn=gn+(ln[L]||1)),(fn===Ur&&qe!==Ur||qe===Ur&&fn!==Ur)&&(Rr=Rr+(ln[L]||1))}),Yt.sumTot=gn,Wt.sumTot=Rr}})}var tr={},Jt=0;Object.keys(ge).forEach(function(we){var zt=ge[we];if(!zt.nodes||!zt.nodes.length){delete ge[we];return}var Wt=String(Jt+1);Wt!==we&&(zt.id=Wt,zt.nodes=zt.nodes.map(function(Ie){return{id:Ie.id,clusterId:Wt}}),ge[Wt]=zt,tr[we]=Wt,delete ge[we],Jt++)}),$t.forEach(function(we){var zt=we.node,Wt=we.clusterId;zt&&(zt.clusterId=Wt,zt.clusterId&&tr[zt.clusterId]&&(zt.clusterId=tr[zt.clusterId]))});var ae=[],Se={};et.forEach(function(we){var zt=we.source,Wt=we.target,Ie=we[L]||1,Yt=It[zt].node.clusterId,ie=It[Wt].node.clusterId;if(!(!Yt||!ie)){var Oe="".concat(Yt,"---").concat(ie);if(Se[Oe])Se[Oe].weight+=Ie,Se[Oe].count++;else{var re={source:Yt,target:ie,weight:Ie,count:1};Se[Oe]=re,ae.push(re)}}});var xe=[];return Object.keys(ge).forEach(function(we){xe.push(ge[we])}),{clusters:xe,clusterEdges:ae}},S=M;R.default=S},689454:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=P(z(838823)),Y=P(z(257085)),k=z(770643);function P(M){return M&&M.__esModule?M:{default:M}}var N=function(S,m){var I=[],A=S.nodes,L=A===void 0?[]:A,U=S.edges,V=U===void 0?[]:U;if(L.length===0)return I;var x=L[0],d=new Set;d.add(x);var at=function(Q,it){return m?Q.weight-it.weight:0},W=new Y.default(at);for((0,k.getEdgesByNodeId)(x.id,V).forEach(function(et){W.insert(et)});!W.isEmpty();){var j=W.delMin(),$=j.source,q=j.target;d.has($)&&d.has(q)||(I.push(j),d.has($)||(d.add($),(0,k.getEdgesByNodeId)($,V).forEach(function(et){W.insert(et)})),d.has(q)||(d.add(q),(0,k.getEdgesByNodeId)(q,V).forEach(function(et){W.insert(et)})))}return I},D=function(S,m){var I=[],A=S.nodes,L=A===void 0?[]:A,U=S.edges,V=U===void 0?[]:U;if(L.length===0)return I;var x=V.map(function($){return $});m&&x.sort(function($,q){return $.weight-q.weight});for(var d=new B.default(L.map(function($){return $.id}));x.length>0;){var at=x.shift(),W=at.source,j=at.target;d.connected(W,j)||(I.push(at),d.union(W,j))}return I},E=function(S,m,I){var A={prim:N,kruskal:D};return I?A[I](S,m):D(S,m)},y=E;R.default=y},274926:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=k(z(182556)),Y=z(770643);function k(D){return D&&D.__esModule?D:{default:D}}var P=function(E,y,M){typeof y!="number"&&(y=1e-6),typeof M!="number"&&(M=.85);for(var S=1,m=0,I=1e3,A=E.nodes,L=A===void 0?[]:A,U=E.edges,V=U===void 0?[]:U,x=L.length,d,at={},W={},j=0;j<x;++j){var $=L[j],q=$.id;at[q]=1/x,W[q]=1/x}for(var et=(0,B.default)(E);I>0&&S>y;){m=0;for(var j=0;j<x;++j){var $=L[j],q=$.id;if(d=0,et[$.id].inDegree===0)at[q]=0;else{for(var Q=(0,Y.getNeighbors)(q,V,"source"),it=0;it<Q.length;++it){var ht=Q[it],dt=et[ht].outDegree;dt>0&&(d+=W[ht]/dt)}at[q]=M*d,m+=at[q]}}m=(1-m)/x,S=0;for(var j=0;j<x;++j){var $=L[j],q=$.id;d=at[q]+m,S+=Math.abs(d-W[q]),W[q]=d}I-=1}return W},N=P;R.default=N},257085:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var z=function(P,N){return P-N},B=function(){function k(P){P===void 0&&(P=z),this.compareFn=P,this.list=[]}return k.prototype.getLeft=function(P){return 2*P+1},k.prototype.getRight=function(P){return 2*P+2},k.prototype.getParent=function(P){return P===0?null:Math.floor((P-1)/2)},k.prototype.isEmpty=function(){return this.list.length<=0},k.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},k.prototype.delMin=function(){var P=this.top(),N=this.list.pop();return this.list.length>0&&(this.list[0]=N,this.moveDown(0)),P},k.prototype.insert=function(P){if(P!==null){this.list.push(P);var N=this.list.length-1;return this.moveUp(N),!0}return!1},k.prototype.moveUp=function(P){for(var N=this.getParent(P);P&&P>0&&this.compareFn(this.list[N],this.list[P])>0;){var D=this.list[N];this.list[N]=this.list[P],this.list[P]=D,P=N,N=this.getParent(P)}},k.prototype.moveDown=function(P){var N,D=P,E=this.getLeft(P),y=this.getRight(P),M=this.list.length;E!==null&&E<M&&this.compareFn(this.list[D],this.list[E])>0?D=E:y!==null&&y<M&&this.compareFn(this.list[D],this.list[y])>0&&(D=y),P!==D&&(N=[this.list[D],this.list[P]],this.list[P]=N[0],this.list[D]=N[1],this.moveDown(D))},k}(),Y=B;R.default=Y},488481:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=R.LinkedListNode=void 0;var z=function(N,D){return N===D},B=function(){function P(N,D){D===void 0&&(D=null),this.value=N,this.next=D}return P.prototype.toString=function(N){return N?N(this.value):"".concat(this.value)},P}();R.LinkedListNode=B;var Y=function(){function P(N){N===void 0&&(N=z),this.head=null,this.tail=null,this.compare=N}return P.prototype.prepend=function(N){var D=new B(N,this.head);return this.head=D,this.tail||(this.tail=D),this},P.prototype.append=function(N){var D=new B(N);return this.head?(this.tail.next=D,this.tail=D,this):(this.head=D,this.tail=D,this)},P.prototype.delete=function(N){if(!this.head)return null;for(var D=null;this.head&&this.compare(this.head.value,N);)D=this.head,this.head=this.head.next;var E=this.head;if(E!==null)for(;E.next;)this.compare(E.next.value,N)?(D=E.next,E.next=E.next.next):E=E.next;return this.compare(this.tail.value,N)&&(this.tail=E),D},P.prototype.find=function(N){var D=N.value,E=D===void 0?void 0:D,y=N.callback,M=y===void 0?void 0:y;if(!this.head)return null;for(var S=this.head;S;){if(M&&M(S.value)||E!==void 0&&this.compare(S.value,E))return S;S=S.next}return null},P.prototype.deleteTail=function(){var N=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,N;for(var D=this.head;D.next;)D.next.next?D=D.next:D.next=null;return this.tail=D,N},P.prototype.deleteHead=function(){if(!this.head)return null;var N=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),N},P.prototype.fromArray=function(N){var D=this;return N.forEach(function(E){return D.append(E)}),this},P.prototype.toArray=function(){for(var N=[],D=this.head;D;)N.push(D),D=D.next;return N},P.prototype.reverse=function(){for(var N=this.head,D=null,E=null;N;)E=N.next,N.next=D,D=N,N=E;this.tail=this.head,this.head=D},P.prototype.toString=function(N){return N===void 0&&(N=void 0),this.toArray().map(function(D){return D.toString(N)}).toString()},P}(),k=Y;R.default=k},893026:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=Y(z(488481));function Y(N){return N&&N.__esModule?N:{default:N}}var k=function(){function N(){this.linkedList=new B.default}return N.prototype.isEmpty=function(){return!this.linkedList.head},N.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},N.prototype.enqueue=function(D){this.linkedList.append(D)},N.prototype.dequeue=function(){var D=this.linkedList.deleteHead();return D?D.value:null},N.prototype.toString=function(D){return this.linkedList.toString(D)},N}(),P=k;R.default=P},838823:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var z=function(){function Y(k){this.count=k.length,this.parent={};for(var P=0,N=k;P<N.length;P++){var D=N[P];this.parent[D]=D}}return Y.prototype.find=function(k){for(;this.parent[k]!==k;)k=this.parent[k];return k},Y.prototype.union=function(k,P){var N=this.find(k),D=this.find(P);N!==D&&(N<D?(this.parent[P]!==P&&this.union(this.parent[P],k),this.parent[P]=this.parent[k]):(this.parent[k]!==k&&this.union(this.parent[k],P),this.parent[k]=this.parent[P]))},Y.prototype.connected=function(k,P){return this.find(k)===this.find(P)},Y}(),B=z;R.default=B},317892:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.DistanceType=void 0;var z;R.DistanceType=z,function(B){B.EuclideanDistance="euclideanDistance"}(z||(R.DistanceType=z={}))},770643:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.uniqueId=R.getOutEdgesNodeId=R.getNeighbors=R.getEdgesByNodeId=void 0;var z=function(N,D,E){D===void 0&&(D=[]);var y=D.filter(function(I){return I.source===N||I.target===N});if(E==="target"){var M=function(A){return A.source===N};return y.filter(M).map(function(I){return I.target})}if(E==="source"){var S=function(A){return A.target===N};return y.filter(S).map(function(I){return I.source})}var m=function(A){return A.source===N?A.target:A.source};return y.map(m)};R.getNeighbors=z;var B=function(N,D){return D.filter(function(E){return E.source===N})};R.getOutEdgesNodeId=B;var Y=function(N,D){return D.filter(function(E){return E.source===N||E.target===N})};R.getEdgesByNodeId=Y;var k=function(N){N===void 0&&(N=0);var D="".concat(Math.random()).split(".")[1].substr(0,5),E="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(N,"-").concat(D).concat(E)};R.uniqueId=k},526838:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.oneHot=R.getDistance=R.getAllKeyValueMap=R.default=void 0;var B=z(413810),Y=z(317892),k=P(z(29741));function P(M){return M&&M.__esModule?M:{default:M}}var N=function(S,m,I){var A=[];m!=null&&m.length?A=m:(S.forEach(function(U){A=A.concat(Object.keys(U))}),A=(0,B.uniq)(A));var L={};return A.forEach(function(U){var V=[];S.forEach(function(x){x[U]!==void 0&&x[U]!==""&&V.push(x[U])}),V.length&&!(I!=null&&I.includes(U))&&(L[U]=(0,B.uniq)(V))}),L};R.getAllKeyValueMap=N;var D=function(S,m,I){var A=N(S,m,I),L=[];if(!Object.keys(A).length)return L;var U=Object.values(A),V=U.every(function(x){return x.every(function(d){return typeof d=="number"})});return S.forEach(function(x,d){var at=[];Object.keys(A).forEach(function(W){var j=x[W],$=A[W],q=$.findIndex(function(it){return j===it}),et=[];if(V)et.push(j);else for(var Q=0;Q<$.length;Q++)Q===q?et.push(1):et.push(0);at=at.concat(et)}),L[d]=at}),L};R.oneHot=D;var E=function(S,m,I,A){I===void 0&&(I=Y.DistanceType.EuclideanDistance);var L=0;switch(I){case Y.DistanceType.EuclideanDistance:L=new k.default(S).euclideanDistance(new k.default(m));break;default:break}return L};R.getDistance=E;var y={getAllKeyValueMap:N,oneHot:D,getDistance:E};R.default=y},103665:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getPropertyWeight=R.getAllSortProperties=R.getAllProperties=R.default=void 0;var B=z(592935),Y=function(y,M){y===void 0&&(y=[]),M===void 0&&(M=100);var S={};y.forEach(function(I){I.properties&&Object.keys(I.properties).forEach(function(A){if(A==="id"||!"".concat(I.properties[A]).match(B.secondReg)&&!"".concat(I.properties[A]).match(B.dateReg)&&isNaN(Number(I.properties[A]))){S.hasOwnProperty(A)&&delete S[A];return}S.hasOwnProperty(A)?S[A]+=1:S[A]=1})});var m=Object.keys(S).sort(function(I,A){return S[A]-S[I]});return m.length<M?m:m.slice(0,M)};R.getAllSortProperties=Y;var k=function(y,M){return M.map(function(S){return y.hasOwnProperty(S)?y[S]:0})},P=function(y){for(var M=Y(y),S=[],m=0;m<y.length;m++)S[m]=k(y[m].properties,M);return S};R.getPropertyWeight=P;var N=function(y,M){M===void 0&&(M=void 0);var S=[];return y.forEach(function(m){M===void 0&&S.push(m),m[M]!==void 0&&S.push(m[M])}),S};R.getAllProperties=N;var D={getAllSortProperties:Y,getPropertyWeight:P,getAllProperties:N};R.default=D},29741:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(413810),Y=function(){function P(N){this.arr=N}return P.prototype.getArr=function(){return this.arr||[]},P.prototype.add=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length))return new P(E);if(!(E!=null&&E.length))return new P(this.arr);if(this.arr.length===E.length){var y=[];for(var M in this.arr)y[M]=this.arr[M]+E[M];return new P(y)}},P.prototype.subtract=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length))return new P(E);if(!(E!=null&&E.length))return new P(this.arr);if(this.arr.length===E.length){var y=[];for(var M in this.arr)y[M]=this.arr[M]-E[M];return new P(y)}},P.prototype.avg=function(N){var D=[];if(N!==0)for(var E in this.arr)D[E]=this.arr[E]/N;return new P(D)},P.prototype.negate=function(){var N=[];for(var D in this.arr)N[D]=-this.arr[D];return new P(N)},P.prototype.squareEuclideanDistance=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var y=0;for(var M in this.arr)y+=Math.pow(this.arr[M]-N.arr[M],2);return y}},P.prototype.euclideanDistance=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var y=0;for(var M in this.arr)y+=Math.pow(this.arr[M]-N.arr[M],2);return Math.sqrt(y)}else console.error("The two vectors are unequal in length.")},P.prototype.normalize=function(){var N=[],D=(0,B.clone)(this.arr);D.sort(function(S,m){return S-m});var E=D[D.length-1],y=D[0];for(var M in this.arr)N[M]=(this.arr[M]-y)/(E-y);return new P(N)},P.prototype.norm2=function(){var N;if(!(!((N=this.arr)===null||N===void 0)&&N.length))return 0;var D=0;for(var E in this.arr)D+=Math.pow(this.arr[E],2);return Math.sqrt(D)},P.prototype.dot=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var y=0;for(var M in this.arr)y+=this.arr[M]*N.arr[M];return y}else console.error("The two vectors are unequal in length.")},P.prototype.equal=function(N){var D,E=N.arr;if(((D=this.arr)===null||D===void 0?void 0:D.length)!==(E==null?void 0:E.length))return!1;for(var y in this.arr)if(this.arr[y]!==E[y])return!1;return!0},P}(),k=Y;R.default=k},831656:function(yr,R,z){"use strict";function B(W){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},B(W)}Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"GADDI",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(R,"breadthFirstSearch",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(R,"connectedComponent",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(R,"depthFirstSearch",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(R,"detectCycle",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(R,"dijkstra",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(R,"findAllPath",{enumerable:!0,get:function(){return M.findAllPath}}),Object.defineProperty(R,"findShortestPath",{enumerable:!0,get:function(){return M.findShortestPath}}),Object.defineProperty(R,"floydWarshall",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(R,"getAdjMatrix",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(R,"getDegree",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(R,"getInDegree",{enumerable:!0,get:function(){return N.getInDegree}}),Object.defineProperty(R,"getNeighbors",{enumerable:!0,get:function(){return V.getNeighbors}}),Object.defineProperty(R,"getOutDegree",{enumerable:!0,get:function(){return N.getOutDegree}}),Object.defineProperty(R,"labelPropagation",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(R,"louvain",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(R,"minimumSpanningTree",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(R,"pageRank",{enumerable:!0,get:function(){return L.default}});var Y=at(z(62238)),k=at(z(683764)),P=at(z(759527)),N=d(z(182556)),D=at(z(994282)),E=at(z(45891)),y=at(z(878089)),M=z(241727),S=at(z(975033)),m=at(z(505170)),I=at(z(135179)),A=at(z(689454)),L=at(z(274926)),U=at(z(882812)),V=z(770643);function x(W){if(typeof WeakMap!="function")return null;var j=new WeakMap,$=new WeakMap;return(x=function(et){return et?$:j})(W)}function d(W,j){if(!j&&W&&W.__esModule)return W;if(W===null||B(W)!=="object"&&typeof W!="function")return{default:W};var $=x(j);if($&&$.has(W))return $.get(W);var q={},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in W)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(W,Q)){var it=et?Object.getOwnPropertyDescriptor(W,Q):null;it&&(it.get||it.set)?Object.defineProperty(q,Q,it):q[Q]=W[Q]}return q.default=W,$&&$.set(W,q),q}function at(W){return W&&W.__esModule?W:{default:W}}},66044:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.MESSAGE=R.ALGORITHM=void 0;var z={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};R.ALGORITHM=z;var B={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};R.MESSAGE=B},70585:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(66044),Y=k(z(612067));function k(D){return D&&D.__esModule?D:{default:D}}var P=function(E){return function(){for(var y=[],M=0;M<arguments.length;M++)y[M]=arguments[M];return new Promise(function(S,m){var I=new Y.default;I.postMessage({_algorithmType:E,data:y}),I.onmessage=function(A){var L=A.data,U=L.data,V=L._algorithmType;B.MESSAGE.SUCCESS===V?S(U):m(),I.terminate()}})}},N=P;R.default=N},430485:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.pageRankAsync=R.minimumSpanningTreeAsync=R.louvainAsync=R.labelPropagationAsync=R.getOutDegreeAsync=R.getNeighborsAsync=R.getInDegreeAsync=R.getDegreeAsync=R.getAdjMatrixAsync=R.floydWarshallAsync=R.findShortestPathAsync=R.findAllPathAsync=R.dijkstraAsync=R.detectCycleAsync=R.detectAllUndirectedCycleAsync=R.detectAllDirectedCycleAsync=R.detectAllCyclesAsync=R.connectedComponentAsync=R.GADDIAsync=void 0;var B=k(z(70585)),Y=z(66044);function k(q){return q&&q.__esModule?q:{default:q}}var P=function(et,Q){return(0,B.default)(Y.ALGORITHM.getAdjMatrix).apply(void 0,[et,Q])};R.getAdjMatrixAsync=P;var N=function(et,Q){return(0,B.default)(Y.ALGORITHM.connectedComponent).apply(void 0,[et,Q])};R.connectedComponentAsync=N;var D=function(et){return(0,B.default)(Y.ALGORITHM.getDegree)(et)};R.getDegreeAsync=D;var E=function(et,Q){return(0,B.default)(Y.ALGORITHM.getInDegree)(et,Q)};R.getInDegreeAsync=E;var y=function(et,Q){return(0,B.default)(Y.ALGORITHM.getOutDegree)(et,Q)};R.getOutDegreeAsync=y;var M=function(et){return(0,B.default)(Y.ALGORITHM.detectCycle)(et)};R.detectCycleAsync=M;var S=function(et){return(0,B.default)(Y.ALGORITHM.detectAllCycles)(et)};R.detectAllCyclesAsync=S;var m=function(et){return(0,B.default)(Y.ALGORITHM.detectAllDirectedCycle)(et)};R.detectAllDirectedCycleAsync=m;var I=function(et){return(0,B.default)(Y.ALGORITHM.detectAllUndirectedCycle)(et)};R.detectAllUndirectedCycleAsync=I;var A=function(et,Q,it,ht){return(0,B.default)(Y.ALGORITHM.dijkstra).apply(void 0,[et,Q,it,ht])};R.dijkstraAsync=A;var L=function(et,Q,it,ht){return(0,B.default)(Y.ALGORITHM.findAllPath).apply(void 0,[et,Q,it,ht])};R.findAllPathAsync=L;var U=function(et,Q,it,ht,dt){return(0,B.default)(Y.ALGORITHM.findShortestPath).apply(void 0,[et,Q,it,ht,dt])};R.findShortestPathAsync=U;var V=function(et,Q){return(0,B.default)(Y.ALGORITHM.floydWarshall).apply(void 0,[et,Q])};R.floydWarshallAsync=V;var x=function(et,Q,it,ht){return ht===void 0&&(ht=1e3),(0,B.default)(Y.ALGORITHM.labelPropagation)(et,Q,it,ht)};R.labelPropagationAsync=x;var d=function(et,Q,it,ht){return(0,B.default)(Y.ALGORITHM.louvain)(et,Q,it,ht)};R.louvainAsync=d;var at=function(et,Q,it){return(0,B.default)(Y.ALGORITHM.minimumSpanningTree).apply(void 0,[et,Q,it])};R.minimumSpanningTreeAsync=at;var W=function(et,Q,it){return(0,B.default)(Y.ALGORITHM.pageRank).apply(void 0,[et,Q,it])};R.pageRankAsync=W;var j=function(et,Q,it){return(0,B.default)(Y.ALGORITHM.getNeighbors).apply(void 0,[et,Q,it])};R.getNeighborsAsync=j;var $=function(et,Q,it,ht,dt,Ot,It){return it===void 0&&(it=!1),Ot===void 0&&(Ot="cluster"),It===void 0&&(It="cluster"),(0,B.default)(Y.ALGORITHM.GADDI).apply(void 0,[et,Q,it,ht,dt,Ot,It])};R.GADDIAsync=$},612067:function(yr,R,z){"use strict";function B(y){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},B(y)}Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var Y=N(z(831656)),k=z(66044);function P(y){if(typeof WeakMap!="function")return null;var M=new WeakMap,S=new WeakMap;return(P=function(I){return I?S:M})(y)}function N(y,M){if(!M&&y&&y.__esModule)return y;if(y===null||B(y)!=="object"&&typeof y!="function")return{default:y};var S=P(M);if(S&&S.has(y))return S.get(y);var m={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in y)if(A!=="default"&&Object.prototype.hasOwnProperty.call(y,A)){var L=I?Object.getOwnPropertyDescriptor(y,A):null;L&&(L.get||L.set)?Object.defineProperty(m,A,L):m[A]=y[A]}return m.default=y,S&&S.set(y,m),m}var D=typeof self!="undefined"?self:{};D.onmessage=function(y){var M=y.data,S=M._algorithmType,m=M.data;if(S){if(typeof Y[S]=="function"){var I=Y[S].apply(Y,m);D.postMessage({_algorithmType:k.MESSAGE.SUCCESS,data:I});return}D.postMessage({_algorithmType:k.MESSAGE.FAILURE})}};var E=null;R.default=E},901029:function(yr,R,z){"use strict";z.r(R),z.d(R,{Kernel:function(){return Ot},World:function(){return la}});var B=z(115861),Y=z(204942),k=z(215671),P=z(143144),N=z(936719),D=z.n(N),E=z(281763),y=z.n(E),M=z(701469),S=z.n(M),m=z(364687),I=z.n(m),A=null,L=1;function U(){return L++}var V=null,x=null,d;(function(K){K[K.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",K[K.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",K[K.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",K[K.POINTS=0]="POINTS",K[K.LINES=1]="LINES",K[K.LINE_LOOP=2]="LINE_LOOP",K[K.LINE_STRIP=3]="LINE_STRIP",K[K.TRIANGLES=4]="TRIANGLES",K[K.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",K[K.TRIANGLE_FAN=6]="TRIANGLE_FAN",K[K.ZERO=0]="ZERO",K[K.ONE=1]="ONE",K[K.SRC_COLOR=768]="SRC_COLOR",K[K.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",K[K.SRC_ALPHA=770]="SRC_ALPHA",K[K.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",K[K.DST_ALPHA=772]="DST_ALPHA",K[K.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",K[K.DST_COLOR=774]="DST_COLOR",K[K.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",K[K.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",K[K.FUNC_ADD=32774]="FUNC_ADD",K[K.BLEND_EQUATION=32777]="BLEND_EQUATION",K[K.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",K[K.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",K[K.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",K[K.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",K[K.MAX_EXT=32776]="MAX_EXT",K[K.MIN_EXT=32775]="MIN_EXT",K[K.BLEND_DST_RGB=32968]="BLEND_DST_RGB",K[K.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",K[K.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",K[K.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",K[K.CONSTANT_COLOR=32769]="CONSTANT_COLOR",K[K.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",K[K.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",K[K.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",K[K.BLEND_COLOR=32773]="BLEND_COLOR",K[K.ARRAY_BUFFER=34962]="ARRAY_BUFFER",K[K.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",K[K.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",K[K.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",K[K.STREAM_DRAW=35040]="STREAM_DRAW",K[K.STATIC_DRAW=35044]="STATIC_DRAW",K[K.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",K[K.BUFFER_SIZE=34660]="BUFFER_SIZE",K[K.BUFFER_USAGE=34661]="BUFFER_USAGE",K[K.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",K[K.FRONT=1028]="FRONT",K[K.BACK=1029]="BACK",K[K.FRONT_AND_BACK=1032]="FRONT_AND_BACK",K[K.CULL_FACE=2884]="CULL_FACE",K[K.BLEND=3042]="BLEND",K[K.DITHER=3024]="DITHER",K[K.STENCIL_TEST=2960]="STENCIL_TEST",K[K.DEPTH_TEST=2929]="DEPTH_TEST",K[K.SCISSOR_TEST=3089]="SCISSOR_TEST",K[K.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",K[K.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",K[K.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",K[K.NO_ERROR=0]="NO_ERROR",K[K.INVALID_ENUM=1280]="INVALID_ENUM",K[K.INVALID_VALUE=1281]="INVALID_VALUE",K[K.INVALID_OPERATION=1282]="INVALID_OPERATION",K[K.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",K[K.CW=2304]="CW",K[K.CCW=2305]="CCW",K[K.LINE_WIDTH=2849]="LINE_WIDTH",K[K.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",K[K.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",K[K.CULL_FACE_MODE=2885]="CULL_FACE_MODE",K[K.FRONT_FACE=2886]="FRONT_FACE",K[K.DEPTH_RANGE=2928]="DEPTH_RANGE",K[K.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",K[K.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",K[K.DEPTH_FUNC=2932]="DEPTH_FUNC",K[K.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",K[K.STENCIL_FUNC=2962]="STENCIL_FUNC",K[K.STENCIL_FAIL=2964]="STENCIL_FAIL",K[K.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",K[K.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",K[K.STENCIL_REF=2967]="STENCIL_REF",K[K.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",K[K.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",K[K.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",K[K.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",K[K.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",K[K.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",K[K.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",K[K.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",K[K.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",K[K.VIEWPORT=2978]="VIEWPORT",K[K.SCISSOR_BOX=3088]="SCISSOR_BOX",K[K.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",K[K.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",K[K.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",K[K.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",K[K.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",K[K.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",K[K.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",K[K.RED_BITS=3410]="RED_BITS",K[K.GREEN_BITS=3411]="GREEN_BITS",K[K.BLUE_BITS=3412]="BLUE_BITS",K[K.ALPHA_BITS=3413]="ALPHA_BITS",K[K.DEPTH_BITS=3414]="DEPTH_BITS",K[K.STENCIL_BITS=3415]="STENCIL_BITS",K[K.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",K[K.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",K[K.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",K[K.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",K[K.SAMPLES=32937]="SAMPLES",K[K.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",K[K.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",K[K.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",K[K.DONT_CARE=4352]="DONT_CARE",K[K.FASTEST=4353]="FASTEST",K[K.NICEST=4354]="NICEST",K[K.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",K[K.BYTE=5120]="BYTE",K[K.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",K[K.SHORT=5122]="SHORT",K[K.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",K[K.INT=5124]="INT",K[K.UNSIGNED_INT=5125]="UNSIGNED_INT",K[K.FLOAT=5126]="FLOAT",K[K.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",K[K.ALPHA=6406]="ALPHA",K[K.RGB=6407]="RGB",K[K.RGBA=6408]="RGBA",K[K.LUMINANCE=6409]="LUMINANCE",K[K.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",K[K.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",K[K.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",K[K.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",K[K.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",K[K.VERTEX_SHADER=35633]="VERTEX_SHADER",K[K.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",K[K.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",K[K.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",K[K.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",K[K.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",K[K.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",K[K.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",K[K.SHADER_TYPE=35663]="SHADER_TYPE",K[K.DELETE_STATUS=35712]="DELETE_STATUS",K[K.LINK_STATUS=35714]="LINK_STATUS",K[K.VALIDATE_STATUS=35715]="VALIDATE_STATUS",K[K.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",K[K.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",K[K.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",K[K.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",K[K.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",K[K.NEVER=512]="NEVER",K[K.LESS=513]="LESS",K[K.EQUAL=514]="EQUAL",K[K.LEQUAL=515]="LEQUAL",K[K.GREATER=516]="GREATER",K[K.NOTEQUAL=517]="NOTEQUAL",K[K.GEQUAL=518]="GEQUAL",K[K.ALWAYS=519]="ALWAYS",K[K.KEEP=7680]="KEEP",K[K.REPLACE=7681]="REPLACE",K[K.INCR=7682]="INCR",K[K.DECR=7683]="DECR",K[K.INVERT=5386]="INVERT",K[K.INCR_WRAP=34055]="INCR_WRAP",K[K.DECR_WRAP=34056]="DECR_WRAP",K[K.VENDOR=7936]="VENDOR",K[K.RENDERER=7937]="RENDERER",K[K.VERSION=7938]="VERSION",K[K.NEAREST=9728]="NEAREST",K[K.LINEAR=9729]="LINEAR",K[K.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",K[K.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",K[K.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",K[K.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",K[K.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",K[K.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",K[K.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",K[K.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",K[K.TEXTURE_2D=3553]="TEXTURE_2D",K[K.TEXTURE=5890]="TEXTURE",K[K.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",K[K.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",K[K.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",K[K.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",K[K.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",K[K.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",K[K.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",K[K.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",K[K.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",K[K.TEXTURE0=33984]="TEXTURE0",K[K.TEXTURE1=33985]="TEXTURE1",K[K.TEXTURE2=33986]="TEXTURE2",K[K.TEXTURE3=33987]="TEXTURE3",K[K.TEXTURE4=33988]="TEXTURE4",K[K.TEXTURE5=33989]="TEXTURE5",K[K.TEXTURE6=33990]="TEXTURE6",K[K.TEXTURE7=33991]="TEXTURE7",K[K.TEXTURE8=33992]="TEXTURE8",K[K.TEXTURE9=33993]="TEXTURE9",K[K.TEXTURE10=33994]="TEXTURE10",K[K.TEXTURE11=33995]="TEXTURE11",K[K.TEXTURE12=33996]="TEXTURE12",K[K.TEXTURE13=33997]="TEXTURE13",K[K.TEXTURE14=33998]="TEXTURE14",K[K.TEXTURE15=33999]="TEXTURE15",K[K.TEXTURE16=34e3]="TEXTURE16",K[K.TEXTURE17=34001]="TEXTURE17",K[K.TEXTURE18=34002]="TEXTURE18",K[K.TEXTURE19=34003]="TEXTURE19",K[K.TEXTURE20=34004]="TEXTURE20",K[K.TEXTURE21=34005]="TEXTURE21",K[K.TEXTURE22=34006]="TEXTURE22",K[K.TEXTURE23=34007]="TEXTURE23",K[K.TEXTURE24=34008]="TEXTURE24",K[K.TEXTURE25=34009]="TEXTURE25",K[K.TEXTURE26=34010]="TEXTURE26",K[K.TEXTURE27=34011]="TEXTURE27",K[K.TEXTURE28=34012]="TEXTURE28",K[K.TEXTURE29=34013]="TEXTURE29",K[K.TEXTURE30=34014]="TEXTURE30",K[K.TEXTURE31=34015]="TEXTURE31",K[K.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",K[K.REPEAT=10497]="REPEAT",K[K.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",K[K.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",K[K.FLOAT_VEC2=35664]="FLOAT_VEC2",K[K.FLOAT_VEC3=35665]="FLOAT_VEC3",K[K.FLOAT_VEC4=35666]="FLOAT_VEC4",K[K.INT_VEC2=35667]="INT_VEC2",K[K.INT_VEC3=35668]="INT_VEC3",K[K.INT_VEC4=35669]="INT_VEC4",K[K.BOOL=35670]="BOOL",K[K.BOOL_VEC2=35671]="BOOL_VEC2",K[K.BOOL_VEC3=35672]="BOOL_VEC3",K[K.BOOL_VEC4=35673]="BOOL_VEC4",K[K.FLOAT_MAT2=35674]="FLOAT_MAT2",K[K.FLOAT_MAT3=35675]="FLOAT_MAT3",K[K.FLOAT_MAT4=35676]="FLOAT_MAT4",K[K.SAMPLER_2D=35678]="SAMPLER_2D",K[K.SAMPLER_CUBE=35680]="SAMPLER_CUBE",K[K.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",K[K.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",K[K.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",K[K.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",K[K.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",K[K.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",K[K.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",K[K.COMPILE_STATUS=35713]="COMPILE_STATUS",K[K.LOW_FLOAT=36336]="LOW_FLOAT",K[K.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",K[K.HIGH_FLOAT=36338]="HIGH_FLOAT",K[K.LOW_INT=36339]="LOW_INT",K[K.MEDIUM_INT=36340]="MEDIUM_INT",K[K.HIGH_INT=36341]="HIGH_INT",K[K.FRAMEBUFFER=36160]="FRAMEBUFFER",K[K.RENDERBUFFER=36161]="RENDERBUFFER",K[K.RGBA4=32854]="RGBA4",K[K.RGB5_A1=32855]="RGB5_A1",K[K.RGB565=36194]="RGB565",K[K.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",K[K.STENCIL_INDEX=6401]="STENCIL_INDEX",K[K.STENCIL_INDEX8=36168]="STENCIL_INDEX8",K[K.DEPTH_STENCIL=34041]="DEPTH_STENCIL",K[K.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",K[K.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",K[K.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",K[K.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",K[K.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",K[K.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",K[K.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",K[K.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",K[K.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",K[K.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",K[K.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",K[K.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",K[K.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",K[K.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",K[K.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",K[K.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",K[K.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",K[K.NONE=0]="NONE",K[K.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",K[K.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",K[K.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",K[K.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",K[K.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",K[K.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",K[K.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",K[K.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",K[K.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",K[K.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",K[K.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",K[K.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",K[K.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",K[K.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",K[K.COPY_SRC=1]="COPY_SRC",K[K.COPY_DST=2]="COPY_DST",K[K.SAMPLED=4]="SAMPLED",K[K.STORAGE=8]="STORAGE",K[K.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(d||(d={}));var at=function(){function K(){(0,k.Z)(this,K),this.config=void 0}return(0,P.Z)(K,[{key:"get",value:function(){return this.config}},{key:"set",value:function(rt){this.config=rt}}]),K}(),W=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),j;(function(K){K.Void="Void",K.Boolean="Boolean",K.Float="Float",K.Uint32="Uint32",K.Int32="Int32",K.Vector="Vector",K.Vector2Float="vec2<f32>",K.Vector3Float="vec3<f32>",K.Vector4Float="vec4<f32>",K.Vector2Boolean="vec2<bool>",K.Vector3Boolean="vec3<bool>",K.Vector4Boolean="vec4<bool>",K.Vector2Uint="vec2<u32>",K.Vector3Uint="vec3<u32>",K.Vector4Uint="vec4<u32>",K.Vector2Int="vec2<i32>",K.Vector3Int="vec3<i32>",K.Vector4Int="vec4<i32>",K.Matrix="Matrix",K.Matrix3x3Float="mat3x3<f32>",K.Matrix4x4Float="mat4x4<i32>",K.Struct="Struct",K.FloatArray="Float[]",K.Vector4FloatArray="vec4<f32>[]"})(j||(j={}));var $;(function(K){K.Program="Program",K.Identifier="Identifier",K.VariableDeclaration="VariableDeclaration",K.BlockStatement="BlockStatement",K.ReturnStatement="ReturnStatement",K.FunctionDeclaration="FunctionDeclaration",K.VariableDeclarator="VariableDeclarator",K.AssignmentExpression="AssignmentExpression",K.LogicalExpression="LogicalExpression",K.BinaryExpression="BinaryExpression",K.ArrayExpression="ArrayExpression",K.UnaryExpression="UnaryExpression",K.UpdateExpression="UpdateExpression",K.FunctionExpression="FunctionExpression",K.MemberExpression="MemberExpression",K.ConditionalExpression="ConditionalExpression",K.ExpressionStatement="ExpressionStatement",K.CallExpression="CallExpression",K.NumThreadStatement="NumThreadStatement",K.StorageStatement="StorageStatement",K.DoWhileStatement="DoWhileStatement",K.WhileStatement="WhileStatement",K.ForStatement="ForStatement",K.BreakStatement="BreakStatement",K.ContinueStatement="ContinueStatement",K.IfStatement="IfStatement",K.ImportedFunctionStatement="ImportedFunctionStatement"})($||($={}));var q;(function(K){K.Input="Input",K.Output="Output",K.Uniform="Uniform",K.Workgroup="Workgroup",K.UniformConstant="UniformConstant",K.Image="Image",K.StorageBuffer="StorageBuffer",K.Private="Private",K.Function="Function"})(q||(q={}));var et;(function(K){K.GLSL100="GLSL100",K.GLSL450="GLSL450",K.WGSL="WGSL"})(et||(et={}));var Q="__DefineValuePlaceholder__";function it(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ht(K,ft){var rt=Object.keys(K);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(K);ft&&(O=O.filter(function(b){return Object.getOwnPropertyDescriptor(K,b).enumerable})),rt.push.apply(rt,O)}return rt}function dt(K){for(var ft=1;ft<arguments.length;ft++){var rt=arguments[ft]!=null?arguments[ft]:{};ft%2?ht(Object(rt),!0).forEach(function(O){(0,Y.Z)(K,O,rt[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(rt)):ht(Object(rt)).forEach(function(O){Object.defineProperty(K,O,Object.getOwnPropertyDescriptor(rt,O))})}return K}var Ot=function(){function K(ft,rt){(0,k.Z)(this,K),this.engine=ft,this.configService=rt,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,P.Z)(K,[{key:"init",value:function(){var rt=this.configService.get(),O=rt.canvas,b=rt.engineOptions;this.initPromise=this.engine.init(dt({canvas:O||it(),antialiasing:!1},b))}},{key:"setBundle",value:function(rt){this.compiledBundle=JSON.parse(JSON.stringify(rt))}},{key:"setDispatch",value:function(rt){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=rt),this}},{key:"setMaxIteration",value:function(rt){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=rt),this}},{key:"setBinding",value:function(rt,O){var b=this;if(typeof rt=="string"){var w=y()(O)||D()(O)||S()(O);if(this.compiledBundle&&this.compiledBundle.context){var X=this.compiledBundle.context.defines.find(function(At){return At.name===rt});if(X)return X.value=O,this;var xt=this.compiledBundle.context.uniforms.find(function(At){return At.name===rt});xt&&(w?(xt.data=O,xt.isReferer=!1,xt.storageClass===q.Uniform?this.model&&this.model.updateUniform(rt,O):this.model&&this.model.updateBuffer(rt,O)):(xt.isReferer=!0,xt.data=O))}}else Object.keys(rt).forEach(function(At){b.setBinding(At,rt[At])});return this}},{key:"execute",value:function(){var ft=(0,B.Z)(I().mark(function O(){var b=this,w,X,xt=arguments;return I().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:if(w=xt.length>0&&xt[0]!==void 0?xt[0]:1,!this.dirty){wt.next=6;break}return this.compiledBundle.context&&(w>1?this.compiledBundle.context.maxIteration=w:this.compiledBundle.context.maxIteration++),wt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(Pt){var Me=Pt.isReferer;return Me}).forEach(function(Pt){var Me=Pt.data,ve=Pt.name;b.model.confirmInput(Me.model,ve)}),X=0;X<w;X++)this.model.run();return this.engine.endFrame(),wt.abrupt("return",this);case 12:case"end":return wt.stop()}},O,this)}));function rt(){return ft.apply(this,arguments)}return rt}()},{key:"getOutput",value:function(){var ft=(0,B.Z)(I().mark(function O(){return I().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",this.model.readData());case 1:case"end":return w.stop()}},O,this)}));function rt(){return ft.apply(this,arguments)}return rt}()},{key:"compile",value:function(){var ft=(0,B.Z)(I().mark(function O(){var b,w,X;return I().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.next=2,this.initPromise;case 2:return b=dt({},this.compiledBundle.context),w=this.engine.supportWebGPU?this.engine.useWGSL?et.WGSL:et.GLSL450:et.GLSL100,X=this.compiledBundle.shaders[w],b.defines.filter(function(wt){return wt.runtime}).forEach(function(wt){var Pt="".concat(Q).concat(wt.name);X=X.replace(Pt,"".concat(wt.value))}),b.shader=X,b.uniforms.forEach(function(wt){if(!wt.data&&wt.storageClass===q.StorageBuffer){var Pt=1;wt.type===j.FloatArray?Pt=1:wt.type===j.Vector4FloatArray&&(Pt=4),wt.data=new Float32Array(b.output.length*Pt).fill(0)}}),this.compiledBundle.context=b,At.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=At.sent;case 12:case"end":return At.stop()}},O,this)}));function rt(){return ft.apply(this,arguments)}return rt}()}]),K}(),It=z(481550),Kt=z.n(It),Ft=function(){function K(ft,rt){(0,k.Z)(this,K),this.attribute=void 0,this.buffer=void 0;var O=rt.buffer,b=rt.offset,w=rt.stride,X=rt.normalized,xt=rt.size,At=rt.divisor;this.buffer=O,this.attribute={buffer:O.get(),offset:b||0,stride:w||0,normalized:X||!1,divisor:At||0},xt&&(this.attribute.size=xt)}return(0,P.Z)(K,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(rt){this.buffer.subData(rt)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),K}(),Nt,st,yt,kt,ee,$t,ge,Pe,tr,Jt,ae,Se,xe,we,zt=(Nt={},(0,Y.Z)(Nt,d.POINTS,"points"),(0,Y.Z)(Nt,d.LINES,"lines"),(0,Y.Z)(Nt,d.LINE_LOOP,"line loop"),(0,Y.Z)(Nt,d.LINE_STRIP,"line strip"),(0,Y.Z)(Nt,d.TRIANGLES,"triangles"),(0,Y.Z)(Nt,d.TRIANGLE_FAN,"triangle fan"),(0,Y.Z)(Nt,d.TRIANGLE_STRIP,"triangle strip"),Nt),Wt=(st={},(0,Y.Z)(st,d.STATIC_DRAW,"static"),(0,Y.Z)(st,d.DYNAMIC_DRAW,"dynamic"),(0,Y.Z)(st,d.STREAM_DRAW,"stream"),st),Ie=(yt={},(0,Y.Z)(yt,d.BYTE,"int8"),(0,Y.Z)(yt,d.UNSIGNED_INT,"int16"),(0,Y.Z)(yt,d.INT,"int32"),(0,Y.Z)(yt,d.UNSIGNED_BYTE,"uint8"),(0,Y.Z)(yt,d.UNSIGNED_SHORT,"uint16"),(0,Y.Z)(yt,d.UNSIGNED_INT,"uint32"),(0,Y.Z)(yt,d.FLOAT,"float"),yt),Yt=(kt={},(0,Y.Z)(kt,d.ALPHA,"alpha"),(0,Y.Z)(kt,d.LUMINANCE,"luminance"),(0,Y.Z)(kt,d.LUMINANCE_ALPHA,"luminance alpha"),(0,Y.Z)(kt,d.RGB,"rgb"),(0,Y.Z)(kt,d.RGBA,"rgba"),(0,Y.Z)(kt,d.RGBA4,"rgba4"),(0,Y.Z)(kt,d.RGB5_A1,"rgb5 a1"),(0,Y.Z)(kt,d.RGB565,"rgb565"),(0,Y.Z)(kt,d.DEPTH_COMPONENT,"depth"),(0,Y.Z)(kt,d.DEPTH_STENCIL,"depth stencil"),kt),ie=(ee={},(0,Y.Z)(ee,d.DONT_CARE,"dont care"),(0,Y.Z)(ee,d.NICEST,"nice"),(0,Y.Z)(ee,d.FASTEST,"fast"),ee),Oe=($t={},(0,Y.Z)($t,d.NEAREST,"nearest"),(0,Y.Z)($t,d.LINEAR,"linear"),(0,Y.Z)($t,d.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Y.Z)($t,d.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Y.Z)($t,d.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Y.Z)($t,d.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),$t),re=(ge={},(0,Y.Z)(ge,d.REPEAT,"repeat"),(0,Y.Z)(ge,d.CLAMP_TO_EDGE,"clamp"),(0,Y.Z)(ge,d.MIRRORED_REPEAT,"mirror"),ge),_e=(Pe={},(0,Y.Z)(Pe,d.NONE,"none"),(0,Y.Z)(Pe,d.BROWSER_DEFAULT_WEBGL,"browser"),Pe),Ge=(tr={},(0,Y.Z)(tr,d.NEVER,"never"),(0,Y.Z)(tr,d.ALWAYS,"always"),(0,Y.Z)(tr,d.LESS,"less"),(0,Y.Z)(tr,d.LEQUAL,"lequal"),(0,Y.Z)(tr,d.GREATER,"greater"),(0,Y.Z)(tr,d.GEQUAL,"gequal"),(0,Y.Z)(tr,d.EQUAL,"equal"),(0,Y.Z)(tr,d.NOTEQUAL,"notequal"),tr),Ct=(Jt={},(0,Y.Z)(Jt,d.FUNC_ADD,"add"),(0,Y.Z)(Jt,d.MIN_EXT,"min"),(0,Y.Z)(Jt,d.MAX_EXT,"max"),(0,Y.Z)(Jt,d.FUNC_SUBTRACT,"subtract"),(0,Y.Z)(Jt,d.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Jt),Nr=(ae={},(0,Y.Z)(ae,d.ZERO,"zero"),(0,Y.Z)(ae,d.ONE,"one"),(0,Y.Z)(ae,d.SRC_COLOR,"src color"),(0,Y.Z)(ae,d.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Y.Z)(ae,d.SRC_ALPHA,"src alpha"),(0,Y.Z)(ae,d.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Y.Z)(ae,d.DST_COLOR,"dst color"),(0,Y.Z)(ae,d.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Y.Z)(ae,d.DST_ALPHA,"dst alpha"),(0,Y.Z)(ae,d.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Y.Z)(ae,d.CONSTANT_COLOR,"constant color"),(0,Y.Z)(ae,d.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Y.Z)(ae,d.CONSTANT_ALPHA,"constant alpha"),(0,Y.Z)(ae,d.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Y.Z)(ae,d.SRC_ALPHA_SATURATE,"src alpha saturate"),ae),Or=(Se={},(0,Y.Z)(Se,d.NEVER,"never"),(0,Y.Z)(Se,d.ALWAYS,"always"),(0,Y.Z)(Se,d.LESS,"less"),(0,Y.Z)(Se,d.LEQUAL,"lequal"),(0,Y.Z)(Se,d.GREATER,"greater"),(0,Y.Z)(Se,d.GEQUAL,"gequal"),(0,Y.Z)(Se,d.EQUAL,"equal"),(0,Y.Z)(Se,d.NOTEQUAL,"notequal"),Se),Ur=(xe={},(0,Y.Z)(xe,d.ZERO,"zero"),(0,Y.Z)(xe,d.KEEP,"keep"),(0,Y.Z)(xe,d.REPLACE,"replace"),(0,Y.Z)(xe,d.INVERT,"invert"),(0,Y.Z)(xe,d.INCR,"increment"),(0,Y.Z)(xe,d.DECR,"decrement"),(0,Y.Z)(xe,d.INCR_WRAP,"increment wrap"),(0,Y.Z)(xe,d.DECR_WRAP,"decrement wrap"),xe),Sr=(we={},(0,Y.Z)(we,d.FRONT,"front"),(0,Y.Z)(we,d.BACK,"back"),we),gn=function(){function K(ft,rt){(0,k.Z)(this,K),this.buffer=void 0;var O=rt.data,b=rt.usage,w=rt.type;this.buffer=ft.buffer({data:O,usage:Wt[b||d.STATIC_DRAW],type:Ie[w||d.UNSIGNED_BYTE]})}return(0,P.Z)(K,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(rt){var O=rt.data,b=rt.offset;this.buffer.subdata(O,b)}}]),K}(),Rr=z(974902);function ln(K,ft){var rt=Object.keys(K);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(K);ft&&(O=O.filter(function(b){return Object.getOwnPropertyDescriptor(K,b).enumerable})),rt.push.apply(rt,O)}return rt}function Nn(K){for(var ft=1;ft<arguments.length;ft++){var rt=arguments[ft]!=null?arguments[ft]:{};ft%2?ln(Object(rt),!0).forEach(function(O){(0,Y.Z)(K,O,rt[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(rt)):ln(Object(rt)).forEach(function(O){Object.defineProperty(K,O,Object.getOwnPropertyDescriptor(rt,O))})}return K}var Ln=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,fn=0,qe=!1,rr=function(){function K(ft,rt){var O=this;(0,k.Z)(this,K),this.reGl=ft,this.context=rt,this.entity=U(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var b={};this.context.uniforms.forEach(function(wt){var Pt=wt.name,Me=wt.type,ve=wt.data,He=wt.isReferer,br=wt.storageClass;if(br===q.StorageBuffer){if(He)O.textureCache[Pt]={data:void 0},b["".concat(Pt,"Size")]=function(){return ve.compiledBundle.context.output.textureSize};else{O.textureCache[Pt]=O.calcDataTexture(Pt,Me,ve);var ar=O.textureCache[Pt],mr=ar.textureWidth,Mn=ar.isOutput;b["".concat(Pt,"Size")]=[mr,mr],Mn&&(O.outputTextureName=Pt,O.context.needPingpong&&(O.outputTextureName="".concat(Pt,"Output"),O.textureCache[O.outputTextureName]=O.calcDataTexture(Pt,Me,ve)))}b[Pt]=function(){return qe&&console.log("[".concat(O.entity,"]: ").concat(Pt," ").concat(O.textureCache[Pt].id)),O.textureCache[Pt].texture}}else if(br===q.Uniform){if(ve&&(Array.isArray(ve)||D()(ve))&&ve.length>16)throw new Error("invalid data type ".concat(Me));b[Pt]=function(){return wt.data}}});var w=this.getOuputDataTexture(),X=w.textureWidth,xt=w.texelCount;b.u_OutputTextureSize=[X,X],b.u_OutputTexelCount=xt,this.context.output.textureSize=[X,X];var At={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:b,vert:Ln,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(At)}return(0,P.Z)(K,[{key:"run",value:function(){var rt=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){rt.computeCommand()}),qe&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var ft=(0,B.Z)(I().mark(function O(){var b=this,w,X,xt,At,wt,Pt,Me,ve;return I().wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){w=b.reGl.read()}),!w){br.next=6;break}if(X=this.getOuputDataTexture(),xt=X.originalDataLength,At=X.elementsPerTexel,wt=X.typedArrayConstructor,Pt=wt===void 0?Float32Array:wt,Me=[],At!==4)for(ve=0;ve<w.length;ve+=4)At===1?Me.push(w[ve]):At===2?Me.push(w[ve],w[ve+1]):Me.push(w[ve],w[ve+1],w[ve+2]);else Me=w;return br.abrupt("return",new Pt(Me.slice(0,xt)));case 6:return br.abrupt("return",new Float32Array);case 7:case"end":return br.stop()}},O,this)}));function rt(){return ft.apply(this,arguments)}return rt}()},{key:"confirmInput",value:function(rt,O){var b;this.entity===rt.entity?(this.dynamicPingpong=!0,b=this):b=rt,this.textureCache[O].id=b.getOuputDataTexture().id,this.textureCache[O].texture=b.getOuputDataTexture().texture,qe&&console.log("[".concat(this.entity,"]: confirm input ").concat(O," from model ").concat(b.entity,", ").concat(b.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(rt,O){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,w=this.context.uniforms.find(function(wt){var Pt=wt.name;return Pt===rt});if(w){var X=this.calcDataTexture(rt,w.type,O),xt=X.texture,At=X.data;this.textureCache[rt].data=At,this.textureCache[rt].texture=xt}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var rt=this.context.output.name;this.textureCache[rt].id=this.getOuputDataTexture().id,this.textureCache[rt].texture=this.getOuputDataTexture().texture}var O=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=O,qe&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var rt=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=rt}},{key:"cloneDataTexture",value:function(rt){var O=rt.data,b=rt.textureWidth;return Nn(Nn({},rt),{},{id:fn++,texture:this.reGl.texture({width:b,height:b,data:O,type:"float"})})}},{key:"calcDataTexture",value:function(rt,O,b){var w=1;O===j.Vector4FloatArray&&(w=4);for(var X=[],xt=0;xt<b.length;xt+=w)w===1?X.push(b[xt],0,0,0):w===2?X.push(b[xt],b[xt+1],0,0):w===3?X.push(b[xt],b[xt+1],b[xt+2],0):w===4&&X.push(b[xt],b[xt+1],b[xt+2],b[xt+3]);var At=b.length,wt=Math.ceil(At/w),Pt=Math.ceil(Math.sqrt(wt)),Me=Pt*Pt;wt<Me&&X.push.apply(X,(0,Rr.Z)(new Array((Me-wt)*4).fill(0)));var ve=this.reGl.texture({width:Pt,height:Pt,data:X,type:"float"});return{id:fn++,data:X,originalDataLength:At,typedArrayConstructor:D()(b)?b.constructor:void 0,textureWidth:Pt,texture:ve,texelCount:wt,elementsPerTexel:w,isOutput:rt===this.context.output.name}}}]),K}(),vr=function(){function K(ft,rt){(0,k.Z)(this,K),this.elements=void 0;var O=rt.data,b=rt.usage,w=rt.type,X=rt.count;this.elements=ft.elements({data:O,usage:Wt[b||d.STATIC_DRAW],type:Ie[w||d.UNSIGNED_BYTE],count:X})}return(0,P.Z)(K,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(rt){var O=rt.data;this.elements.subdata(O)}},{key:"destroy",value:function(){this.elements.destroy()}}]),K}(),Pr=function(){function K(ft,rt){(0,k.Z)(this,K),this.framebuffer=void 0;var O=rt.width,b=rt.height,w=rt.color,X=rt.colors,xt=rt.depth,At=rt.stencil,wt={width:O,height:b};Array.isArray(X)&&(wt.colors=X.map(function(Pt){return Pt.get()})),w&&typeof w!="boolean"&&(wt.color=w.get()),this.framebuffer=ft.framebuffer(wt)}return(0,P.Z)(K,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(rt){var O=rt.width,b=rt.height;this.framebuffer.resize(O,b)}}]),K}(),en=z(671002),pn=z(968630),rn=z.n(pn);function jn(K){var ft={};return Object.keys(K).forEach(function(rt){Hn(rt,K[rt],ft,"")}),ft}function Hn(K,ft,rt,O){if(ft===null||typeof ft=="number"||typeof ft=="boolean"||Array.isArray(ft)&&typeof ft[0]=="number"||D()(ft)||ft===""||ft.resize!==void 0){rt["".concat(O&&O+".").concat(K)]=ft;return}rn()(ft)&&Object.keys(ft).forEach(function(b){Hn(b,ft[b],rt,"".concat(O&&O+".").concat(K))}),Array.isArray(ft)&&ft.forEach(function(b,w){Object.keys(b).forEach(function(X){Hn(X,b[X],rt,"".concat(O&&O+".").concat(K,"[").concat(w,"]"))})})}function oa(K,ft){var rt=Object.keys(K);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(K);ft&&(O=O.filter(function(b){return Object.getOwnPropertyDescriptor(K,b).enumerable})),rt.push.apply(rt,O)}return rt}function dn(K){for(var ft=1;ft<arguments.length;ft++){var rt=arguments[ft]!=null?arguments[ft]:{};ft%2?oa(Object(rt),!0).forEach(function(O){(0,Y.Z)(K,O,rt[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(rt)):oa(Object(rt)).forEach(function(O){Object.defineProperty(K,O,Object.getOwnPropertyDescriptor(rt,O))})}return K}var Wn=function(){function K(ft,rt){(0,k.Z)(this,K),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=ft;var O=rt.vs,b=rt.fs,w=rt.defines,X=rt.attributes,xt=rt.uniforms,At=rt.primitive,wt=rt.count,Pt=rt.elements,Me=rt.depth,ve=rt.blend,He=rt.stencil,br=rt.cull,ar=rt.instances,mr=rt.scissor,Mn=rt.viewport,Xe={};xt&&(this.uniforms=jn(xt),Object.keys(xt).forEach(function(Wr){Xe[Wr]=ft.prop(Wr)}));var hr={};Object.keys(X).forEach(function(Wr){hr[Wr]=X[Wr].get()});var Er=w&&this.generateDefines(w)||"",on={attributes:hr,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Er,`
`).concat(b),uniforms:Xe,vert:`
`.concat(Er,`
`).concat(O),primitive:zt[At===void 0?d.TRIANGLES:At]};ar&&(on.instances=ar),wt&&(on.count=wt),Pt&&(on.elements=Pt.get()),mr&&(on.scissor=mr),Mn&&(on.viewport=Mn),this.initDepthDrawParams({depth:Me},on),this.initBlendDrawParams({blend:ve},on),this.initStencilDrawParams({stencil:He},on),this.initCullDrawParams({cull:br},on),this.drawCommand=ft(on)}return(0,P.Z)(K,[{key:"addUniforms",value:function(rt){this.uniforms=dn(dn({},this.uniforms),jn(rt))}},{key:"draw",value:function(rt){var O=dn(dn({},this.uniforms),jn(rt.uniforms||{})),b={};Object.keys(O).forEach(function(w){var X=(0,en.Z)(O[w]);X==="boolean"||X==="number"||Array.isArray(O[w])||O[w].BYTES_PER_ELEMENT?b[w]=O[w]:X==="string"||(b[w]=O[w].get())}),this.drawCommand(b)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(rt,O){var b=rt.depth;b&&(O.depth={enable:b.enable===void 0?!0:!!b.enable,mask:b.mask===void 0?!0:!!b.mask,func:Ge[b.func||d.LESS],range:b.range||[0,1]})}},{key:"initBlendDrawParams",value:function(rt,O){var b=rt.blend;if(b){var w=b.enable,X=b.func,xt=b.equation,At=b.color,wt=At===void 0?[0,0,0,0]:At;O.blend={enable:!!w,func:{srcRGB:Nr[X&&X.srcRGB||d.SRC_ALPHA],srcAlpha:Nr[X&&X.srcAlpha||d.SRC_ALPHA],dstRGB:Nr[X&&X.dstRGB||d.ONE_MINUS_SRC_ALPHA],dstAlpha:Nr[X&&X.dstAlpha||d.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Ct[xt&&xt.rgb||d.FUNC_ADD],alpha:Ct[xt&&xt.alpha||d.FUNC_ADD]},color:wt}}}},{key:"initStencilDrawParams",value:function(rt,O){var b=rt.stencil;if(b){var w=b.enable,X=b.mask,xt=X===void 0?-1:X,At=b.func,wt=At===void 0?{cmp:d.ALWAYS,ref:0,mask:-1}:At,Pt=b.opFront,Me=Pt===void 0?{fail:d.KEEP,zfail:d.KEEP,zpass:d.KEEP}:Pt,ve=b.opBack,He=ve===void 0?{fail:d.KEEP,zfail:d.KEEP,zpass:d.KEEP}:ve;O.stencil={enable:!!w,mask:xt,func:dn(dn({},wt),{},{cmp:Or[wt.cmp]}),opFront:{fail:Ur[Me.fail],zfail:Ur[Me.zfail],zpass:Ur[Me.zpass]},opBack:{fail:Ur[He.fail],zfail:Ur[He.zfail],zpass:Ur[He.zpass]}}}}},{key:"initCullDrawParams",value:function(rt,O){var b=rt.cull;if(b){var w=b.enable,X=b.face,xt=X===void 0?d.BACK:X;O.cull={enable:!!w,face:Sr[xt]}}}},{key:"generateDefines",value:function(rt){return Object.keys(rt).map(function(O){return"#define ".concat(O," ").concat(Number(rt[O]))}).join(`
`)}}]),K}(),Dn=function(){function K(ft,rt){(0,k.Z)(this,K),this.texture=void 0,this.width=void 0,this.height=void 0;var O=rt.data,b=rt.type,w=b===void 0?d.UNSIGNED_BYTE:b,X=rt.width,xt=rt.height,At=rt.flipY,wt=At===void 0?!1:At,Pt=rt.format,Me=Pt===void 0?d.RGBA:Pt,ve=rt.mipmap,He=ve===void 0?!1:ve,br=rt.wrapS,ar=br===void 0?d.CLAMP_TO_EDGE:br,mr=rt.wrapT,Mn=mr===void 0?d.CLAMP_TO_EDGE:mr,Xe=rt.aniso,hr=Xe===void 0?0:Xe,Er=rt.alignment,on=Er===void 0?1:Er,Wr=rt.premultiplyAlpha,xa=Wr===void 0?!1:Wr,Ta=rt.mag,Rn=Ta===void 0?d.NEAREST:Ta,Jn=rt.min,Ga=Jn===void 0?d.NEAREST:Jn,Aa=rt.colorSpace,an=Aa===void 0?d.BROWSER_DEFAULT_WEBGL:Aa;this.width=X,this.height=xt;var Vn={width:X,height:xt,type:Ie[w],format:Yt[Me],wrapS:re[ar],wrapT:re[Mn],mag:Oe[Rn],min:Oe[Ga],alignment:on,flipY:wt,colorSpace:_e[an],premultiplyAlpha:xa,aniso:hr};O&&(Vn.data=O),typeof He=="number"?Vn.mipmap=ie[He]:typeof He=="boolean"&&(Vn.mipmap=He),this.texture=ft.texture(Vn)}return(0,P.Z)(K,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(rt){var O=rt.width,b=rt.height;this.texture.resize(O,b),this.width=O,this.height=b}},{key:"destroy",value:function(){this.texture.destroy()}}]),K}(),Cn=function(){function K(){var ft=this;(0,k.Z)(this,K),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var rt=(0,B.Z)(I().mark(function O(b){return I().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(!b.uniforms){X.next=3;break}return X.next=3,Promise.all(Object.keys(b.uniforms).map(function(){var xt=(0,B.Z)(I().mark(function At(wt){var Pt;return I().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(!(b.uniforms[wt]&&b.uniforms[wt].load!==void 0)){ve.next=5;break}return ve.next=3,b.uniforms[wt].load();case 3:Pt=ve.sent,b.uniforms[wt]=Pt;case 5:case"end":return ve.stop()}},At)}));return function(At){return xt.apply(this,arguments)}}()));case 3:return X.abrupt("return",new Wn(ft.gl,b));case 4:case"end":return X.stop()}},O)}));return function(O){return rt.apply(this,arguments)}}(),this.createAttribute=function(rt){return new Ft(ft.gl,rt)},this.createBuffer=function(rt){return new gn(ft.gl,rt)},this.createElements=function(rt){return new vr(ft.gl,rt)},this.createTexture2D=function(rt){return new Dn(ft.gl,rt)},this.createFramebuffer=function(rt){return new Pr(ft.gl,rt)},this.useFramebuffer=function(rt,O){ft.gl({framebuffer:rt?rt.get():null})(O)},this.createComputeModel=function(){var rt=(0,B.Z)(I().mark(function O(b){return I().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",new rr(ft.gl,b));case 1:case"end":return X.stop()}},O)}));return function(O){return rt.apply(this,arguments)}}(),this.clear=function(rt){var O=rt.color,b=rt.depth,w=rt.stencil,X=rt.framebuffer,xt=X===void 0?null:X,At={color:O,depth:b,stencil:w};At.framebuffer=xt===null?xt:xt.get(),ft.gl.clear(At)},this.setScissor=function(rt){ft.gl&&ft.gl._gl&&(rt.enable&&rt.box?(ft.gl._gl.enable(d.SCISSOR_TEST),ft.gl._gl.scissor(rt.box.x,rt.box.y,rt.box.width,rt.box.height)):ft.gl._gl.disable(d.SCISSOR_TEST),ft.gl._refresh())},this.viewport=function(rt){var O=rt.x,b=rt.y,w=rt.width,X=rt.height;ft.gl&&ft.gl._gl&&(ft.gl._gl.viewport(O,b,w,X),ft.gl._refresh())},this.readPixels=function(rt){var O=rt.framebuffer,b=rt.x,w=rt.y,X=rt.width,xt=rt.height,At={x:b,y:w,width:X,height:xt};return O&&(At.framebuffer=O.get()),ft.gl.read(At)},this.getCanvas=function(){return ft.$canvas},this.getGLContext=function(){return ft.gl._gl},this.destroy=function(){ft.gl&&(ft.gl.destroy(),ft.inited=!1)}}return(0,P.Z)(K,[{key:"init",value:function(){var ft=(0,B.Z)(I().mark(function O(b){return I().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(!this.inited){X.next=2;break}return X.abrupt("return");case 2:return this.$canvas=b.canvas,X.next=5,new Promise(function(xt,At){Kt()({canvas:b.canvas,attributes:{alpha:!0,antialias:b.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Pt,Me){(Pt||!Me)&&At(Pt),xt(Me)}})});case 5:this.gl=X.sent,this.inited=!0;case 7:case"end":return X.stop()}},O,this)}));function rt(O){return ft.apply(this,arguments)}return rt}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),K}(),la=function(){function K(){(0,k.Z)(this,K),this.engine=void 0,this.configService=new at}return(0,P.Z)(K,[{key:"setConfig",value:function(rt){this.configService.set(rt)}},{key:"setEngine",value:function(rt){this.engine=rt}},{key:"createEntity",value:function(){return U()}},{key:"createKernel",value:function(rt){var O=new Ot(this.engine,this.configService);return typeof rt=="string"?O.setBundle(JSON.parse(rt)):O.setBundle(rt),O.init(),O}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=new K;return O.setConfig(rt),O.setEngine(new Cn),O}}]),K}()},694393:function(yr,R,z){"use strict";z.d(R,{ZP:function(){return _S}});var B={};z.r(B),z.d(B,{GADDI:function(){return Io},Stack:function(){return Yn},breadthFirstSearch:function(){return Ie},connectedComponent:function(){return Oe},cosineSimilarity:function(){return hr},default:function(){return Oo},depthFirstSearch:function(){return Ur},detectAllCycles:function(){return ln},detectAllDirectedCycle:function(){return Rr},detectAllUndirectedCycle:function(){return gn},detectCycle:function(){return Nn},detectDirectedCycle:function(){return So},dijkstra:function(){return qe},findAllPath:function(){return Pr},findShortestPath:function(){return vr},floydWarshall:function(){return pn},getAdjMatrix:function(){return kt},getDegree:function(){return _e},getInDegree:function(){return Ge},getNeighbors:function(){return ae},getOutDegree:function(){return Ct},iLouvain:function(){return ve},kCore:function(){return br},kMeans:function(){return Mn},labelPropagation:function(){return jn},louvain:function(){return Pt},minimumSpanningTree:function(){return Vn},nodesCosineSimilarity:function(){return on},pageRank:function(){return Dt}});var Y={};z.r(Y),z.d(Y,{Line:function(){return ja},applyMatrix:function(){return ei},compare:function(){return Ai},distance:function(){return Wo},floydWarshall:function(){return is},fractionToLine:function(){return Ki},getAdjMatrix:function(){return Xo},getBBoxBoundLine:function(){return yi},getCircleCenterByPoints:function(){return Do},getCircleIntersectByPoint:function(){return eo},getDegree:function(){return Xi},getEllipseIntersectByPoint:function(){return ro},getLineIntersect:function(){return Uo},getPointsCenter:function(){return Yo},getRectIntersectByPoint:function(){return ps},intersectBBox:function(){return Yi},invertMatrix:function(){return fo},isPointInPolygon:function(){return Eo},isPointsOverlap:function(){return lo},isPolygonsIntersect:function(){return pa},itemIntersectByLine:function(){return ki},lerp:function(){return Cs},lerpArray:function(){return ci},move:function(){return Xa},pointLineDistance:function(){return ou},pointLineSquareDist:function(){return ts},pointRectSquareDist:function(){return Rs},rotate:function(){return iu},scale:function(){return As},scaleMatrix:function(){return No},squareDist:function(){return wo},translate:function(){return Jo}});var k={};z.r(k),z.d(k,{cloneBesidesImg:function(){return Js},getAnimateCfgWithCallback:function(){return cs},getBBox:function(){return ai},getComboBBox:function(){return fu},getLabelPosition:function(){return ao},getLetterWidth:function(){return qs},getLoopCfgs:function(){return Zi},getTextSize:function(){return Xu},plainCombosToTrees:function(){return uu},reconstructTree:function(){return Qs},shouldRefreshEdge:function(){return Is},traverseTree:function(){return Ri},traverseTreeUp:function(){return vo},truncateLabelByLength:function(){return Au}});var P={};z.r(P),z.d(P,{catmullRomToBezier:function(){return vt},fillPath:function(){return Ii},fillPathByDiff:function(){return ii},formatPath:function(){return ko},intersection:function(){return Ni},parsePathArray:function(){return Ye},parsePathString:function(){return T},pathToAbsolute:function(){return Lt},pathToCurve:function(){return he},rectPath:function(){return Tr}});var N={};z.r(N),z.d(N,{easeBack:function(){return Ql},easeBackIn:function(){return Uc},easeBackInOut:function(){return Ql},easeBackOut:function(){return yh},easeBounce:function(){return yu},easeBounceIn:function(){return ql},easeBounceInOut:function(){return $u},easeBounceOut:function(){return yu},easeCircle:function(){return nc},easeCircleIn:function(){return bl},easeCircleInOut:function(){return nc},easeCircleOut:function(){return Rc},easeCubic:function(){return pl},easeCubicIn:function(){return ph},easeCubicInOut:function(){return pl},easeCubicOut:function(){return Vl},easeElastic:function(){return wl},easeElasticIn:function(){return Jl},easeElasticInOut:function(){return mh},easeElasticOut:function(){return wl},easeExp:function(){return rc},easeExpIn:function(){return Pc},easeExpInOut:function(){return rc},easeExpOut:function(){return kc},easeLinear:function(){return Xl},easePoly:function(){return Kl},easePolyIn:function(){return jl},easePolyInOut:function(){return Kl},easePolyOut:function(){return Hl},easeQuad:function(){return gl},easeQuadIn:function(){return Ku},easeQuadInOut:function(){return gl},easeQuadOut:function(){return Yl},easeSin:function(){return Nc},easeSinIn:function(){return Zl},easeSinInOut:function(){return Nc},easeSinOut:function(){return $l}});var D={};z.r(D),z.d(D,{calculationItemsBBox:function(){return Hd},cloneEvent:function(){return dy},formatPadding:function(){return Gv},isNaN:function(){return Af},isViewportChanged:function(){return gy},processParallelEdges:function(){return py},uniqueId:function(){return Fv}});var E={};z.r(E),z.d(E,{getClosedSpline:function(){return Kv},getControlPoint:function(){return tv},getSpline:function(){return fg},getStarPath:function(){return Ry},paddedHull:function(){return vg},pathToPoints:function(){return Hv},pointsToPolygon:function(){return ky},roundedHull:function(){return Zv}});var y={};z.r(y),z.d(y,{defaultSubjectColors:function(){return nm}});var M={};z.r(M),z.d(M,{isForce:function(){return Sg}});var S={};z.r(S),z.d(S,{Base:function(){return qu},Circle:function(){return Tm},Ellipse:function(){return Om},Image:function(){return Dm},Line:function(){return Pm},Marker:function(){return Bm},Path:function(){return ud},Polygon:function(){return jm},Polyline:function(){return Km},Rect:function(){return Qm},Text:function(){return t1}});var m={};z.r(m),z.d(m,{Base:function(){return Ru},Circle:function(){return u1},Dom:function(){return c1},Ellipse:function(){return h1},Image:function(){return d1},Line:function(){return p1},Marker:function(){return m1},Path:function(){return b1},Polygon:function(){return w1},Polyline:function(){return S1},Rect:function(){return I1},Text:function(){return P1}});var I={};z.r(I),z.d(I,{getColorSetsBySubjectColors:function(){return Nx},getColorsWithSubjectColor:function(){return gd},mixColor:function(){return ns}});var A={};z.r(A),z.d(A,{arrayToTextureData:function(){return Kx},attributesToTextureData:function(){return Hx},buildTextureData:function(){return Yx},buildTextureDataWithOneEdgeAttr:function(){return Vx},buildTextureDataWithTwoEdgeAttr:function(){return jx},proccessToFunc:function(){return Xx},radialLayout:function(){return Zx}});var L={};z.r(L),z.d(L,{gpuDetector:function(){return wp}});var U={};z.r(U),z.d(U,{getBrowserName:function(){return _p}});var V={};z.r(V),z.d(V,{assign:function(){return Qc},default:function(){return i0},defaultI18n:function(){return Md},format:function(){return n0},parse:function(){return a0},setGlobalDateI18n:function(){return Zp},setGlobalDateMasks:function(){return r0}});var x=z(197582),d=z(413810),at={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,d.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,d.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},W=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,d.clone)(at);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,d.each)(u,function(c,l){f[l]=(0,d.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),j=W,$=j,q="*",et=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[q]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var l=u[c],g=l.callback,p=l.once;p&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),g.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),Q=et,it=z(935600);function ht(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return it.fromTranslation(r,t),it.multiply(i,r,e)}function dt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return it.fromRotation(r,t),it.multiply(i,r,e)}function Ot(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return it.fromScaling(r,t),it.multiply(i,r,e)}function It(i,e,t){return it.multiply(i,t,e)}function Kt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":ht(t,t,[a[1],a[2]]);break;case"s":Ot(t,t,[a[1],a[2]]);break;case"r":dt(t,t,a[1]);break;case"m":It(t,t,a[1]);break;default:break}}return t}function Ft(i,e){return i[0]*e[1]-e[0]*i[1]}function Nt(i,e,t){var r=vec2.angle(i,e),n=Ft(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function st(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var yt=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},kt=yt,ee=function(e,t){return e===t},$t=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),ge=function(){function i(e){e===void 0&&(e=ee),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new $t(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new $t(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),Pe=ge,tr=function(){function i(){this.linkedList=new Pe}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),Jt=tr,ae=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},Se=function(e,t){return t.filter(function(r){return r.source===e})},xe=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},we=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function zt(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Wt=function(e,t,r,n){n===void 0&&(n=!0);var a=zt(r),o=new Jt,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var g=o.dequeue();a.enter({current:g,previous:f}),ae(g,u,n?"target":void 0).forEach(function(p){a.allowTraversal({previous:f,current:g,next:p})&&o.enqueue(p)}),a.leave({current:g,previous:f}),f=g};!o.isEmpty();)c()},Ie=Wt,Yt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function p(C){u.push(C),s[C.id]=!0;for(var G=ae(C.id,a),H=function(ut){var lt=G[ut];if(!s[lt]){var _t=r.filter(function(Bt){return Bt.id===lt});_t.length>0&&p(_t[0])}},J=0;J<G.length;++J)H(J)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var g=[];u.length>0;)g.push(u.pop());o.push(g)}}return o},ie=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,g=function H(J){u[J.id]=l,f[J.id]=l,l+=1,o.push(J),s[J.id]=!0;for(var nt=ae(J.id,a,"target").filter(function(Rt){return r.map(function(Qt){return Qt.id}).indexOf(Rt)>-1}),ut=function(Qt){var de=nt[Qt];if(!u[de]&&u[de]!==0){var se=r.filter(function(Te){return Te.id===de});se.length>0&&H(se[0]),f[J.id]=Math.min(f[J.id],f[de])}else s[de]&&(f[J.id]=Math.min(f[J.id],u[de]))},lt=0;lt<nt.length;lt++)ut(lt);if(f[J.id]===u[J.id]){for(var _t=[];o.length>0;){var Bt=o.pop();if(s[Bt.id]=!1,_t.push(Bt),Bt===J)break}_t.length>0&&c.push(_t)}},p=0,C=r;p<C.length;p++){var G=C[p];!u[G.id]&&u[G.id]!==0&&g(G)}return c};function Oe(i,e){return e?ie(i):Yt(i)}var re=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},_e=re,Ge=function(e,t){var r=re(e);return r[t]?re(e)[t].inDegree:0},Ct=function(e,t){var r=re(e);return r[t]?re(e)[t].outDegree:0};function Nr(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function Or(i,e,t,r,n){n===void 0&&(n=!0),r.enter({current:e,previous:t});var a=i.edges,o=a===void 0?[]:a;ae(e,o,n?"target":void 0).forEach(function(s){r.allowTraversal({previous:t,current:e,next:s})&&Or(i,s,e,r,n)}),r.leave({current:e,previous:t})}function Ur(i,e,t,r){r===void 0&&(r=!0),Or(i,e,"",Nr(t),r)}var Sr=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(g){var p=g.current,C=g.previous;if(s[p]){t={};for(var G=p,H=C;H!==p;)t[G]=H,G=H,H=a[H];t[G]=H}else s[p]=p,delete o[p],a[p]=C},leave:function(g){var p=g.current;u[p]=p,delete s[p]},allowTraversal:function(g){var p=g.next;return t?!1:!u[p]}};Object.keys(o).length;){var c=Object.keys(o)[0];Ur(e,c,f)}return t},gn=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=Oe(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var l=c[0],g=l.id,p=[l],C=(n={},n[g]=l,n),G=(a={},a[g]=new Set,a);p.length>0;)for(var H=p.pop(),J=H.id,nt=ae(J,e.edges),ut=function(Bt){var Rt,Qt=nt[Bt],de=e.nodes.find(function(zr){return zr.id===Qt});if(Qt===J)o.push((Rt={},Rt[Qt]=H,Rt));else if(!(Qt in G))C[Qt]=H,p.push(de),G[Qt]=new Set([H]);else if(!G[J].has(de)){for(var se=!0,Te=[de,H],je=C[J];G[Qt].size&&!G[Qt].has(je)&&(Te.push(je),je!==C[je.id]);)je=C[je.id];if(Te.push(je),t&&r?(se=!1,Te.findIndex(function(zr){return t.indexOf(zr.id)>-1})>-1&&(se=!0)):t&&!r&&Te.findIndex(function(zr){return t.indexOf(zr.id)>-1})>-1&&(se=!1),se){for(var Dr={},Kr=1;Kr<Te.length;Kr+=1)Dr[Te[Kr-1].id]=Te[Kr];Te.length&&(Dr[Te[Te.length-1].id]=Te[0]),o.push(Dr)}G[Qt].add(H)}},lt=0;lt<nt.length;lt+=1)ut(lt)}return o},Rr=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(je){for(var Dr=[je];Dr.length>0;){var Kr=Dr.pop();a.has(Kr)&&(a.delete(Kr),o[Kr.id].forEach(function(zr){Dr.push(zr)}),o[Kr.id].clear())}},l=function Te(je,Dr,Kr){var zr=!1;if(t&&r===!1&&t.indexOf(je.id)>-1)return zr;n.push(je),a.add(je);for(var Mr=Kr[je.id],En=0;En<Mr.length;En+=1){var yn=u[Mr[En]];if(yn===Dr){for(var Ar={},Xr=1;Xr<n.length;Xr+=1)Ar[n[Xr-1].id]=n[Xr];n.length&&(Ar[n[n.length-1].id]=n[0]),s.push(Ar),zr=!0}else a.has(yn)||Te(yn,Dr,Kr)&&(zr=!0)}if(zr)c(je);else for(var En=0;En<Mr.length;En+=1){var yn=u[Mr[En]];o[yn.id].has(je)||o[yn.id].add(je)}return n.pop(),zr},g=e.nodes,p=g===void 0?[]:g,C=0;C<p.length;C+=1){var G=p[C],H=G.id;f[H]=C,u[C]=G}if(t&&r)for(var J=function(je){var Dr=t[je];f[p[je].id]=f[Dr],f[Dr]=0,u[0]=p.find(function(Kr){return Kr.id===Dr}),u[f[p[je].id]]=p[je]},C=0;C<t.length;C++)J(C);for(var nt=function(je){for(var Dr,Kr,zr=1/0,Mr=0;Mr<je.length;Mr+=1)for(var En=je[Mr],yn=0;yn<En.length;yn++){var Ar=f[En[yn].id];Ar<zr&&(zr=Ar,Kr=Mr)}for(var Xr=je[Kr],sn=[],Mr=0;Mr<Xr.length;Mr+=1){var un=Xr[Mr];sn[un.id]=[];for(var An=0,Gn=ae(un.id,e.edges,"target").filter(function(gi){return Xr.map(function(ti){return ti.id}).indexOf(gi)>-1});An<Gn.length;An++){var ga=Gn[An];ga===un.id&&!(r===!1&&t.indexOf(un.id)>-1)?s.push((Dr={},Dr[un.id]=un,Dr)):sn[un.id].push(f[ga])}}return{component:Xr,adjList:sn,minIdx:zr}},ut=0;ut<p.length;){var lt=p.filter(function(Te){return f[Te.id]>=ut}),_t=ie({nodes:lt,edges:e.edges}).filter(function(Te){return Te.length>1});if(_t.length===0)break;var Bt=nt(_t),Rt=Bt.minIdx,Qt=Bt.adjList,de=Bt.component;if(de.length>1){de.forEach(function(Te){o[Te.id]=new Set});var se=u[Rt];if(t&&r&&t.indexOf(se.id)===-1)return s;l(se,se,Qt),ut=Rt+1}else break}return s},ln=function(e,t,r,n){return n===void 0&&(n=!0),t?Rr(e,r,n):gn(e,r,n)},Nn=Sr,Ln=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},fn=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},g={};o.forEach(function(ut,lt){var _t=ut.id;f.push(_t),l[_t]=1/0,_t===t&&(l[_t]=0)});for(var p=o.length,C=function(lt){var _t=Ln(l,o,c),Bt=_t.id;if(c[Bt]=!0,l[Bt]===1/0)return"continue";var Rt=[];r?Rt=Se(Bt,u):Rt=xe(Bt,u),Rt.forEach(function(Qt){var de=Qt.target,se=Qt.source,Te=de===Bt?se:de,je=n&&Qt[n]?Qt[n]:1;l[Te]>l[_t.id]+je?(l[Te]=l[_t.id]+je,g[Te]=[_t.id]):l[Te]===l[_t.id]+je&&g[Te].push(_t.id)})},G=0;G<p;G++)C(G);g[t]=[t];var H={};for(var J in l)l[J]!==1/0&&rr(t,J,g,H);var nt={};for(var J in H)nt[J]=H[J][0];return{length:l,path:nt,allPath:H}},qe=fn;function rr(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=rr(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,d.isArray)(l)?n.push((0,x.__spreadArray)((0,x.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var vr=function(e,t,r,n,a){var o=qe(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},Pr=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],g=n?ae(t,s,"target"):ae(t,s);for(c.push(g);u.length>0&&c.length>0;){var p=c[c.length-1];if(p.length){var C=p.shift();C&&(u.push(C),f[C]=!0,g=n?ae(C,s,"target"):ae(C,s),c.push(g.filter(function(J){return!f[J]})))}else{var G=u.pop();f[G]=!1,c.pop();continue}if(u[u.length-1]===r){var H=u.map(function(nt){return nt});l.push(H);var G=u.pop();f[G]=!1,c.pop()}}return l},en=function(e,t){for(var r=kt(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},pn=en,rn=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(lt,_t){var Bt=we();lt.clusterId=Bt,f[Bt]={id:Bt,nodes:[lt]},c[lt.id]={node:lt,idx:_t}});var l=kt(e,t),g=[],p={};l.forEach(function(lt,_t){var Bt=0,Rt=o[_t].id;p[Rt]={},lt.forEach(function(Qt,de){if(Qt){Bt+=Qt;var se=o[de].id;p[Rt][se]=Qt}}),g.push(Bt)});for(var C=0,G=function(){var _t=!1;if(o.forEach(function(Bt){var Rt={};Object.keys(p[Bt.id]).forEach(function(zr){var Mr=p[Bt.id][zr],En=c[zr].node,yn=En.clusterId;Rt[yn]||(Rt[yn]=0),Rt[yn]+=Mr});var Qt=-1/0,de=[];if(Object.keys(Rt).forEach(function(zr){Qt<Rt[zr]?(Qt=Rt[zr],de=[zr]):Qt===Rt[zr]&&de.push(zr)}),!(de.length===1&&de[0]===Bt.clusterId)){var se=de.indexOf(Bt.clusterId);if(se>=0&&de.splice(se,1),de&&de.length){_t=!0;var Te=f[Bt.clusterId],je=Te.nodes.indexOf(Bt);Te.nodes.splice(je,1);var Dr=Math.floor(Math.random()*de.length),Kr=f[de[Dr]];Kr.nodes.push(Bt),Bt.clusterId=Kr.id}}}),!_t)return"break";C++};C<n;){var H=G();if(H==="break")break}Object.keys(f).forEach(function(lt){var _t=f[lt];(!_t.nodes||!_t.nodes.length)&&delete f[lt]});var J=[],nt={};u.forEach(function(lt){var _t=lt.source,Bt=lt.target,Rt=lt[r]||1,Qt=c[_t].node.clusterId,de=c[Bt].node.clusterId,se="".concat(Qt,"---").concat(de);if(nt[se])nt[se].weight+=Rt,nt[se].count++;else{var Te={source:Qt,target:de,weight:Rt,count:1};nt[se]=Te,J.push(Te)}});var ut=[];return Object.keys(f).forEach(function(lt){ut.push(f[lt])}),{clusters:ut,clusterEdges:J}},jn=rn,Hn=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,d.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),oa=Hn,dn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,Wn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,Dn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(dn)&&!"".concat(a.properties[o]).match(Wn)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},Cn=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},la=function(e){for(var t=Dn(e),r=[],n=0;n<e.length;n++)r[n]=Cn(e[n].properties,t);return r},K=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},ft={getAllSortProperties:Dn,getPropertyWeight:la,getAllProperties:K},rt;(function(i){i.EuclideanDistance="euclideanDistance"})(rt||(rt={}));var O=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,d.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,d.uniq)(s))}),a},b=function(e,t,r){var n=O(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var g=u[l],p=n[l],C=p.findIndex(function(J){return g===J}),G=[];if(s)G.push(g);else for(var H=0;H<p.length;H++)H===C?G.push(1):G.push(0);c=c.concat(G)}),a[f]=c}),a},w=function(e,t,r,n){r===void 0&&(r=rt.EuclideanDistance);var a=0;switch(r){case rt.EuclideanDistance:a=new oa(e).euclideanDistance(new oa(t));break;default:break}return a},X={getAllKeyValueMap:O,oneHot:b,getDistance:w},xt=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var g=t[u][c]||0,p=r[u]||0,C=r[c]||0;s+=g-p*C/o}}return s*=1/o,s},At=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new oa([]),a=0;a<r;a++)n=n.add(new oa(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new oa(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new oa(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var g=new oa(t[l]);c[a][l]=u.squareEuclideanDistance(g),e[a].clusterInertial+=c[a][l]}}for(var p=0,C=2*r*s,a=0;a<r;a++)for(var G=e[a].clusterId,l=0;l<r;l++){var H=e[l].clusterId;if(!(a===l||G!==H)){var J=e[a].clusterInertial*e[l].clusterInertial/Math.pow(C,2)-c[a][l]/C;p+=J}}return Number(p.toFixed(4))},wt=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,g=e.edges,p=g===void 0?[]:g,C=[];if(a){l.forEach(function(Ar,Xr){Ar.properties=Ar.properties||{},Ar.originIndex=Xr});var G=[];l.every(function(Ar){return Ar.hasOwnProperty("nodeType")})&&(G=Array.from(new Set(l.map(function(Ar){return Ar.nodeType}))),l.forEach(function(Ar){Ar.properties.nodeType=G.findIndex(function(Xr){return Xr===Ar.nodeType})}));var H=K(l,o);C=b(H,s,u)}var J=1,nt={},ut={};l.forEach(function(Ar,Xr){var sn=String(J++);Ar.clusterId=sn,nt[sn]={id:sn,nodes:[Ar]},ut[Ar.id]={node:Ar,idx:Xr}});var lt=kt(e,t),_t=[],Bt={},Rt=0;lt.forEach(function(Ar,Xr){var sn=0,un=l[Xr].id;Bt[un]={},Ar.forEach(function(An,Gn){if(An){sn+=An;var ga=l[Gn].id;Bt[un][ga]=An,Rt+=An}}),_t.push(sn)}),Rt/=2;for(var Qt=1/0,de=1/0,se=0,Te=[],je={};;){a&&l.every(function(Ar){return Ar.hasOwnProperty("properties")})?Qt=xt(l,lt,_t,Rt)+At(l,C)*f:Qt=xt(l,lt,_t,Rt),se===0&&(de=Qt,Te=l,je=nt);var Dr=Qt>0&&Qt>de&&Qt-de<n;if(Qt>de&&(Te=l.map(function(Ar){return{node:Ar,clusterId:Ar.clusterId}}),je=(0,d.clone)(nt),de=Qt),Dr||se>100)break;se++,Object.keys(nt).forEach(function(Ar){var Xr=0;p.forEach(function(sn){var un=sn.source,An=sn.target,Gn=ut[un].node.clusterId,ga=ut[An].node.clusterId;(Gn===Ar&&ga!==Ar||ga===Ar&&Gn!==Ar)&&(Xr=Xr+(sn[r]||1))}),nt[Ar].sumTot=Xr}),l.forEach(function(Ar,Xr){var sn=nt[Ar.clusterId],un=0,An,Gn=_t[Xr]/(2*Rt),ga=0,Oa=sn.nodes;Oa.forEach(function(qo){var Qo=ut[qo.id].idx;ga+=lt[Xr][Qo]||0});var gi=ga-sn.sumTot*Gn,ti=Oa.filter(function(qo){return qo.id!==Ar.id}),pi=[];ti.forEach(function(qo,Qo){pi[Qo]=C[qo.originIndex]});var wi=At(ti,C)*f,ji=Bt[Ar.id];if(Object.keys(ji).forEach(function(qo){var Qo=ut[qo].node,wu=Qo.clusterId;if(wu!==Ar.clusterId){var Ss=nt[wu],Hs=Ss.nodes;if(!(!Hs||!Hs.length)){var Va=0;Hs.forEach(function(Ka){var $a=ut[Ka.id].idx;Va+=lt[Xr][$a]||0});var hi=Va-Ss.sumTot*Gn,Wa=Hs.concat([Ar]),vi=[];Wa.forEach(function(Ka,$a){vi[$a]=C[Ka.originIndex]});var Li=At(Wa,C)*f,ra=hi-gi;a&&(ra=hi+Li-(gi+wi)),ra>un&&(un=ra,An=Ss)}}}),un>0){An.nodes.push(Ar);var Pi=Ar.clusterId;Ar.clusterId=An.id;var Gu=sn.nodes.indexOf(Ar);sn.nodes.splice(Gu,1);var $o=0,zu=0;p.forEach(function(qo){var Qo=qo.source,wu=qo.target,Ss=ut[Qo].node.clusterId,Hs=ut[wu].node.clusterId;(Ss===An.id&&Hs!==An.id||Hs===An.id&&Ss!==An.id)&&($o=$o+(qo[r]||1)),(Ss===Pi&&Hs!==Pi||Hs===Pi&&Ss!==Pi)&&(zu=zu+(qo[r]||1))}),An.sumTot=$o,sn.sumTot=zu}})}var Kr={},zr=0;Object.keys(je).forEach(function(Ar){var Xr=je[Ar];if(!Xr.nodes||!Xr.nodes.length){delete je[Ar];return}var sn=String(zr+1);sn!==Ar&&(Xr.id=sn,Xr.nodes=Xr.nodes.map(function(un){return{id:un.id,clusterId:sn}}),je[sn]=Xr,Kr[Ar]=sn,delete je[Ar],zr++)}),Te.forEach(function(Ar){var Xr=Ar.node,sn=Ar.clusterId;Xr&&(Xr.clusterId=sn,Xr.clusterId&&Kr[Xr.clusterId]&&(Xr.clusterId=Kr[Xr.clusterId]))});var Mr=[],En={};p.forEach(function(Ar){var Xr=Ar.source,sn=Ar.target,un=Ar[r]||1,An=ut[Xr].node.clusterId,Gn=ut[sn].node.clusterId;if(!(!An||!Gn)){var ga="".concat(An,"---").concat(Gn);if(En[ga])En[ga].weight+=un,En[ga].count++;else{var Oa={source:An,target:Gn,weight:un,count:1};En[ga]=Oa,Mr.push(Oa)}}});var yn=[];return Object.keys(je).forEach(function(Ar){yn.push(je[Ar])}),{clusters:yn,clusterEdges:Mr}},Pt=wt,Me=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Pt(e,t,r,n,!0,a,o,s,u)},ve=Me,He=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,d.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var g=_e({nodes:o,edges:u}),p=Object.keys(g);p.sort(function(H,J){var nt,ut;return((nt=g[H])===null||nt===void 0?void 0:nt.degree)-((ut=g[J])===null||ut===void 0?void 0:ut.degree)});var C=p[0];if(!o.length||((r=g[C])===null||r===void 0?void 0:r.degree)>=t)return"break";var G=o.findIndex(function(H){return H.id===C});o.splice(G,1),u=u.filter(function(H){return!(H.source===C||H.target===C)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},br=He,ar=function(e,t,r){var n=[];switch(e){case rt.EuclideanDistance:n=t[r];break;default:n=[];break}return n},mr=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=rt.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===rt.EuclideanDistance&&!u.every(function(sn){return sn.hasOwnProperty(r)}))return l;var g=[],p=[];if(o===rt.EuclideanDistance&&(g=K(u,r),p=b(g,n,a)),!p.length)return l;for(var C=(0,d.uniq)(p.map(function(sn){return sn.join("")})),G=Math.min(t,u.length,C.length),H=0;H<u.length;H++)u[H].originIndex=H;for(var J=[],nt=[],ut=[],H=0;H<G;H++)if(H===0){var lt=Math.floor(Math.random()*u.length);switch(o){case rt.EuclideanDistance:J[H]=p[lt];break;default:J[H]=[];break}nt.push(lt),ut[H]=[u[lt]],u[lt].clusterId=String(H)}else{for(var _t=-1/0,Bt=0,Rt=function(An){if(!nt.includes(An)){for(var Gn=0,ga=0;ga<J.length;ga++){var Oa=0;switch(o){case rt.EuclideanDistance:Oa=w(p[u[An].originIndex],J[ga],o);break;default:break}Gn+=Oa}var gi=Gn/J.length;gi>_t&&!J.find(function(ti){return(0,d.isEqual)(ti,ar(o,p,u[An].originIndex))})&&(_t=gi,Bt=An)}},Qt=0;Qt<u.length;Qt++)Rt(Qt);J[H]=ar(o,p,Bt),nt.push(Bt),ut[H]=[u[Bt]],u[Bt].clusterId=String(H)}for(var de=0;;){for(var H=0;H<u.length;H++){var se=0,Te=1/0;if(!(de===0&&nt.includes(H))){for(var je=0;je<J.length;je++){var Dr=0;switch(o){case rt.EuclideanDistance:Dr=w(p[H],J[je],o);break;default:break}Dr<Te&&(Te=Dr,se=je)}if(u[H].clusterId!==void 0)for(var Kr=ut[Number(u[H].clusterId)].length-1;Kr>=0;Kr--)ut[Number(u[H].clusterId)][Kr].id===u[H].id&&ut[Number(u[H].clusterId)].splice(Kr,1);u[H].clusterId=String(se),ut[se].push(u[H])}}for(var zr=!1,H=0;H<ut.length;H++){for(var Mr=ut[H],En=new oa([]),je=0;je<Mr.length;je++)En=En.add(new oa(p[Mr[je].originIndex]));var yn=En.avg(Mr.length);yn.equal(new oa(J[H]))||(zr=!0,J[H]=yn.getArr())}if(de++,u.every(function(sn){return sn.clusterId!==void 0})&&zr||de>=1e3)break}var Ar=[],Xr={};return c.forEach(function(sn){var un,An,Gn=sn.source,ga=sn.target,Oa=(un=u.find(function(wi){return wi.id===Gn}))===null||un===void 0?void 0:un.clusterId,gi=(An=u.find(function(wi){return wi.id===ga}))===null||An===void 0?void 0:An.clusterId,ti="".concat(Oa,"---").concat(gi);if(Xr[ti])Xr[ti].count++;else{var pi={source:Oa,target:gi,count:1};Xr[ti]=pi,Ar.push(pi)}}),{clusters:ut,clusterEdges:Ar}},Mn=mr,Xe=function(e,t){var r=new oa(t),n=r.norm2(),a=new oa(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},hr=Xe,Er=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,d.clone)(e.filter(function(g){return g.id!==t.id})),s=e.findIndex(function(g){return g.id===t.id}),u=K(e,r),f=b(u,n,a),c=f[s],l=[];return o.forEach(function(g,p){if(g.id!==t.id){var C=f[p],G=hr(C,c);l.push(G),g.cosineSimilarity=G}}),o.sort(function(g,p){return p.cosineSimilarity-g.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},on=Er,Wr=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),xa=Wr,Ta=function(e,t){return e-t},Rn=function(){function i(e){e===void 0&&(e=Ta),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),Jn=Rn,Ga=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(H,J){return t?H.weight-J.weight:0},l=new Jn(c);for(xe(u.id,s).forEach(function(G){l.insert(G)});!l.isEmpty();){var g=l.delMin(),p=g.source,C=g.target;f.has(p)&&f.has(C)||(r.push(g),f.has(p)||(f.add(p),xe(p,s).forEach(function(G){l.insert(G)})),f.has(C)||(f.add(C),xe(C,s).forEach(function(G){l.insert(G)})))}return r},Aa=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(p){return p});t&&u.sort(function(p,C){return p.weight-C.weight});for(var f=new xa(a.map(function(p){return p.id}));u.length>0;){var c=u.shift(),l=c.source,g=c.target;f.connected(l,g)||(r.push(c),f.union(l,g))}return r},an=function(e,t,r){var n={prim:Ga,kruskal:Aa};return r?n[r](e,t):Aa(e,t)},Vn=an,me=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,g,p={},C={},G=0;G<l;++G){var H=u[G],J=H.id;p[J]=1/l,C[J]=1/l}for(var nt=_e(e);o>0&&n>t;){a=0;for(var G=0;G<l;++G){var H=u[G],J=H.id;if(g=0,nt[H.id].inDegree===0)p[J]=0;else{for(var ut=ae(J,c,"source"),lt=0;lt<ut.length;++lt){var _t=ut[lt],Bt=nt[_t].outDegree;Bt>0&&(g+=C[_t]/Bt)}p[J]=r*g,a+=p[J]}}a=(1-a)/l,n=0;for(var G=0;G<l;++G){var H=u[G],J=H.id;g=p[J]+a,n+=Math.abs(g-C[J]),C[J]=g}o-=1}return C},Dt=me,fe=-1,Ae=-1,be="-1",De="-1",or=-1,Fr="-1",Jr=function(){function i(e,t,r,n){e===void 0&&(e=fe),t===void 0&&(t=Ae),r===void 0&&(r=Ae),n===void 0&&(n=be),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),Pn=function(){function i(e,t){e===void 0&&(e=Ae),t===void 0&&(t=De),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),Bn=function(){function i(e,t,r){e===void 0&&(e=Ae),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new Pn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new Jr(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new Jr(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),Zn=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||De,edgeLabel:n||be,nodeLabel2:a||De}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),ba=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new Zn(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=or),t===void 0&&(t=!1);var r=new Bn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==De&&r.addNode(a,u),c!==De&&r.addNode(o,c),u!==De&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),Ca=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),li=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,g=l===void 0?!1:l,p=e.verbose,C=p===void 0?!1:p;this.graphs=t,this.dfsCode=new ba,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=g,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=C,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var g=f[l],p=o[g.to].label;t.to===g.to||r>p||n.hasNode(o[g.to])||(t.label<g.label||t.label===g.label&&s<=p)&&a.push(g)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(or,r),a=n.nodeMap,o=new ba,s={};n.nodes.forEach(function(l){var g=e.findForwardRootEdges(n,l);g.forEach(function(p){var C=a[p.to],G="".concat(l.label,"-").concat(p.label,"-").concat(C.label);s[G]||(s[G]={projected:[],nodeLabel1:l.label,edgeLabel:p.label,nodeLabel2:C.label});var H={graphId:n.id,edge:p,preNode:null};s[G].projected.push(H)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new Zn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(g){for(var p=o.buildRmpath(),C=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,G=o.dfsEdgeList[p[0]].toNode,H={},J=!1,nt=0,ut=r?-1:0,lt=function(En){if(J)return"break";g.forEach(function(yn){var Ar=new Ca(yn),Xr=e.findBackwardEdge(n,Ar.edges[p[En]],Ar.edges[p[0]],Ar);Xr&&(H[Xr.label]||(H[Xr.label]={projected:[],edgeLabel:Xr.label}),H[Xr.label].projected.push({graphId:n.id,edge:H,preNode:yn}),nt=o.dfsEdgeList[p[En]].fromNode,J=!0)})},_t=p.length-1;_t>ut;_t--){var Bt=lt(_t);if(Bt==="break")break}if(J){var Rt=e.findMinLabel(H);o.dfsEdgeList.push(new Zn(G,nt,De,Rt.edgeLabel,De));var Qt=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[Qt]!==o.dfsEdgeList[Qt]?!1:l(H[Rt.edgeLabel].projected)}var de={};J=!1;var se=0;g.forEach(function(Mr){var En=new Ca(Mr),yn=e.findForwardPureEdges(n,En.edges[p[0]],C,En);yn.length>0&&(J=!0,se=G,yn.forEach(function(Ar){var Xr="".concat(Ar.label,"-").concat(a[Ar.to].label);de[Xr]||(de[Xr]={projected:[],edgeLabel:Ar.label,nodeLabel2:a[Ar.to].label}),de[Xr].projected.push({graphId:n.id,edge:Ar,preNode:Mr})}))});for(var Te=p.length,je=function(En){if(J)return"break";var yn=p[En];g.forEach(function(Ar){var Xr=new Ca(Ar),sn=e.findForwardRmpathEdges(n,Xr.edges[yn],C,Xr);sn.length>0&&(J=!0,se=o.dfsEdgeList[yn].fromNode,sn.forEach(function(un){var An="".concat(un.label,"-").concat(a[un.to].label);de[An]||(de[An]={projected:[],edgeLabel:un.label,nodeLabel2:a[un.to].label}),de[An].projected.push({graphId:n.id,edge:un,preNode:Ar})}))})},_t=0;_t<Te;_t++){var Dr=je(_t);if(Dr==="break")break}if(!J)return!0;var Kr=e.findMinLabel(de);o.dfsEdgeList.push(new Zn(se,G+1,De,Kr.edgeLabel,Kr.nodeLabel2));var zr=o.dfsEdgeList.length-1;return t.dfsEdgeList[zr]!==o.dfsEdgeList[zr]?!1:l(de["".concat(Kr.edgeLabel,"-").concat(Kr.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,d.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],g=l.nodeMap,p=new Ca(c),C=a.length-1;C>=0;C--){var G=t.findBackwardEdge(l,p.edges[a[C]],p.edges[a[0]],p);if(G){var H="".concat(t.dfsCode.dfsEdgeList[a[C]].fromNode,"-").concat(G.label);f[H]||(f[H]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[C]].fromNode,edgeLabel:G.label}),f[H].projected.push({graphId:c.graphId,edge:G,preNode:c})}}if(!(n>=t.maxNodeNum)){var J=t.findForwardPureEdges(l,p.edges[a[0]],s,p);J.forEach(function(ut){var lt="".concat(o,"-").concat(ut.label,"-").concat(g[ut.to].label);u[lt]||(u[lt]={projected:[],fromNodeId:o,edgeLabel:ut.label,nodeLabel2:g[ut.to].label}),u[lt].projected.push({graphId:c.graphId,edge:ut,preNode:c})});for(var nt=function(lt){var _t=t.findForwardRmpathEdges(l,p.edges[a[lt]],s,p);_t.forEach(function(Bt){var Rt="".concat(t.dfsCode.dfsEdgeList[a[lt]].fromNode,"-").concat(Bt.label,"-").concat(g[Bt.to].label);u[Rt]||(u[Rt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[lt]].fromNode,edgeLabel:Bt.label,nodeLabel2:g[Bt.to].label}),u[Rt].projected.push({graphId:c.graphId,edge:Bt,preNode:c})})},C=0;C<a.length;C++)nt(C)}}),Object.keys(f).forEach(function(c){var l=f[c],g=l.toNodeId,p=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new Zn(o,g,"-1",p,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],g=l.fromNodeId,p=l.edgeLabel,C=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Zn(g,o+1,De,p,C)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(g,p){var C=g.label,G="".concat(f,"-").concat(C);if(!s[G]){var H=a[C]||0;H++,a[C]=H}s[G]={graphKey:f,label:C},g.edges.forEach(function(J){var nt=C,ut=l[J.to].label;if(!t&&nt>ut){var lt=ut;ut=nt,nt=lt}var _t=J.label,Bt="".concat(f,"-").concat(nt,"-").concat(_t,"-").concat(ut),Rt="".concat(nt,"-").concat(_t,"-").concat(ut);if(!o[Rt]){var Qt=o[Rt]||0;Qt++,o[Rt]=Qt}u[Bt]={graphId:f,nodeLabel1:nt,edgeLabel:_t,nodeLabel2:ut}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],g="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[g]||(n[g]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var p={graphId:a,edge:c,preNode:null};n[g].projected.push(p)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Zn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),ta=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new Bn(s,!0,t),c={};u.nodes.forEach(function(l,g){f.addNode(g,l[r]),c[l.id]=g}),u.edges.forEach(function(l,g){var p=c[l.source],C=c[l.target];f.addEdge(-1,p,C,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},fi=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},Co="cluster",La=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?Co:a,s=e.edgeLabelProp,u=s===void 0?Co:s,f=ta(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,g=e.minNodeNum,p=e.verbose,C=e.top,G={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:g,top:C,verbose:p,directed:n},H=new li(G);H.run();var J=fi(H.frequentSubgraphs,o,u);return J},xi=La,so=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(To(o,s,u,r,n))}),a},To=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},bo=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,g=0,p=f.nodeIdxs,C=f.neighborNum-1;l<o;){for(var G=p[1+Math.floor(Math.random()*C)],H=0;(s["".concat(c,"-").concat(G)]||s["".concat(G,"-").concat(c)])&&(G=Math.floor(Math.random()*t),H++,!(H>2*t)););if(H<2*t&&(s["".concat(c,"-").concat(G)]={start:c,end:G,distance:a[c][G]},l++,u++,u>=r))return s;if(g++,g>2*t)break}if(l<o){var J=o-l;o=(o+J)/(t-c-1)}}),s},uo=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var g=new Set(l),p=c.filter(function(nt){return g.has(nt)});if(!(!p||!p.length)){for(var C={},G=p.length,H=0;H<G;H++){var J=a[p[H]];n[o].nodes.push(J),C[J.id]=!0}r.edges.forEach(function(nt){C[nt.source]&&C[nt.target]&&n[o].edges.push(nt)})}}}}),n},Hi=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],g=t==null?void 0:t.nodes[0][r],p=t==null?void 0:t.nodes[1][r],C=t==null?void 0:t.edges[0][n];f[n]===C&&(c===g&&l===p||c===p&&l===g)&&u++}),u)},ds=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function(nt,ut){return c[nt]-c[ut]}),g=10,p=[];l.forEach(function(nt,ut){p[ut%g]||(p[ut%g]={graphs:[],totalCount:0,aveCount:0}),p[ut%g].graphs.push(nt),p[ut%g].totalCount+=c[nt]});var C=0,G=[];p.forEach(function(nt){var ut=nt.totalCount/nt.graphs.length;nt.aveCount=ut,G.push(ut);var lt=0,_t=nt.length;nt.graphs.forEach(function(Bt,Rt){var Qt=c[Bt];nt.graphs.forEach(function(de,se){Rt!==se&&(lt+=Math.abs(Qt-c[de]))})}),lt/=_t*(_t-1)/2,C+=lt}),C/=p.length;var H=0;G.forEach(function(nt,ut){G.forEach(function(lt,_t){ut!==_t&&(H+=Math.abs(nt-lt))}),H/=G.length*(G.length-1)/2});var J=H-C;n<J&&(n=J,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},zi=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},Ui=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(we)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},gs=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,g=o[c];a["".concat(f,"-").concat(l)]=g,r||(a["".concat(l,"-").concat(f)]=g)}}),a},Ms=function(e,t,r,n,a,o,s,u,f,c,l){var g,p="".concat(t.id,"-").concat(r.id);if(c&&c[p])return c[p];var C=l?l[p]:void 0;if(!C){var G=(g={},g[p]={start:n[t.id].idx,end:n[r.id].idx,distance:a},g);l=uo(G,o,e,l),C=l[p]}return Hi(C,s,u,f)},Go=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(l){var g=r[l.id].degree;u>g&&(u=g);var p=r[l.id].inDegree;f>p&&(f=p);var C=r[l.id].outDegree;c>C&&(c=C)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},_o=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=pn(e,r),l=pn(t,r),g=gs(e.nodes,c,r),p=gs(t.nodes,l,r),C=zi(e.nodes,o),G=C.nodeMap,H=C.nodeLabelMap,J=zi(t.nodes,o),nt=J.nodeMap,ut=J.nodeLabelMap;Ui(e.edges,s,G);var lt=Ui(t.edges,s,nt).edgeLabelMap,_t=[];l==null||l.forEach(function(Va){_t=_t.concat(Va)}),a||(a=Math.max.apply(Math,(0,x.__spreadArray)((0,x.__spreadArray)([],_t,!1),[2],!1))),n||(n=a);var Bt=so(e,c,o,n),Rt=so(t,l,o,n),Qt=Math.min(100,f*(f-1)/2),de=bo(n,f,Qt,Bt,c),se=uo(de,Bt,e),Te=10,je=1,Dr=1,Kr=4,zr={graphs:se,nodeLabelProp:o,edgeLabelProp:s,minSupport:je,minNodeNum:Dr,maxNodeNum:Kr,directed:r},Mr=xi(zr).slice(0,Te),En=Mr.length,yn=[];Mr.forEach(function(Va,hi){yn[hi]={},Object.keys(se).forEach(function(Wa){var vi=se[Wa],Li=Hi(vi,Va,o,s);yn[hi][Wa]=Li})});var Ar=ds(yn,En,Mr),Xr=Ar.structure,sn=Ar.structureCountMap,un=t.nodes[0],An=[],Gn=(u=t.nodes[0])===null||u===void 0?void 0:u[o],ga=-1/0;t.nodes.forEach(function(Va){var hi=Va[o],Wa=H[hi];(Wa==null?void 0:Wa.length)>ga&&(ga=Wa.length,An=Wa,Gn=hi,un=Va)});var Oa={},gi={},ti={},pi={},wi={},ji={};Object.keys(ut).forEach(function(Va,hi){wi[Va]=[],r&&(ji[Va]=[]);var Wa=-1/0,vi=ut[Va],Li={};vi.forEach(function(Qa){var ui=p["".concat(un.id,"-").concat(Qa.id)];if(ui&&wi[Va].push(ui),Wa<ui&&(Wa=ui),Li["".concat(un.id,"-").concat(Qa.id)]={start:0,end:nt[Qa.id].idx,distance:ui},r){var oo=p["".concat(Qa.id,"-").concat(un.id)];oo&&ji[Va].push(oo)}}),wi[Va]=wi[Va].sort(function(Qa,ui){return Qa-ui}),r&&(ji[Va]=ji[Va].sort(function(Qa,ui){return Qa-ui})),gi=uo(Li,Rt,t,gi);var ra=[];if(Object.keys(Li).forEach(function(Qa){if(ti[Qa]){ra.push(ti[Qa]);return}var ui=gi[Qa];ti[Qa]=Hi(ui,Xr,o,s),ra.push(ti[Qa])}),ra=ra.sort(function(Qa,ui){return ui-Qa}),pi["".concat(un.id,"-").concat(Va)]=ra,Va!==Gn)for(var Ka=(An==null?void 0:An.length)||0,$a=function(ui){var oo=An[ui],_u=Bt[G[oo.id].idx],Fo=_u.nodeLabelCountMap[Va],Bl=ut[Va].length;if(!Fo||Fo.count<Bl)return An.splice(ui,1),"continue";for(var gh=!1,Ks=0;Ks<Bl;Ks++)if(Fo.dists[Ks]>wi[Va][Ks]){gh=!0;break}if(gh)return An.splice(ui,1),"continue";var Uu={};_u.neighbors.forEach(function(Zs){var ef=g["".concat(oo.id,"-").concat(Zs.id)];Uu["".concat(oo.id,"-").concat(Zs.id)]={start:G[oo.id].idx,end:G[Zs.id].idx,distance:ef}}),se=uo(Uu,Bt,e,se);var Nf=[];Object.keys(Uu).forEach(function(Zs){if(sn[Zs]){Nf.push(sn[Zs]);return}var ef=se[Zs];sn[Zs]=Hi(ef,Xr,o,s),Nf.push(sn[Zs])}),Nf=Nf.sort(function(Zs,ef){return ef-Zs});for(var tl=!1,Ks=0;Ks<Bl;Ks++)if(Nf[Ks]<ra[Ks]){tl=!0;break}if(tl)return An.splice(ui,1),"continue"},Di=Ka-1;Di>=0;Di--)$a(Di)});var Pi=[];An==null||An.forEach(function(Va){for(var hi=G[Va.id].idx,Wa=To(e.nodes,c[hi],hi,o,a),vi=Wa.neighbors,Li=vi.length,ra=!1,Ka=Li-1;Ka>=0;Ka--){if(vi.length+1<t.nodes.length){ra=!0;return}var $a=vi[Ka],Di=$a[o];if(!ut[Di]||!ut[Di].length){vi.splice(Ka,1);continue}if(!wi[Di]||!wi[Di].length){vi.splice(Ka,1);continue}var Qa="".concat(Va.id,"-").concat($a.id),ui=g[Qa],oo=wi[Di].length-1,_u=wi[Di][oo];if(ui>_u){vi.splice(Ka,1);continue}if(r){var Fo="".concat($a.id,"-").concat(Va.id),Bl=g[Fo];oo=ji[Di].length-1;var gh=ji[Di][oo];if(Bl>gh){vi.splice(Ka,1);continue}}var Ks=sn[Qa]?sn[Qa]:Ms(e,Va,$a,G,ui,Bt,Xr,o,s,sn,se),Uu="".concat(un.id,"-").concat(Di),Nf=pi[Uu][pi[Uu].length-1];if(Ks<Nf){vi.splice(Ka,1);continue}var tl=Go(Oa,Di,nt,ut),Zs=tl.minPatternNodeLabelDegree,ef=tl.minPatternNodeLabelInDegree,yc=tl.minPatternNodeLabelOutDegree;if(G[$a.id].degree<Zs){vi.splice(Ka,1);continue}}ra||Pi.push({nodes:[Va].concat(vi)})});var Gu=qe(t,un.id,!1).length,$o={};r?(Object.keys(Gu).forEach(function(Va){var hi=nt[Va].node[o];$o[hi]?$o[hi].push(Gu[Va]):$o[hi]=[Gu[Va]]}),Object.keys($o).forEach(function(Va){$o[Va].sort(function(hi,Wa){return hi-Wa})})):$o=wi;for(var zu=Pi.length,qo=function(hi){var Wa=Pi[hi],vi=Wa.nodes[0],Li={},ra={};Wa.nodes.forEach(function(to,Su){ra[to.id]={idx:Su,node:to,degree:0,inDegree:0,outDegree:0};var as=to[o];Li[as]?Li[as]++:Li[as]=1});var Ka=[],$a={};e.edges.forEach(function(to){ra[to.source]&&ra[to.target]&&(Ka.push(to),$a[to[s]]?$a[to[s]]++:$a[to[s]]=1,ra[to.source].degree++,ra[to.target].degree++,ra[to.source].outDegree++,ra[to.target].inDegree++)});for(var Di=Object.keys(lt).length,Qa=!1,ui=0;ui<Di;ui++){var oo=Object.keys(lt)[ui];if(!$a[oo]||$a[oo]<lt[oo].length){Qa=!0;break}}if(Qa)return Pi.splice(hi,1),"continue";var _u=Ka.length;if(_u<t.edges.length)return Pi.splice(hi,1),"break";for(var Fo=!1,Bl=function(Su){var as=Ka[Su],Pf=as[s],Fl=lt[Pf];if(!Fl||!Fl.length)return $a[Pf]--,Fl&&$a[Pf]<Fl.length?(Fo=!0,"break"):(Ka.splice(Su,1),ra[as.source].degree--,ra[as.target].degree--,ra[as.source].outDegree--,ra[as.target].inDegree--,"continue");var ey=ra[as.source].node[o],ry=ra[as.target].node[o],Ud=!1;if(Fl.forEach(function(ny){var ay=nt[ny.source].node,iy=nt[ny.target].node;ay[o]===ey&&iy[o]===ry&&(Ud=!0),!r&&ay[o]===ry&&iy[o]===ey&&(Ud=!0)}),!Ud)return $a[Pf]--,Fl&&$a[Pf]<Fl.length?(Fo=!0,"break"):(Ka.splice(Su,1),ra[as.source].degree--,ra[as.target].degree--,ra[as.source].outDegree--,ra[as.target].inDegree--,"continue")},ui=_u-1;ui>=0;ui--){var gh=Bl(ui);if(gh==="break")break}if(Fo)return Pi.splice(hi,1),"continue";Wa.edges=Ka;var Ks=qe(Wa,Wa.nodes[0].id,!1).length;if(Object.keys(Ks).reverse().forEach(function(to){if(!(to===Wa.nodes[0].id||Fo)){if(Ks[to]===1/0){var Su=ra[to].node[o];if(Li[Su]--,Li[Su]<ut[Su].length){Fo=!0;return}var as=Wa.nodes.indexOf(ra[to].node);Wa.nodes.splice(as,1),ra[to]=void 0;return}var Pf=G[to].node[o];if(!$o[Pf]||!$o[Pf].length||Ks[to]>$o[Pf][$o[Pf].length-1]){var Su=ra[to].node[o];if(Li[Su]--,Li[Su]<ut[Su].length){Fo=!0;return}var as=Wa.nodes.indexOf(ra[to].node);Wa.nodes.splice(as,1),ra[to]=void 0}}}),Fo)return Pi.splice(hi,1),"continue";for(var Uu=!0,Nf=0;Uu&&!Fo;){Uu=!1;var tl=r?ra[vi.id].degree<nt[un.id].degree||ra[vi.id].inDegree<nt[un.id].inDegree||ra[vi.id].outDegree<nt[un.id].outDegree:ra[vi.id].degree<nt[un.id].degree;if(tl){Fo=!0;break}if(Li[vi[o]]<ut[vi[o]].length){Fo=!0;break}for(var Zs=Wa.nodes.length,ef=Zs-1;ef>=0;ef--){var yc=Wa.nodes[ef],J0=ra[yc.id].degree,SS=ra[yc.id].inDegree,MS=ra[yc.id].outDegree,AS=yc[o],zd=Go(Oa,AS,nt,ut),ty=zd.minPatternNodeLabelDegree,CS=zd.minPatternNodeLabelInDegree,TS=zd.minPatternNodeLabelOutDegree,IS=r?J0<ty||SS<CS||MS<TS:J0<ty;if(IS){if(Li[yc[o]]--,Li[yc[o]]<ut[yc[o]].length){Fo=!0;break}Wa.nodes.splice(ef,1),ra[yc.id]=void 0,Uu=!0}}if(Fo||!Uu&&Nf!==0)break;_u=Ka.length;for(var Nv=_u-1;Nv>=0;Nv--){var mc=Ka[Nv];if(!ra[mc.source]||!ra[mc.target]){Ka.splice(Nv,1);var Pv=mc[s];if($a[Pv]--,ra[mc.source]&&(ra[mc.source].degree--,ra[mc.source].outDegree--),ra[mc.target]&&(ra[mc.target].degree--,ra[mc.target].inDegree--),lt[Pv]&&$a[Pv]<lt[Pv].length){Fo=!0;break}Uu=!0}}Nf++}if(Fo||Fo||Wa.nodes.length<t.nodes.length||Ka.length<t.edges.length)return Pi.splice(hi,1),"continue"},Qo=zu-1;Qo>=0;Qo--){var wu=qo(Qo);if(wu==="break")break}for(var Ss=Pi.length,Hs=function(hi){var Wa=Pi[hi],vi={};Wa.edges.forEach(function(Ka){var $a="".concat(Ka.source,"-").concat(Ka.target,"-").concat(Ka.label);vi[$a]?vi[$a]++:vi[$a]=1});for(var Li=function($a){var Di=Pi[$a],Qa={};Di.edges.forEach(function(oo){var _u="".concat(oo.source,"-").concat(oo.target,"-").concat(oo.label);Qa[_u]?Qa[_u]++:Qa[_u]=1});var ui=!0;Object.keys(Qa).length!==Object.keys(vi).length?ui=!1:Object.keys(vi).forEach(function(oo){Qa[oo]!==vi[oo]&&(ui=!1)}),ui&&Pi.splice($a,1)},ra=Ss-1;ra>hi;ra--)Li(ra);Ss=Pi.length},Qo=0;Qo<=Ss-1;Qo++)Hs(Qo);return Pi}}},Io=_o,$s=function(){function i(e){e===void 0&&(e=10),this.linkedList=new Pe,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Yn=$s,So=Nn,Oo={getAdjMatrix:kt,breadthFirstSearch:Ie,connectedComponent:Oe,getDegree:_e,getInDegree:Ge,getOutDegree:Ct,detectCycle:Nn,detectDirectedCycle:So,detectAllCycles:ln,detectAllDirectedCycle:Rr,detectAllUndirectedCycle:gn,depthFirstSearch:Ur,dijkstra:qe,findAllPath:Pr,findShortestPath:vr,floydWarshall:pn,labelPropagation:jn,louvain:Pt,iLouvain:ve,kCore:br,kMeans:Mn,cosineSimilarity:hr,nodesCosineSimilarity:on,minimumSpanningTree:Vn,pageRank:Dt,getNeighbors:ae,Stack:Yn,GADDI:Io},Wi=z(277160),zn=z(631437),Lo=Kt,Ai=function(e){return function(t,r){return t[e]-r[e]}},zo=function(e,t,r){return e>=t&&e<=r},Uo=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,g=s.x*s.x+s.y*s.y,p=u.x*u.x+u.y*u.y;if(c>a*g*p){var C=(o.x*u.y-o.y*u.x)*l,G=(o.x*s.y-o.y*s.x)*l;return!zo(C,0,1)||!zo(G,0,1)?null:{x:e.x+C*s.x,y:e.y+C*s.y}}return null},ps=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,g=1;g<f.length&&(l=Uo(f[g-1],f[g],c,t),!l);g++);return l},eo=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},ro=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},ei=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Wi.transformMat3(n,n,t),{x:n[0],y:n[1]}},fo=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=it.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return Wi.transformMat3(a,a,n),{x:a[0],y:a[1]}},Do=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},Wo=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},No=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},is=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},Xo=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},Jo=function(e,t){e.translate(t.x,t.y)},Xa=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,g=0,p=0,C=0;e.animate(function(H){return p=f*H,C=c*H,a=Lo(a,[["t",p-l,C-g]]),l=p,g=C,{matrix:a}},n)}else{var G=Lo(a,[["t",s,u]]);e.setMatrix(G)}},As=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,d.isArray)(t)||(n=[t,t]),(0,d.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=Lo(r,[["s",n[0],n[1]]]),e.setMatrix(r)},iu=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=Lo(r,[["r",t]]),e.setMatrix(r)},Xi=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function os(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var Eo=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(os(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},Yi=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},co=function(e,t){var r=!1;return(0,d.each)(e,function(n){if(Uo(n.from,n.to,t.from,t.to))return r=!0,!1}),r},pa=function(e,t){var r=function(g){var p=g.map(function(G){return G[0]}),C=g.map(function(G){return G[1]});return{minX:Math.min.apply(null,p),maxX:Math.max.apply(null,p),minY:Math.min.apply(null,C),maxY:Math.max.apply(null,C)}},n=function(g){for(var p=[],C=g.length,G=0;G<C-1;G++){var H=g[G],J=g[G+1];p.push({from:{x:H[0],y:H[1]},to:{x:J[0],y:J[1]}})}if(p.length>1){var nt=g[0],ut=g[C-1];p.push({from:{x:ut[0],y:ut[1]},to:{x:nt[0],y:nt[1]}})}return p};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!Yi(a,o))return!1;var s=!1;if((0,d.each)(t,function(l){if(Eo(e,l[0],l[1]))return s=!0,!1}),s||((0,d.each)(e,function(l){if(Eo(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,d.each)(f,function(l){if(co(u,l))return c=!0,!1}),c},ja=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),yi=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},no=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},ki=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=yi(n,r[s]),f=u[0],c=u[1],l=u[2],g=u[3];o[s]=Uo({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:g}),o[s]&&(a+=1)}return[o,a]},Ki=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=yi(n,r[s]),f=u[0],c=u[1],l=u[2],g=u[3],p=no(t,new ja(f,c,l,g));p=Math.abs(p-.5),p>=0&&p<=1&&(o+=1,a=p<a?p:a)}return o===0?-1:a},Yo=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},wo=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},ts=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},lo=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},Rs=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},ou=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(zn.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];zn.normalize(c,c);var l=[s-r,u-n];return Math.abs(zn.dot(l,c))},Cs=function(e,t,r){return e+(t-e)*r},ci=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=Cs(e[o],t[o],r);return a},Po="rgb(95, 149, 255)",Wu="rgb(255, 255, 255)",ho="rgb(0, 0, 0)",Bs="rgb(247, 250, 255)",Ts="rgb(239, 244, 255)",Vo="rgb(253, 253, 253)",Fs="rgb(250, 250, 250)",ss="rgb(224, 224, 224)",jo="rgb(234, 234, 234)",us="rgb(245, 245, 245)",su="rgb(191, 213, 255)",Gs="#4572d9",fs="rgb(223, 234, 255)",Tt={mainStroke:Po,mainFill:Ts,activeStroke:Po,activeFill:Bs,inactiveStroke:su,inactiveFill:Bs,selectedStroke:Po,selectedFill:Wu,highlightStroke:Gs,highlightFill:fs,disableStroke:ss,disableFill:Fs,edgeMainStroke:ss,edgeActiveStroke:Po,edgeInactiveStroke:jo,edgeSelectedStroke:Po,edgeHighlightStroke:Po,edgeDisableStroke:us,comboMainStroke:ss,comboMainFill:Vo,comboActiveStroke:Po,comboActiveFill:Bs,comboInactiveStroke:ss,comboInactiveFill:Vo,comboSelectedStroke:Po,comboSelectedFill:Vo,comboHighlightStroke:Gs,comboHighlightFill:Vo,comboDisableStroke:jo,comboDisableFill:Fs},jt={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Tt.mainStroke,fill:Ts},size:20,color:Tt.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Tt.activeFill,stroke:Tt.activeStroke}},nodeStateStyles:{active:{fill:Tt.activeFill,stroke:Tt.activeStroke,lineWidth:2,shadowColor:Tt.mainStroke,shadowBlur:10},selected:{fill:Tt.selectedFill,stroke:Tt.selectedStroke,lineWidth:4,shadowColor:Tt.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Tt.highlightFill,stroke:Tt.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Tt.inactiveFill,stroke:Tt.inactiveStroke,lineWidth:1},disable:{fill:Tt.disableFill,stroke:Tt.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:ho,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Tt.edgeMainStroke,lineAppendWidth:2},color:Tt.edgeMainStroke},edgeStateStyles:{active:{stroke:Tt.edgeActiveStroke,lineWidth:1},selected:{stroke:Tt.edgeSelectedStroke,lineWidth:2,shadowColor:Tt.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tt.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Tt.edgeInactiveStroke,lineWidth:1},disable:{stroke:Tt.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:ho,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Tt.comboMainFill,lineWidth:1,stroke:Tt.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Tt.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Tt.comboActiveStroke,lineWidth:1,fill:Tt.comboActiveFill},selected:{stroke:Tt.comboSelectedStroke,lineWidth:2,fill:Tt.comboSelectedFill,shadowColor:Tt.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tt.comboHighlightStroke,lineWidth:2,fill:Tt.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Tt.comboInactiveStroke,fill:Tt.comboInactiveFill,lineWidth:1},disable:{stroke:Tt.comboDisableStroke,fill:Tt.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ze={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ke=Math.PI,Cr=Math.sin,cn=Math.cos,mn=Cr(Ke/8),aa=cn(Ke/8),ai=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=ei(n,o),a=ei(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},Zi=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||jt.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],g=[e.endPoint.x,e.endPoint.y],p=o.height/2,C=o.width/2,G=p,H=p,J=G*mn,nt=G*aa,ut=H*mn,lt=H*aa,_t=a.get("type"),Bt=Math.min(p/2,C/2),Rt=Math.min(p,C),Qt=s!=null&&s.pointPadding?Math.min(Rt,s==null?void 0:s.pointPadding):Bt;if(l[0]===g[0]&&l[1]===g[1]){switch(f){case"top":_t==="circle"?(l=[c[0]-J,c[1]-nt],g=[c[0]+ut,c[1]-lt]):(l=[c[0]-Qt,c[1]-p],g=[c[0]+Qt,c[1]-p]);break;case"top-right":G=p,H=C,_t==="circle"?(J=G*mn,nt=G*aa,ut=H*mn,lt=H*aa,l=[c[0]+J,c[1]-nt],g=[c[0]+lt,c[1]-ut]):(l=[c[0]+C-Qt,c[1]-p],g=[c[0]+C,c[1]-p+Qt]);break;case"right":G=C,H=C,_t==="circle"?(J=G*mn,nt=G*aa,ut=H*mn,lt=H*aa,l=[c[0]+nt,c[1]-J],g=[c[0]+lt,c[1]+ut]):(l=[c[0]+C,c[1]-Qt],g=[c[0]+C,c[1]+Qt]);break;case"bottom-right":G=C,H=p,_t==="circle"?(J=G*mn,nt=G*aa,ut=H*mn,lt=H*aa,l=[c[0]+nt,c[1]+J],g=[c[0]+ut,c[1]+lt]):(l=[c[0]+C,c[1]+p-Qt],g=[c[0]+C-Qt,c[1]+p]);break;case"bottom":G=p,H=p,_t==="circle"?(J=G*mn,nt=G*aa,ut=H*mn,lt=H*aa,l=[c[0]+J,c[1]+nt],g=[c[0]-ut,c[1]+lt]):(l=[c[0]-Qt,c[1]+p],g=[c[0]+Qt,c[1]+p]);break;case"bottom-left":G=p,H=C,_t==="circle"?(J=G*mn,nt=G*aa,ut=H*mn,lt=H*aa,l=[c[0]-J,c[1]+nt],g=[c[0]-lt,c[1]+ut]):(l=[c[0]-C,c[1]+p-Qt],g=[c[0]-C+Qt,c[1]+p]);break;case"left":G=C,H=C,_t==="circle"?(J=G*mn,nt=G*aa,ut=H*mn,lt=H*aa,l=[c[0]-nt,c[1]+J],g=[c[0]-lt,c[1]-ut]):(l=[c[0]-C,c[1]-Qt],g=[c[0]-C,c[1]+Qt]);break;case"top-left":G=C,H=p,_t==="circle"?(J=G*mn,nt=G*aa,ut=H*mn,lt=H*aa,l=[c[0]-nt,c[1]-J],g=[c[0]-ut,c[1]-lt]):(l=[c[0]-C+Qt,c[1]-p],g=[c[0]-C,c[1]-p+Qt]);break;default:G=C,H=C,J=G*mn,nt=G*aa,ut=H*mn,lt=H*aa,l=[c[0]-J,c[1]-nt],g=[c[0]+ut,c[1]-lt]}if(s.clockwise===!1){var de=[l[0],l[1]];l=[g[0],g[1]],g=[de[0],de[1]]}}var se=[l[0]-c[0],l[1]-c[1]],Te=(G+u)/G,je=(H+u)/H;s.clockwise===!1&&(Te=(H+u)/H,je=(G+u)/G);var Dr=zn.scale([0,0],se,Te),Kr=[c[0]+Dr[0],c[1]+Dr[1]],zr=[g[0]-c[0],g[1]-c[1]],Mr=zn.scale([0,0],zr,je),En=[c[0]+Mr[0],c[1]+Mr[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:g[0],y:g[1]},e.controlPoints=[{x:Kr[0],y:Kr[1]},{x:En[0],y:En[1]}],e},ao=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Ke*2),r&&(u.x+=cn(c)*r,u.y+=Cr(c)*r),n){var l=c-Ke/2;c>1/2*Ke&&c<3*1/2*Ke&&(l-=Ke),u.x+=cn(l)*n,u.y+=Cr(l)*n}var g={x:u.x,y:u.y,angle:c};return a?(c>.5*Ke&&c<1.5*Ke&&(c-=Ke),(0,x.__assign)({rotate:c},g)):g},zs=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},Mu=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Ri=function(e,t){typeof t=="function"&&zs(e,null,-1,t)},vo=function(e,t){typeof t=="function"&&Mu(e,null,-1,t)},qs=function(e,t){return t*(ze[e]||1)},Xu=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=qs(a,t)}),[r,t]},Au=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},uu=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,d.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var g=n[l.parentId];if(g)g.children?g.children.push(c):g.children=[c];else{var p={id:l.parentId,children:[l]};n[l.parentId]=p,n[c.id]=c}return}if((0,d.isString)(u.parentId)){var C=n[u.parentId];if(C)C.children?C.children.push(c):C.children=[c],n[c.id]=c;else{var G={id:u.parentId,children:[c]};n[G.id]=G,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,Ri(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var g=o[f.id];return g&&(g.depth=f.depth),!0})}),r},Qs=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(C){if(!u){if(C.id===t){o=C,C.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Ri(C,function(G){var H;return s[G.id]={children:(G==null?void 0:G.children)||[]},a=(H=s[G.parentId||G.comboId||"root"])===null||H===void 0?void 0:H.children,G&&(G.removed||t===G.id)&&a?(f=G.parentId||G.comboId||"root",o=G,G.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var g=0;(e||[]).forEach(function(C){l||Ri(C,function(G){return r===G.id?(l=!0,G.children?G.children.push(o):G.children=[o],g=G.depth,o.itemType==="node"?o.depth=g+2:o.depth=g+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var p=o.depth;Ri(o,function(C){return C.itemType==="node"?p+=2:p+=1,C.depth=p,!0})}return e},fu=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,l=o.fixCollapseSize,g=c?l:f,p=(0,d.isArray)(g)?g:[g,g],C=p[0],G=p[1],H=[C/2,G/2];return{minX:s-H[0],minY:u-H[1],maxX:s+H[0],maxY:u+H[1],x:s,y:u,width:C,height:G}}return e.forEach(function(J){var nt=t.findById(J.id);if(!(!nt||!nt.isVisible())){nt.set("bboxCanvasCache",void 0);var ut=nt.getCanvasBBox();ut.x&&n.minX>ut.minX&&(n.minX=ut.minX),ut.y&&n.minY>ut.minY&&(n.minY=ut.minY),ut.x&&n.maxX<ut.maxX&&(n.maxX=ut.maxX),ut.y&&n.maxY<ut.maxY&&(n.maxY=ut.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(J){(n[J]===1/0||n[J]===-1/0)&&(n[J]=void 0)}),n},Is=function(e){var t=(0,d.isNumber)(e.x)||(0,d.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,d.isNumber)(e.style.r)||(0,d.isNumber)(e.style.width)||(0,d.isNumber)(e.style.height)||(0,d.isNumber)(e.style.rx)||(0,d.isNumber)(e.style.ry)),t},Js=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(!(r==="img"&&!(0,d.isString)(n)))if((0,d.isObject)(n)&&!(0,d.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,d.isString)(s)||(a[o]=(0,d.clone)(s))}),t[r]=a}else t[r]=(0,d.clone)(n)}),t},cs=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,d.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},Mo=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Ri(e,function(g){return(0,d.isString)(g.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(g){return!(0,d.isString)(g.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(g){return g.id}),f=a==null?void 0:a.map(function(g){return g.id}),c=(0,x.__spreadArray)((0,x.__spreadArray)([],u,!0),f,!0),l=(r||[]).find(function(g){return!c.includes(g.source)||!c.includes(g.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},rf=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,d.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},kf=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,d.each)(e,function(t){(0,d.each)(t,function(r,n){(0,d.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,d.each)(r||[],function(o){var s=j.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,d.each)(t,function(r){e.indexOf(r)<0&&((0,d.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,d.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,d.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,d.isArray)(e)?a=e:a=[e],(0,d.isArray)(t))return(0,d.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,d.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),Rf=kf,Os=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Bf=new RegExp("([a-z])["+Os+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Os+"]*,?["+Os+"]*)+)","ig"),h=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Os+"]*,?["+Os+"]*","ig"),T=function(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Bf,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(h,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},vt=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},Et=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},Lt=function(i){if(i=T(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,g=o,p=i.length;g<p;g++){if(e.push(c=[]),l=i[g],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var C=2,G=u.length;C<G;C++)u[C]=+u[C]+t,u[++C]=+u[C]+r;e.pop(),e=e.concat(vt(u,f));break;case"O":e.pop(),u=Et(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(Et(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var C=1,G=l.length;C<G;C++)c[C]=+l[C]+(C%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(vt(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=Et(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(Et(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var H=0,J=l.length;H<J;H++)c[H]=l[H];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},Xt=function(i,e,t,r){return[i,e,t,r,t,r]},Vt=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},ue=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),g=[],p,C,G,H,J,nt=function(gi,ti,pi){var wi=gi*Math.cos(pi)-ti*Math.sin(pi),ji=gi*Math.sin(pi)+ti*Math.cos(pi);return{x:wi,y:ji}};if(f)C=f[0],G=f[1],H=f[2],J=f[3];else{p=nt(i,e,-l),i=p.x,e=p.y,p=nt(s,u,-l),s=p.x,u=p.y,i===s&&e===u&&(s+=1,u+=1);var ut=(i-s)/2,lt=(e-u)/2,_t=ut*ut/(t*t)+lt*lt/(r*r);_t>1&&(_t=Math.sqrt(_t),t=_t*t,r=_t*r);var Bt=t*t,Rt=r*r,Qt=(a===o?-1:1)*Math.sqrt(Math.abs((Bt*Rt-Bt*lt*lt-Rt*ut*ut)/(Bt*lt*lt+Rt*ut*ut)));H=Qt*t*lt/r+(i+s)/2,J=Qt*-r*ut/t+(e+u)/2,C=Math.asin(((e-J)/r).toFixed(9)),G=Math.asin(((u-J)/r).toFixed(9)),C=i<H?Math.PI-C:C,G=s<H?Math.PI-G:G,C<0&&(C=Math.PI*2+C),G<0&&(G=Math.PI*2+G),o&&C>G&&(C=C-Math.PI*2),!o&&G>C&&(G=G-Math.PI*2)}var de=G-C;if(Math.abs(de)>c){var se=G,Te=s,je=u;G=C+c*(o&&G>C?1:-1),s=H+t*Math.cos(G),u=J+r*Math.sin(G),g=ue(s,u,t,r,n,0,o,Te,je,[G,se,H,J])}de=G-C;var Dr=Math.cos(C),Kr=Math.sin(C),zr=Math.cos(G),Mr=Math.sin(G),En=Math.tan(de/4),yn=4/3*t*En,Ar=4/3*r*En,Xr=[i,e],sn=[i+yn*Kr,e-Ar*Dr],un=[s+yn*Mr,u-Ar*zr],An=[s,u];if(sn[0]=2*Xr[0]-sn[0],sn[1]=2*Xr[1]-sn[1],f)return[sn,un,An].concat(g);g=[sn,un,An].concat(g).join().split(",");for(var Gn=[],ga=0,Oa=g.length;ga<Oa;ga++)Gn[ga]=ga%2?nt(g[ga-1],g[ga],l).y:nt(g[ga],g[ga+1],l).x;return Gn},he=function(i,e){var t=Lt(i),r=e&&Lt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(ut,lt,_t){var Bt,Rt;if(!ut)return["C",lt.x,lt.y,lt.x,lt.y,lt.x,lt.y];switch(!(ut[0]in{T:1,Q:1})&&(lt.qx=lt.qy=null),ut[0]){case"M":lt.X=ut[1],lt.Y=ut[2];break;case"A":ut=["C"].concat(ue.apply(0,[lt.x,lt.y].concat(ut.slice(1))));break;case"S":_t==="C"||_t==="S"?(Bt=lt.x*2-lt.bx,Rt=lt.y*2-lt.by):(Bt=lt.x,Rt=lt.y),ut=["C",Bt,Rt].concat(ut.slice(1));break;case"T":_t==="Q"||_t==="T"?(lt.qx=lt.x*2-lt.qx,lt.qy=lt.y*2-lt.qy):(lt.qx=lt.x,lt.qy=lt.y),ut=["C"].concat(Vt(lt.x,lt.y,lt.qx,lt.qy,ut[1],ut[2]));break;case"Q":lt.qx=ut[1],lt.qy=ut[2],ut=["C"].concat(Vt(lt.x,lt.y,ut[1],ut[2],ut[3],ut[4]));break;case"L":ut=["C"].concat(Xt(lt.x,lt.y,ut[1],ut[2]));break;case"H":ut=["C"].concat(Xt(lt.x,lt.y,ut[1],lt.y));break;case"V":ut=["C"].concat(Xt(lt.x,lt.y,lt.x,ut[1]));break;case"Z":ut=["C"].concat(Xt(lt.x,lt.y,lt.X,lt.Y));break;default:break}return ut},g=function(ut,lt){if(ut[lt].length>7){ut[lt].shift();for(var _t=ut[lt];_t.length;)o[lt]="A",r&&(s[lt]="A"),ut.splice(lt++,0,["C"].concat(_t.splice(0,6)));ut.splice(lt,1),c=Math.max(t.length,r&&r.length||0)}},p=function(ut,lt,_t,Bt,Rt){ut&&lt&&ut[Rt][0]==="M"&&lt[Rt][0]!=="M"&&(lt.splice(Rt,0,["M",Bt.x,Bt.y]),_t.bx=0,_t.by=0,_t.x=ut[Rt][1],_t.y=ut[Rt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var C=0;C<c;C++){t[C]&&(u=t[C][0]),u!=="C"&&(o[C]=u,C&&(f=o[C-1])),t[C]=l(t[C],n,f),o[C]!=="A"&&u==="C"&&(o[C]="C"),g(t,C),r&&(r[C]&&(u=r[C][0]),u!=="C"&&(s[C]=u,C&&(f=s[C-1])),r[C]=l(r[C],a,f),s[C]!=="A"&&u==="C"&&(s[C]="C"),g(r,C)),p(t,r,n,a,C),p(r,t,a,n,C);var G=t[C],H=r&&r[C],J=G.length,nt=r&&H.length;n.x=G[J-2],n.y=G[J-1],n.bx=parseFloat(G[J-4])||n.x,n.by=parseFloat(G[J-3])||n.y,a.bx=r&&(parseFloat(H[nt-4])||a.x),a.by=r&&(parseFloat(H[nt-3])||a.y),a.x=r&&H[nt-2],a.y=r&&H[nt-1]}return r?[t,r]:t},Ce=/,?([a-z]),?/gi,Ye=function(i){return i.join(",").replace(Ce,"$1")},pr=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},xr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,C=0;C<c;C++){var G=f*l[C]+f,H=pr(G,i,t,n,o),J=pr(G,e,r,a,s),nt=H*H+J*J;p+=g[C]*Math.sqrt(nt)}return f*p},gr=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,g,p,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,g=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,g=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;p=-g/l,p>0&&p<1&&u.push(p);continue}var G=l*l-4*g*c,H=Math.sqrt(G);if(!(G<0)){var J=(-l+H)/(2*c);J>0&&J<1&&u.push(J);var nt=(-l-H)/(2*c);nt>0&&nt<1&&u.push(nt)}}for(var ut=u.length,lt=ut,_t;ut--;)p=u[ut],_t=1-p,f[0][ut]=_t*_t*_t*i+3*_t*_t*p*t+3*_t*p*p*n+p*p*p*o,f[1][ut]=_t*_t*_t*e+3*_t*_t*p*r+3*_t*p*p*a+p*p*p*s;return f[0][lt]=i,f[1][lt]=e,f[0][lt+1]=o,f[1][lt+1]=s,f[0].length=f[1].length=lt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Zr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,g=f/c,p=+l.toFixed(2),C=+g.toFixed(2);if(!(p<+Math.min(i,t).toFixed(2)||p>+Math.max(i,t).toFixed(2)||p<+Math.min(n,o).toFixed(2)||p>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:g}}}},qr=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Tr=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=Ye,a},_n=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:Tr(i,e,t,r),vb:[i,e,t,r].join(" ")}},Ea=function(i,e){return i=_n(i),e=_n(e),qr(e,i.x,i.y)||qr(e,i.x2,i.y)||qr(e,i.x,i.y2)||qr(e,i.x2,i.y2)||qr(i,e.x,e.y)||qr(i,e.x2,e.y)||qr(i,e.x,e.y2)||qr(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},wa=function(i,e,t,r,n,a,o,s){(0,d.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=gr.apply(null,i);return _n(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},ha=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),g=u*u,p=g*u,C=c*i+l*3*u*t+f*3*u*u*n+p*o,G=c*e+l*3*u*r+f*3*u*u*a+p*s,H=i+2*u*(t-i)+g*(n-2*t+i),J=e+2*u*(r-e)+g*(a-2*r+e),nt=t+2*u*(n-t)+g*(o-2*n+t),ut=r+2*u*(a-r)+g*(s-2*a+r),lt=f*i+u*t,_t=f*e+u*r,Bt=f*n+u*o,Rt=f*a+u*s,Qt=90-Math.atan2(H-nt,J-ut)*180/Math.PI;return{x:C,y:G,m:{x:H,y:J},n:{x:nt,y:ut},start:{x:lt,y:_t},end:{x:Bt,y:Rt},alpha:Qt}},qn=function(i,e,t){var r=wa(i),n=wa(e);if(!Ea(r,n))return t?0:[];for(var a=xr.apply(0,i),o=xr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},g=t?0:[],p=0;p<s+1;p++){var C=ha.apply(0,i.concat(p/s));f.push({x:C.x,y:C.y,t:p/s})}for(var p=0;p<u+1;p++){var C=ha.apply(0,e.concat(p/u));c.push({x:C.x,y:C.y,t:p/u})}for(var p=0;p<s;p++)for(var G=0;G<u;G++){var H=f[p],J=f[p+1],nt=c[G],ut=c[G+1],lt=Math.abs(J.x-H.x)<.001?"y":"x",_t=Math.abs(ut.x-nt.x)<.001?"y":"x",Bt=Zr(H.x,H.y,J.x,J.y,nt.x,nt.y,ut.x,ut.y);if(Bt){if(l[Bt.x.toFixed(4)]===Bt.y.toFixed(4))continue;l[Bt.x.toFixed(4)]=Bt.y.toFixed(4);var Rt=H.t+Math.abs((Bt[lt]-H[lt])/(J[lt]-H[lt]))*(J.t-H.t),Qt=nt.t+Math.abs((Bt[_t]-nt[_t])/(ut[_t]-nt[_t]))*(ut.t-nt.t);Rt>=0&&Rt<=1&&Qt>=0&&Qt<=1&&(t?g+=1:g.push({x:Bt.x,y:Bt.y,t1:Rt,t2:Qt}))}}return g},sa=function(i,e,t){i=he(i),e=he(e);for(var r,n,a,o,s,u,f,c,l,g,p=t?0:[],C=0,G=i.length;C<G;C++){var H=i[C];if(H[0]==="M")r=s=H[1],n=u=H[2];else{H[0]==="C"?(l=[r,n].concat(H.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var J=0,nt=e.length;J<nt;J++){var ut=e[J];if(ut[0]==="M")a=f=ut[1],o=c=ut[2];else{ut[0]==="C"?(g=[a,o].concat(ut.slice(1)),a=g[6],o=g[7]):(g=[a,o,a,o,f,c,f,c],a=f,o=c);var lt=qn(l,g,t);if(t)p+=lt;else{for(var _t=0,Bt=lt.length;_t<Bt;_t++)lt[_t].segment1=C,lt[_t].segment2=J,lt[_t].bez1=l,lt[_t].bez2=g;p=p.concat(lt)}}}}}return p},Ni=function(i,e){return sa(i,e)};function Ci(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function _i(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=Ci(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var g=[];return l.length===4&&(g.push("C"),g=g.concat(l[2])),l.length>=3&&(l.length===3&&g.push("Q"),g=g.concat(l[1])),l.length===2&&g.push("L"),g=g.concat(l[l.length-1]),g});return c}var Ti=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(_i(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},Ii=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(Ti(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Bi=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,d.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function $i(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var za=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],Bi(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,g=s[u-1][f-1].min+o;s[u][f]=$i(c,l,g)}}return s},ii=function(i,e){var t=za(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function ls(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=ys(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function ys(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var ko=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=ys(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=ls(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=ls(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=ls(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},Cu=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),Ff=Cu;function xc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var bc=typeof window!="undefined"&&typeof window.document!="undefined";function Ec(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function Gf(i){return i.cfg.visible&&i.cfg.capture}var zf=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,d.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Q),wc=zf,nf=z(734155),af=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},_c=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),of=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=nf.platform}return i}(),cu=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),Sc=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),wn=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Tu=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ua=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,sf=3,Uf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Tu]],Us=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Wf(i){return i?Yf(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new wn:typeof navigator!="undefined"?Yf(navigator.userAgent):ms()}function lu(i){return i!==""&&Uf.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function Xf(i){var e=lu(i);return e?e[0]:null}function Yf(i){var e=lu(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Sc;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<sf&&(n=af(af([],n,!0),jf(sf-n.length),!0)):n=[];var a=n.join("."),o=Vf(i),s=Ua.exec(i);return s&&s[1]?new cu(t,a,o,s[1]):new _c(t,a,o)}function Vf(i){for(var e=0,t=Us.length;e<t;e++){var r=Us[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function ms(){var i=typeof nf!="undefined"&&nf.version;return i?new of(nf.version.slice(1)):null}function jf(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function Hf(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],g=e[0],p=e[1],C=e[2],G=e[3],H=e[4],J=e[5],nt=e[6],ut=e[7],lt=e[8];return t[0]=g*r+p*o+C*f,t[1]=g*n+p*s+C*c,t[2]=g*a+p*u+C*l,t[3]=G*r+H*o+J*f,t[4]=G*n+H*s+J*c,t[5]=G*a+H*u+J*l,t[6]=nt*r+ut*o+lt*f,t[7]=nt*n+ut*s+lt*c,t[8]=nt*a+ut*u+lt*l,t}function bi(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Yu(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,g=-c*a+s*u,p=f*a-o*u,C=t*l+r*g+n*p;return C?(C=1/C,e[0]=l*C,e[1]=(-c*r+n*f)*C,e[2]=(s*r-n*o)*C,e[3]=g*C,e[4]=(c*t-n*u)*C,e[5]=(-s*t+n*a)*C,e[6]=p*C,e[7]=(-f*t+r*u)*C,e[8]=(o*t-r*a)*C,e):null}var xs=Kt,tt="matrix",pt=["zIndex","capture","visible","type"],St=["repeat"],Ut=":",ne="*";function Be(i){for(var e=[],t=0;t<i.length;t++)(0,d.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Ue(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function sr(i,e){var t={},r=e.attr();return(0,d.each)(i,function(n,a){St.indexOf(a)===-1&&!(0,d.isEqual)(r[a],n)&&(t[a]=n)}),t}function Br(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,d.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,d.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var Hr=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,d.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,d.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(xc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(tt,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(tt)},e.prototype.setMatrix=function(t){this.attr(tt,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=Hf(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=Hf(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?bi(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=Yu(r);if(n)return bi(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,d.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,d.each)(r,function(s,u){(0,d.isArray)(r[u])?n[u]=Be(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,d.each)(pt,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?d.noop:c,g=t[4],p=g===void 0?0:g,C,G,H,J,nt;(0,d.isFunction)(o)?(C=o,o={}):(0,d.isObject)(o)&&o.onFrame&&(C=o.onFrame,G=o.repeat),(0,d.isObject)(s)?(nt=s,s=nt.duration,f=nt.easing||"easeLinear",p=nt.delay||0,G=nt.repeat||G||!1,l=nt.callback||d.noop,H=nt.pauseCallback||d.noop,J=nt.resumeCallback||d.noop):((0,d.isNumber)(l)&&(p=l,l=null),(0,d.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var ut=sr(o,this),lt={fromAttrs:Ue(ut,this),toAttrs:ut,duration:s,easing:f,repeat:G,callback:l,pauseCallback:H,resumeCallback:J,delay:p,startTime:n.getTime(),id:(0,d.uniqueId)(),onFrame:C,pathFormatted:!1};a.length>0?a=Br(a,lt):n.addAnimator(this),a.push(lt),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,d.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,d.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,d.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(g){var p=a[g],C=p.get("name");if(C){if((p.isGroup()||p.isCanvas&&p.isCanvas())&&s&&Ec(p,s))return"break";(0,d.isArray)(C)?(0,d.each)(C,function(G){n.emitDelegateEvent(p,G,r)}):f.emitDelegateEvent(p,C,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+Ut+n.type;(a[o]||a[ne])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=xs(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=xs(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=xs(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=xs(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=xs(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(wc),xn=Hr,Tn={},vn="_INDEX";function fa(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){fa(r,e)})}}function da(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){da(r,e)})}}function ya(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function na(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),xc(i.getChildren(),e)}function Da(i){return function(e,t){var r=i(e,t);return r===0?e[vn]-t[vn]:r}}var Fn=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,d.each)(o,function(u){var f=u.getBBox(),c=f.minX,l=f.maxX,g=f.minY,p=f.maxY;c<t&&(t=c),l>r&&(r=l),g<n&&(n=g),p>a&&(a=p)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,d.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,l=f.maxX,g=f.minY,p=f.maxY;c<t&&(t=c),l>r&&(r=l),g<n&&(n=g),p>a&&(a=p)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,d.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,d.isObject)(n)?a=n:a.type=n;var o=Tn[a.type];o||(o=(0,d.upperFirst)(a.type),Tn[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,d.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!Gf(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(Gf(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&na(o,t,!1),t.set("parent",this),r&&fa(t,r),a&&da(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,d.each)(t,function(r,n){return r[vn]=n,r}),t.sort(Da(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,d.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,d.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(xn),Ia=Fn,ia=0,Un=0,Ma=0,qa=1e3,ri,Ba,Fa=0,oi=0,Oi=0,Ei=typeof performance=="object"&&performance.now?performance:Date,bs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function uf(){return oi||(bs(tu),oi=Ei.now()+Oi)}function tu(){oi=0}function Ws(){this._call=this._time=this._next=null}Ws.prototype=hu.prototype={constructor:Ws,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?uf():+t)+(e==null?0:+e),!this._next&&Ba!==this&&(Ba?Ba._next=this:ri=this,Ba=this),this._call=i,this._time=t,Vu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vu())}};function hu(i,e,t){var r=new Ws;return r.restart(i,e,t),r}function ff(){uf(),++ia;for(var i=ri,e;i;)(e=oi-i._time)>=0&&i._call.call(null,e),i=i._next;--ia}function vu(){oi=(Fa=Ei.now())+Oi,ia=Un=0;try{ff()}finally{ia=0,Mc(),oi=0}}function el(){var i=Ei.now(),e=i-Fa;e>qa&&(Oi-=e,Fa=i)}function Mc(){for(var i,e=ri,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:ri=t);Ba=i,Vu(r)}function Vu(i){if(!ia){Un&&(Un=clearTimeout(Un));var e=i-oi;e>24?(i<1/0&&(Un=setTimeout(vu,i-Ei.now()-Oi)),Ma&&(Ma=clearInterval(Ma))):(Ma||(Fa=Ei.now(),Ma=setInterval(el,qa)),ia=1,bs(vu))}}var cf=z(918698);function lf(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function Es(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function eu(){}var Xs=.7,ju=1/Xs,go="\\s*([+-]?\\d+)\\s*",Ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ys="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hf=/^#([0-9a-f]{3,8})$/,Gl=new RegExp("^rgb\\(".concat(go,",").concat(go,",").concat(go,"\\)$")),vf=new RegExp("^rgb\\(".concat(Ys,",").concat(Ys,",").concat(Ys,"\\)$")),rl=new RegExp("^rgba\\(".concat(go,",").concat(go,",").concat(go,",").concat(Ls,"\\)$")),nl=new RegExp("^rgba\\(".concat(Ys,",").concat(Ys,",").concat(Ys,",").concat(Ls,"\\)$")),al=new RegExp("^hsl\\(".concat(Ls,",").concat(Ys,",").concat(Ys,"\\)$")),il=new RegExp("^hsla\\(".concat(Ls,",").concat(Ys,",").concat(Ys,",").concat(Ls,"\\)$")),Ac={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lf(eu,df,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Kf,formatHex:Kf,formatHex8:zl,formatHsl:Ul,formatRgb:ol,toString:ol});function Kf(){return this.rgb().formatHex()}function zl(){return this.rgb().formatHex8()}function Ul(){return cl(this).formatHsl()}function ol(){return this.rgb().formatRgb()}function df(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=hf.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?sl(e):t===3?new es(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?gf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?gf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Gl.exec(i))?new es(e[1],e[2],e[3],1):(e=vf.exec(i))?new es(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rl.exec(i))?gf(e[1],e[2],e[3],e[4]):(e=nl.exec(i))?gf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=al.exec(i))?qf(e[1],e[2]/100,e[3]/100,1):(e=il.exec(i))?qf(e[1],e[2]/100,e[3]/100,e[4]):Ac.hasOwnProperty(i)?sl(Ac[i]):i==="transparent"?new es(NaN,NaN,NaN,0):null}function sl(i){return new es(i>>16&255,i>>8&255,i&255,1)}function gf(i,e,t,r){return r<=0&&(i=e=t=NaN),new es(i,e,t,r)}function ul(i){return i instanceof eu||(i=df(i)),i?(i=i.rgb(),new es(i.r,i.g,i.b,i.opacity)):new es}function Zf(i,e,t,r){return arguments.length===1?ul(i):new es(i,e,t,r==null?1:r)}function es(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}lf(es,Zf,Es(eu,{brighter:function(e){return e=e==null?ju:Math.pow(ju,e),new es(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Xs:Math.pow(Xs,e),new es(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new es(Iu(this.r),Iu(this.g),Iu(this.b),Ne(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fl,formatHex:fl,formatHex8:$f,formatRgb:Cc,toString:Cc}));function fl(){return"#".concat(Ds(this.r)).concat(Ds(this.g)).concat(Ds(this.b))}function $f(){return"#".concat(Ds(this.r)).concat(Ds(this.g)).concat(Ds(this.b)).concat(Ds((isNaN(this.opacity)?1:this.opacity)*255))}function Cc(){var i=Ne(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(Iu(this.r),", ").concat(Iu(this.g),", ").concat(Iu(this.b)).concat(i===1?")":", ".concat(i,")"))}function Ne(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Iu(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Ds(i){return i=Iu(i),(i<16?"0":"")+i.toString(16)}function qf(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Ns(i,e,t,r)}function cl(i){if(i instanceof Ns)return new Ns(i.h,i.s,i.l,i.opacity);if(i instanceof eu||(i=df(i)),!i)return new Ns;if(i instanceof Ns)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new Ns(o,s,u,i.opacity)}function ll(i,e,t,r){return arguments.length===1?cl(i):new Ns(i,e,t,r==null?1:r)}function Ns(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}lf(Ns,ll,Es(eu,{brighter:function(e){return e=e==null?ju:Math.pow(ju,e),new Ns(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Xs:Math.pow(Xs,e),new Ns(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new es(pf(e>=240?e-240:e+120,a,n),pf(e,a,n),pf(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new Ns(hl(this.h),Ou(this.s),Ou(this.l),Ne(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Ne(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(hl(this.h),", ").concat(Ou(this.s)*100,"%, ").concat(Ou(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function hl(i){return i=(i||0)%360,i<0?i+360:i}function Ou(i){return Math.max(0,Math.min(1,i||0))}function pf(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function Tc(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function Ic(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return Tc((t-r/e)*e,o,n,a,s)}}function po(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return Tc((t-r/e)*e,n,a,o,s)}}var Lu=function(i){return function(){return i}};function Oc(i,e){return function(t){return i+t*e}}function Qf(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function du(i,e){var t=e-i;return t?Oc(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function yf(i){return(i=+i)==1?Du:function(e,t){return t-e?Qf(e,t,i):Lu(isNaN(e)?t:e)}}function Du(i,e){var t=e-i;return t?Oc(i,t):Lu(isNaN(i)?e:i)}var gu=function i(e){var t=yf(e);function r(n,a){var o=t((n=Zf(n)).r,(a=Zf(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=Du(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function Hu(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=Zf(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var mf=Hu(Ic),xf=Hu(po);function Nu(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function Jf(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Lc(i,e){return(Jf(e)?Nu:bf)(i,e)}function bf(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=wf(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function vl(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function tc(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Ef(i,e){var t={},r={},n;(i===null||cf(i)!=="object")&&(i={}),(e===null||cf(e)!=="object")&&(e={});for(n in e)n in i?t[n]=wf(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var hs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ec=new RegExp(hs.source,"g");function Wl(i){return function(){return i}}function Dc(i){return function(e){return i(e)+""}}function dl(i,e){var t=hs.lastIndex=ec.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=hs.exec(i))&&(n=ec.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:tc(r,n)})),t=ec.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Dc(u[0].x):Wl(e):(e=u.length,function(f){for(var c=0,l;c<e;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}function wf(i,e){var t=cf(e),r;return e==null||t==="boolean"?Lu(e):(t==="number"?tc:t==="string"?(r=df(e))?(e=r,gu):dl:e instanceof df?gu:e instanceof Date?vl:Jf(e)?Nu:Array.isArray(e)?bf:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ef:tc)(i,e)}function Xl(i){return+i}function Ku(i){return i*i}function Yl(i){return i*(2-i)}function gl(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function ph(i){return i*i*i}function Vl(i){return--i*i*i+1}function pl(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var yl=3,jl=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(yl),Hl=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(yl),Kl=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(yl),ml=Math.PI,xl=ml/2;function Zl(i){return+i==1?1:1-Math.cos(i*xl)}function $l(i){return Math.sin(i*xl)}function Nc(i){return(1-Math.cos(ml*i))/2}function Ps(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function Pc(i){return Ps(1-+i)}function kc(i){return 1-Ps(i)}function rc(i){return((i*=2)<=1?Ps(1-i):2-Ps(i-1))/2}function bl(i){return 1-Math.sqrt(1-i*i)}function Rc(i){return Math.sqrt(1- --i*i)}function nc(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var Zu=4/11,El=6/11,Bc=8/11,Fc=3/4,Gc=9/11,ac=10/11,ic=15/16,_f=21/22,oc=63/64,pu=1/Zu/Zu;function ql(i){return 1-yu(1-i)}function yu(i){return(i=+i)<Zu?pu*i*i:i<Bc?pu*(i-=El)*i+Fc:i<ac?pu*(i-=Gc)*i+ic:pu*(i-=_f)*i+oc}function $u(i){return((i*=2)<=1?1-yu(1-i):yu(i-1)+1)/2}var zc=1.70158,Uc=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(zc),yh=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(zc),Ql=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(zc),Sf=2*Math.PI,ru=1,Wc=.3,Jl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Sf);function n(a){return e*Ps(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*Sf)},n.period=function(a){return i(e,a)},n}(ru,Wc),wl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Sf);function n(a){return 1-e*Ps(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*Sf)},n.period=function(a){return i(e,a)},n}(ru,Wc),mh=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Sf);function n(a){return((a=a*2-1)<0?e*Ps(-a)*Math.sin((r-a)/t):2-e*Ps(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*Sf)},n.period=function(a){return i(e,a)},n}(ru,Wc),_l={};function xh(i){return _l[i.toLowerCase()]||N[i]}function Ho(i,e){_l[i.toLowerCase()]=e}var th=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},Mf=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},mu=[1,0,0,0,1,0,0,0,1];function eh(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,d.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=T(a[s]),f=T(n[s]),f=ii(f,u),f=ko(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=T(a[s]),f=T(n[s]),f=ko(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],g=f[c],p=[],C=0;C<l.length;C++)(0,d.isNumber)(l[C])&&g&&(0,d.isNumber)(g[C])?(o=wf(g[C],l[C]),p.push(o(t))):p.push(l[C]);r[s].push(p)}}else if(s==="matrix"){var G=Lc(n[s]||mu,a[s]||mu),H=G(t);r[s]=H}else th(s)&&Mf(a[s])?r[s]=a[s]:(0,d.isFunction)(a[s])||(o=wf(n[s],a[s]),r[s]=o(t));i.attr(r)}}function Sl(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=xh(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else eh(i,e,a);return!1}var Xc=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=hu(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=Sl(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),rh=Xc,rs=40,xu=0,qi=":",Ro=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ml(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(qi+e)>=0)return!0;return!1}function nh(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function ah(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&Ec(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var bh=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(Ro,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(Ro,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new Ff(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===xu&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===xu){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,g=s.clientY-e.clientY,p=l*l+g*g;c>120||p>rs?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,nh(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||ah(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;nh(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),Eh=bh,Al="px",ih=Wf(),wh=ih&&ih.name==="firefox",_h=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,d.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Eh({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new rh(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");bc&&(n.style.width=t+Al,n.style.height=r+Al)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");bc&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(wh&&!(0,d.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,d.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(Ia),oh=_h,sh=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(Ia),Yc=sh,Vc=function(i){(0,x.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=bi(r,[t.minX,t.minY]),f=bi(r,[t.maxX,t.minY]),c=bi(r,[t.minX,t.maxY]),l=bi(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var g=this.attrs;if(g.shadowColor){var p=g.shadowBlur,C=p===void 0?0:p,G=g.shadowOffsetX,H=G===void 0?0:G,J=g.shadowOffsetY,nt=J===void 0?0:J,ut=n-C+H,lt=o+C+H,_t=a-C+nt,Bt=s+C+nt;n=Math.min(n,ut),o=Math.max(o,lt),a=Math.min(a,_t),s=Math.max(s,Bt)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(xn),Cl=Vc,uh=new Map;function Vs(i,e){uh.set(i,e)}function Tl(i){return uh.get(i)}function sc(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function mt(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function qt(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Ee(i,e){return Math.abs(i-e)<.001}function fr(i,e){var t=(0,d.min)(i),r=(0,d.min)(e),n=(0,d.max)(i),a=(0,d.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function Lr(i,e,t,r){return{minX:(0,d.min)([i,t]),maxX:(0,d.max)([i,t]),minY:(0,d.min)([e,r]),maxY:(0,d.max)([e,r])}}function cr(i){return(i+Math.PI*2)%(Math.PI*2)}var lr={box:function(i,e,t,r){return fr([i,t],[e,r])},length:function(i,e,t,r){return qt(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return qt(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?qt(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(zn.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];zn.normalize(s,s);var u=[n-i,a-e];return Math.abs(zn.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},Yr=1e-4;function Vr(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,g=0;g<=f;g++){var p=g*c,C=[n.apply(null,i.concat([p])),n.apply(null,e.concat([p]))],G=qt(u[0],u[1],C[0],C[1]);G<s&&(o=p,s=G)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var H=i.length;return{x:i[H-1],y:e[H-1]}}s=1/0;for(var g=0;g<32&&!(l<Yr);g++){var J=o-l,nt=o+l,C=[n.apply(null,i.concat([J])),n.apply(null,e.concat([J]))],G=qt(u[0],u[1],C[0],C[1]);if(J>=0&&G<s)o=J,s=G;else{var ut=[n.apply(null,i.concat([nt])),n.apply(null,e.concat([nt]))],lt=qt(u[0],u[1],ut[0],ut[1]);nt<=1&&lt<s?(o=nt,s=lt):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function $r(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=qt(a,o,s,u)}return t/2}function Gr(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function nn(i,e,t){var r=i+t-2*e;if(Ee(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function v(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function _(i,e,t,r,n,a,o){var s=Gr(i,t,n,o),u=Gr(e,r,a,o),f=lr.pointAt(i,e,t,r,o),c=lr.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function F(i,e,t,r,n,a,o){if(o===0)return(qt(i,e,t,r)+qt(t,r,n,a)+qt(i,e,n,a))/2;var s=_(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),F.apply(null,u)+F.apply(null,f)}var Z={box:function(i,e,t,r,n,a){var o=nn(i,t,n)[0],s=nn(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(Gr(i,t,n,o)),s!==void 0&&f.push(Gr(e,r,a,s)),fr(u,f)},length:function(i,e,t,r,n,a){return F(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return Vr([i,t,n],[e,r,a],o,s,Gr)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return qt(u.x,u.y,o,s)},interpolationAt:Gr,pointAt:function(i,e,t,r,n,a,o){return{x:Gr(i,t,n,o),y:Gr(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return _(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=v(i,t,n,o),u=v(e,r,a,o),f=Math.atan2(u,s);return cr(f)}};function ot(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function ct(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function gt(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(Ee(n,0))Ee(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;Ee(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function bt(i,e,t,r,n,a,o,s,u){var f=ot(i,t,n,o,u),c=ot(e,r,a,s,u),l=lr.pointAt(i,e,t,r,u),g=lr.pointAt(t,r,n,a,u),p=lr.pointAt(n,a,o,s,u),C=lr.pointAt(l.x,l.y,g.x,g.y,u),G=lr.pointAt(g.x,g.y,p.x,p.y,u);return[[i,e,l.x,l.y,C.x,C.y,f,c],[f,c,G.x,G.y,p.x,p.y,o,s]]}function Mt(i,e,t,r,n,a,o,s,u){if(u===0)return $r([i,t,n,o],[e,r,a,s]);var f=bt(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),Mt.apply(null,c)+Mt.apply(null,l)}var Gt={extrema:gt,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=gt(i,t,n,o),l=gt(e,r,a,s),g=0;g<c.length;g++)u.push(ot(i,t,n,o,c[g]));for(var g=0;g<l.length;g++)f.push(ot(e,r,a,s,l[g]));return fr(u,f)},length:function(i,e,t,r,n,a,o,s){return Mt(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return Vr([i,t,n,o],[e,r,a,s],u,f,ot,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return qt(l.x,l.y,u,f)},interpolationAt:ot,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:ot(i,t,n,o,u),y:ot(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return bt(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=ct(i,t,n,o,u),c=ct(e,r,a,s,u);return cr(Math.atan2(c,f))}};function te(i,e){var t=Math.abs(i);return e>0?t:t*-1}var Zt={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),g=o*o,p=s*s,C=Math.PI/4,G,H,J=0;J<4;J++){G=o*Math.cos(C),H=s*Math.sin(C);var nt=(g-p)*Math.pow(Math.cos(C),3)/o,ut=(p-g)*Math.pow(Math.sin(C),3)/s,lt=G-nt,_t=H-ut,Bt=c-nt,Rt=l-ut,Qt=Math.hypot(_t,lt),de=Math.hypot(Rt,Bt),se=Qt*Math.asin((lt*Rt-_t*Bt)/(Qt*de)),Te=se/Math.sqrt(g+p-G*G-H*H);C+=Te,C=Math.min(Math.PI/2,Math.max(0,C))}return{x:i+te(G,u),y:e+te(H,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return qt(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return cr(o)}};function ye(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function We(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function wr(i,e,t){return Math.atan(-e/i*Math.tan(t))}function Ze(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function Je(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function Qe(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function jr(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function hn(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function tn(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var kn={box:function(i,e,t,r,n,a,o){for(var s=wr(t,r,n),u=1/0,f=-1/0,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var g=s+l;a<o?a<g&&g<o&&c.push(g):o<g&&g<a&&c.push(g)}for(var l=0;l<c.length;l++){var p=Je(i,e,t,r,n,c[l]);p<u&&(u=p),p>f&&(f=p)}for(var C=Ze(t,r,n),G=1/0,H=-1/0,J=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var nt=C+l;a<o?a<nt&&nt<o&&J.push(nt):o<nt&&nt<a&&J.push(nt)}for(var l=0;l<J.length;l++){var ut=Qe(i,e,t,r,n,J[l]);ut<G&&(G=ut),ut>H&&(H=ut)}return{x:u,y:G,width:f-u,height:H-G}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=tn(s-i,u-e,-n),c=f[0],l=f[1],g=Zt.nearestPoint(0,0,t,r,c,l),p=jr(t,r,g.x,g.y);p<a?g=hn(t,r,a):p>o&&(g=hn(t,r,o));var C=tn(g.x,g.y,n);return{x:C[0]+i,y:C[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return qt(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:Je(i,e,t,r,n,u),y:Qe(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=ye(i,e,t,r,n,a,o,u),c=We(i,e,t,r,n,a,o,u);return cr(Math.atan2(c,f))}};function In(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=qt(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function Kn(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=qt(r[0],r[1],n[0],n[1])}return e}function ca(i,e){if(e>1||e<0||i.length<2)return null;var t=In(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var g=(e-a)/l;o=lr.pointAt(f[0],f[1],c[0],c[1],g);break}a+=l}return o}function ea(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=In(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function mi(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=lr.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var va={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return fr(e,t)},length:function(i){return Kn(i)},pointAt:function(i,e){return ca(i,e)},pointDistance:function(i,e,t){return mi(i,e,t)},tangentAngle:function(i,e){return ea(i,e)}};function Si(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var di={box:function(i){return va.box(i)},length:function(i){return Kn(Si(i))},pointAt:function(i,e){return ca(Si(i),e)},pointDistance:function(i,e,t){return mi(Si(i),e,t)},tangentAngle:function(i,e){return ea(Si(i),e)}};function Pa(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Mi(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=Pa(e,n)),r&&(a=r.getCanvasBBox(),e=Pa(e,a)),e}function Fi(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=fr(r,n),u=s.x,f=s.y,c=s.width,l=s.height,g={minX:u,minY:f,maxX:u+c,maxY:f+l};return g=Mi(i,g),{x:g.minX,y:g.minY,width:g.maxX-g.minX,height:g.maxY-g.minY}}function yo(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return fr(r,n)}var Ao=null;function Qi(){if(!Ao){var i=document.createElement("canvas");i.width=1,i.height=1,Ao=i.getContext("2d")}return Ao}function _a(i,e,t){var r=1;if((0,d.isString)(i)&&(r=i.split(`
`).length),r>1){var n=Ko(e,t);return e*r+n*(r-1)}return e}function Ko(i,e){return e?e-i:i*.14}function ni(i,e){var t=Qi(),r=0;if((0,d.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,d.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,d.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function $n(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function ka(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=$n(e));var u=ni(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,g=_a(n,a,o),p={x:t,y:r-g};c&&(c==="end"||c==="right"?p.x-=u:c==="center"&&(p.x-=u/2)),l&&(l==="top"?p.y+=g:l==="middle"&&(p.y+=g/2)),f={x:p.x,y:p.y,width:u,height:g}}return f}var Ha=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,io=/[^\s\,]+/ig;function Pu(i){var e=i||[];if((0,d.isArray)(e))return e;if((0,d.isString)(e))return e=e.match(Ha),(0,d.each)(e,function(t,r){if(t=t.match(io),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,d.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var uc=Pu;function pe(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,g;if(a){u=r[0],f=r[1];for(var p=0,C=i.length;p<C;p+=1){var G=i[p];u=zn.min([0,0],u,G),f=zn.max([0,0],f,G)}}for(var p=0,H=i.length;p<H;p+=1){var G=i[p];if(p===0&&!t)g=G;else if(p===H-1&&!t)l=G,n.push(g),n.push(l);else{var J=[p?p-1:H-1,p-1][t?0:1];o=i[J],s=i[t?(p+1)%H:p+1];var nt=[0,0];nt=zn.sub(nt,s,o),nt=zn.scale(nt,nt,e);var ut=zn.distance(G,o),lt=zn.distance(G,s),_t=ut+lt;_t!==0&&(ut/=_t,lt/=_t);var Bt=zn.scale([0,0],nt,-ut),Rt=zn.scale([0,0],nt,lt);l=zn.add([0,0],G,Bt),c=zn.add([0,0],G,Rt),c=zn.min([0,0],c,zn.max([0,0],s,G)),c=zn.max([0,0],c,zn.min([0,0],s,G)),Bt=zn.sub([0,0],c,G),Bt=zn.scale([0,0],Bt,-ut/lt),l=zn.add([0,0],G,Bt),l=zn.min([0,0],l,zn.max([0,0],o,G)),l=zn.max([0,0],l,zn.min([0,0],o,G)),Rt=zn.sub([0,0],G,l),Rt=zn.scale([0,0],Rt,lt/ut),c=zn.add([0,0],G,Rt),a&&(l=zn.max([0,0],l,u),l=zn.min([0,0],l,f),c=zn.max([0,0],c,u),c=zn.min([0,0],c,f)),n.push(g),n.push(l),g=c}}return t&&n.push(n.shift()),n}function dr(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=pe(n,.4,r,t),u=n.length,f=[],c,l,g,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],g=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],g[0],g[1]]);return r&&(c=s[u],l=s[u+1],g=n[0],f.push(["C",c[0],c[1],l[0],l[1],g[0],g[1]])),f}var ur=dr;function Sn(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Na=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,g=s[u-1][f-1].min+o;s[u][f]=Sn(c,l,g)}}return s};function le(i,e){var t=Na(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var Ht=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,ke=new RegExp("([a-z])["+Ht+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ht+"]*,?["+Ht+"]*)+)","ig"),er=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ht+"]*,?["+Ht+"]*","ig");function nr(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(ke,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(er,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var Fe=/[a-z]/;function Re(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Ve(i){var e=nr(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(Fe.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,g,p=e[0];(p[0]==="M"||p[0]==="m")&&(o=+p[1],s=+p[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,C=e.length;r<C;r++){var G=e[r],H=a[r-1],J=[],n=G[0],nt=n.toUpperCase();if(n!==nt)switch(J[0]=nt,nt){case"A":J[1]=G[1],J[2]=G[2],J[3]=G[3],J[4]=G[4],J[5]=G[5],J[6]=+G[6]+o,J[7]=+G[7]+s;break;case"V":J[1]=+G[1]+s;break;case"H":J[1]=+G[1]+o;break;case"M":u=+G[1]+o,f=+G[2]+s,J[1]=u,J[2]=f;break;default:for(var ut=1,lt=G.length;ut<lt;ut++)J[ut]=+G[ut]+(ut%2?o:s)}else J=e[r];switch(nt){case"Z":o=+u,s=+f;break;case"H":o=J[1],J=["L",o,s];break;case"V":s=J[1],J=["L",o,s];break;case"T":o=J[1],s=J[2];var _t=Re([H[1],H[2]],[H[3],H[4]]);J=["Q",_t[0],_t[1],o,s];break;case"S":o=J[J.length-2],s=J[J.length-1];var Bt=H.length,Rt=Re([H[Bt-4],H[Bt-3]],[H[Bt-2],H[Bt-1]]);J=["C",Rt[0],Rt[1],J[1],J[2],o,s];break;case"M":u=J[J.length-2],f=J[J.length-1];break;default:o=J[J.length-2],s=J[J.length-1]}a.push(J)}return a}var ce=Math.PI*2,Le=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},oe=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},$e=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},ir=function(i,e,t,r,n,a,o,s,u,f,c,l){var g=Math.pow(n,2),p=Math.pow(a,2),C=Math.pow(c,2),G=Math.pow(l,2),H=g*p-g*G-p*C;H<0&&(H=0),H/=g*G+p*C,H=Math.sqrt(H)*(o===s?-1:1);var J=H*n/a*l,nt=H*-a/n*c,ut=f*J-u*nt+(i+t)/2,lt=u*J+f*nt+(e+r)/2,_t=(c-J)/n,Bt=(l-nt)/a,Rt=(-c-J)/n,Qt=(-l-nt)/a,de=$e(1,0,_t,Bt),se=$e(_t,Bt,Rt,Qt);return s===0&&se>0&&(se-=ce),s===1&&se<0&&(se+=ce),[ut,lt,de,se]},Ir=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,g=l===void 0?0:l,p=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var C=Math.sin(u*ce/360),G=Math.cos(u*ce/360),H=G*(e-r)/2+C*(t-n)/2,J=-C*(e-r)/2+G*(t-n)/2;if(H===0&&J===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var nt=Math.pow(H,2)/Math.pow(a,2)+Math.pow(J,2)/Math.pow(o,2);nt>1&&(a*=Math.sqrt(nt),o*=Math.sqrt(nt));var ut=ir(e,t,r,n,a,o,c,g,C,G,H,J),lt=ut[0],_t=ut[1],Bt=ut[2],Rt=ut[3],Qt=Math.abs(Rt)/(ce/4);Math.abs(1-Qt)<1e-7&&(Qt=1);var de=Math.max(Math.ceil(Qt),1);Rt/=de;for(var se=0;se<de;se++)p.push(oe(Bt,Rt)),Bt+=Rt;return p.map(function(Te){var je=Le(Te[0],a,o,G,C,lt,_t),Dr=je.x,Kr=je.y,zr=Le(Te[1],a,o,G,C,lt,_t),Mr=zr.x,En=zr.y,yn=Le(Te[2],a,o,G,C,lt,_t),Ar=yn.x,Xr=yn.y;return{x1:Dr,y1:Kr,x2:Mr,y2:En,x:Ar,y:Xr}})};function kr(i,e,t,r,n,a,o,s,u){var f=Ir({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var g=l.x1,p=l.y1,C=l.x2,G=l.y2,H=l.x,J=l.y;return c.push(g,p,C,G,H,J),c},[])}function _r(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function Qr(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),Xn(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function Xn(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var Sa=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},On=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,C=0;C<c;C++){var G=f*l[C]+f,H=Sa(G,i,t,n,o),J=Sa(G,e,r,a,s),nt=H*H+J*J;p+=g[C]*Math.sqrt(nt)}return f*p},Qn=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,g,p,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,g=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,g=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;p=-g/l,p>0&&p<1&&u.push(p);continue}var G=l*l-4*g*c,H=Math.sqrt(G);if(!(G<0)){var J=(-l+H)/(2*c);J>0&&J<1&&u.push(J);var nt=(-l-H)/(2*c);nt>0&&nt<1&&u.push(nt)}}for(var ut=u.length,lt=ut,_t;ut--;)p=u[ut],_t=1-p,f[0][ut]=_t*_t*_t*i+3*_t*_t*p*t+3*_t*p*p*n+p*p*p*o,f[1][ut]=_t*_t*_t*e+3*_t*_t*p*r+3*_t*p*p*a+p*p*p*s;return f[0][lt]=i,f[1][lt]=e,f[0][lt+1]=o,f[1][lt+1]=s,f[0].length=f[1].length=lt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},ma=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,g=f/c,p=+l.toFixed(2),C=+g.toFixed(2);if(!(p<+Math.min(i,t).toFixed(2)||p>+Math.max(i,t).toFixed(2)||p<+Math.min(n,o).toFixed(2)||p>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:g}}}},Ra=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Gi=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},ws=function(i,e){return i=Gi(i),e=Gi(e),Ra(e,i.x,i.y)||Ra(e,i.x2,i.y)||Ra(e,i.x,i.y2)||Ra(e,i.x2,i.y2)||Ra(i,e.x,e.y)||Ra(i,e.x2,e.y)||Ra(i,e.x,e.y2)||Ra(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},fh=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=Qn.apply(null,i);return Gi(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},js=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),g=u*u,p=g*u,C=c*i+l*3*u*t+f*3*u*u*n+p*o,G=c*e+l*3*u*r+f*3*u*u*a+p*s,H=i+2*u*(t-i)+g*(n-2*t+i),J=e+2*u*(r-e)+g*(a-2*r+e),nt=t+2*u*(n-t)+g*(o-2*n+t),ut=r+2*u*(a-r)+g*(s-2*a+r),lt=f*i+u*t,_t=f*e+u*r,Bt=f*n+u*o,Rt=f*a+u*s,Qt=90-Math.atan2(H-nt,J-ut)*180/Math.PI;return{x:C,y:G,m:{x:H,y:J},n:{x:nt,y:ut},start:{x:lt,y:_t},end:{x:Bt,y:Rt},alpha:Qt}},jh=function(i,e,t){var r=fh(i),n=fh(e);if(!ws(r,n))return t?0:[];for(var a=On.apply(0,i),o=On.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},g=t?0:[],p=0;p<s+1;p++){var C=js.apply(0,i.concat(p/s));f.push({x:C.x,y:C.y,t:p/s})}for(var p=0;p<u+1;p++){var C=js.apply(0,e.concat(p/u));c.push({x:C.x,y:C.y,t:p/u})}for(var p=0;p<s;p++)for(var G=0;G<u;G++){var H=f[p],J=f[p+1],nt=c[G],ut=c[G+1],lt=Math.abs(J.x-H.x)<.001?"y":"x",_t=Math.abs(ut.x-nt.x)<.001?"y":"x",Bt=ma(H.x,H.y,J.x,J.y,nt.x,nt.y,ut.x,ut.y);if(Bt){if(l[Bt.x.toFixed(4)]===Bt.y.toFixed(4))continue;l[Bt.x.toFixed(4)]=Bt.y.toFixed(4);var Rt=H.t+Math.abs((Bt[lt]-H[lt])/(J[lt]-H[lt]))*(J.t-H.t),Qt=nt.t+Math.abs((Bt[_t]-nt[_t])/(ut[_t]-nt[_t]))*(ut.t-nt.t);Rt>=0&&Rt<=1&&Qt>=0&&Qt<=1&&(t?g++:g.push({x:Bt.x,y:Bt.y,t1:Rt,t2:Qt}))}}return g},bu=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,g,p=t?0:[],C=0,G=i.length;C<G;C++){var H=i[C];if(H[0]==="M")r=s=H[1],n=u=H[2];else{H[0]==="C"?(l=[r,n].concat(H.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var J=0,nt=e.length;J<nt;J++){var ut=e[J];if(ut[0]==="M")a=f=ut[1],o=c=ut[2];else{ut[0]==="C"?(g=[a,o].concat(ut.slice(1)),a=g[6],o=g[7]):(g=[a,o,a,o,f,c,f,c],a=f,o=c);var lt=jh(l,g,t);if(t)p+=lt;else{for(var _t=0,Bt=lt.length;_t<Bt;_t++)lt[_t].segment1=C,lt[_t].segment2=J,lt[_t].bez1=l,lt[_t].bez2=g;p=p.concat(lt)}}}}}return p};function kv(i,e){return bu(i,e)}function Hh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Rv(i,e){return Hh(i)*Hh(e)?(i[0]*e[0]+i[1]*e[1])/(Hh(i)*Hh(e)):1}function Wd(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Rv(i,e))}function Bv(i,e){return i[0]===e[0]&&i[1]===e[1]}function oy(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,g=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,p=l*l/(t*t)+g*g/(r*r);p>1&&(t*=Math.sqrt(p),r*=Math.sqrt(p));var C=t*t*(g*g)+r*r*(l*l),G=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(G*=-1),isNaN(G)&&(G=0);var H=r?G*t*g/r:0,J=t?G*-r*l/t:0,nt=(s+f)/2+Math.cos(n)*H-Math.sin(n)*J,ut=(u+c)/2+Math.sin(n)*H+Math.cos(n)*J,lt=[(l-H)/t,(g-J)/r],_t=[(-1*l-H)/t,(-1*g-J)/r],Bt=Wd([1,0],lt),Rt=Wd(lt,_t);return Rv(lt,_t)<=-1&&(Rt=Math.PI),Rv(lt,_t)>=1&&(Rt=0),o===0&&Rt>0&&(Rt=Rt-2*Math.PI),o===1&&Rt<0&&(Rt=Rt+2*Math.PI),{cx:nt,cy:ut,rx:Bv(i,[f,c])?0:t,ry:Bv(i,[f,c])?0:r,startAngle:Bt,endAngle:Bt+Rt,xRotation:n,arcFlag:a,sweepFlag:o}}function Xd(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Yd(i){i=uc(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=oy(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var g=u.length;t=[u[g-2],u[g-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Bv(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var p=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=p;var C=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]];else if(f==="Q"){var G=[u[1],u[2]];c.startTangent=[C[0]-G[0],C[1]-G[1]],c.endTangent=[t[0]-G[0],t[1]-G[1]]}else if(f==="T"){var H=e[s-1],G=Xd(H.currentPoint,C);H.command==="Q"?(c.command="Q",c.startTangent=[C[0]-G[0],C[1]-G[1]],c.endTangent=[t[0]-G[0],t[1]-G[1]]):(c.command="TL",c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]])}else if(f==="C"){var J=[u[1],u[2]],nt=[u[3],u[4]];c.startTangent=[C[0]-J[0],C[1]-J[1]],c.endTangent=[t[0]-nt[0],t[1]-nt[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[J[0]-nt[0],J[1]-nt[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[nt[0]-J[0],nt[1]-J[1]])}else if(f==="S"){var H=e[s-1],J=Xd(H.currentPoint,C),nt=[u[1],u[2]];H.command==="C"?(c.command="C",c.startTangent=[C[0]-J[0],C[1]-J[1]],c.endTangent=[t[0]-nt[0],t[1]-nt[1]]):(c.command="SQ",c.startTangent=[C[0]-nt[0],C[1]-nt[1]],c.endTangent=[t[0]-nt[0],t[1]-nt[1]])}else if(f==="A"){var ut=.001,lt=c.arcParams||{},_t=lt.cx,Bt=_t===void 0?0:_t,Rt=lt.cy,Qt=Rt===void 0?0:Rt,de=lt.rx,se=de===void 0?0:de,Te=lt.ry,je=Te===void 0?0:Te,Dr=lt.sweepFlag,Kr=Dr===void 0?0:Dr,zr=lt.startAngle,Mr=zr===void 0?0:zr,En=lt.endAngle,yn=En===void 0?0:En;Kr===0&&(ut*=-1);var Ar=se*Math.cos(Mr-ut)+Bt,Xr=je*Math.sin(Mr-ut)+Qt;c.startTangent=[Ar-n[0],Xr-n[1]];var sn=se*Math.cos(Mr+yn+ut)+Bt,un=je*Math.sin(Mr+yn-ut)+Qt;c.endTangent=[C[0]-sn,C[1]-un]}e.push(c)}return e}function Vd(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function sy(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function jd(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function uy(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function OS(i,e){if(i.length<2||e.length<2)return!1;var t=jd(i),r=jd(e);if(!uy(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=Vd(i),o=Vd(e),s=!1;return each(o,function(u){if(sy(a,u))return s=!0,!1}),s}function fy(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=Z.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=Gt.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=kn.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(J){return!Number.isNaN(J)&&J!==1/0&&J!==-1/0}),r=r.filter(function(J){return!Number.isNaN(J)&&J!==1/0&&J!==-1/0});var g=(0,d.min)(t),p=(0,d.min)(r),C=(0,d.max)(t),G=(0,d.max)(r);if(n.length===0)return{x:g,y:p,width:C-g,height:G-p};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,H=void 0;s[0]===g?(H=Kh(o,e),g=g-H.xExtra):s[0]===C&&(H=Kh(o,e),C=C+H.xExtra),s[1]===p?(H=Kh(o,e),p=p-H.yExtra):s[1]===G&&(H=Kh(o,e),G=G+H.yExtra)}return{x:g,y:p,width:C-g,height:G-p}}function Kh(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,d.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function cy(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||Yd(t),o=fy(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=Mi(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function ly(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=Mi(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function hy(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}Vs("rect",sc),Vs("image",sc),Vs("circle",mt),Vs("marker",mt),Vs("polyline",Fi),Vs("polygon",yo),Vs("text",ka),Vs("path",cy),Vs("line",ly),Vs("ellipse",hy);var LS="0.5.11",vy=function(i){(0,x.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(Ff),Fv=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Gv=function(e){if((0,d.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,d.isNumber)(e))return[e,e,e,e];if((0,d.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},dy=function(e){var t=new vy(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},gy=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Af=function(e){return Number.isNaN(Number(e))},Hd=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,g=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),g>a&&(a=g)}var p=Math.floor(t),C=Math.floor(n),G=Math.ceil(r)-Math.floor(t),H=Math.ceil(a)-Math.floor(n);return{x:p,y:C,width:G,height:H,minX:t,minY:n,maxX:r,maxY:a}},py=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},g=0;g<o;g++){var p=e[g],C=p.source,G=p.target,H="".concat(C,"-").concat(G);if(!c[g]){f[H]||(f[H]=[]),c[g]=!0,f[H].push(p);for(var J=0;J<o;J++)if(g!==J){var nt=e[J],ut=nt.source,lt=nt.target;c[J]||(C===lt&&G===ut?(f[H].push(nt),c[J]=!0,l["".concat(ut,"|").concat(lt,"|").concat(f[H].length-1)]=!0):C===ut&&G===lt&&(f[H].push(nt),c[J]=!0))}}}for(var _t in f)for(var Bt=f[_t],Rt=Bt.length,Qt=0;Qt<Rt;Qt++){var de=Bt[Qt];if(de.source===de.target){a&&(de.type=a),de.loopCfg={position:u[Qt%8],dist:Math.floor(Qt/8)*20+50};continue}if(Rt===1&&n&&de.source!==de.target){de.type=n;continue}de.type=r;var se=(Qt%2===0?1:-1)*(l["".concat(de.source,"|").concat(de.target,"|").concat(Qt)]?-1:1);Rt%2===1?de.curveOffset=se*Math.ceil(Qt/2)*s:de.curveOffset=se*(Math.floor(Qt/2)*s+t)}return e},Kd=z(731278),yy=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(lt){var _t=lt.getModel(),Bt=_t.x,Rt=_t.y;s>Bt&&(s=Bt),u>Rt&&(u=Rt),f<Bt&&(f=Bt),c<Rt&&(c=Rt)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],g=ei({x:s,y:u},l),p=g.x,C=g.y,G=ei({x:f,y:c},l),H=G.x,J=G.y;a={minX:p,maxX:H,minY:C,maxY:J,width:H-p,height:J-C,x:p,y:C}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var nt=this.getViewCenter(),ut={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(nt.x-ut.x,nt.y-ut.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,g=n.y+a.y-o.y-n.minY;if(!(Af(l)||Af(g))){var p=(0,Kd.vs)(c,[["t",l,g]]);if(!u){var C=cs({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:p})}});e.animate(function(lt){return{matrix:ci(t,p,lt)}},C);return}var G=f.get("minZoom"),H=f.get("maxZoom"),J=s;G&&s<G?(J=G,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):H&&s>H&&(J=H,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var nt=(0,Kd.vs)(p,[["t",-a.x,-a.y],["s",J,J],["t",a.x,a.y]]),ut=cs({animateCfg:r,callback:function(){e.setMatrix(nt),f.emit("viewportchange",{action:"translate",matrix:p}),f.emit("viewportchange",{action:"zoom",matrix:nt})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(lt){return{matrix:ci(t,nt,lt)}},ut)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,g=1/0,p=-1/0,C=-1/0;c.forEach(function(Bt){var Rt=Bt.getModel(),Qt=Rt.x,de=Rt.y;l>Qt&&(l=Qt),g>de&&(g=de),p<Qt&&(p=Qt),C<de&&(C=de)}),f={minX:l,maxX:p,minY:g,maxY:C,width:p-l,height:C-g,x:l,y:g}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var G=this.getViewCenter(),H={x:f.x+f.width/2,y:f.y+f.height/2},J=(a-n[1]-n[3])/f.width,nt=(o-n[0]-n[2])/f.height,ut=J;if(J>nt&&(ut=nt),e)this.animatedFitView(s,u,t,f,G,H,ut,!0);else{var lt=G.x-H.x,_t=G.y-H.y;if(Af(lt)||Af(_t))return;r.translate(lt,_t),r.zoom(ut,G)||console.warn("zoom failed, ratio out of range, ratio: %f",ut)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),g=c.get("width"),p=c.get("height"),C=c.get("group"),G=C.getMatrix()||[1,0,0,0,1,0,0,0,1];C.resetMatrix();var H,J=c.getNodes();if(J.length>c.get("optimizeThreshold")){var nt=1/0,ut=1/0,lt=-1/0,_t=-1/0;J.forEach(function(Kr){var zr=Kr.getModel(),Mr=zr.x,En=zr.y;nt>Mr&&(nt=Mr),ut>En&&(ut=En),lt<Mr&&(lt=Mr),_t<En&&(_t=En)}),H={minX:nt,maxX:lt,minY:ut,maxY:_t,width:lt-nt,height:_t-ut,x:nt,y:ut}}else H=C.getCanvasBBox();if(!(H.width===0||H.height===0)){var Bt=this.getViewCenter(),Rt={x:H.x+H.width/2,y:H.y+H.height/2},Qt=(g-l[1]-l[3])/H.width,de=(p-l[0]-l[2])/H.height,se;if(s==="x"?se=Qt:s==="y"?se=de:se=f==="max"?Math.max(Qt,de):Math.min(Qt,de),a&&(se=se<1?se:1),t)this.animatedFitView(C,G,r,H,Bt,Rt,se,!0);else{var Te=c.getZoom(),je=Te*se,Dr=c.get("minZoom");je<Dr&&(je=Dr,console.warn("fitview failed, ratio out of range, ratio: %f",se,"graph minzoom has been used instead")),c.translate(Bt.x-Rt.x,Bt.y-Rt.y),c.zoomTo(je,Bt)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Gv(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,g=0,p=0;this.graph.get("canvas").animate(function(C){g=u*C,p=f*C,n.graph.translate(g-c,p-l),c=g,l=p},(0,x.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=fo({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),ei({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,d.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},g=0,p=e;g<p.length;g++){var C=p[g],G=C.getBBox();G.minX<l.minX&&(l.minX=G.minX),G.minY<l.minY&&(l.minY=G.minY),G.maxX>l.maxX&&(l.maxX=G.maxX),G.maxY>l.maxY&&(l.maxY=G.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var H=this.getViewCenter(),J={x:l.x+l.width/2,y:l.y+l.height/2},nt=(s-o[1]-o[3])/l.width,ut=(u-o[0]-o[2])/l.height,lt=nt;nt>ut&&(lt=ut),r?this.animatedFitView(f,c,n,l,H,J,lt,t):(a.translate(H.x-J.x,H.y-J.y),t&&!a.zoom(lt,H)&&console.warn("zoom failed, ratio out of range, ratio: %f",lt))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,d.isNumber)(e)||!(0,d.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),my=yy;function zv(i){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(i)}function Zd(i){if(typeof i!="string")return i;var e=function(Rt){if(typeof Rt!="string")return Rt;try{return JSON.parse(Rt.trim())}catch(Qt){return Rt.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(Rt){return Rt[Rt.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var Rt=[],Qt=0;Qt<arguments.length;Qt++)Rt[Qt]=arguments[Qt];return Rt.some(function(de){return r(o)===de})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var g=n[c],p=s('"',"'");if(!p&&!g.trim()){c+=1;continue}var C=n[c-1]==="\\",G=s("}"),H=s("]"),J=s(","),nt=u();if(p)if(r(o)===g&&!C){o.pop();var ut=e(l);nt.push(ut),f=ut,l=""}else l+=g;else if(H&&g===",")l&&(nt.push(e(l)),l="");else if(G&&g===":")o.push(","),l&&(nt.push(l),l="");else if(J&&g===",")l&&(nt.push(e(l)),l=""),o.pop();else if(g==="}"&&(G||J)){l&&(nt.push(e(l)),l=""),J&&o.pop();for(var lt={},_t=1;_t<nt.length;_t+=2)lt[nt[_t-1]]=nt[_t];a.pop(),a.length&&r(a).push(lt),o.pop(),f=lt}else g==="]"&&H?(l&&(nt.push(e(l)),l=""),a.pop(),a.length&&r(a).push(nt),o.pop(),f=nt):g==="{"?(a.push([]),o.push("}")):g==="["?(a.push([]),o.push("]")):g==='"'?o.push('"'):g==="'"?o.push("'"):l+=g;c+=1}return f||l}var xy=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},by=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,d.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function $d(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return $d(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=xy(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=Zd(f);t=(0,x.__assign)((0,x.__assign)({},t),c)}else a[u]=Zd(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&zv(e.style[a.name])==="object"&&(a.attrs=(0,x.__assign)((0,x.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,x.__assign)((0,x.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function Ey(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=Xu(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,x.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function qd(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,x.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,x.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=qd(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=Ey(i,e,r),i.attrs=(0,x.__assign)((0,x.__assign)({},i.attrs),i.bbox),i}function Qd(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],g=0;g<f;g+=1)u.push(Qd(l[g],c[g]));var p=Object.keys(e.attrs),C=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:p.filter(function(G){return G!=="children"}).some(function(G){return i.attrs[G]!==e.attrs[G]||!C.includes(G)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Jd(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=by(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=qd($d(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,g=l===void 0?{}:l,p=c.bbox,C=c.type,G=c.children,H=(0,x.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var J=a.addShape(c.type,(0,x.__assign)({attrs:g,origin:{bbox:p,type:C,children:G}},H));c.keyshape&&(s=J)}c.children&&c.children.forEach(function(nt){return f(nt)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Qd(u,f),l=function C(G){var H;G.type!=="group"&&o.addShape(G.type,{attrs:G.attrs}),!((H=G.children)===null||H===void 0)&&H.length&&G.children.map(function(J){return C(J)})},g=function C(G){var H,J=s.find(function(nt){return nt.attrs.key===G.attrs.key});J&&o.removeChild(J),!((H=G.children)===null||H===void 0)&&H.length&&G.children.map(function(nt){return C(nt)})},p=function C(G){var H=G.key;if(G.type!=="group"){var J=s.find(function(ut){return ut.attrs.key===H});switch(G.action){case"change":if(J){var nt=G.val.keyshape?a.getOriginStyle():{};J.attr((0,x.__assign)((0,x.__assign)({},nt),G.val.attrs))}break;case"add":l(G.val);break;case"delete":g(G.val);break;case"restructure":g(G.formerTarget),l(G.nowTarget);break;default:break}}G.children&&G.children.forEach(function(ut){return C(ut)})};p(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Uv={};function tg(i){return Uv[i]||(Uv[i]=(0,d.upperFirst)(i)),Uv[i]}var wy={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Wv={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Zh=function(){function i(){}return i.registerFactory=function(e,t){var r=tg(e),n=wy,a=(0,x.__assign)((0,x.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=tg(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Jd(t);a=(0,x.__assign)((0,x.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Jd(s);a=(0,x.__assign)((0,x.__assign)((0,x.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Wv;a=(0,x.__assign)((0,x.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Wv,o=(0,x.__assign)((0,x.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Wv,o=(0,x.__assign)((0,x.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),vs=Zh;Zh.registerFactory("node",{defaultShapeType:"circle"}),Zh.registerFactory("edge",{defaultShapeType:"line"}),Zh.registerFactory("combo",{defaultShapeType:"circle"});var Xv="bboxCache",Yv="bboxCanvasCache",DS=null,_y=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Fv(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,d.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=ai(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=ai(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var p=this.get("originStyle");a&&!p[a]&&(p[a]={});for(var C=this.getCurrentStatesStyle(),G=function(J){var nt=t[J],ut=nt.get("name"),lt=nt.attr();if(ut&&ut!==a){var _t=C[ut];p[ut]||(p[ut]={}),_t?Object.keys(lt).forEach(function(Qt){var de=lt[Qt];de!==_t[Qt]&&(p[ut][Qt]=de)}):p[ut]=nt.get("type")!=="image"?(0,d.clone)(lt):n.getShapeStyleByName(ut)}else{var Bt=nt.attr(),Rt={};Object.keys(C).forEach(function(Qt){var de=C[Qt];(Qt===a||!(0,d.isPlainObject)(de))&&(Rt[Qt]=de)}),Object.keys(Bt).forEach(function(Qt){var de=Bt[Qt];Rt[Qt]!==de&&(a?p[a][Qt]=de:p[Qt]=de)})}},s=0;s<t.length;s++)G(s);delete p.path,delete p.matrix,delete p.x,delete p.y,p[a]&&(delete p[a].x,delete p[a].y,delete p[a].matrix,delete p[a].path),n.set("originStyle",p)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var g=Fv("shape");u.set("name",g),e.shapeMap[g]=u,o[g]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,d.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=vs.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,d.isPlainObject)(e)?this._cfg=(0,x.__assign)((0,x.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Xv,null),this.set(Yv,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]||t.find(function(a){return a.get("name")===e}):r=this.getKeyShape(),r){var n={};return(0,d.each)(r.attr(),function(a,o){(o!=="img"||(0,d.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,x.__assign)((0,x.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,d.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,d.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,d.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,d.isString)(t)){var f=r.filter(function(g){return g.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(g){return!g.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,d.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,d.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),Jo(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Xv);return e||(e=this.calculateBBox(),this.set(Xv,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(Yv);return e||(e=this.calculateCanvasBBox(),this.set(Yv,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),eg=_y,$h={source:"start",target:"end"},Cf="Node",ch="Point",Sy="Anchor",My=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=$h[t]+ch,a=t+Cf,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,d.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=$h[t]+ch,o=t+Cf,s=this.get(a);if(!s){var u=this.get(o),f=t+Sy,c=this.getPrePoint(t,n),l=r[f];(0,d.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,d.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Cf,n=$h[t]+ch,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+Cf,n=$h[t]+ch,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Cf)),n=this.get("target".concat(Cf));return r?delete t["source".concat(Cf)]:t.source=this.get("start".concat(ch)),n?delete t["target".concat(Cf)]:t.target=this.get("end".concat(ch)),!(0,d.isString)(t.source)&&!(0,d.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,d.isString)(t.target)&&!(0,d.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,d.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Cf)),r=this.get("target".concat(Cf));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(eg),rg=My,Vv="anchorPointsCache",Ay="bboxCache",Cy=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=Wo(t[0],r),s=0;s<t.length;s++){var u=t[s],f=Wo(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=eo({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=ro({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=ps(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(Vv);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,d.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(Vv,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(Ay,null),this.set(Vv,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,d.isNil)(t.x),f=!(0,d.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,d.isNumber)(t.x)||(0,d.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(eg),jv=Cy,ng="bboxCache",ag="bboxCanvasCache",qh="sizeCache",ig="anchorPointsCache",Ty=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,d.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,d.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||jt.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,x.__assign)((0,x.__assign)((0,x.__assign)({},r),t.style),f);var c=t.padding||jt.defaultCombo.padding;return(0,d.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(qh,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=this.get(ng)||{},a=n.x,o=n.x,s=this.get(qh),u=ai(t,r);if(u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2,s){s.width=Math.max(s.width,u.width),s.height=Math.max(s.height,u.height),this.set(qh,s);var f=t.get("type");f==="circle"?(u.width=s.r*2,u.height=s.r*2):(u.width=s.width,u.height=s.height),u.minX=u.centerX-u.width/2,u.minY=u.centerY-u.height/2,u.maxX=u.centerX+u.width/2,u.maxY=u.centerY+u.height/2}else u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2;return u.x=u.minX,u.y=u.minY,(u.x!==a||u.y!==o)&&this.set(ig,null),u}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(ag,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(ng,null),this.set(ag,null),this.set(ig,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(qh,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(jv),og=Ty,Qh="node",Jh="edge",sg="vedge",Sh="combo",Iy="default",ug="Mapper",fc="stateStyles",Oy=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,d.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===sg?Jh:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,d.upperFirst)(n),s=null,u=r.get(n+(0,d.upperFirst)(fc))||{},f=r.get(Iy+o);t[fc]&&(u=t[fc]),f&&(0,d.each)(f,function(Bt,Rt){(0,d.isObject)(Bt)&&!(0,d.isArray)(Bt)?t[Rt]=(0,d.deepMix)({},Bt,t[Rt]):(0,d.isArray)(Bt)?t[Rt]=t[Rt]||(0,d.clone)(f[Rt]):t[Rt]=t[Rt]||f[Rt]});var c=r.get(n+ug);if(c){var l=c(t);l[fc]&&(u=l[fc],delete l[fc]),(0,d.each)(l,function(Bt,Rt){(0,d.isObject)(Bt)&&!(0,d.isArray)(Bt)?t[Rt]=(0,d.deepMix)({},t[Rt],Bt):t[Rt]=l[Rt]||t[Rt]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Jh||e===sg){var g=void 0,p=void 0;if(g=t.source,p=t.target,g&&(0,d.isString)(g)&&(g=r.findById(g)),p&&(0,d.isString)(p)&&(p=r.findById(p)),!g||!p){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}g.getType&&g.getType()==="combo"&&(t.isComboEdge=!0),p.getType&&p.getType()==="combo"&&(t.isComboEdge=!0),s=new rg({model:t,source:g,target:p,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===Qh)s=new jv({model:t,styles:u,group:a.addGroup()});else if(e===Sh){var C=t.children,G=fu(C,r),H=void 0,J=void 0;if(isNaN(G.x)?isNaN(t.x)&&(H=Math.random()*100):H=G.x,isNaN(G.y)?isNaN(t.y)&&(J=Math.random()*100):J=G.y,isNaN(t.x)||isNaN(t.y))t.x=H,t.y=J;else{var nt=t.x-H,ut=t.y-J;this.updateComboSucceeds(t.id,nt,ut,C)}var lt=a.addGroup();lt.setZIndex(t.depth),s=new og({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?fu([],r):G,group:lt}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(G.width=Math.hypot(G.height,G.width),G.height=G.width,s.set("bbox",G),s.refresh());var _t=s.getModel();(C||[]).forEach(function(Bt){var Rt=r.findById(Bt.id);s.addChild(Rt),Bt.depth=_t.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,d.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+ug),f=e.getModel(),c=f.x,l=f.y,g=e.getUpdateType(t);if(u){var p=(0,d.deepMix)({},f,t),C=u(p),G=(0,d.deepMix)({},f,C,t);C[fc]&&(e.set("styles",G[fc]),delete G[fc]),(0,d.each)(G,function(se,Te){t[Te]=se})}else(0,d.each)(t,function(se,Te){f[Te]&&(0,d.isObject)(se)&&!(0,d.isArray)(se)&&(t[Te]=(0,x.__assign)((0,x.__assign)({},f[Te]),t[Te]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Jh){if(t.source){var H=t.source;(0,d.isString)(H)&&(H=o.findById(H)),e.setSource(H)}if(t.target){var J=t.target;(0,d.isString)(J)&&(J=o.findById(J)),e.setTarget(J)}e.update(t)}else if(s===Qh){e.update(t,g);var nt=e.getEdges();g==="move"?(0,d.each)(nt,function(se){r.edgeToBeUpdateMap[se.getID()]={edge:se,updateType:g},r.throttleRefresh()}):g!=null&&g.includes("bbox")&&(0,d.each)(nt,function(se){se.refresh(g)})}else if(s===Sh){if(e.update(t,g),!isNaN(t.x)||!isNaN(t.y)){var ut=t.x-c||0,lt=t.y-l||0;this.updateComboSucceeds(f.id,ut,lt)}var _t=e.getEdges(),Bt=(g==null?void 0:g.includes("bbox"))||g==="move";if(Bt&&s===Sh){var Rt=e.get("shapeFactory"),Qt=f.type||"circle",de=f.animate===void 0||t.animate===void 0?(a=(n=Rt[Qt])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;de?setTimeout(function(){if(!(!e||e.destroyed)){var se=e.getKeyShape();!se||se.destroyed||(0,d.each)(_t,function(Te){Te&&!Te.destroyed&&Te.refresh()})}},201):(0,d.each)(_t,function(se){se.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,d.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=fu(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var g=c,p=l;r?(g=isNaN(u.x)?c:u.x,p=isNaN(u.y)?l:u.y):(g=isNaN(c)?u.x:c,p=isNaN(l)?u.y:l),e.update({x:g,y:p});var C=e.get("shapeFactory"),G=u.type||"circle",H=u.animate===void 0?(o=(a=C[G])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;H?setTimeout(function(){if(!(!e||e.destroyed)){var J=e.getKeyShape();!J||J.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){Ri(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,d.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,d.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Jh){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var g=r.get("comboTrees"),p=e.get("id");if(a===Qh){var C=e.getModel().comboId;if(g&&C){var G=g,H=!1;g.forEach(function(Bt){H||Ri(Bt,function(Rt){if(Rt.id===p&&G){var Qt=G.indexOf(Rt);return G.splice(Qt,1),H=!0,!1}return G=Rt.children,!0})})}for(var J=e.getEdges(),nt=J.length-1;nt>=0;nt--)r.removeItem(J[nt],!1);C&&r.updateCombo(C)}else if(a===Sh){var ut=e.getModel().parentId,lt,_t=!1;(g||[]).forEach(function(Rt){_t||Ri(Rt,function(Qt){return Qt.id===p?(lt=Qt,_t=!0,!1):!0})}),lt.removed=!0,lt&&lt.children&&lt.children.forEach(function(Rt){t.removeItem(Rt.id)});for(var J=e.getEdges(),nt=J.length;nt>=0;nt--)r.removeItem(J[nt],!1);ut&&r.updateCombo(ut)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,d.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,d.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,d.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){vo(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,d.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Qh){var a=e.getEdges();(0,d.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===Sh){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||Ri(l,function(g){return g.id===s?(u=g.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var g=n.findById(l.id);r.changeItemVisibility(g,t)});var a=e.getEdges();(0,d.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),Ly=Oy,Dy=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,d.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,d.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),Ny=Dy,Py=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},fg=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=ur(t);return u.unshift(["M",e[0].x,e[0].y]),u},tv=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];zn.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},ky=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=Py(a,s)}return t&&(n+="Z"),n},Hv=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Kv=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,g=e[s+1].x,p=e[s+1].y,C=s!==e.length-2?e[s+2].x:g,G=s!==e.length-2?e[s+2].y:p,H=c+(g-u)/6,J=l+(p-f)/6,nt=g-(C-c)/6,ut=p-(G-l)/6;o.push(["C",H,J,nt,ut,g,p])}return o.unshift(["M",n.x,n.y]),o},cg=function(e,t){return zn.scale([0,0],zn.normalize([0,0],e),t)},lg=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},hg=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Zv(i,e){var t=function(l){var g=[l[0][0],l[0][1]-e],p=[l[0][0],l[0][1]+e];return"M ".concat(g," A ").concat(e,",").concat(e,",0,0,0,").concat(p," A ").concat(e,",").concat(e,",0,0,0,").concat(g)},r=function(l){var g=zn.scale([0,0],lg(l[0],l[1]),e),p=zn.scale([0,0],g,-1),C=zn.add([0,0],l[0],g),G=zn.add([0,0],l[1],g),H=zn.add([0,0],l[1],p),J=zn.add([0,0],l[0],p);return"M ".concat(C," L ").concat(G," A ").concat([e,e,"0,0,0",H].join(",")," L ").concat(J," A ").concat([e,e,"0,0,0",C].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=zn.scale([0,0],lg(o,s),e);n[a]=[zn.add([0,0],o,u),zn.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var g="";return l===0&&(g="M ".concat(n[n.length-1][1]," ")),g+="".concat(f+c[0]," L ").concat(c[1]),g}),n.join(" ")}function vg(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],g=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",g].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=hg(c[0],c[1]),g=cg(l,e),p=zn.add([0,0],c[0],zn.scale([0,0],g,-1)),C=zn.add([0,0],c[1],g),G=1.2*e,H=cg(zn.normalize([0,0],l),G),J=zn.scale([0,0],H,-1),nt=zn.add([0,0],p,J),ut=zn.add([0,0],C,J),lt=zn.add([0,0],p,H);return"M ".concat(p," C ").concat([nt,ut,C].join(",")," S ").concat([lt,p].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:zn.normalize([0,0],hg(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=zn.normalize([0,0],zn.add([0,0],a[s].v,zn.scale([0,0],a[o].v,-1)));a[o].p=zn.add([0,0],a[o].p,zn.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var Ry=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},dg=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},gg=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,g){return l.x===g.x?l.y-g.y:l.x-g.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&dg(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&dg(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},By={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Fy(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,g,p,C=0;C<e.width*e.height;C++){if(g=c,p=l,i.findIndex(function(H){return H.x===c&&H.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var G=a(c,l);switch(G){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:g===0&&(p===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:g===1&&(p===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(G)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var Gy=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},zy=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=wo(s,u),c=new ja(s.x,s.y,u.x,u.y),l=r.reduce(function(g,p){return Ki(p,c)>0?g+1:g},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},pg=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=Ki(a,t);o>=0&&o<r&&(n=a,r=o)}),n},Uy=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(p,C){var G=!1;return C.forEach(function(H){G||(lo(p,{x:H.x1,y:H.y1})||lo(p,{x:H.x2,y:H.y2}))&&(G=!0)}),G},c=function(p,C){for(var G=0,H=C;G<H.length;G++){var J=H[G],nt=J.getBBox(),ut=[[nt.x,nt.y],[nt.x+nt.width,nt.y],[nt.x,nt.y+nt.height],[nt.x+nt.width,nt.y+nt.height]];if(Eo(ut,p.x,p.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var p=o.pop(),C=pg(t,p);if(C){var G=ki(C,p),H=G[0],J=G[1];if(J===2){var nt=function(lt){for(var _t=n,Bt=yg(C,_t,H,lt),Rt=f(Bt,o)||f(Bt,a),Qt=c(Bt,t);!Rt&&Qt&&_t>=1;)_t/=1.5,Bt=yg(C,_t,H,lt),Rt=f(Bt,o)||f(Bt,a),Qt=c(Bt,t);Bt&&!Rt&&(!lt||!Qt)&&(o.push(new ja(p.x1,p.y1,Bt.x,Bt.y)),o.push(new ja(Bt.x,Bt.y,p.x2,p.y2)),s=!0)};nt(!0),s||nt(!1)}}s||a.push(p),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function Wy(i,e,t,r,n){var a=zy(i,t,e);if(a===null)return[];var o=function(l){for(var g=[];l.length>0;){var p=l.pop();if(l.length===0){g.push(p);break}var C=l.pop(),G=new ja(p.x1,p.y1,C.x2,C.y2),H=pg(e,G);H?(g.push(p),l.push(C)):l.push(G)}return g},s=new ja(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=Uy(s,e,r,n),f=o(u);return f}var Xy=function(e,t,r){var n=Object.assign(By,r),a=Yo(e.map(function(nt){return{x:nt.getModel().x,y:nt.getModel().y}}));e=e.sort(function(nt,ut){return wo({x:nt.getModel().x,y:nt.getModel().y},a)-wo({x:ut.getModel().x,y:ut.getModel().y},a)});var o=[],s=[];e.forEach(function(nt){var ut=Wy(nt,t,o,n.maxRoutingIterations,n.morphBuffer);ut.forEach(function(lt){s.push(lt)}),o.push(nt)});for(var u=Yy(e,s,n.nodeR0),f=Gy(u.width,u.height,n.pixelGroupSize),c=[],l=[],g=0;g<n.maxMarchingIterations;g++)if(Vy(e,t,s,u,f,n),c=[],l=[],!!new Fy(c,f,n.threshold).march()){var p=c.map(function(nt){return{x:Math.round(nt.x*n.pixelGroupSize+u.minX),y:Math.round(nt.y*n.pixelGroupSize+u.minY)}});if(p){var C=p.length;if(n.skip>1)for(C=Math.floor(p.length/n.skip);C<3&&n.skip>1;)n.skip-=1,C=Math.floor(p.length/n.skip);for(var G=0,H=0;H<C;H+=1,G+=n.skip)l.push({x:p[G].x,y:p[G].y})}var J=function(){for(var ut=0,lt=e;ut<lt.length;ut++){var _t=lt[ut],Bt=l.map(function(Rt){return[Rt.x,Rt.y]});if(!Eo(Bt,_t.getBBox().centerX,_t.getBBox().centerY))return!1}return!0};if(l&&J())return l;if(n.threshold*=.9,g<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function Yy(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Vy(i,e,t,r,n,a){function o(p,C){var G=Math.floor((p-C)/a.pixelGroupSize);return G<0?0:G}function s(p,C){return p*a.pixelGroupSize+C}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(C,G){var H=Math.min(o(C.minX,G+r.minX),n.width),J=Math.min(o(C.minY,G+r.minY),n.height),nt=Math.min(o(C.maxX,-G+r.minX),n.width),ut=Math.min(o(C.maxY,-G+r.minY),n.height);return[H,J,nt,ut]},l=function(C,G){for(var H=C.getBBox(),J=c(H,a.nodeR1),nt=J[0],ut=J[1],lt=J[2],_t=J[3],Bt=ut;Bt<_t;Bt+=1)for(var Rt=nt;Rt<lt;Rt+=1)if(!(G<0&&n[Rt+Bt*n.width]<=0)){var Qt=s(Rt,r.minX),de=s(Bt,r.minY),se=Rs({x:Qt,y:de},{x:H.minX,y:H.minY,width:H.width,height:H.height});if(se<Math.pow(a.nodeR1,2)){var Te=Math.sqrt(se)-a.nodeR1;n.cells[Rt+Bt*n.width]+=G*Te*Te}}},g=function(C,G){for(var H=C.getBBox(),J=c(H,a.edgeR1),nt=J[0],ut=J[1],lt=J[2],_t=J[3],Bt=ut;Bt<_t;Bt+=1)for(var Rt=nt;Rt<lt;Rt+=1)if(!(G<0&&n.cells[Rt+Bt*n.width]<=0)){var Qt=s(Rt,r.minX),de=s(Bt,r.minY),se=ts({x:Qt,y:de},C);if(se<Math.pow(a.edgeR1,2)){var Te=Math.sqrt(se)-a.edgeR1;n.cells[Rt+Bt*n.width]+=G*Te*Te}}};a.nodeInfluenceFactor&&i.forEach(function(p){l(p,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(p){g(p,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(p){l(p,a.negativeNodeInfluenceFactor/u)})}function yg(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(C,G){return n.width*((C.y-n.minY+(G.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var g=l(o,u);return g<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var p=l(a,s);return p<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var jy=function(){function i(e,t){this.cfg=(0,d.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=gg(e),a=Zv(r.map(function(o){return[o.x,o.y]}),this.padding),n=nr(a);break;case"smooth-convex":r=gg(e),r.length===2?(a=Zv(r.map(function(o){return[o.x,o.y]}),this.padding),n=nr(a)):r.length>2&&(a=vg(r.map(function(o){return[o.x,o.y]}),this.padding),n=Kv(a));break;case"bubble":r=Xy(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Kv(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,x.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,x.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,d.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,d.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Hv(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),pa(n,Hv(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),mg=jy,Mh=Kt,Hy="node",Ky=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,d.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){Ri(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,g=o[c.target]||0,p=Math.max(l,g);a[p]?a[p].push(c.id):a[p]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,d.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Yn(r.cfg.maxStep),r.redoStack=new Yn(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new my(this),r=new Rf(this),n=new Ly(this),a=new Ny(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:jt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:jt.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:jt.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:jt.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:jt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,d.isPlainObject)(t)?this.cfg=(0,x.__assign)((0,x.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Yn(this.cfg.maxStep),this.redoStack=new Yn(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,d.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,d.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,d.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=cs({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Xa(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=Mh(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");Xa(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,g=l*t,p=t,C=!1;if(f&&g<f?(p=f/l,C=!0):c&&g>c&&(p=c/l,C=!0),r?u=Mh(u,[["t",-r.x,-r.y],["s",p,p],["t",r.x,r.y]]):u=Mh(u,[["s",p,p]]),n){var G=(0,d.clone)(s.getMatrix());G||(G=[1,0,0,0,1,0,0,0,1]);var H=G[0],J=H*p,nt=cs({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(ut){if(ut===1)G=u;else{var lt=Cs(H,J,ut)/G[0];r?G=Mh(G,[["t",-r.x,-r.y],["s",lt,lt],["t",r.x,r.y]]):G=Mh(G,[["s",lt,lt]])}return{matrix:G}},nt)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!C},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,d.isString)(t)&&(n=this.findById(t)),!n&&(0,d.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,x.__assign)((0,x.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,x.__assign)((0,x.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var g=Qs(this.get("comboTrees"));this.set("comboTrees",g)}}},e.prototype.innerAddItem=function(t,r,n){if(!rf(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(C){u||vo(C,function(G){if(r.parentId===G.id){u=!0;var H=(0,x.__assign)({id:r.id,depth:G.depth+2},r);G.children?G.children.push(H):G.children=[H],r.depth=H.depth,a=n.addItem(t,r)}var J=s[G.id];return u&&J&&J.getType&&J.getType()==="combo"&&n.updateCombo(J,G.children),!0})}),!u){var f=(0,x.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,d.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),g=!1,p=!1;o.forEach(function(C){p||g||vo(C,function(G){if(G.id===r.id)return p=!0,!1;if(r.comboId===G.id&&!p){g=!0;var H=(0,d.clone)(r);H.itemType="node",G.children?G.children.push(H):G.children=[H],H.depth=G.depth+1}return g&&l[G.id].getType&&l[G.id].getType()==="combo"&&n.updateCombo(l[G.id],G.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,x.__assign)((0,x.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var g=t[u].type,p=s[u];if(p&&p!==!0){var C=(0,x.__assign)((0,x.__assign)({},p.getModel()),{itemType:g});switch(g){case"node":l.nodes.push(C);break;case"edge":l.edges.push(C);break;case"combo":l.combos.push(C);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,d.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,d.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,x.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,d.each)(l,function(G){return a.setItemState(s,G,!1)}),o.updateItem(s,r),c==="combo"&&(0,d.each)(l,function(G){return a.setItemState(s,G,!0)}),u){var g={nodes:[],edges:[],combos:[]},p={nodes:[],edges:[],combos:[]},C=(0,x.__assign)({id:f.id},r);switch(c){case"node":g.nodes.push(f),p.nodes.push(C);break;case"edge":g.edges.push(f),p.edges.push(C);break;case"combo":g.combos.push(f),p.combos.push(C);break;default:break}this.pushStack("update",{before:g,after:p})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,d.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){Mo(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(H){return{type:"node",model:H}}),!1,!1),(f==null?void 0:f.length)!==0){var c=uu(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(H){return{type:"edge",model:H}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var g=t.get("layoutController");if(g){if(g.layout(p),this.destroyed)return}else p();function p(){(t.get("comboTrees")||[]).forEach(function(H){vo(H,function(J){var nt=t.findById(J.id);return nt.getType()==="combo"&&J.collapsed&&(t.collapseCombo(J.id,!1),t.updateCombo(nt)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var H;(H=t.getCombos())===null||H===void 0||H.forEach(function(J){J.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var C=this.getNodes();C.forEach(function(H){H.toFront()})}else{var G=this.getEdges();G.forEach(function(H){H.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,d.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===Hy){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!Mo(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(lt){return o.clearItemStates(lt)}),this.getEdges().map(function(lt){return o.clearItemStates(lt)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},g=s.combos;if(g){var p=uu(g,s.nodes);this.set("comboTrees",p)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,d.each)(c,function(lt,_t){c[_t].getModel().depth=0,!(lt.getType&&lt.getType()==="edge")&&(lt.getType&&lt.getType()==="combo"?(delete c[_t],lt.destroy()):l.nodes.indexOf(lt)<0&&(delete c[_t],o.remove(lt,!1)))});for(var C=this.getCombos(),G=C.length,H=G-1;H>=0;H--)C[H].destroyed&&C.splice(H,1);g&&(o.addCombos(g),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,d.each)(c,function(lt,_t){lt.getType&&(lt.getType()==="node"||lt.getType()==="combo")||l.edges.indexOf(lt)<0&&(delete c[_t],o.remove(lt,!1))}),(this.get("comboTrees")||[]).forEach(function(lt){vo(lt,function(_t){var Bt=n.findById(_t.id);return Bt.getType()==="combo"&&_t.collapsed&&n.collapseCombo(_t.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var J=(this.get("layout")||{}).relayoutAtChangeData,nt=J===void 0?!0:J,ut=this.get("layoutController");return nt&&ut&&(ut.changeData(function(){setTimeout(function(){var lt;(lt=o.getCombos())===null||lt===void 0||lt.forEach(function(_t){_t.set("animate",!0)})},0)}),o.get("animate")&&!ut.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(lt){return lt.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,d.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function(J){var nt=a.findById(J),ut=nt.getType();if(!(ut!=="node"&&ut!=="combo")){var lt=nt.getModel();c["".concat(ut,"s")].push({id:J,parentId:ut==="node"?lt.comboId:lt.parentId})}});var l=this.get("comboTrees"),g=new Set(r),p=new Map;l&&(l.forEach(function(J){vo(J,function(nt,ut,lt){if(g.has(nt.id)){if(ut){var _t=a.findById(ut.id),Bt=a.findById(nt.id);ut.children.splice(lt,1),_t.removeChild(Bt),o.updateCombo(_t,ut.children)}nt.itemType==="combo"&&p.set(nt.id,nt)}return!0})}),l=l.filter(function(J){return!g.has(J.id)}),this.set("comboTrees",l));var C={nodes:[],combos:[]},G=r.map(function(J){var nt=a.findById(J),ut=nt.getModel(),lt="";nt.getType&&(lt=nt.getType());var _t=p.get(J)||{id:nt.getID(),itemType:lt};return lt==="combo"?(_t.parentId=s,ut.parentId=s):lt==="node"&&(_t.comboId=s,ut.comboId=s),f&&C["".concat(lt,"s")].push({id:ut.id,parentId:s}),_t});u.children=G,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function(J){Ri(J,function(nt){return nt.id===s?(nt.itemType="combo",nt.children=G,!1):!0})}),this.sortCombos()),f&&(C.combos.push(u),this.pushStack("createCombo",{before:c,after:C}));var H=this.findById(s);!H.getModel().parentId&&H.getChildren().combos.length&&this.updateComboTree(H,void 0,!1),setTimeout(function(){H.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,d.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var g=this.get("itemMap"),p=u.get("id"),C,G=[],H=this.get("combos"),J=this.findById(c),nt=r&&this.get("enabledStack"),ut={};if(nt&&(ut=(0,d.clone)(f),ut.children=[]),l.forEach(function(Rt){C||vo(Rt,function(Qt){var de;if(Qt.id===p){C=Qt;var se=u.getEdges().map(function(Dr){return Dr.getID()});se.forEach(function(Dr){n.removeItem(Dr,!1)});var Te=H.indexOf(u);H.splice(Te,1),delete g[p];var je=(0,d.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:je,type:"combo"})}if(c&&C&&Qt.id===c){J.removeCombo(u),G=Qt.children;var Te=G.indexOf(C);return Te!==-1&&G.splice(Te,1),(de=C.children)===null||de===void 0||de.forEach(function(Kr){var zr=n.findById(Kr.id),Mr=zr.getModel();zr.getType&&zr.getType()==="combo"?(Kr.parentId=c,delete Kr.comboId,Mr.parentId=c,delete Mr.comboId):zr.getType&&zr.getType()==="node"&&(Kr.comboId=c,Mr.comboId=c),J.addChild(zr),G.push(Kr)}),n.updateCombo(J),!1}return!0})}),!c&&C){var lt=l.indexOf(C);l.splice(lt,1),(a=C.children)===null||a===void 0||a.forEach(function(Rt){Rt.parentId=void 0;var Qt=n.findById(Rt.id).getModel();delete Qt.parentId,delete Qt.comboId,Rt.itemType!=="node"&&l.push(Rt)})}if(nt){var _t={nodes:[],combos:[]},Bt={nodes:[],combos:[]};(o=C.children)===null||o===void 0||o.forEach(function(Rt){var Qt=n.findById(Rt.id),de=Qt.getType();de!=="node"&&de!=="combo"||(_t["".concat(de,"s")].push({id:Rt.id,parentId:p}),Bt["".concat(de,"s")].push({id:Rt.id,parentId:c}))}),_t.combos.push(ut),this.pushStack("uncombo",{before:_t,after:Bt})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){vo(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var g=(0,x.__spreadArray)([],l.getStates(),!0);(0,d.each)(g,function(p){return r.setItemState(l,p,!1)}),o.updateCombo(l,f.children,t),(0,d.each)(g,function(p){return r.setItemState(l,p,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,d.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){vo(c,function(l){if(!l)return!0;var g=f[l.id];if(o===l.id&&g&&g.getType&&g.getType()==="combo"){var p=(0,x.__spreadArray)([],g.getStates(),!0);(0,d.each)(p,function(C){g.getStateStyle(C)&&r.setItemState(g,C,!1)}),u.updateCombo(g,l.children),(0,d.each)(p,function(C){g.getStateStyle(C)&&r.setItemState(g,C,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,d.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,g;if((c||[]).forEach(function(nt){g||Ri(nt,function(ut){if(!g)return ut.id===o.getID()&&(g=ut),!0})}),Ri(g,function(nt){return nt.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var p={},C={};f==="combo"?(p.combos=[{id:s.id,parentId:s.parentId}],C.combos=[{id:s.id,parentId:r}]):f==="node"&&(p.nodes=[{id:s.id,parentId:s.comboId}],C.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:p,after:C})}if(s.parentId||s.comboId){var G=this.findById(s.parentId||s.comboId);G&&G.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var H=this.findById(r);H&&H.addChild(o)}if(u){var H=this.findById(u);H&&H.removeChild(o)}var J=Qs(this.get("comboTrees"),s.id,r);this.set("comboTrees",J),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,d.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,d.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,d.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,d.each)(r,function(o){o.refresh()}),(0,d.each)(n,function(o){o.refresh()}),(0,d.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,d.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var g=l.get("originAttrs"),p=l.get("model"),C=l.getContainer().getMatrix();if(g==null&&(C&&(g={x:C[6],y:C[7]}),l.set("originAttrs",g||0)),a){var G=a(l,f,c,g||{x:0,y:0});l.set("model",Object.assign(p,G))}else g?(p.x=g.x+(c.x-g.x)*f,p.y=g.y+(c.y-g.y)*f):(p.x=c.x,p.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,d.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(g){(0,d.each)(g,function(p){u=p.getModel();var C=p.get("originAttrs");if(!(C&&u.x===C.x&&u.y===C.y)){var G=p.updatePosition({x:u.x,y:u.y});f[u.id]=G,u.comboId&&(f[u.comboId]=f[u.comboId]||G),u.parentId&&(f[u.parentId]=f[u.parentId]||G)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,d.each)(a,function(l){var g=l.getSource().getModel(),p=l.getTarget();if(!(0,d.isPlainObject)(p)){var C=p.getModel();(f[g.id]||f[C.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,d.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,d.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(g){var p=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*p[0]+p[6],u.y=u.y*p[0]+p[7];var C=o.getGroup().getCanvasBBox(),G=C.minX,H=C.maxX,J=C.minY,nt=C.maxY,ut={x:(G+H)/2,y:(J+nt)/2};r==="begin"&&(ut.x=G,ut.y=J),o.translate(u.x-ut.x,u.y-ut.y)})}var c=(0,x.__assign)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,d.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(g){c||Ri(g,function(p){if(c&&p.depth<=a.depth)return!1;if(a.id===p.id&&(c=!0),c){var C=n.findById(p.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(g){var p=g.getModel(),C=p.isVEdge,G=p.size,H=G===void 0?1:G;if(!(g.isVisible()&&!C)){var J=g.getSource(),nt=g.getTarget(),ut=null,lt;if(J.getModel().id===a.id||u.includes(J)&&!u.includes(nt)?(ut=nt,lt=!1):(nt.getModel().id===a.id||!u.includes(J)&&u.includes(nt))&&(ut=J,lt=!0),ut){if(C){n.removeItem(g,!1);return}for(var _t=ut.getModel();!ut.isVisible();){var Bt=_t.parentId,Rt=_t.comboId,Qt=Bt||Rt;if(ut=n.findById(Qt),!ut||!Qt)return;_t=ut.getModel()}var de=_t.id,se=lt?{source:de,target:a.id,size:H,isVEdge:!0}:{source:a.id,target:de,size:H,isVEdge:!0},Te="".concat(se.source,"-").concat(se.target);if(l[Te]){l[Te].size+=H;return}l[Te]=se}}}),this.addItems(Object.values(l).map(function(g){return{type:"vedge",model:g}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(g){c||Ri(g,function(p){if(c&&p.depth<=a.depth)return!1;if(a.id===p.id&&(c=!0),c){var C=n.findById(p.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(g){if(!(g.isVisible()&&!g.getModel().isVEdge)){var p=g.getSource(),C=g.getTarget(),G=p.get("id"),H=C.get("id"),J=null,nt;if(G===a.id||u.includes(p)&&!u.includes(C)?(J=C,nt=!1):H===a.id||!u.includes(p)&&u.includes(C)?(J=p,nt=!0):u.includes(p)&&u.includes(C)&&p.isVisible()&&C.isVisible()&&g.show(),J){var ut=g.getModel(),lt=ut.isVEdge,_t=ut.size,Bt=_t===void 0?1:_t;if(lt){n.removeItem(g,!1);return}for(var Rt=J.getModel();!J.isVisible();){var Qt=Rt.parentId,de=Rt.comboId,se=Qt||de;if(J=n.findById(se),!J||!se)return;Rt=J.getModel()}for(var Te=Rt.id,je=nt?C:p,Dr=je.getModel();!je.isVisible();){var Kr=Dr.parentId,zr=Dr.comboId,Mr=Kr||zr;if(je=n.findById(Mr),!je||!Mr)return;if(Dr.comboId===a.id||Dr.parentId===a.id)break;Dr=je.getModel()}var En=Dr.id;if(Te){var yn=nt?{source:Te,target:En,isVEdge:!0,size:Bt}:{source:En,target:Te,isVEdge:!0,size:Bt},Ar="".concat(yn.source,"-").concat(yn.target);if(l[Ar]){l[Ar].size+=Bt;return}l[Ar]=yn}}}}),this.addItems(Object.values(l).map(function(g){return{type:"vedge",model:g}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,d.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,d.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=_e(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,d.clone)(r):{before:{},after:(0,d.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=kt(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=kt(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=pn(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new mg(this,(0,x.__assign)((0,x.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,d.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(Q),xg=Ky;function $v(i){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(i)}var lh=Kt,bg="-shape",qv="-label",ev=["startArrow","endArrow"],Eg={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Zy={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},rv={edge:Zy,node:Eg,combo:Eg},Qv="-label-bg",Jv={options:{labelCfg:{style:{fontFamily:jt.windowFontFamily}},descriptionCfg:{style:{fontFamily:jt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+bg),t.shapeMap[this.itemType+bg]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+qv),t.shapeMap[this.itemType+qv]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=lh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=lh(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=lh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=lh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=lh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+Qv;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,d.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=jt[a]?jt[a].style:null;return(0,x.__assign)((0,x.__assign)((0,x.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,d.mix)({},o.attr(),e.style),u=function(l){var g,p=s[l];if((0,d.isPlainObject)(p)){var C=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(G){return G.get("name")===l});C==null||C.attr(p)}else o.attr((g={},g[l]=p,g))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+qv,c=o.shapeMap[f]||o.find(function(lt){return lt.get("className")===f}),l=this.itemType+Qv,g=o.shapeMap[l]||o.find(function(lt){return lt.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],g&&(o.removeChild(g),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,d.deepMix)(u,e.labelCfg));var C=this.getLabelStyleByPosition(e,u,o),G=(n=e.labelCfg)===null||n===void 0?void 0:n.style,H=(0,x.__assign)((0,x.__assign)({},C),G),J=H.rotate;if(delete H.rotate,!isNaN(J)&&J!==""){var nt=[1,0,0,0,1,0,0,0,1];nt=lh(nt,[["t",-H.x,-H.y],["r",J],["t",H.x,H.y]]),H.matrix=nt,c.attr(H)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(H);if(!g)H.background&&(g=this.drawLabelBg(e,o,c),g.set("classname",l),o.shapeMap[l]=g,c.toFront());else if(H.background){var ut=this.getLabelBgStyleByPosition(c,u);g.attr(ut)}else o.removeChild(g)}else{var p=this.drawLabel(e,o);p.set("className",f),o.shapeMap[f]=p}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,d.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var g=(0,d.mix)({},l||c),p=r.getContainer(),C={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(C.r=1,C.width=1,C.height=1),t){var G=function(Mr){var En,yn=g[Mr];if((0,d.isPlainObject)(yn)&&!ev.includes(Mr)){var Ar=((o=p.shapeMap)===null||o===void 0?void 0:o[Mr])||p.find(function(Xr){return Xr.get("name")===Mr});Ar==null||Ar.attr(yn)}else s.attr((En={},En[Mr]=yn,En))};for(var H in g)G(H)}else{var J=Js(r.getCurrentStatesStyle()),nt=r.getModel(),ut=(0,d.mix)({},nt.style,Js(r.getOriginStyle())),lt=s.get("name"),_t=s.attr(),Bt={};Object.keys(_t).forEach(function(zr){if(zr!=="img"){var Mr=_t[zr];Mr&&$v(Mr)==="object"?Bt[zr]=(0,d.clone)(Mr):Bt[zr]=Mr}});var Rt={},Qt=function(Mr){var En=g[Mr];if((0,d.isPlainObject)(En)&&!ev.includes(Mr)){var yn=p.shapeMap[Mr]||p.find(function(sn){return sn.get("name")===Mr});if(yn){var Ar=Js(yn.attr());(0,d.each)(En,function(sn,un){if(Mr===lt&&Bt[un]&&!C[un]){delete Bt[un];var An=ut[Mr][un]||rv[u][un];s.attr(un,An)}else if(Ar[un]||Ar[un]===0){delete Ar[un];var Gn=ut[Mr][un]||rv[u][un];yn.attr(un,Gn)}}),Rt[Mr]=Ar}}else if(Bt[Mr]&&!C[Mr]){delete Bt[Mr];var Xr=ut[Mr]||(ut[lt]?ut[lt][Mr]:void 0)||rv[u][Mr];s.attr(Mr,Xr)}};for(var de in g)Qt(de);lt?Rt[lt]=Bt:(0,d.mix)(Rt,Bt);for(var H in J)if(!C[H]){var se=J[H];(!(0,d.isPlainObject)(se)||ev.includes(H))&&(lt?((0,d.mix)(ut[lt],(a={},a[H]=se,a)),delete ut[H]):(0,d.mix)(ut,(n={},n[H]=se,n)),delete J[H])}var Te={};(0,d.deepMix)(Te,ut,Rt,J);var je=!1,Dr=function(Mr){var En,yn,Ar=Te[Mr];if((0,d.isPlainObject)(Ar)&&!ev.includes(Mr)){var Xr=p.shapeMap[Mr]||p.find(function(un){return un.get("name")===Mr});Xr&&((Xr.get("type")==="text"||Xr.get("labelRelated"))&&(delete Ar.x,delete Ar.y,delete Ar.matrix),Mr===lt&&(u==="combo"&&(delete Ar.r,delete Ar.width,delete Ar.height),je=!0),Xr.attr(Ar))}else if(!je){var sn=Ar||rv[u][Mr];u==="combo"?lt||s.attr((En={},En[Mr]=sn,En)):s.attr((yn={},yn[Mr]=sn,yn))}};for(var Kr in Te)Dr(Kr)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,d.clone)(f):(0,d.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},$y={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:jt.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||jt.defaultNode.size;return(0,d.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,d.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=Au(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,d.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Gv(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,x.__assign)((0,x.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Te){return Te.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Te){return Te.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Te){return Te.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Te){return Te.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,d.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,g=f.lineWidth,p=f.size/2;p||(p=f.r);var C=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},G=C.left,H=C.right,J=C.top,nt=C.bottom,ut=this.getSize(e),lt=ut[0],_t=ut[1],Bt={r:p,fill:c,stroke:l,lineWidth:g};if(n)!G&&G!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,x.__assign)((0,x.__assign)({},Bt),{x:-lt/2,y:0}));else if(G){var Rt="link-point-left";t.shapeMap[Rt]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Bt),{x:-lt/2,y:0}),className:Rt,name:Rt,isAnchorPoint:!0})}if(a)!H&&H!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,x.__assign)((0,x.__assign)({},Bt),{x:lt/2,y:0}));else if(H){var Qt="link-point-right";t.shapeMap[Qt]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Bt),{x:lt/2,y:0}),className:Qt,name:Qt,isAnchorPoint:!0})}if(o)!J&&J!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,x.__assign)((0,x.__assign)({},Bt),{x:0,y:-_t/2}));else if(J){var de="link-point-top";t.shapeMap[de]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Bt),{x:0,y:-_t/2}),className:de,name:de,isAnchorPoint:!0})}if(s)!nt&&nt!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,x.__assign)((0,x.__assign)({},Bt),{x:0,y:_t/2}));else if(nt){var se="link-point-bottom";t.shapeMap[se]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Bt),{x:0,y:_t/2}),className:se,name:se,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,x.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(J){return J.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,d.mix)({},f.attr(),a),l=c.width,g=l===void 0?20:l,p=c.height,C=p===void 0?20:p;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(g=0,C=0),f.attr((0,x.__assign)((0,x.__assign)({},c),{x:-g/2,y:-C/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var G="".concat(this.type,"-icon");if(u)n.shapeMap[G]=n.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:G,name:G});else{var g=a.width,C=a.height;n.shapeMap[G]=n.addShape("image",{attrs:(0,x.__assign)((0,x.__assign)({},a),{x:-g/2,y:-C/2}),className:G,name:G})}var H=n.shapeMap["node-label"]||n.find(function(J){return J.get("name")==="node-label"});H&&H.toFront()}}},qy=(0,x.__assign)((0,x.__assign)({},Jv),$y);vs.registerNode("single-node",qy);var nv="edge-shape";function Qy(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Jy={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:jt.defaultEdge.size,style:{x:0,y:0,stroke:jt.defaultEdge.style.stroke,lineAppendWidth:jt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:jt.edgeLabel.style.fill,fontSize:jt.edgeLabel.style.fontSize,fontFamily:jt.windowFontFamily}},stateStyles:(0,x.__assign)({},jt.edgeStateStyles)},getPath:function(e){var t=[];return(0,d.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style),a=e.size||jt.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,d.mix)({},jt.defaultEdge.style,{stroke:jt.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var g=o.attr(),p=e.style||{};p.stroke===void 0&&(p.stroke=e.color);var C=e.sourceNode,G=e.targetNode,H={radius:p.radius};c||(H={source:C,target:G,offset:p.offset,radius:p.radius});var J=this.getPath(l,H),nt={};r==="move"?nt={path:J}:(g.endArrow&&p.endArrow===!1&&(e.style.endArrow={path:""}),g.startArrow&&p.startArrow===!1&&(e.style.startArrow={path:""}),nt=(0,x.__assign)({},e.style),nt.lineWidth===void 0&&(nt.lineWdith=((0,d.isNumber)(s)?s:s==null?void 0:s[0])||g.lineWidth),nt.path===void 0&&(nt.path=J),nt.stroke===void 0&&(nt.stroke=g.stroke||e.color)),o&&o.attr(nt)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[nv],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,d.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=ao(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,x.__assign)((0,x.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,d.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=Qy(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:nv,name:nv,attrs:r});return t.shapeMap[nv]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,d.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+Qv;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,d.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},tm=(0,x.__assign)((0,x.__assign)({},Jv),Jy);vs.registerEdge("single-edge",tm),vs.registerEdge("line",{getControlPoints:function(){}},"single-edge"),vs.registerEdge("spline",{getPath:function(e){var t=fg(e);return t}},"single-edge"),vs.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Do(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,d.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=Do(t,o,r)}var f=Wo(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),vs.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,d.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=tv(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),vs.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=tv(r,n,e.curvePosition[0],e.curveOffset[0]),o=tv(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),vs.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),vs.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),vs.registerEdge("loop",{getPathPoints:function(e){return Zi(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var em={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:jt.comboLabel.refX,refY:jt.comboLabel.refY,options:{style:{stroke:jt.defaultCombo.style.stroke,fill:jt.defaultCombo.style.fill,lineWidth:jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jt.comboLabel.style.fill,fontSize:jt.comboLabel.style.fontSize,fontFamily:jt.windowFontFamily}},stateStyles:(0,x.__assign)({},jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,d.clone)(e.size||this.options.size||jt.defaultCombo.size);return(0,d.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,d.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,g=t.getContainer(),p=g.find(function(J){return J.get("name")==="combo-collapsed-substitute-icon"}),C=p&&!p.destroyed,G=t.get("keyShape");if(n&&u){if(C)p.show();else{var H={width:c||r.r*2||r.width,height:l||r.r*2||r.height};p=g.addShape("image",{attrs:(0,x.__assign)({img:f,x:-H.width/2,y:-H.height/2},H),name:"combo-collapsed-substitute-icon",draggable:!0})}G.hide()}else C&&(p.hide(),G.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,x.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},rm=(0,x.__assign)((0,x.__assign)({},Jv),em);vs.registerCombo("single-combo",rm),vs.registerCombo("circle",{options:{size:[jt.defaultCombo.size[0],jt.defaultCombo.size[0]],padding:Math.max.apply(Math,jt.defaultCombo.padding),animate:!0,style:{stroke:jt.defaultCombo.style.stroke,fill:jt.defaultCombo.style.fill,lineWidth:jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jt.comboLabel.style.fill,fontSize:jt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,x.__assign)({},jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,d.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,d.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||jt.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,x.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,d.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,d.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,d.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),vs.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:jt.defaultCombo.style.stroke,fill:jt.defaultCombo.style.fill,lineWidth:jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jt.comboLabel.style.fill,fontSize:jt.comboLabel.style.fontSize,fontFamily:jt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,x.__assign)({},jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],g;switch(r){case"top":g={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":g={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":g={x:u+s,y:0,textAlign:"left"};break;case"center":g={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":g={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:g={x:f+o,y:0,textAlign:"right"};break}return g.text=e.label,g},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,d.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,d.isNumber)(a.width)||isNaN(a.width)?s=o[0]||jt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,d.isNumber)(a.height)||isNaN(a.height)?u=o[1]||jt.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var g=(0,x.__assign)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},g},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,d.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,d.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),g=(0,d.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,g,!1)}},"single-combo"),vs.registerNode("simple-circle",{options:{size:jt.defaultNode.size,style:{x:0,y:0,stroke:jt.defaultNode.style.stroke,fill:jt.defaultNode.style.fill,lineWidth:jt.defaultNode.style.lineWidth},labelCfg:{style:{fill:jt.nodeLabel.style.fill,fontSize:jt.nodeLabel.style.fontSize,fontFamily:jt.windowFontFamily}},stateStyles:(0,x.__assign)({},jt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,x.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,d.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),vs.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:jt.defaultNode.style.stroke,fill:jt.defaultNode.style.fill,lineWidth:jt.defaultNode.style.lineWidth},labelCfg:{style:{fill:jt.nodeLabel.style.fill,fontSize:jt.nodeLabel.style.fontSize,fontFamily:jt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,x.__assign)({},jt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,x.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),vs.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:jt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,x.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,g=o-c/2;t.setClip({type:"rect",attrs:(0,x.__assign)({x:l,y:g,width:f,height:c},s)})}else if(n==="ellipse"){var p=r.rx,C=r.ry;t.setClip({type:"ellipse",attrs:(0,x.__assign)({x:a,y:o,rx:p,ry:C},s)})}else if(n==="polygon"){var G=r.points;t.setClip({type:"polygon",attrs:(0,x.__assign)({points:G},s)})}else if(n==="path"){var H=r.path;t.setClip({type:"path",attrs:(0,x.__assign)({path:H},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,x.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var wg={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},_g={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},jc=vs,nm=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Sg=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},am=Kt,im=(0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)({},D),k),E),Y),y),M),{transform:am,mat3:it}),_s=im,om=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=Sg(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,x.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),g=f.length,p=0;p<g;p++){var C=f[p];if(!(!C||C.destroyed)){var G=C.getModel();if(!C.isVisible()){r.push(G);continue}t.push(G)}}for(var H=c.length,p=0;p<H;p++){var J=c[p];if(!(!J||J.destroyed)){var G=J.getModel();if(!J.isVisible()){a.push(G);continue}G.isComboEdge?o.push(G):n.push(G)}}for(var nt=l.length,p=0;p<nt;p++){var ut=l[p];if(!ut.destroyed){var G=ut.getModel();if(!ut.isVisible()){u.push(G);continue}s.push(G)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(lt){return lt.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var l=o[c]||o;s=s.then(function(){var g,p=t.execLayoutMethod(l,c);return c===a.length-1&&((g=o.onAllLayoutEnd)===null||g===void 0||g.call(o)),p})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,x.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,d.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,d.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,x.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,d.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Hd(o);return s.size=[s.width,s.height],s}),a=Object.values((0,d.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Af(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,x.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,x.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Af(u.x)||Af(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),g=u/(c-1),p=f/(l-1);(!isFinite(g)||!g)&&(g=0),(!isFinite(p)||!g)&&(p=0);for(var C=e[0]-u/2,G=e[1]-f/2,H=!0,J=0;J<o;J++){var nt=a[J];Af(+nt.x)&&(H=!1,nt.x=J%c*g+C),Af(+nt.y)&&(H=!1,nt.y=Math.floor(J/c)*p+G)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),Mg=om,sm=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),Ag=sm,cc=jc.registerNode,Cg=jc.registerEdge,um=jc.registerCombo,Tg=$.registerBehavior,bn=jt,NS={version:jt.version,AbstractGraph:xg,BaseGlobal:bn,Util:_s,Shape:jc,Node:jv,Edge:rg,Combo:og,Hull:mg,registerNode:jc.registerNode,registerEdge:jc.registerEdge,registerCombo:jc.registerCombo,registerBehavior:$.registerBehavior,Arrow:wg,Marker:_g,AbstractLayout:Mg,AbstractEvent:Ag},fm=z(810369);function cm(){return window?window.devicePixelRatio:1}function Ig(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Il(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function Ah(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function lm(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Og(i,e){return i[0]===e[0]&&i[1]===e[1]}var hm=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,vm=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,dm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Lg=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Dg(i,e){var t=i.match(Lg);(0,d.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function gm(i,e,t){var r=hm.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,g=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,p=i.createLinearGradient(s.x,s.y,l,g);return Dg(a,p),p}function pm(i,e,t){var r=vm.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(Lg);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,g=Math.sqrt(c*c+l*l)/2,p=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*g);return Dg(s,p),p}function ym(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=dm.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function mm(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,d.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return gm(i,e,t);if(t[0]==="r")return pm(i,e,t);if(t[0]==="p")return ym(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function xm(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function av(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function td(i,e){return av(i)*av(e)?(i[0]*e[0]+i[1]*e[1])/(av(i)*av(e)):1}function Ng(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(td(i,e))}function Pg(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,g=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,p=l*l/(t*t)+g*g/(r*r);p>1&&(t*=Math.sqrt(p),r*=Math.sqrt(p));var C=t*t*(g*g)+r*r*(l*l),G=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(G*=-1),isNaN(G)&&(G=0);var H=r?G*t*g/r:0,J=t?G*-r*l/t:0,nt=(s+f)/2+Math.cos(n)*H-Math.sin(n)*J,ut=(u+c)/2+Math.sin(n)*H+Math.cos(n)*J,lt=[(l-H)/t,(g-J)/r],_t=[(-1*l-H)/t,(-1*g-J)/r],Bt=Ng([1,0],lt),Rt=Ng(lt,_t);return td(lt,_t)<=-1&&(Rt=Math.PI),td(lt,_t)>=1&&(Rt=0),o===0&&Rt>0&&(Rt=Rt-2*Math.PI),o===1&&Rt<0&&(Rt=Rt+2*Math.PI),{cx:nt,cy:ut,rx:Og(i,[f,c])?0:t,ry:Og(i,[f,c])?0:r,startAngle:Bt,endAngle:Bt+Rt,xRotation:n,arcFlag:a,sweepFlag:o}}var iv=Math.sin,ov=Math.cos,ed=Math.atan2,sv=Math.PI;function kg(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=ed(c,f),g=new ud({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*ov(sv/6)+","+10*iv(sv/6)+" L0,0 L"+10*ov(sv/6)+",-"+10*iv(sv/6),stroke:s,lineWidth:u}});g.translate(n,a),g.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",g)}function Rg(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,g=l.d,p=l.fill,C=l.stroke,G=l.lineWidth,H=(0,x.__rest)(l,["d","fill","stroke","lineWidth"]),J=t-n,nt=r-a,ut=ed(nt,J);g&&(n=n-ov(ut)*g,a=a-iv(ut)*g);var lt=new ud({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,x.__assign)((0,x.__assign)({},H),{stroke:C||f,lineWidth:G||c,fill:p})});lt.translate(n,a),lt.rotateAtPoint(n,a,ut),i.set(o?"startArrowShape":"endArrowShape",lt)}function Ol(i,e,t,r,n){var a=ed(r-e,t-i);return{dx:ov(a)*n,dy:iv(a)*n}}function rd(i,e,t,r,n,a){typeof e.startArrow=="object"?Rg(i,e,t,r,n,a,!0):e.startArrow?kg(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function nd(i,e,t,r,n,a){typeof e.endArrow=="object"?Rg(i,e,t,r,n,a,!1):e.endArrow?kg(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var Bg={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function hh(i,e){var t=e.attr();for(var r in t){var n=t[r],a=Bg[r]?Bg[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,d.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=mm(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function ad(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function bm(i,e,t){var r=i.get("refreshElements");(0,d.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?od(e,t):id(e,t)}function id(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&od(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&id(r.cfg.children,e);else{var n=Em(r,e);r.cfg.refresh=n,n&&r.isGroup()&&id(r.cfg.children,e)}}}function Fg(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Fg(t.cfg.children)}}function od(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&od(r.get("children"),e))}}function Em(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&Ah(t,e);return r}function Gg(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],g=l[0];if(c===0&&a&&a.d){var p=i.getStartTangent();f=Ol(p[0][0],p[0][1],p[1][0],p[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var C=n[c+1];if(C[0]==="Z"){var p=i.getEndTangent();f=Ol(p[0][0],p[0][1],p[1][0],p[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var p=i.getEndTangent();f=Ol(p[0][0],p[0][1],p[1][0],p[1][1],o.d)}var G=f.dx,H=f.dy;switch(g){case"M":e.moveTo(l[1]-G,l[2]-H),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-G,l[2]-H);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-G,l[4]-H);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-G,l[6]-H);break;case"A":{var J=void 0;r?(J=r[c],J||(J=Pg(s,l),r[c]=J)):J=Pg(s,l);var nt=J.cx,ut=J.cy,lt=J.rx,_t=J.ry,Bt=J.startAngle,Rt=J.endAngle,Qt=J.xRotation,de=J.sweepFlag;if(e.ellipse)e.ellipse(nt,ut,lt,_t,Qt,Bt,Rt,1-de);else{var se=lt>_t?lt:_t,Te=lt>_t?1:lt/_t,je=lt>_t?_t/lt:1;e.translate(nt,ut),e.rotate(Qt),e.scale(Te,je),e.arc(0,0,se,Bt,Rt,1-de),e.scale(1/Te,1/je),e.rotate(-Qt),e.translate(-nt,-ut)}break}case"Z":e.closePath();break;default:break}if(g==="Z")s=u;else{var Dr=l.length;s=[l[Dr-2],l[Dr-1]]}}}}function zg(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function wm(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=lm(t,n):r?e=t:a&&(e=n)}return e}function _m(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,d.each)(i,function(a){var o=wm(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,d.min)(e),minY:(0,d.min)(t),maxX:(0,d.max)(r),maxY:(0,d.max)(n)}}function Sm(i,e){return!i||!e||!Ah(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var Mm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){zg(this,t)},e.prototype.getShapeBase=function(){return S},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),hh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,d.each)(t,function(g){var p=g.cfg.cacheCanvasBBox;p&&g.cfg.isInView&&(r.push(p.minX,p.maxX),n.push(p.minY,p.maxY))});var a=null;if(r.length){var o=(0,d.min)(r),s=(0,d.max)(r),u=(0,d.min)(n),f=(0,d.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",Ah(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),hh(t,this),this._applyClip(t,this.getClip()),ad(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Yc),Ug=Mm,Am=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return S},e.prototype.getGroupBase=function(){return Ug},e.prototype.onCanvasChange=function(t){zg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=Tl(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),hh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Ah(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),hh(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Ah(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Cl),qu=Am,Cm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,g=Ig(u,f,t,r);return a&&n?g<=c+l:a?g<=c:n?g>=c-l&&g<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(qu),Tm=Cm;function uv(i,e,t,r){return i/(t*t)+e/(r*r)}var Im=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,g=s.ry,p=(t-f)*(t-f),C=(r-c)*(r-c);return a&&n?uv(p,C,l+u,g+u)<=1:a?uv(p,C,l,g)<=1:n?uv(p,C,l-u,g-u)>=1&&uv(p,C,l+u,g+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(qu),Om=Im;function Wg(i){return i instanceof HTMLElement&&(0,d.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var Lm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,d.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Wg(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,g=r.img;(g instanceof Image||Wg(g))&&(!(0,d.isNil)(u)&&!(0,d.isNil)(f)&&!(0,d.isNil)(c)&&!(0,d.isNil)(l)?t.drawImage(g,u,f,c,l,n,a,o,s):t.drawImage(g,n,a,o,s))},e}(qu),Dm=Lm;function Hc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?lr.pointToLine(i,e,t,r,a,o)<=n/2:!1}var Nm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&rd(this,t,a,o,r,n),u&&nd(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return Hc(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=Ol(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=Ol(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return lr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return lr.pointAt(n,a,o,s,t)},e}(qu),Pm=Nm,km={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Rm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,d.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,d.isFunction)(a))s=a,u=s(r,n,o),u=Ve(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");Gg(this,t,{path:r},n)},e.Symbols=km,e}(qu),Bm=Rm;function Xg(i,e,t){var r=Qi();return i.createPath(r),r.isPointInPath(e,t)}var Fm=1e-6;function sd(i){return Math.abs(i)<Fm?0:i<0?-1:1}function Gm(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function Yg(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(Gm(o,s,[e,t]))return!0;sd(o[1]-t)>0!=sd(s[1]-t)>0&&sd(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Ch(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return Ig(f.x,f.y,o,s)<=a/2}var zm=Kt;function Um(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function Wm(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,g=u.box;if(!(g&&!Il(g.x-o,g.y-o,g.width+e,g.height+e,t,r))){switch(u.command){case"L":case"Z":a=Hc(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var p=Z.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=p<=e/2;break;case"C":var C=Gt.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=C<=e/2;break;case"A":var G=u.arcParams,H=G.cx,J=G.cy,nt=G.rx,ut=G.ry,lt=G.startAngle,_t=G.endAngle,Bt=G.xRotation,Rt=[t,r,1],Qt=nt>ut?nt:ut,de=nt>ut?1:nt/ut,se=nt>ut?ut/nt:1,Te=zm(null,[["t",-H,-J],["r",-Bt],["s",1/de,1/se]]);Wi.transformMat3(Rt,Rt,Te),a=Ch(0,0,Qt,lt,_t,e,Rt[0],Rt[1]);break;default:break}if(a)break}}return a}function Xm(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var fv=(0,x.__assign)({hasArc:Um,extractPolygons:Xm,isPointInStroke:Wm},P);function Vg(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=Yg(a,e,t),r)break}return r}var Ym=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Ve(t);var r=fv.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Yd(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();rd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();nd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=fv.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=Xg(this,t,r);else{var l=this.attr("path"),g=fv.extractPolygons(l);f=Vg(g.polygons,t,r)||Vg(g.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");Gg(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,d.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,d.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,d.isNil)(s)||(0,d.isNil)(a))return null;var u=s.length,f=o[a+1];return Gt.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",fv.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=Gt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=Gt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(qu),ud=Ym;function jg(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if(Hc(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],g=i[a-1];if(Hc(l[0],l[1],g[0],g[1],e,t,r))return!0}return!1}var Vm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=jg(s,o,t,r,!0)),!u&&a&&(u=Yg(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(qu),jm=Vm,Hm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&rd(this,t,n[1][0],n[1][1],u,f),o&&nd(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return jg(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var g=Ol(u,f,n[1][0],n[1][1],a.d);u+=g.dx,f+=g.dy}if(o&&o.d){var g=Ol(n[s-2][0],n[s-2][1],c,l,o.d);c-=g.dx,l-=g.dy}t.beginPath(),t.moveTo(u,f);for(var p=0;p<s-1;p++){var C=n[p];t.lineTo(C[0],C[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",va.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),lr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=lr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(qu),Km=Hm;function Zm(i,e,t,r,n,a,o){var s=n/2;return Il(i-s,e-s,t,n,a,o)||Il(i+t-s,e-s,n,r,a,o)||Il(i+s,e+r-s,t,n,a,o)||Il(i-s,e+s,n,r,a,o)}function $m(i,e,t,r,n,a,o,s){var u=a/2;return Hc(i+n,e,i+t-n,e,a,o,s)||Hc(i+t,e+n,i+t,e+r-n,a,o,s)||Hc(i+t-n,e+r,i+n,e+r,a,o,s)||Hc(i,e+r-n,i,e+n,a,o,s)||Ch(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Ch(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Ch(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Ch(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var qm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,g=s.radius;if(g){var C=!1;return n&&(C=$m(u,f,c,l,g,o,t,r)),!C&&a&&(C=Xg(this,t,r)),C}else{var p=o/2;if(a&&n)return Il(u-p,f-p,c+p,l+p,t,r);if(a)return Il(u,f,c,l,t,r);if(n)return Zm(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=xm(u),c=f[0],l=f[1],g=f[2],p=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-g),g!==0&&t.arc(n+o-g,a+s-g,g,0,Math.PI/2),t.lineTo(n+p,a+s),p!==0&&t.arc(n+p,a+s-p,p,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(qu),Qm=qm,Jm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=$n(t)},e.prototype._setText=function(t){var r=null;(0,d.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=_a(a.text,a.fontSize,a.lineHeight),g;(0,d.each)(r,function(p,C){g=u+C*(c+f)-l+f,o==="middle"&&(g+=l-f-(l-f)/2),o==="top"&&(g+=l-f),(0,d.isNil)(p)||(n?t.fillText(p,s,g):t.strokeText(p,s,g))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,d.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(qu),t1=Jm;function e1(i,e){if(e){var t=Yu(e);return bi(t,i)}return i}function Hg(i,e,t){var r=i.getTotalMatrix();if(r){var n=e1([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function Kg(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!Gf(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=Hg(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Zg(i,e,t){if(!Kg(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Zg(s,e,t);else if(Kg(s,e,t)){var u=s,f=Hg(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var r1=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return S},e.prototype.getGroupBase=function(){return Ug},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||cm();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Zg(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=_m(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=Sm(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,d.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),hh(t,this),ad(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),hh(t,this),bm(this,n,a),ad(t,n,a),t.restore()):r.length&&Fg(r),(0,d.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,d.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(oh),lc=r1,PS="0.5.12",fd={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},si={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},kS=null;function ku(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function $g(i){var e=fd[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=ku(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function qg(i,e){var t=i.get("el"),r=(0,d.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function n1(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function a1(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Th(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Ih(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){$g(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Qg(i,e){e.forEach(function(t){t.draw(i)})}function Jg(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")n1(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&qg(i,function(l,g){return c.indexOf(l)-c.indexOf(g)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Th(i):e==="clip"?Ih(i,r):e==="attr"||e==="add"&&i.draw(r)}}var i1=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=ku("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){Jg(this,t)},e.prototype.getShapeBase=function(){return m},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Ih(this,t),this.createPath(t),r.length&&Qg(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){si[s]&&a.setAttribute(si[s],o)}),Th(this)},e}(Yc),tp=i1,o1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return m},e.prototype.getGroupBase=function(){return tp},e.prototype.onCanvasChange=function(t){Jg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=Tl(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,g=o-c,p=a+s+c,C=o+u+c;return{x:l,y:g,minX:l,minY:g,maxX:p,maxY:C,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||$g(this),Ih(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,g=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&g.setAttribute(si.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&g.setAttribute(si.strokeOpacity,c),l&&g.setAttribute(si.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(si[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(si[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(si[r],"url(#"+o+")")}else a.setAttribute(si[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&a1(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Th(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(Cl),Ru=o1,s1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):si[s]&&a.setAttribute(si[s],o)})},e}(Ru),u1=s1,f1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,d.each)(r||n,function(f,c){si[c]&&a.setAttribute(si[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Ru),c1=f1,l1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):si[s]&&a.setAttribute(si[s],o)})},e}(Ru),h1=l1,v1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):si[u]&&o.setAttribute(si[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,d.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,d.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Ru),d1=v1,g1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,d.isObject)(o)?t.addArrow(n,si[s]):t.getDefaultArrow(n,si[s]);a.setAttribute(si[s],"url(#"+u+")")}else a.removeAttribute(si[s]);else si[s]&&a.setAttribute(si[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return lr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return lr.pointAt(n,a,o,s,t)},e}(Ru),p1=g1,cv={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},ep={get:function(i){return cv[i]},register:function(i,e){cv[i]=e},remove:function(i){delete cv[i]},getAll:function(){return cv}},y1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,d.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,d.isFunction)(o)?s=o:s=ep.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=ep,e}(Ru),m1=y1,x1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){if(u==="path"&&(0,d.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,d.isObject)(s)?t.addArrow(a,si[u]):t.getDefaultArrow(a,si[u]);o.setAttribute(si[u],"url(#"+f+")")}else o.removeAttribute(si[u]);else si[u]&&o.setAttribute(si[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Ru),b1=x1,E1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):si[s]&&a.setAttribute(si[s],o)})},e}(Ru),w1=E1,_1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):si[s]&&a.setAttribute(si[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",va.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),lr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=lr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Ru),S1=_1,M1=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,A1=/[^\s,]+/gi;function C1(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function RS(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(M1),each(i,function(e,t){if(e=e.match(A1),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var T1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,d.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&si[c]&&o.setAttribute(si[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=C1(s);(0,d.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(Ru),I1=T1,rp=.3,O1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},L1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},D1={left:"left",start:"left",center:"middle",right:"end",end:"end"},N1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,d.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Th(n):si[u]&&o.setAttribute(si[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=Wf();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",L1[n]||"alphabetic"):t.setAttribute("alignment-baseline",O1[n]||"baseline"),t.setAttribute("text-anchor",D1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,d.each)(u,function(l,g){g===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+rp)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-rp)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Ru),P1=N1,k1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,R1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,B1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function np(i){var e=i.match(B1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,d.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function F1(i,e){var t=k1.exec(i),r=(0,d.mod)((0,d.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=np(n)}function G1(i,e){var t=R1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=np(o)}var z1=function(){function i(e){this.cfg={};var t=null,r=(0,d.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=ku("linearGradient"),F1(e,t)):(t=ku("radialGradient"),G1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),U1=z1,W1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},X1={x:"-40%",y:"-40%",width:"200%",height:"200%"},Y1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=ku("filter");return(0,d.each)(X1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,d.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,d.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[W1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),V1=Y1,j1=function(){function i(e,t){this.cfg={};var r=ku("marker"),n=(0,d.uniqueId)("marker_");r.setAttribute("id",n);var a=ku("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,d.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),ap=j1,H1=function(){function i(e){this.type="clip",this.cfg={};var t=ku("clipPath");this.el=t,this.id=(0,d.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),K1=H1,Z1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,$1=function(){function i(e){this.cfg={};var t=ku("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=ku("image");t.appendChild(r);var n=(0,d.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=Z1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),q1=$1,Q1=function(){function i(e){var t=ku("defs"),r=(0,d.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new ap(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new U1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new ap(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new V1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new q1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new K1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),J1=Q1,tx=function(i){(0,x.__extends)(e,i);function e(t){return i.call(this,(0,x.__assign)((0,x.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return m},e.prototype.getGroupBase=function(){return tp},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!fd[a.tagName]){for(var o=a.parentNode;o&&!fd[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=ku("svg"),r=new J1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&qg(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Th(this):t==="clip"?Ih(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();Ih(this,t),r.length&&Qg(t,r)},e}(oh),Oh=tx,BS="0.5.6",Lh,cd,ip,ld;function ex(){Lh=document.createElement("table"),cd=document.createElement("tr"),ip=/^\s*<(\w+|!)[^>]*>/,ld={tr:document.createElement("tbody"),tbody:Lh,thead:Lh,tfoot:Lh,td:cd,th:cd,"*":document.createElement("div")}}function Ji(i){Lh||ex();var e=ip.test(i)&&RegExp.$1;(!e||!(e in ld))&&(e="*");var t=ld[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var rx=z(6767),Dh=z.n(rx);function lv(i){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lv(i)}var nx=/^\s+/,ax=/\s+$/;function ua(i,e){if(i=i||"",e=e||{},i instanceof ua)return i;if(!(this instanceof ua))return new ua(i,e);var t=ix(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}ua.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,n,a,o,s;return t=e.r/255,r=e.g/255,n=e.b/255,t<=.03928?a=t/12.92:a=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=lp(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=sp(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=sp(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=op(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=op(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return up(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return fx(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(mo(this._r,255)*100)+"%",g:Math.round(mo(this._g,255)*100)+"%",b:Math.round(mo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(mo(this._r,255)*100)+"%, "+Math.round(mo(this._g,255)*100)+"%, "+Math.round(mo(this._b,255)*100)+"%)":"rgba("+Math.round(mo(this._r,255)*100)+"%, "+Math.round(mo(this._g,255)*100)+"%, "+Math.round(mo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ex[up(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+fp(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var a=ua(e);r="#"+fp(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0,a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return ua(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(vx,arguments)},brighten:function(){return this._applyModification(dx,arguments)},darken:function(){return this._applyModification(gx,arguments)},desaturate:function(){return this._applyModification(cx,arguments)},saturate:function(){return this._applyModification(lx,arguments)},greyscale:function(){return this._applyModification(hx,arguments)},spin:function(){return this._applyModification(px,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(xx,arguments)},complement:function(){return this._applyCombination(yx,arguments)},monochromatic:function(){return this._applyCombination(bx,arguments)},splitcomplement:function(){return this._applyCombination(mx,arguments)},triad:function(){return this._applyCombination(cp,[3])},tetrad:function(){return this._applyCombination(cp,[4])}},ua.fromRatio=function(i,e){if(lv(i)=="object"){var t={};for(var r in i)i.hasOwnProperty(r)&&(r==="a"?t[r]=i[r]:t[r]=Nh(i[r]));i=t}return ua(i,e)};function ix(i){var e={r:0,g:0,b:0},t=1,r=null,n=null,a=null,o=!1,s=!1;return typeof i=="string"&&(i=Mx(i)),lv(i)=="object"&&(hc(i.r)&&hc(i.g)&&hc(i.b)?(e=ox(i.r,i.g,i.b),o=!0,s=String(i.r).substr(-1)==="%"?"prgb":"rgb"):hc(i.h)&&hc(i.s)&&hc(i.v)?(r=Nh(i.s),n=Nh(i.v),e=ux(i.h,r,n),o=!0,s="hsv"):hc(i.h)&&hc(i.s)&&hc(i.l)&&(r=Nh(i.s),a=Nh(i.l),e=sx(i.h,r,a),o=!0,s="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=lp(t),{ok:o,format:i.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function ox(i,e,t){return{r:mo(i,255)*255,g:mo(e,255)*255,b:mo(t,255)*255}}function op(i,e,t){i=mo(i,255),e=mo(e,255),t=mo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=(r+n)/2;if(r==n)a=o=0;else{var u=r-n;switch(o=s>.5?u/(2-r-n):u/(r+n),r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,l:s}}function sx(i,e,t){var r,n,a;i=mo(i,360),e=mo(e,100),t=mo(t,100);function o(f,c,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?f+(c-f)*6*l:l<1/2?c:l<2/3?f+(c-f)*(2/3-l)*6:f}if(e===0)r=n=a=t;else{var s=t<.5?t*(1+e):t+e-t*e,u=2*t-s;r=o(u,s,i+1/3),n=o(u,s,i),a=o(u,s,i-1/3)}return{r:r*255,g:n*255,b:a*255}}function sp(i,e,t){i=mo(i,255),e=mo(e,255),t=mo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=r,u=r-n;if(o=r===0?0:u/r,r==n)a=0;else{switch(r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,v:s}}function ux(i,e,t){i=mo(i,360)*6,e=mo(e,100),t=mo(t,100);var r=Math.floor(i),n=i-r,a=t*(1-e),o=t*(1-n*e),s=t*(1-(1-n)*e),u=r%6,f=[t,o,a,a,s,t][u],c=[s,t,t,o,a,a][u],l=[a,a,s,t,t,o][u];return{r:f*255,g:c*255,b:l*255}}function up(i,e,t,r){var n=[Qu(Math.round(i).toString(16)),Qu(Math.round(e).toString(16)),Qu(Math.round(t).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function fx(i,e,t,r,n){var a=[Qu(Math.round(i).toString(16)),Qu(Math.round(e).toString(16)),Qu(Math.round(t).toString(16)),Qu(hp(r))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function fp(i,e,t,r){var n=[Qu(hp(r)),Qu(Math.round(i).toString(16)),Qu(Math.round(e).toString(16)),Qu(Math.round(t).toString(16))];return n.join("")}ua.equals=function(i,e){return!i||!e?!1:ua(i).toRgbString()==ua(e).toRgbString()},ua.random=function(){return ua.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function cx(i,e){e=e===0?0:e||10;var t=ua(i).toHsl();return t.s-=e/100,t.s=hv(t.s),ua(t)}function lx(i,e){e=e===0?0:e||10;var t=ua(i).toHsl();return t.s+=e/100,t.s=hv(t.s),ua(t)}function hx(i){return ua(i).desaturate(100)}function vx(i,e){e=e===0?0:e||10;var t=ua(i).toHsl();return t.l+=e/100,t.l=hv(t.l),ua(t)}function dx(i,e){e=e===0?0:e||10;var t=ua(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),ua(t)}function gx(i,e){e=e===0?0:e||10;var t=ua(i).toHsl();return t.l-=e/100,t.l=hv(t.l),ua(t)}function px(i,e){var t=ua(i).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,ua(t)}function yx(i){var e=ua(i).toHsl();return e.h=(e.h+180)%360,ua(e)}function cp(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=ua(i).toHsl(),r=[ua(i)],n=360/e,a=1;a<e;a++)r.push(ua({h:(t.h+a*n)%360,s:t.s,l:t.l}));return r}function mx(i){var e=ua(i).toHsl(),t=e.h;return[ua(i),ua({h:(t+72)%360,s:e.s,l:e.l}),ua({h:(t+216)%360,s:e.s,l:e.l})]}function xx(i,e,t){e=e||6,t=t||30;var r=ua(i).toHsl(),n=360/t,a=[ua(i)];for(r.h=(r.h-(n*e>>1)+720)%360;--e;)r.h=(r.h+n)%360,a.push(ua(r));return a}function bx(i,e){e=e||6;for(var t=ua(i).toHsv(),r=t.h,n=t.s,a=t.v,o=[],s=1/e;e--;)o.push(ua({h:r,s:n,v:a})),a=(a+s)%1;return o}ua.mix=function(i,e,t){t=t===0?0:t||50;var r=ua(i).toRgb(),n=ua(e).toRgb(),a=t/100,o={r:(n.r-r.r)*a+r.r,g:(n.g-r.g)*a+r.g,b:(n.b-r.b)*a+r.b,a:(n.a-r.a)*a+r.a};return ua(o)},ua.readability=function(i,e){var t=ua(i),r=ua(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)},ua.isReadable=function(i,e,t){var r=ua.readability(i,e),n,a;switch(a=!1,n=Ax(t),n.level+n.size){case"AAsmall":case"AAAlarge":a=r>=4.5;break;case"AAlarge":a=r>=3;break;case"AAAsmall":a=r>=7;break}return a},ua.mostReadable=function(i,e,t){var r=null,n=0,a,o,s,u;t=t||{},o=t.includeFallbackColors,s=t.level,u=t.size;for(var f=0;f<e.length;f++)a=ua.readability(i,e[f]),a>n&&(n=a,r=ua(e[f]));return ua.isReadable(i,r,{level:s,size:u})||!o?r:(t.includeFallbackColors=!1,ua.mostReadable(i,["#fff","#000"],t))};var hd=ua.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ex=ua.hexNames=wx(hd);function wx(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function lp(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function mo(i,e){_x(i)&&(i="100%");var t=Sx(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function hv(i){return Math.min(1,Math.max(0,i))}function Eu(i){return parseInt(i,16)}function _x(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function Sx(i){return typeof i=="string"&&i.indexOf("%")!=-1}function Qu(i){return i.length==1?"0"+i:""+i}function Nh(i){return i<=1&&(i=i*100+"%"),i}function hp(i){return Math.round(parseFloat(i)*255).toString(16)}function vp(i){return Eu(i)/255}var Ju=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function hc(i){return!!Ju.CSS_UNIT.exec(i)}function Mx(i){i=i.replace(nx,"").replace(ax,"").toLowerCase();var e=!1;if(hd[i])i=hd[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=Ju.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=Ju.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Ju.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=Ju.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Ju.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=Ju.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Ju.hex8.exec(i))?{r:Eu(t[1]),g:Eu(t[2]),b:Eu(t[3]),a:vp(t[4]),format:e?"name":"hex8"}:(t=Ju.hex6.exec(i))?{r:Eu(t[1]),g:Eu(t[2]),b:Eu(t[3]),format:e?"name":"hex"}:(t=Ju.hex4.exec(i))?{r:Eu(t[1]+""+t[1]),g:Eu(t[2]+""+t[2]),b:Eu(t[3]+""+t[3]),a:vp(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=Ju.hex3.exec(i))?{r:Eu(t[1]+""+t[1]),g:Eu(t[2]+""+t[2]),b:Eu(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function Ax(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var vv=2,dp=.16,Cx=.05,Tx=.05,Ix=.15,gp=5,pp=4,Ox=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function yp(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-vv*e:Math.round(i.h)+vv*e:r=t?Math.round(i.h)+vv*e:Math.round(i.h)-vv*e,r<0?r+=360:r>=360&&(r-=360),r}function mp(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-dp*e:e===pp?r=i.s+dp:r=i.s+Cx*e,r>1&&(r=1),t&&e===gp&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function xp(i,e,t){var r;return t?r=i.v+Tx*e:r=i.v-Ix*e,r>1&&(r=1),Number(r.toFixed(2))}function dv(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=ua(i),n=gp;n>0;n-=1){var a=r.toHsv(),o=ua({h:yp(a,n,!0),s:mp(a,n,!0),v:xp(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=pp;s+=1){var u=r.toHsv(),f=ua({h:yp(u,s),s:mp(u,s),v:xp(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?Ox.map(function(c){var l=c.index,g=c.opacity,p=ua.mix(e.backgroundColor||"#141414",t[l],g*100).toHexString();return p}):t}var vd={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ks={},dd={};Object.keys(vd).forEach(function(i){ks[i]=dv(vd[i]),ks[i].primary=ks[i][5],dd[i]=dv(vd[i],{theme:"dark",backgroundColor:"#141414"}),dd[i].primary=dd[i][5]});var FS=ks.red,GS=ks.volcano,zS=ks.gold,US=ks.orange,WS=ks.yellow,XS=ks.lime,YS=ks.green,VS=ks.cyan,jS=ks.blue,HS=ks.geekblue,KS=ks.purple,ZS=ks.magenta,$S=ks.grey,ns=function(e,t,r){var n=Dh()(e),a=Dh()(t);return Dh()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},Lx=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=ns(t,e,.05).rgb().toString(),a=ns(t,e,.1).rgb().toString(),o=ns(t,e,.2).rgb().toString(),s=ns(t,e,.4).rgb().toString(),u=ns(t,r,.02).rgb().toString(),f=ns(t,r,.05).rgb().toString(),c=ns(t,r,.1).rgb().toString(),l=ns(t,r,.2).rgb().toString(),g=ns(t,r,.3).rgb().toString(),p=dv(e,{theme:"default",backgroundColor:t}),C=Dh()(e).hex().toLowerCase(),G=p.indexOf(C),H=e;return G!==-1&&(H=p[G+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:H,highlightFill:o,disableStroke:g,disableFill:f,edgeMainStroke:g,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:g,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:g,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:H,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},Dx=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=ns(t,e,.2).rgb().toString(),a=ns(t,e,.3).rgb().toString(),o=ns(t,e,.6).rgb().toString(),s=ns(t,e,.8).rgb().toString(),u=ns(t,r,.2).rgb().toString(),f=ns(t,r,.25).rgb().toString(),c=ns(t,r,.3).rgb().toString(),l=ns(t,r,.4).rgb().toString(),g=ns(t,r,.5).rgb().toString(),p=dv(e,{theme:"dark",backgroundColor:t}),C=Dh()(e).hex().toLowerCase(),G=p.indexOf(C),H=e;return G!==-1&&(H=p[G+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:g,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:H,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},gd=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?Lx(e,t,"rgb(150, 150, 150)"):Dx(e,t,"#777")},Nx=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(gd(o,t,r,n))}),a},Px="rgb(95, 149, 255)",kx="rgb(255, 255, 255)",bp="rgb(0, 0, 0)",Ja=gd(Px,kx),Ll={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ja.mainStroke,fill:Ja.mainFill},size:20,color:Ja.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Ja.activeFill,stroke:Ja.activeStroke}},nodeStateStyles:{active:{fill:Ja.activeFill,stroke:Ja.activeStroke,lineWidth:2,shadowColor:Ja.mainStroke,shadowBlur:10},selected:{fill:Ja.selectedFill,stroke:Ja.selectedStroke,lineWidth:4,shadowColor:Ja.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Ja.highlightFill,stroke:Ja.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Ja.inactiveFill,stroke:Ja.inactiveStroke,lineWidth:1},disable:{fill:Ja.disableFill,stroke:Ja.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:bp,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Ja.edgeMainStroke,lineAppendWidth:2},color:Ja.edgeMainStroke},edgeStateStyles:{active:{stroke:Ja.edgeActiveStroke,lineWidth:1},selected:{stroke:Ja.edgeSelectedStroke,lineWidth:2,shadowColor:Ja.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ja.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Ja.edgeInactiveStroke,lineWidth:1},disable:{stroke:Ja.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:bp,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Ja.comboMainFill,lineWidth:1,stroke:Ja.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Ja.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ja.comboActiveStroke,lineWidth:1,fill:Ja.comboActiveFill},selected:{stroke:Ja.comboSelectedStroke,lineWidth:2,fill:Ja.comboSelectedFill,shadowColor:Ja.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ja.comboHighlightStroke,lineWidth:2,fill:Ja.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Ja.comboInactiveStroke,fill:Ja.comboInactiveFill,lineWidth:1},disable:{stroke:Ja.comboDisableStroke,fill:Ja.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},Rx=function(e){var t=e.clone();return Bx(e,t),t},Bx=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}};function gv(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var Fx=_s.cloneEvent,Gx=_s.isViewportChanged,zx=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,d.wrapBehavior)(this,"onCanvasEvents"),f=(0,d.wrapBehavior)(this,"onExtendEvents"),c=(0,d.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(gv(s,"wheel",c)),typeof window!="undefined"&&(a.push(gv(window,"keydown",f)),a.push(gv(window,"keyup",f)),a.push(gv(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,d.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),Gx(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var g=l.get("item");if(!g.destroyed){var p=g.getType();if(t.target=o,t.item=g,t.canvasX===t.x&&t.canvasY===t.y){var C=n.getCanvasByPoint(t.x,t.y);t.canvasX=C.x,t.canvasY=C.y}t.name&&!t.name.includes(":")?(n.emit("".concat(p,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,p)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,d.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=Fx(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,d.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(Ag),Ux=zx,Za=z(483360),Wx=z(981746),pv=z.n(Wx),Ep=_s.traverseTree,Xx=function(e,t){var r;return e?(0,d.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},Yx=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],g=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var p=0;p<g;++p){var C=l[p];r.push(+C)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},Vx=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,g=a[s],p=g.length;n[s*4+2]=l,n[s*4+3]=p/2,c=Math.max(c,p/2);for(var C=0;C<p;++C){var G=g[C];n.push(+G)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},jx=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var g=a.length,p=o[u],C=p.length;a[u*4+2]=g+1048576*C/4,a[u*4+3]=0,l=Math.max(l,C/4);for(var G=0;G<C;++G){var H=p[G];a.push(+H)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},Hx=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},Kx=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},Zx=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;Ep(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||Ep(e,function(l){var g=(l[s]-n[s])/c*(Math.PI*2-f)+f,p=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=p*Math.cos(g),l.y=p*Math.sin(g),!0}),e},wp=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},_p=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"},$x=(0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)({},_s),I),A),L),U),vc=$x,qx=vc.radialLayout,Qx=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=pv()[t.type](r,t.config);return qx(n),n};return}this.layoutMethod=function(r){return pv()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),Jx=Qx;(0,Za.registerLayout)("grid",Za.GridLayout),(0,Za.registerLayout)("random",Za.RandomLayout),(0,Za.registerLayout)("force",Za.ForceLayout),(0,Za.registerLayout)("circular",Za.CircularLayout),(0,Za.registerLayout)("dagre",Za.DagreLayout),(0,Za.registerLayout)("dagreCompound",Za.DagreCompoundLayout),(0,Za.registerLayout)("radial",Za.RadialLayout),(0,Za.registerLayout)("concentric",Za.ConcentricLayout),(0,Za.registerLayout)("mds",Za.MDSLayout),(0,Za.registerLayout)("fruchterman",Za.FruchtermanLayout),(0,Za.registerLayout)("fruchterman-gpu",Za.FruchtermanGPULayout),(0,Za.registerLayout)("gForce",Za.GForceLayout),(0,Za.registerLayout)("force2",Za.Force2Layout),(0,Za.registerLayout)("gForce-gpu",Za.GForceGPULayout),(0,Za.registerLayout)("comboForce",Za.ComboForceLayout),(0,Za.registerLayout)("comboCombined",Za.ComboCombinedLayout),(0,Za.registerLayout)("forceAtlas2",Za.ForceAtlas2Layout);var tb=function(e,t){t.isCustomLayout=!0,Za.Layouts[e]=(0,Za.registerLayout)(e,t)},eb=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),rb=eb,nb=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,g=c.edges,p=c.layoutCfg,C=p===void 0?{}:p,G=C.type,H=layout.getLayoutByName(G);if(!H){this.postMessage({type:n.ERROR,message:"layout ".concat(G," not found")});break}var J;C.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),J==null||J.destroy()},J=new H(C),J.init({nodes:l,edges:g}),J.execute();break}case n.GPURUN:{var nt=s.data,ut=nt.nodes,g=nt.edges,lt=nt.layoutCfg,C=lt===void 0?{}:lt,_t=nt.canvas,G=C.type,H=layout.getLayoutByName(G);if(!H){this.postMessage({type:n.ERROR,message:"layout ".concat(G," not found")});break}if(G.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(G," does not support GPU")});break}var Bt=new H(C);Bt.init({nodes:ut,edges:g}),Bt.executeWithWorker(_t,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new rb(t,e);return r},vh={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function pd(i){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pd(i)}var Sp=function(e){return setTimeout(e,16)},Mp=function(e){return clearTimeout(e)},yv={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||Sp;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Mp;return t(e)}},ab=["fruchterman","gForce"],ib=["force","grid","circular"],ob=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=nb(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(yv.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(yv.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,x.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,G,g,p,C,G,H;return(0,x.__generator)(this,function(J){switch(J.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(Ap(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),_s.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),G=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=G):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),g=!1;try{p=new Za.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=p}catch(nt){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return g=p.enableTick,g&&(C=t.onTick,G=function(){C&&C(),s.refreshPositions()},p.tick=G),H=this.filterLayoutData(this.data,t),cb(H,r),p.init(H),s.emit("beforesublayout",{type:u}),[4,p.execute()];case 1:return J.sent(),p.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,x.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,g,p;return(0,x.__generator)(this,function(C){switch(C.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},_s.isForce(u)&&(f=r.onTick,c=r.animate,l=c===void 0&&(u==="force"||u==="force2"),g=function(){f==null||f(),(c||l)&&s.refreshPositions()},r.tick=g),p=this.filterLayoutData(this.data,r),t.init(p),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return C.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),l={};Object.assign(l,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=l;var g=l.type,p=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(_t){var Bt;return p=!!(!((Bt=_t.nodes)===null||Bt===void 0)&&Bt.length)||p});var C=this.destoryLayoutMethods();a.emit("beforelayout");var G=Promise.resolve();p&&g&&(C==null?void 0:C.length)===1&&C[0]===g?this.tweakInit():G=this.initPositions(l.center,s);var H=this.initPositions(l.center,u);H.then(),this.isGPU=Cp(l,g);var J=l.onLayoutEnd,nt=l.layoutEndFormatted,ut=l.adjust;if(nt||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(_t){switch(_t.label){case 0:return J&&J(s),this.refreshLayout(),ut&&l.pipes?[4,this.adjustPipesBox(this.data,ut)]:[3,2];case 1:_t.sent(),this.refreshLayout(),_t.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var lt=!1;return l.type?(lt=!0,G=G.then(function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(_t){switch(_t.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,_t.sent()]}})})})):l.pipes&&(lt=!0,l.pipes.forEach(function(_t,Bt){G=G.then(function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(Rt){switch(Rt.label){case 0:return[4,this.execLayoutMethod(_t,Bt)];case 1:return[2,Rt.sent()]}})})})})),lt?G.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(_t){console.warn("graph layout failed,",_t)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var l=c.x,g=c.y;!isNaN(l)&&!isNaN(g)&&(s[c.id]={x:l,y:g},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,g=c.target,p=s[l],C=s[g];!p&&C?s[l]={x:C.x+(Math.random()-.5)*80,y:C.y+(Math.random()-.5)*80}:!C&&p&&(s[g]={x:p.x+(Math.random()-.5)*80,y:p.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,x.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,g,p;return(0,x.__generator)(this,function(C){switch(C.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!Za.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(l=Cp(c,c.type),g=l?"".concat(c.type,"-gpu"):c.type,p=new Za.Layouts[g](c),delete u.preset,p.init(f),[4,p.execute()]);case 1:return C.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var g=function(J){c=c.then(function(){return n.runWebworker(u,t,J)})},p=0,C=o.pipes;p<C.length;p++){var G=C[p];g(G)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(H){console.error("layout failed",H)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,g=ub(n,function(C){return typeof C!="function"});if(!l)t.postMessage({type:vh.RUN,nodes:u,edges:f,layoutCfg:g});else{var p=c.transferControlToOffscreen();g.type="".concat(g.type,"-gpu"),t.postMessage({type:vh.GPURUN,nodes:u,edges:f,layoutCfg:g,canvas:p},[p])}return new Promise(function(C,G){t.onmessage=function(H){a.handleWorkerMessage(C,G,H,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,g=function(){o.onTick&&o.onTick()};switch(l){case vh.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=yv.requestAnimationFrame(function(){yd(a,c),u.refreshPositions(),g(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=yv.requestAnimationFrame(function(){yd(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,g(),t()})),f.requestId=null}));break;case vh.END:f.currentTick==null&&(yd(a,c),t());break;case vh.GPUEND:f.currentTick==null&&(fb(a,c),t());break;case vh.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,x.__rest)(t,["disableTriggerLayout"]),f=(0,d.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(g){switch(g.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,g.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(g,p){var C=f.pipes[p];c=c.then(function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(G){switch(G.label){case 0:return[4,this.updateLayoutMethod(g,C)];case 1:return[2,G.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(g){console.warn("layout failed",g)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),ib.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(C){return Math.max(C.height,C.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,d.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(p,C){var G,H,J,nt=p.x-((G=l[C])===null||G===void 0?void 0:G.x),ut=p.y-((H=l[C])===null||H===void 0?void 0:H.y);(J=f[C])===null||J===void 0||J.forEach(function(lt){lt.x+=nt,lt.y+=ut})}),a()};var g=new Za.Layouts[r](s);g.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(Mg),sb=ob;function yd(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function ub(i,e){var t={};return i&&pd(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function fb(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function cb(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function Ap(i){return ab.includes(i)}function Cp(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,wp().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!Ap(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Tp=Kt,lb="svg",hb=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new sb(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new Ux(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===lb)u=new Oh({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new lc(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,d.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,x.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,x.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),g=s||c.get("el"),p="";t||(t="image/png"),setTimeout(function(){return(0,x.__awaiter)(u,void 0,void 0,function(){var C,G,H,J,nt,ut,lt,_t,Bt,Rt;return(0,x.__generator)(this,function(Qt){switch(Qt.label){case 0:return l!=="svg"?[3,1]:(C=g.cloneNode(!0),G=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),H=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",G),H.replaceChild(C,H.documentElement),J=new XMLSerializer().serializeToString(H),p="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(J)),[3,4]);case 1:return nt=void 0,ut=g.getContext("2d"),lt=a||this.get("width"),_t=o||this.get("height"),Bt=void 0,f?[4,this.downloadImageWatermark(f,ut,lt,_t)]:[3,3];case 2:Qt.sent(),Qt.label=3;case 3:if(r){Rt=typeof window!="undefined"?window.devicePixelRatio:1;try{nt=ut.getImageData(0,0,lt*Rt,_t*Rt),Bt=ut.globalCompositeOperation,ut.globalCompositeOperation="destination-over",ut.fillStyle=r,ut.fillRect(0,0,lt,_t)}catch(de){console.error("Download image failed. Out of memory at ImageData creation")}}p=g.toDataURL(t),r&&(ut.clearRect(0,0,lt,_t),ut.putImageData(nt,0,0),ut.globalCompositeOperation=Bt),Qt.label=4;case 4:return n&&n(p),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var g=void 0,p=o.getContext("2d"),C=Math.max(this.get("width"),500),G=Math.max(this.get("height"),500),H=void 0;if(r){var J=typeof window!="undefined"&&window.devicePixelRatio||1;try{g=p.getImageData(0,0,C*J,G*J),H=p.globalCompositeOperation,p.globalCompositeOperation="destination-over",p.fillStyle=r,p.fillRect(0,0,C,G)}catch(nt){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(p.clearRect(0,0,C,G),p.putImageData(g,0,0),p.globalCompositeOperation=H)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=Ji('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,d.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var g=o+l[0]+l[2],p=s+l[1]+l[3],C={container:f,height:g,width:p,quickHit:!0},G=u==="svg"?new Oh(C):new lc(C),H=this.get("group"),J=H.clone(),nt=(0,d.clone)(J.getMatrix());nt||(nt=[1,0,0,0,1,0,0,0,1]);var ut=(a.maxX+a.minX)/2,lt=(a.maxY+a.minY)/2;nt=Tp(nt,[["t",-ut,-lt],["t",s/2+l[3],o/2+l[0]]]),J.resetMatrix(),J.setMatrix(nt),G.add(J);var _t=G.get("el"),Bt="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var Rt=_t.cloneNode(!0),Qt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),de=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Qt);de.replaceChild(Rt,de.documentElement);var se=new XMLSerializer().serializeToString(de);Bt="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(se))}else{var Te=void 0,je=_t.getContext("2d"),Dr=void 0;if(c){var Kr=typeof window!="undefined"?window.devicePixelRatio:1;try{Te=je.getImageData(0,0,p*Kr,g*Kr),Dr=je.globalCompositeOperation,je.globalCompositeOperation="destination-over",je.fillStyle=c,je.fillRect(0,0,p,g)}catch(zr){console.error("Download image failed. Out of memory at ImageData creation")}}Bt=_t.toDataURL(r),c&&(je.clearRect(0,0,p,g),je.putImageData(Te,0,0),je.globalCompositeOperation=Dr)}t&&t(Bt)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=Ji('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),g=n?n.backgroundColor:void 0,p=n?n.padding:void 0;p?(0,d.isNumber)(p)&&(p=[p,p,p,p]):p=[0,0,0,0];var C=s+p[0]+p[2],G=u+p[1]+p[3];if(l){var H=this.get("graphWaterMarker").cfg||{},J=H.width,nt=H.height;C=Math.ceil(C/nt)*nt,G=Math.ceil(G/J)*J}var ut={container:c,height:C,width:G},lt=f==="svg"?new Oh(ut):new lc(ut),_t=this.get("group"),Bt=Rx(_t),Rt=(0,d.clone)(Bt.getMatrix());Rt||(Rt=[1,0,0,0,1,0,0,0,1]);var Qt=(o.maxX+o.minX)/2,de=(o.maxY+o.minY)/2;Rt=Tp(Rt,[["t",-Qt,-de],["t",u/2+p[3],s/2+p[0]]]),Bt.resetMatrix(),Bt.setMatrix(Rt),lt.add(Bt);var se=lt.get("el");r||(r="image/png"),this.asyncToDataUrl(r,g,function(Te){var je=document.createElement("a"),Dr=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Te,f,je,Dr);var Kr=document.createEvent("MouseEvents");Kr.initEvent("click",!1,!1),je.dispatchEvent(Kr)},G,C,se)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":".".concat(r.split("/")[1])),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var g=document.createEvent("MouseEvents");g.initEvent("click",!1,!1),c.dispatchEvent(g)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var g=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(g,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(g)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=Ll.waterMarkerImage);var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},Ll.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var g={container:n,width:s,height:u,capture:!1},p=this.get("pixelRatio");p&&(g.pixelRatio=p,window.devicePixelRatio=p),a=new lc(g),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),G=c.rotate,H=c.x,J=c.y;C.rotate(-G*Math.PI/180);var nt=new Image;nt.crossOrigin="anonymous",nt.src=t,nt.onload=function(){if(C.drawImage(nt,H,J,c.width,c.height),C.rotate(G*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var ut=document.querySelector(".g6-graph-watermarker");ut||(ut=document.createElement("div"),ut.className="g6-graph-watermarker"),ut.className="g6-graph-watermarker",a.destroyed||(ut.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(ut))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},Ll.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var g={container:n,width:s,height:u,capture:!1},p=this.get("pixelRatio");p&&(g.pixelRatio=p,window.devicePixelRatio=p),a=new lc(g),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),G=c.rotate,H=c.fill,J=c.fontFamily,nt=c.fontSize,ut=c.baseline,lt=c.x,_t=c.y,Bt=c.lineHeight;C.rotate(-G*Math.PI/180),C.font="".concat(nt,"px ").concat(J),C.fillStyle=H,C.textBaseline=ut;for(var Rt=(0,d.isString)(t)?[t]:t,Qt=Rt.length-1;Qt>=0;Qt--)C.fillText(Rt[Qt],lt,_t+Qt*Bt);if(C.rotate(G*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var de=document.querySelector(".g6-graph-watermarker");de||(de=document.createElement("div"),de.className="g6-graph-watermarker"),de.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(de)}},e.prototype.destroy=function(){var t,r,n,a;(0,d.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(xg),Ip=hb;function md(i){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(i)}function Op(i,e){if(e===void 0&&(e=new WeakMap),i===null)return i;if(i instanceof Date)return new Date(i);if(i instanceof RegExp)return new RegExp(i);if(md(i)!=="object")return i;if(e.get(i))return e.get(i);var t=Array.isArray(i)?[]:{};e.set(i,t);for(var r in i)i.hasOwnProperty(r)&&i[r]!==void 0&&(t[r]=Op(i[r],e));return t}function vb(i){try{return structuredClone(i)}catch(e){return Op(i)}}var db=vc.radialLayout,xd=vc.traverseTree,gb=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=pv()[t.type](r,t);return db(n),n}:function(r){return pv()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,d.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,d.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,d.each)(t.children||[],function(C){a.innerUpdateChild(C,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,g;o.get("originAttrs")&&(l=o.get("originAttrs").x,g=o.get("originAttrs").y);var p=o.getModel();n&&o.set("originAttrs",{x:p.x,y:p.y}),o.set("model",Object.assign(p,t.data)),(l!==t.x||g!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,d.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,l=f.maxX,g=f.minY,p=f.maxY,C={x:(c+l)/2,y:(g+p)/2};r==="begin"&&(C.x=c,C.y=g),this.translate(s.x-C.x,s.y-C.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,d.clone)(n.get("data"));var f={};xd(a,function(g){var p=g.children;if(!(p!=null&&p.length))return!0;for(var C=p.length-1;C>=0;C--){var G=r.findById(p[C].id),H=G?!G.isVisible():p[C].visible===!1;H&&(f[g.id]=f[g.id]||[],f[g.id].push({idx:C,child:p.splice(C,1)[0]}))}}),u=o?o(a,n.get("layout")):a,xd(u,function(g){var p=f[g.id];if(p!=null&&p.length)for(var C=p.length-1;C>=0;C--){var G=p[C],H=G.idx,J=G.child;g.children.splice(H,0,J)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var l=n.get("viewController");l.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,d.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var g=l.getModel().children||[];return!!g.find(function(p){return p.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,d.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){xd(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,d.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,d.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,d.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,d.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",vb(t))},e}(Ip),pb=gb;function Ya(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var yb=function(){function i(e){this._cfgs=(0,d.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,d.each)(r,function(a,o){var s=(0,d.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,d.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),nu=yb,mb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lp="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",xb=function(i){mb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:Lp,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||Lp;a.includes("url(")||(a='url("'.concat(a,'")'));var o=Ji(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Ji(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");Ya(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;Ya(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");Ya(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(nu),bb=xb,Eb=z(738186),mv=z.n(Eb),wb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&mv()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var _b=function(i){wb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=Ji("<div class=".concat(t||"g6-component-contextmenu","></div>"));Ya(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,d.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,d.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(Qt){c(Qt.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var g=u.get("width"),p=u.get("height"),C=o.getBoundingClientRect(),G=this.get("offsetX")||0,H=this.get("offsetY")||0,J=u.getContainer().offsetTop,nt=u.getContainer().offsetLeft,ut=t.canvasX+nt+G,lt=t.canvasY+J+H;ut+C.width>g&&(ut=t.canvasX-C.width-G+nt),lt+C.height>p&&(lt=t.canvasY-C.height-H+J),lt<0&&(lt=0),Ya(o,{top:"".concat(lt,"px"),left:"".concat(ut,"px"),visibility:"visible"});var _t=this.get("trigger")==="click",Bt=function(Qt){if(_t){_t=!1;return}r.onMenuHide()};document.body.addEventListener("click",Bt),this.set("handler",Bt)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Ya(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(nu),Sb=_b,Mb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bd=function(){return bd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},bd.apply(this,arguments)},Dp=Math.max,Ab=Kt,Cb="default",Tb="keyShape",Ib="delegate",Np="svg",Ob=function(i){Mb(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,d.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=Ji(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,g=0,p=!1,C=0,G=0,H=0,J=0,nt=0,ut=0,lt=f||u?"mousedown":"dragstart";c.addEventListener(lt,function(Qt){var de,se;if(Qt.dataTransfer){var Te=new Image;Te.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(se=(de=Qt.dataTransfer).setDragImage)===null||se===void 0||se.call(de,Te,0,0);try{Qt.dataTransfer.setData("text/html","view-port-minimap")}catch(Dr){Qt.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,Qt.target===c){var je=c.style;C=parseInt(je.left,10),G=parseInt(je.top,10),H=parseInt(je.width,10),J=parseInt(je.height,10),!(H>n[0]||J>n[1])&&(ut=a.getZoom(),nt=t.get("ratio"),p=!0,l=Qt.clientX,g=Qt.clientY)}},!1);var _t=function(de){if(!(!p||(0,d.isNil)(de.clientX)||(0,d.isNil)(de.clientY))){var se=l-de.clientX,Te=g-de.clientY;(C-se<0||C-se+H>=n[0])&&(se=0),(G-Te<0||G-Te+J>=n[1])&&(Te=0),C-=se,G-=Te,Ya(c,{left:"".concat(C,"px"),top:"".concat(G,"px")}),a.translate(se*ut/nt,Te*ut/nt),l=de.clientX,g=de.clientY}};!f&&!u&&c.addEventListener("drag",_t,!1);var Bt=function(){p=!1,r.refresh=!0},Rt=f||u?"mouseup":"dragend";c.addEventListener(Rt,Bt,!1),s.addEventListener("mouseleave",Bt),s.addEventListener("mouseup",Bt),(f||u)&&s.addEventListener("mousemove",_t,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,f),g=this.get("viewport");g||this.initViewport();var p=(l.x-c.x)*t,C=(l.y-c.y)*t,G=c.x*t+r,H=c.y*t+n,J=G+p,nt=H+C;G<0&&(p+=G,G=0),J>o[0]&&(p=p-(J-o[0])),H<0&&(C+=H,H=0),nt>o[1]&&(C=C-(nt-o[1])),this.set("ratio",t);var ut="".concat(G,"px"),lt="".concat(H,"px");Ya(g,{left:ut,top:lt,width:"".concat(p,"px"),height:"".concat(C,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===Np&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:bd({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=Ji("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,d.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=Ji('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===Np?f=new Oh({container:u,width:n[0],height:n[1]}):f=new lc({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Cb:this.updateGraphShapes();break;case Tb:this.updateKeyShapes();break;case Ib:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,g=c.width/l,p=c.height/l;Number.isFinite(f.width)&&(g=Dp(f.width,g),p=Dp(f.height,p)),g+=2*s,p+=2*s;var C=Math.min(n[0]/g,n[1]/p),G=[1,0,0,0,1,0,0,0,1],H=0,J=0;Number.isFinite(f.minX)&&(H=-f.minX),Number.isFinite(f.minY)&&(J=-f.minY);var nt=(n[0]-(g-2*s)*C)/2,ut=(n[1]-(p-2*s)*C)/2;G=Ab(G,[["t",H,J],["s",C,C],["t",nt,ut]]),u.setMatrix(G),this.set("ratio",C),this.set("totaldx",nt+H*C),this.set("totaldy",ut+J*C),this.set("dx",nt),this.set("dy",ut),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(nu),Lb=Ob,Db=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Tf(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Nb(i,e){return i.x*e.x+i.y*e.y}function Pp(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Pb=function(i){Db(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(lt){(lt.x===null||!lt.y===null||lt.x===void 0||!lt.y===void 0)&&(s=!0),o[lt.id]=lt}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var g=r.get("cycles"),p=r.get("iterations"),C=r.get("iterRate"),G=r.get("lambda"),H=0;H<g;H++){for(var J=function(_t){var Bt=[];n.forEach(function(Rt,Qt){if(Rt.source!==Rt.target){var de=o[Rt.source],se=o[Rt.target];Bt[Qt]=r.getEdgeForces({source:de,target:se},Qt,u,G);for(var Te=0;Te<u+1;Te++)c[Qt][Te].x+=Bt[Qt][Te].x,c[Qt][Te].y+=Bt[Qt][Te].y}})},nt=0;nt<p;nt++)J(nt);G=G/2,u*=f,p*=C,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(lt,_t){lt.source!==lt.target&&(lt.type="polyline",lt.controlPoints=c[_t].slice(1,c[_t].length-1))});var ut=r.get("graph");ut.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var g=0;!((f=o[u])===null||f===void 0)&&f.length?g=r.getEdgeLength(o[u]):g=Tf({x:c.x,y:c.y},{x:l.x,y:l.y});var p=g/(t+1),C=p,G=[{x:c.x,y:c.y}];o[u].forEach(function(H,J){if(J!==0){for(var nt=Tf(H,o[u][J-1]);nt>C;){var ut=C/nt,lt={x:o[u][J-1].x,y:o[u][J-1].y};lt.x+=ut*(H.x-o[u][J-1].x),lt.y+=ut*(H.y-o[u][J-1].y),G.push(lt),nt-=C,C=p}C-=nt}}),G.push({x:l.x,y:l.y}),o[u]=G}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=Tf(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(g,p){if(!(p<=f)){var C=o[g.source],G=o[g.target],H=t.getBundleScore({source:c,target:l},{source:C,target:G});H>=a&&(s[f].push(p),s[p].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Tf({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Tf({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Nb({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Tf(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=Pp(r.source,t),a=Pp(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Tf(o,s)/Tf(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(Tf(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var g={x:0,y:0},p=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),C=o.getElectrostaticForce(l,r);g.x=a*(p.x+C.x),g.y=a*(p.y+C.y),c.push(g)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var g=Tf(s[c][t],s[r][t]),p=1/g;f.x+=l.x*p,f.y+=l.y*p}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(nu),kb=Pb,Rb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ed=function(){return Ed=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ed.apply(this,arguments)},xv=.05,kp={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Bb=function(i){Rb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,d.clone)(kp),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-xv:a=1/(1-xv);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var g=r.get("d");r.set("molecularParam",(g+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-xv:o=1/(1-xv);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),g=n.get("molecularParam"),p=a.getNodes(),C=p.length,G=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(G=n.get("cacheCenter"));var H=n.get("delegateCenterDiff");H&&(G.x+=H.x,G.y+=H.y),n.updateDelegate(G,f);for(var J=0;J<C;J++){var nt=p[J].getModel(),ut=nt.x,lt=nt.y;if(!(isNaN(ut)||isNaN(lt))){var _t=(ut-G.x)*(ut-G.x)+(lt-G.y)*(lt-G.y);if(!isNaN(_t)&&_t<c&&_t!==0){var Bt=Math.sqrt(_t),Rt=g*Bt/(l*Bt+f),Qt=(ut-G.x)/Bt,de=(lt-G.y)/Bt;if(nt.x=Qt*Rt+G.x,nt.y=de*Rt+G.y,s[nt.id]||(s[nt.id]={x:ut,y:lt,texts:[]}),o.push(nt),u&&2*Bt<f)for(var se=p[J],Te=se.getContainer(),je=Te.getChildren(),Dr=je.length,Kr=0;Kr<Dr;Kr++){var zr=je[Kr];zr.get("type")==="text"&&(s[nt.id].texts.push({visible:zr.get("visible"),shape:zr}),zr.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var g=f.texts[l];g.shape.set("visible",g.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,g=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var p=r.get("d"),C=r.get("r");if(r.set("molecularParam",(p+1)*C),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var G=r.get("dPercentText");G&&(G.remove(),G.destroy())}if(g==="drag"||g==="wheel"||g==="unset"){r.set("scaleRBy",g),r.get("delegate").remove(),r.get("delegate").destroy();var G=r.get("dPercentText");G&&(G.remove(),G.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||kp;s=u.addShape("circle",{attrs:Ed({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(C){a.scaleRByWheel(C)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){a.scaleRByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(C){n.scaleDByWheel(C)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){n.scaleDByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),g=t.y+r/1.5+16;if(!l||l.destroyed){var p=o.get("group");l=p.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:g,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:g})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(nu),Fb=Bb,Gb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rp=.05;typeof document!="undefined"&&mv()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var zb=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Ub=function(i){Gb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,d.isString)(a)&&(o=Ji(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,d.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var g=zb(l).filter(function(C){return C.nodeName==="LI"});if(g.length!==0){var p=g[0].getAttribute("code");p&&(f?f(p,r):t.handleDefaultOperator(p))}});var c=this.get("position");c&&Ya(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,d.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){var C=t.findById(p.id);p.visible?t.showItem(C,!1):t.hideItem(C,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){var C=t.findById(p.id);delete p.id,t.updateItem(C,p,!1),C.getType()==="combo"&&t.updateCombo(C)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){var C=p.itemType;delete p.itemType,t.addItem(C,p,!1)})});break}case"add":Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){t.removeItem(p.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){t.updateComboTree(p.id,p.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){t.updateComboTree(p.id,p.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,d.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(g){var p=t.findById(g.id);g.visible?t.showItem(p,!1):t.hideItem(p,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(g){var p=t.findById(g.id);delete g.id,t.updateItem(p,g,!1),p.getType()==="combo"&&t.updateCombo(p)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(g){var p=g.itemType;delete g.itemType,t.addItem(p,g,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(g){t.updateComboTree(g.id,g.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-Rp*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-Rp*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(nu),Wb=Ub,Xb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&mv()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Yb=function(i){Xb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=Ji("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),Ya(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){Ya(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,d.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Ya(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){Ya(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),g=t.item;if(g.getType&&g.getType()==="node"&&l&&(0,d.isArray)(l)&&l.length>=2){var p=g.getBBox();c={x:p.minX+p.width*l[0],y:p.minY+p.height*l[1]}}var C=a.getCanvasByPoint(c.x,c.y),G=C.x,H=C.y,J=a.getContainer(),nt={x:G+J.offsetLeft+u,y:H+J.offsetTop+f};Ya(n,{visibility:"visible",display:"unset"});var ut=n.getBoundingClientRect();G+ut.width+u>o&&(nt.x-=ut.width+u),H+ut.height+f>s&&(nt.y-=ut.height+f,nt.y<0&&(nt.y=0)),Ya(n,{left:"".concat(nt.x,"px"),top:"".concat(nt.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(nu),Vb=Yb,Bp="timebarstartplay",Fp="timebarendplay",If="valuechange",Dl="timebarConfigChanged",Kc="playPauseBtn",Ph="nextStepBtn",kh="preStepBtn",qS={opacity:.5,fill:"#000"},QS={opacity:.5,fill:"#000",r:5},JS={fill:"#fff",fontSize:12},jb=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,g=e.backgroundColor,p=g===void 0?"#000":g,C=e.textColor,G=C===void 0?"#fff":C,H=e.opacity,J=H===void 0?.8:H,nt=e.fontSize,ut=nt===void 0?12:nt;this.container=o,this.className=l,this.backgroundColor=p,this.textColor=G,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=J,this.fontSize=ut,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,g=Ji("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,d.isString)(l)&&(l=document.getElementById(l)),l.appendChild(g),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,Ya(g,{visibility:"hidden",top:0,left:0});var p=Ji(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));p.innerHTML=s,g.appendChild(p),e.backgroundDOM=p;var C=Ji("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));g.appendChild(C),e.arrowDOM=C,e.container=g},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;Ya(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),Ya(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),Ya(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var g=n-u/2,p=n+u/2;g<0?Ya(t.backgroundDOM,{marginLeft:"".concat(-u/2-g,"px")}):p>t.parentWidth&&Ya(t.backgroundDOM,{marginLeft:"".concat(-u/2-p+t.parentWidth+12,"px")})},i.prototype.hide=function(){Ya(this.container,{top:0,left:0,visibility:"hidden"})},i}(),Hb=jb,wd=function(){return wd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},wd.apply(this,arguments)},Kb=function(){function i(e){this.config=(0,d.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,d.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,g=t.addGroup({name:Kc});this.startMarkerGroup=g.addGroup({name:Kc}),this.circle=t.addShape("circle",{attrs:wd({x:c,y:l,r:this.config.r*a},r),name:Kc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=g.addGroup({name:Kc});var p=.25*this.config.r*a,C=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-C/2,width:p,height:C,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-C/2,width:p,height:C,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),Zb=Kb,Bo=function(){return Bo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bo.apply(this,arguments)},Rh=Kt,$b="#aaa",qb="green",Qb={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Jb={fill:"#fff"},tE={fill:"green"},Gp={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},zp={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},eE={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Gp,timeTypeControllerStyle:zp},_d=110,Zc=50,Of={SINGLE:"single",RANGE:"range"},rE=function(){function i(e){this.controllerCfg=(0,d.deepMix)({},eE,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Of.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?$b:s,f=e.stroke,c=f===void 0?qb:f,l=e.containerStyle,g=l===void 0?{}:l,p=Bo(Bo({},Qb),e.playBtnStyle||{}),C=Bo(Bo({},Jb),e.preBtnStyle||{}),G=Bo(Bo({},tE),e.nextBtnStyle||{}),H=r/2-5,J=a+10,nt=this.controllerGroup.addShape("rect",{attrs:Bo({x:n,y:J,width:t,height:r,stroke:c,fill:u},g),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:J,r:H}):this.playButton=new Zb({group:this.controllerGroup,x:t/2,y:J+H+5,r:H,isPlay:this.isPlay,style:p});var ut=C.offsetX||0,lt=C.offsetY||0,_t=(C.scale||1)*H;this.controllerGroup.addShape("path",{attrs:Bo({path:this.getPreMarkerPath(t/2-5*H+ut,J+H+5+lt,_t*.5)},C),name:kh});var Bt=G.offsetX||0,Rt=G.offsetY||0,Qt=(G.scale||1)*H;this.controllerGroup.addShape("path",{attrs:Bo({path:this.getNextMarkerPath(t/2+5*H+Bt,J+H+5+Rt,Qt*.5)},G),name:Ph}),nt.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var de=this.controllerCfg.scale,se=de===void 0?1:de,Te=this.controllerGroup.getCanvasBBox(),je=(Te.maxX+Te.minX)/2,Dr=(Te.maxY+Te.minY)/2,Kr=Rh([1,0,0,0,1,0,0,0,1],[["t",-je,-Dr],["s",se,se],["t",je,Dr]]);this.controllerGroup.setMatrix(Kr)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=Bo(Bo({},Gp),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,g=a.scale,p=g===void 0?1:g,C=a.offsetX,G=C===void 0?0:C,H=a.offsetY,J=H===void 0?0:H,nt=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=nt;var ut=[],lt=5;this.speedAxisY=[19,22,26,32,39];for(var _t=0;_t<5;_t++){var Bt=t+this.speedAxisY[_t],Rt=r-(n?Zc:_d);nt.addShape("line",{attrs:Bo({x1:Rt,x2:Rt+15,y1:Bt,y2:Bt},s),speed:lt,name:"speed-rect"}),this.speedAxisY[_t]=Bt,ut.push(lt),lt=lt-1}this.speedText=nt.addShape("text",{attrs:Bo({x:r-(n?Zc:_d)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=nt.addShape("path",{attrs:Bo({path:this.getPointerPath(r-(n?Zc:_d),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var Qt=this.speedGroup.getCanvasBBox(),de=(Qt.maxX+Qt.minX)/2,se=(Qt.maxY+Qt.minY)/2,Te=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Te=Rh(Te,[["t",-de,-se],["s",p,p],["t",de+G*p,se+J*p]]),this.speedGroup.setMatrix(Te)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=Bo(Bo({},zp),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,g=l===void 0?0:l,p=o.box,C=p===void 0?{}:p,G=o.check,H=G===void 0?{}:G,J=o.text,nt=J===void 0?{}:J;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var ut=a===Of.SINGLE;this.toggleGroup.addShape("rect",{attrs:Bo({x:n-Zc,y:this.speedAxisY[0]+3.5},C),isChecked:ut,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Bo({path:[["M",n-Zc+3,this.speedAxisY[1]+6],["L",n-Zc+7,this.speedAxisY[1]+10],["L",n-Zc+12,this.speedAxisY[1]+4]]},H),capture:!1,name:"check-icon"}),ut||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Bo({text:ut?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Zc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},nt),name:"checked-text"});var lt=this.toggleGroup.getCanvasBBox(),_t=(lt.maxX+lt.minX)/2,Bt=(lt.maxY+lt.minY)/2,Rt=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Rt=Rh(Rt,[["t",-_t,-Bt],["s",u,u],["t",_t+c*u,Bt+g*u]]),this.toggleGroup.setMatrix(Rt)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Rh(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Dl,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Rh(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Dl,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Of.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Of.SINGLE),t.target.set("isChecked",!a),e.group.emit(Dl,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),Up=rE,Bh=function(){return Bh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bh.apply(this,arguments)},nE=Kt,aE={fill:"#5B8FF9"},iE={fill:"#e6e8e9"},oE=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,g=l===void 0?0:l,p=e.y,C=p===void 0?0:p,G=e.tickLabelFormatter,H=e.selectedTickStyle,J=H===void 0?aE:H,nt=e.unselectedTickStyle,ut=nt===void 0?iE:nt,lt=e.tooltipBackgroundColor,_t=e.tooltipFomatter,Bt=e.tickLabelStyle,Rt=e.controllerCfg,Qt=Rt===void 0?{speed:1}:Rt;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=G,this.tickLabelStyle=Bt||{},this.selectedTickStyle=J,this.unselectedTickStyle=ut,this.controllerCfg=Qt,this.currentSpeed=Qt.speed||1,this.x=g,this.y=C,this.tooltipBackgroundColor=lt,this.tooltipFomatter=_t,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,g=t.tickLabelStyle,p=r-2*a,C=10,G=4,H=3*a+G+C,J=n-H-2*a,nt=2,ut=o.length,lt=(p-nt*(ut-1))/ut;this.tickWidth=lt;var _t=this.sliceGroup,Bt=[],Rt=[],Qt=Math.round(ut*s),de=Math.round(ut*u);this.startTickRectId=Qt,this.endTickRectId=de;var se=g.rotate;delete g.rotate,o.forEach(function(je,Dr){var Kr=Dr>=Qt&&Dr<=de,zr=Kr?c:l,Mr=_t.addShape("rect",{attrs:Bh({x:a+Dr*(lt+nt),y:a,width:lt,height:J},zr),draggable:!0,name:"tick-rect-".concat(Dr)}),En=_t.addShape("rect",{attrs:{x:a+Dr*lt+nt*(2*Dr-1)/2,y:a,width:Dr===0||Dr===ut-1?lt+nt/2:lt+nt,height:J,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Dr)});En.toFront();var yn=Mr.getBBox(),Ar=(yn.minX+yn.maxX)/2;Bt.push({rect:Mr,pickRect:En,value:je.date,x:Ar,y:yn.minY});var Xr;if(f?(Xr=f(je),!(0,d.isString)(Xr)&&Xr&&(Xr=je.date)):Dr%Math.round(ut/10)===0&&(Xr=je.date),Xr){Rt.push(Xr);var sn=yn.maxY+a*2;_t.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Ar,y1:sn,x2:Ar,y2:sn+G},name:"tick-line"});var un=sn+G+a,An=_t.addShape("text",{attrs:Bh({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Ar,y:un,textAlign:"center",text:Xr,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},g),capture:!1,name:"tick-label"}),Gn=An.getBBox();if(Gn.maxX>r?An.attr("textAlign","right"):Gn.minX<0&&An.attr("textAlign","left"),(0,d.isNumber)(se)&&Rt.length!==10){var ga=nE([1,0,0,0,1,0,0,0,1],[["t",-Ar,-un],["r",se],["t",Ar-5,un+2]]);An.attr({textAlign:"left",matrix:ga})}Rt.length===1?An.attr({textAlign:"left"}):Rt.length===10&&An.attr({textAlign:"right"})}}),this.tickRects=Bt;var Te=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Up(Bh({group:Te,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var g=parseInt(l.get("name").split("-")[2],10);if(!isNaN(g)){var p=e.tickRects,C=e.unselectedTickStyle;p.forEach(function(nt){nt.rect.attr(C)});var G=e.selectedTickStyle;p[g].rect.attr(G),e.startTickRectId=g,e.endTickRectId=g;var H=p.length,J=g/H;e.graph.emit(If,{value:[J,J]})}}}),t.on("dragstart",function(c){var l=e.tickRects,g=e.unselectedTickStyle;l.forEach(function(nt){nt.rect.attr(g)});var p=c.target,C=parseInt(p.get("name").split("-")[2],10),G=e.selectedTickStyle;l[C].rect.attr(G),e.startTickRectId=C;var H=l.length,J=C/H;e.graph.emit(If,{value:[J,J]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),g=e.startTickRectId,p=e.tickRects,C=e.selectedTickStyle,G=e.unselectedTickStyle,H=0;H<p.length;H++){var J=H>=g&&H<=l?C:G;p[H].rect.attr(J)}var nt=p.length;e.endTickRectId=l;var ut=g/nt,lt=l/nt;e.graph.emit(If,{value:[ut,lt]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,g=parseInt(c.target.get("name").split("-")[2],10);if(!(g<l)){var p=e.selectedTickStyle,C=e.tickRects;C[g].rect.attr(p),e.endTickRectId=g;var G=C.length,H=l/G,J=g/G;e.graph.emit(If,{value:[H,J]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new Hb({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(g){var p=g.target;if(p.get("type")==="rect"){var C=parseInt(p.get("name").split("-")[2],10),G=o.getClientByPoint(u[C].x,u[C].y);s.show({x:u[C].x,y:u[C].y,clientX:G.x,clientY:G.y,text:a?a(u[C].value):u[C].value})}}),l.on("mouseleave",function(g){s.hide()})});var f=this.group;f.on("".concat(Kc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Ph,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(kh,":click"),function(){e.updateStartEnd(-1)}),f.on(Dl,function(c){var l=c.type,g=c.speed;e.currentSpeed=g})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Bp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Fp,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(If,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Kc,":click")),e.off("".concat(Ph,":click")),e.off("".concat(kh,":click")),e.off(Dl),this.sliceGroup.destroy()},i}(),sE=oE,Wp={};function uE(i){return Wp[i]}function Lf(i,e){Wp[i]=e}var fE=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,d.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,d.map)(this.ticks,function(t,r){return(0,d.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,d.isNil)(n)||!(0,d.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,d.assign)(this,this.__cfg__),this.setDomain(),(0,d.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,d.isString)(e)){var r=uE(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,d.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,d.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),Sd=fE,cE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,d.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,d.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,x.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,d.isNil)(this.getConfig("min"))&&(this.min=0),(0,d.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(Sd),Fh=cE,Xp=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,$c="\\d\\d?",qc="\\d\\d",lE="\\d{3}",hE="\\d{4}",Gh="[^\\s]+",Yp=/\[([^]*?)\]/gm;function Vp(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var jp=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function Qc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var Hp=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Kp=["January","February","March","April","May","June","July","August","September","October","November","December"],vE=Vp(Kp,3),dE=Vp(Hp,3),Md={dayNamesShort:dE,dayNames:Hp,monthNamesShort:vE,monthNames:Kp,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},bv=Qc({},Md),Zp=function(i){return bv=Qc(bv,i)},$p=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},au=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},gE={D:function(i){return String(i.getDate())},DD:function(i){return au(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return au(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return au(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return au(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return au(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return au(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return au(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return au(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return au(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return au(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return au(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+au(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+au(Math.floor(Math.abs(e)/60),2)+":"+au(Math.abs(e)%60,2)}},qp=function(i){return+i-1},Qp=[null,$c],Jp=[null,Gh],t0=["isPm",Gh,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],e0=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],pE={D:["day",$c],DD:["day",qc],Do:["day",$c+Gh,function(i){return parseInt(i,10)}],M:["month",$c,qp],MM:["month",qc,qp],YY:["year",qc,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",$c,void 0,"isPm"],hh:["hour",qc,void 0,"isPm"],H:["hour",$c],HH:["hour",qc],m:["minute",$c],mm:["minute",qc],s:["second",$c],ss:["second",qc],YYYY:["year",hE],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",qc,function(i){return+i*10}],SSS:["millisecond",lE],d:Qp,dd:Qp,ddd:Jp,dddd:Jp,MMM:["month",Gh,jp("monthNamesShort")],MMMM:["month",Gh,jp("monthNames")],a:t0,A:t0,ZZ:e0,Z:e0},Ev={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},r0=function(i){return Qc(Ev,i)},n0=function(i,e,t){if(e===void 0&&(e=Ev.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=Ev[e]||e;var r=[];e=e.replace(Yp,function(a,o){return r.push(o),"@@@"});var n=Qc(Qc({},bv),t);return e=e.replace(Xp,function(a){return gE[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function a0(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=Ev[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(Yp,function(lt,_t){return o.push($p(_t)),"@@@"}),u={},f={};s=$p(s).replace(Xp,function(lt){var _t=pE[lt],Bt=_t[0],Rt=_t[1],Qt=_t[3];if(u[Bt])throw new Error("Invalid format. "+Bt+" specified twice in format");return u[Bt]=!0,Qt&&(f[Qt]=!0),a.push(_t),"("+Rt+")"}),Object.keys(f).forEach(function(lt){if(!u[lt])throw new Error("Invalid format. "+lt+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=Qc(Qc({},bv),t),g=1;g<c.length;g++){var p=a[g-1],C=p[0],G=p[2],H=G?G(c[g],l):+c[g];if(H==null)return null;n[C]=H}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var J;if(n.timezoneOffset==null){J=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var nt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],g=0,ut=nt.length;g<ut;g++)if(u[nt[g][0]]&&n[nt[g][0]]!==J[nt[g][1]]())return null}else if(J=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return J}var yE={format:n0,parse:a0,defaultI18n:Md,setGlobalDateI18n:Zp,setGlobalDateMasks:r0},i0=yE;function mE(i){return function(e,t,r,n){for(var a=(0,d.isNil)(r)?0:r,o=(0,d.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var o0="format";function s0(i,e){var t=V[o0]||i0[o0];return t(i,e)}function wv(i){return(0,d.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,d.isDate)(i)&&(i=i.getTime()),i}var tf=1e3,Nl=60*tf,Pl=60*Nl,dc=24*Pl,zh=dc*31,u0=dc*365,Uh=[["HH:mm:ss",tf],["HH:mm:ss",tf*10],["HH:mm:ss",tf*30],["HH:mm",Nl],["HH:mm",Nl*10],["HH:mm",Nl*30],["HH",Pl],["HH",Pl*6],["HH",Pl*12],["YYYY-MM-DD",dc],["YYYY-MM-DD",dc*4],["YYYY-WW",dc*7],["YYYY-MM",zh],["YYYY-MM",zh*4],["YYYY-MM",zh*6],["YYYY",dc*380]];function xE(i,e,t){var r=(e-i)/t,n=mE(function(o){return o[1]})(Uh,r)-1,a=Uh[n];return n<0?a=Uh[0]:n>=Uh.length&&(a=(0,d.last)(Uh)),a}var bE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=wv(t);var r=this.values.indexOf(t);return r===-1&&((0,d.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):s0(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,d.each)(t,function(r,n){t[n]=wv(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Fh),EE=bE,wE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,d.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,d.head)(t),n=(0,d.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,d.isNil)(this.minLimit)||(this.min=r),(0,d.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,d.getRange)(this.values),r=t.min,n=t.max;(0,d.isNil)(this.min)&&(this.min=r),(0,d.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,d.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Sd),_v=wE,_E=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(_v),Wh=_E;function Jc(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function Bu(i,e){return i===1?1:Math.log(e)/Math.log(i)}function f0(i,e,t){(0,d.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,d.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function c0(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function tM(i,e){var t=c0(i),r=c0(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var SE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=Bu(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=Bu(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=Bu(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=f0(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(Bu(a,r)-Bu(a,n)):s=(Bu(a,t)-Bu(a,n))/(Bu(a,r)-Bu(a,n)),s},e}(_v),ME=SE,AE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=Jc(n,this.max),o=Jc(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(Jc(a,t)-Jc(a,n))/(Jc(a,r)-Jc(a,n));return o},e}(_v),CE=AE,TE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):s0(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,d.isString)(r)||(0,d.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return wv(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,d.isNil)(r)||!(0,d.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,d.isNil)(n)||!(0,d.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,d.each)(t,function(f){var c=wv(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,d.isNil)(r)&&(this.min=o),(0,d.isNil)(n)&&(this.max=u)}},e}(Wh),IE=TE,OE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,d.last)(r);if(o<0)return(0,d.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,d.last)(t)!==this.max&&t.push(this.max),(0,d.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,d.head)(r))return 0;if(t>(0,d.last)(r))return 1;var n=0;return(0,d.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(_v),l0=OE,LE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(l0),DE=LE,h0={};function NE(i){return h0[i]}function Df(i,e){if(NE(i))throw new Error("type '"+i+"' existed.");h0[i]=e}var PE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,d.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(Sd),kE=PE;function v0(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,d.isNumber)(t)){var a=(0,d.filter)(e,function(C,G){return G%t===0}),o=(0,d.last)(e);return n&&(0,d.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,d.isNil)(u)&&(u=0),(0,d.isNil)(f)&&(f=e.length-1),!(0,d.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],g=u,p=0;p<r&&!(g>=f);p++)g=Math.min(u+p*c,f),p===r-1&&n?l.push(e[f]):l.push(e[g]);return l}function RE(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new BE;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var Ad=5,d0=Math.sqrt(50),g0=Math.sqrt(10),p0=Math.sqrt(2),BE=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=Ad);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=Sv(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=Sv(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=Sv(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=Ad),FE(this._domain[0],this._domain[this._domain.length-1],e||Ad)},i}();function FE(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=Sv(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function Sv(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=d0?10:a>=g0?5:a>=p0?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=d0?10:a>=g0?5:a>=p0?2:1)}function y0(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function Cd(i,e,t){var r=y0(i,t,"floor"),n=y0(e,t,"ceil");r=(0,d.fixedBase)(r,t),n=(0,d.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,d.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function Td(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,d.isNil)(n)?(0,d.isNil)(e)?o:e:n,l=(0,d.isNil)(a)?(0,d.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var g=(l-c)/(f-1),p=[],C=0;C<f;C++)p.push(c+g*C);return p}function GE(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=RE(i);return!(0,d.isNil)(n)||!(0,d.isNil)(a)?Td(i,(0,d.head)(o),(0,d.last)(o)):r?Cd(e,t,r).ticks:o}function kl(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var zE=[1,5,2,2.5,4,3],eM=null,m0=Number.EPSILON*100;function UE(i,e){return(i%e+e)%e}function WE(i){return Math.round(i*1e12)/1e12}function XE(i,e,t,r,n,a){var o=(0,d.size)(e),s=(0,d.indexOf)(e,i),u=0,f=UE(r,a);return(f<m0||a-f<m0)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function YE(i,e,t){var r=(0,d.size)(e),n=(0,d.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function VE(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function jE(i,e){return i>=e?2-(i-1)/(e-1):1}function HE(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function KE(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function ZE(){return 1}function $E(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=zE),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(sn,un){return kl(i+u*un)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<n.length;l+=1){var g=n[l],p=YE(g,n,c);if(a[0]*p+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var C=2;C<1/0;){var G=jE(C,o);if(a[0]*p+a[1]+a[2]*G+a[3]<f.score)break;for(var H=(e-i)/(C+1)/c/g,J=Math.ceil(Math.log10(H));J<1/0;){var nt=c*g*Math.pow(10,J),ut=KE(i,e,nt*(C-1));if(a[0]*p+a[1]*ut+a[2]*G+a[3]<f.score)break;var lt=Math.floor(e/nt)*c-(C-1)*c,_t=Math.ceil(i/nt)*c;if(lt<=_t)for(var s=_t-lt,Bt=0;Bt<=s;Bt+=1){var Rt=lt+Bt,Qt=Rt*(nt/c),de=Qt+nt*(C-1),se=nt,Te=XE(g,n,c,Qt,de,se),je=HE(i,e,Qt,de),Dr=VE(C,o,i,e,Qt,de),Kr=ZE(),zr=a[0]*Te+a[1]*je+a[2]*Dr+a[3]*Kr;zr>f.score&&(!r||Qt<=i&&de>=e)&&(f.lmin=Qt,f.lmax=de,f.lstep=se,f.score=zr)}J+=1}C+=1}}c+=1}var Mr=kl(f.lmax),En=kl(f.lmin),yn=kl(f.lstep),Ar=Math.floor(WE((Mr-En)/yn))+1,Xr=new Array(Ar);Xr[0]=kl(En);for(var l=1;l<Ar;l++)Xr[l]=kl(Xr[l-1]+yn);return{min:Math.min(i,(0,d.head)(Xr)),max:Math.max(e,(0,d.last)(Xr)),ticks:Xr}}function qE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=$E(e,t,r,n).ticks;return!(0,d.isNil)(o)||!(0,d.isNil)(s)?Td(i,(0,d.head)(u),(0,d.last)(u)):a?Cd(e,t,a).ticks:u}function QE(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=Bu(e,n);if(r>0)o=Math.floor(Bu(e,r));else{var u=f0(a,e,n);o=Math.floor(Bu(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],g=o;g<s+c;g=g+c)l.push(Math.pow(e,g));return r<=0&&l.unshift(0),l}function x0(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),g=Math.max(c*f,e),p=Math.min(l*f,i),C=Math.floor((g-p)/f)+1,G=new Array(C),H=0;H<C;H++)G[H]=kl(p+H*f);return{min:p,max:g,ticks:G}}function JE(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(Jc(e,i.max)),n=Math.floor(Jc(e,i.min)),a=x0(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function tw(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function ew(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(tw(r,o))}return n}function rw(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=x0(e,t,r).ticks;return!(0,d.isNil)(a)||!(0,d.isNil)(o)?Td(i,(0,d.head)(s),(0,d.last)(s)):n?Cd(e,t,n).ticks:s}function nw(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=xE(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function aw(i){var e=v0((0,x.__assign)({showLast:!0},i));return e}function Mv(i){return new Date(i).getFullYear()}function iw(i){return new Date(i,0,1).getTime()}function Id(i){return new Date(i).getMonth()}function ow(i,e){var t=Mv(i),r=Mv(e),n=Id(i),a=Id(e);return(r-t)*12+(a-n)%12}function sw(i,e){return new Date(i,e,1).getTime()}function uw(i,e){return Math.ceil((e-i)/dc)}function fw(i,e){return Math.ceil((e-i)/Pl)}function cw(i,e){return Math.ceil((e-i)/(60*1e3))}function lw(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=Mv(e);if(a>u0)for(var u=Mv(t),f=Math.ceil(a/u0),c=s;c<=u+f;c=c+f)o.push(iw(c));else if(a>zh)for(var l=Math.ceil(a/zh),g=Id(e),p=ow(e,t),c=0;c<=p+l;c=c+l)o.push(sw(s,c+g));else if(a>dc)for(var C=new Date(e),G=C.getFullYear(),H=C.getMonth(),J=C.getDate(),nt=Math.ceil(a/dc),ut=uw(e,t),c=0;c<ut+nt;c=c+nt)o.push(new Date(G,H,J+c).getTime());else if(a>Pl)for(var C=new Date(e),G=C.getFullYear(),H=C.getMonth(),nt=C.getDate(),lt=C.getHours(),_t=Math.ceil(a/Pl),Bt=fw(e,t),c=0;c<=Bt+_t;c=c+_t)o.push(new Date(G,H,nt,lt+c).getTime());else if(a>Nl)for(var Rt=cw(e,t),Qt=Math.ceil(a/Nl),c=0;c<=Rt+Qt;c=c+Qt)o.push(e+c*Nl);else{var de=a;de<tf&&(de=tf);for(var se=Math.floor(e/tf)*tf,Te=Math.ceil((t-e)/tf),je=Math.ceil(de/tf),c=0;c<Te+je;c=c+je)o.push(se+c*tf)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Lf("cat",v0),Lf("time-cat",aw),Lf("wilkinson-extended",qE),Lf("r-pretty",rw),Lf("time",nw),Lf("time-pretty",lw),Lf("log",QE),Lf("pow",JE),Lf("quantile",ew),Lf("d3-linear",GE),Df("cat",Fh),Df("category",Fh),Df("identity",kE),Df("linear",Wh),Df("log",ME),Df("pow",CE),Df("time",IE),Df("timeCat",EE),Df("quantize",l0),Df("quantile",DE);var hw=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function vw(i){return(0,d.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function b0(i){return vw(i)}function dw(i){if(i.length<=2)return b0(i);var e=[];(0,d.each)(i,function(o){(0,d.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=ur(e,!1),r=(0,d.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function gw(i,e,t,r){r===void 0&&(r=!0);var n=new Wh({values:i}),a=new Fh({values:(0,d.map)(i,function(s,u){return u})}),o=(0,d.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?dw(o):b0(o)}function pw(i,e,t,r){r===void 0&&(r=5);for(var n=new Wh({values:i}),a=new Fh({values:(0,d.map)(i,function(g,p){return p})}),o=(0,d.map)(i,function(g,p){return[a.scale(p)*e,t-n.scale(g)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=xw(c);s.push.apply(s,l)}return bw(s)}function yw(i,e){var t=new Wh({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function mw(i,e,t,r){var n=hw([],i,!0),a=yw(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function xw(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,d.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,d.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function bw(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Xh=function(){return Xh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Xh.apply(this,arguments)},Ew={stroke:"#C5C5C5",strokeOpacity:.85},ww={fill:"#CACED4",opacity:.85},_w=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,g=e.isArea,p=g===void 0?!1:g,C=e.data,G=C===void 0?[]:C,H=e.lineStyle,J=e.areaStyle,nt=e.group,ut=e.interval,lt=ut===void 0?null:ut;this.group=nt,this.x=r,this.y=a,this.width=s,this.height=f,this.data=G,this.smooth=l,this.isArea=p,this.lineStyle=Object.assign({},Ew,H),this.areaStyle=Object.assign({},ww,J),this.intervalConfig=lt,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,g=this.group.addGroup({name:"trend-group"});if(s){var p=gw(s,n,a,u);if(g.addShape("path",{attrs:Xh({path:p},c),name:"trend-line"}),f){var C=mw(p,n,a,s);g.addShape("path",{attrs:Xh({path:C},l),name:"trend-area"})}}this.intervalConfig&&g.addShape("path",{attrs:Xh({path:pw(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),g.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),Sw=_w,dh=function(){return dh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},dh.apply(this,arguments)},Mw={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Aw={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Cw=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,g=l===void 0?24:l,p=e.style,C=p===void 0?{}:p;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=g,n==="trend"?this.style=dh(dh({},Mw),C):n==="simple"&&(this.style=dh(dh({},Aw),C)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,d.isNumber)(e)&&(this.x=e),(0,d.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),E0=Cw,Vi=function(){return Vi=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Vi.apply(this,arguments)},Tw=Kt,Iw={fill:"#416180",opacity:.05},Ow={fill:"#416180",opacity:.15,radius:5},Lw={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Od=2,Dw={width:Od,height:24},Nw={textBaseline:"middle",fill:"#000",opacity:.45},Pw={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},kw={lineWidth:1,stroke:"#ccc"},Rw=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(sn){return function(un){t.currentHandler=sn;var An=un.originalEvent;An.stopPropagation(),An.preventDefault(),t.prevX=(0,d.get)(An,"touches.0.pageX",An.pageX);var Gn=t.canvas.get("container");Gn.addEventListener("mousemove",t.onMouseMove),Gn.addEventListener("mouseup",t.onMouseUp),Gn.addEventListener("mouseleave",t.onMouseUp),Gn.addEventListener("touchmove",t.onMouseMove),Gn.addEventListener("touchend",t.onMouseUp),Gn.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(sn){sn.stopPropagation(),sn.preventDefault();var un=(0,d.get)(sn,"touches.0.pageX",sn.pageX),An=un-t.prevX,Gn=t.adjustOffsetRange(An/t.width);t.updateStartEnd(Gn),t.updateUI(),t.prevX=un},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var sn=t.canvas.get("container");sn&&(sn.removeEventListener("mousemove",t.onMouseMove),sn.removeEventListener("mouseup",t.onMouseUp),sn.removeEventListener("mouseleave",t.onMouseUp),sn.removeEventListener("touchmove",t.onMouseMove),sn.removeEventListener("touchend",t.onMouseUp),sn.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,g=e.trendCfg,p=e.controllerCfg,C=p===void 0?{speed:1}:p,G=e.backgroundStyle,H=G===void 0?{}:G,J=e.foregroundStyle,nt=J===void 0?{}:J,ut=e.handlerStyle,lt=ut===void 0?{}:ut,_t=e.textStyle,Bt=_t===void 0?{}:_t,Rt=e.start,Qt=Rt===void 0?0:Rt,de=e.end,se=de===void 0?1:de,Te=e.minText,je=Te===void 0?"":Te,Dr=e.maxText,Kr=Dr===void 0?"":Dr,zr=e.group,Mr=e.graph,En=e.canvas,yn=e.tick,Ar=yn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(un){return un},ticks:[]}:yn,Xr=e.type;this.graph=Mr,this.canvas=En,this.group=zr,this.timeBarType=Xr,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=Ar.ticks,this.trendCfg=g,this.controllerCfg=C,this.currentSpeed=C.speed||1,this.tickLabelFormatter=Ar.tickLabelFormatter,Xr==="trend"?this.backgroundStyle=Vi(Vi({},Iw),H):Xr==="simple"&&(this.backgroundStyle=Vi(Vi({},Ow),H)),this.foregroundStyle=Vi(Vi({},Lw),nt),this.handlerStyle=Vi(Vi({},Dw),lt),this.textStyle=Vi(Vi({},Nw),Bt),this.tickLabelStyle=Vi(Vi({},Pw),Ar.tickLabelStyle),this.tickLineStyle=Vi(Vi({},kw),Ar.tickLineStyle),this.currentMode=C.defaultTimeType||Of.RANGE,this.start=Qt,this.end=se,this.minText=je,this.maxText=Kr,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,d.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,d.size)((0,d.get)(this.trendCfg,"data"))){var o=new Sw(Vi(Vi({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Vi({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:Vi({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Vi({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Vi({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Vi({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Vi({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(J){J.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(J){J.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,d.get)(this.handlerStyle,"width",2),c=(0,d.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new E0({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var g=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new E0({name:"maxHandlerShape",group:g,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var p=this.ticks,C=r/(p.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(J){J.destroy()});var G=-1/0,H=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=p.map(function(J,nt){e.tickPosList.push(e.x+nt*C);var ut;e.tickLabelFormatter?(ut=e.tickLabelFormatter(J),!(0,d.isString)(ut)&&ut&&(ut=J.date)):ut=J.date;var lt=e.x+nt*C,_t=e.y+n+5,Bt=e.group.addShape("text",{attrs:Vi({x:lt,y:_t,text:ut,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,d.isNumber)(H)&&nt!==p.length-1){var Rt=Tw([1,0,0,0,1,0,0,0,1],[["t",-lt,-_t],["r",H],["t",lt-5,_t+2]]);Bt.attr({textAlign:"left",matrix:Rt})}nt===0?Bt.attr({textAlign:"left"}):nt!==p.length-1&&Bt.attr({textAlign:"right"});var Qt=e.group.addShape("line",{attrs:Vi({x1:e.x+nt*C,y1:e.y+n+2,x2:e.x+nt*C,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});Qt.toBack();var de=Bt.getBBox();return de.minX>G?(Bt.show(),Qt.show(),G=de.minX+de.width+10):(Bt.hide(),Qt.hide()),Bt}),this.controllerBtnGroup=new Up(Vi({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Of.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Kc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Ph,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(kh,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Dl,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Of.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Of.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,d.get)(this.handlerStyle,"width",Od);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,d.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,d.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Of.RANGE?this.graph.emit(If,{value:[this.start,this.end].sort()}):this.currentMode===Of.SINGLE&&this.graph.emit(If,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,d.get)(this.handlerStyle,"width",Od),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),g=s.getBBox(),p=null,C=null;return this.timeBarType==="trend"?(p=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},C=f+g.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(p=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},C=s.attr("x")>this.width-g.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[C,p]:[p,C]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Bp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Fp,null))},i.prototype.destory=function(){this.graph.off(If,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Kc,":click")),e.off("".concat(Ph,":click")),e.off("".concat(kh,":click")),e.off(Dl),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),Bw=Rw,Fw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gc=function(){return gc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},gc.apply(this,arguments)},Gw=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},zw=4,Uw=26,Ww=function(i){Fw(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,d.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,d.isString)(u)&&(u=document.getElementById(u)),f=u):(f=Ji("<div class='".concat(s,"'></div>")),Ya(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var l,g=t.get("renderer");g==="SVG"?l=new Oh({container:f,width:n,height:a}):l=new lc({container:f,width:n,height:a}),this.get("containerCSS")&&Ya(f,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,g=r.textStyle,p=r.tick,C=r.backgroundStyle,G=r.foregroundStyle,H=f.data,J=Gw(f,["data"]),nt=n-2*s,ut=u==="trend"?Uw:zw,lt=this.get("graph"),_t=this.get("timeBarGroup"),Bt=this.get("canvas"),Rt=null;if(u==="trend"||u==="simple"){var Qt=this.get("getValue");Rt=new Bw(gc(gc({graph:lt,canvas:Bt,group:_t,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:nt,height:ut,padding:s,backgroundStyle:C,foregroundStyle:G,trendCfg:gc(gc({},J),{data:H.map(function(se){return(Qt==null?void 0:Qt(se))||se.value})})},c),{tick:{ticks:H,tickLabelFormatter:p.tickLabelFormatter,tickLabelStyle:p.tickLabelStyle,tickLineStyle:p.tickLineStyle},handlerStyle:gc(gc({},c.handlerStyle),{height:c.height||ut}),controllerCfg:l,textStyle:g}))}else u==="tick"&&(Rt=new sE(gc({graph:lt,canvas:Bt,group:_t,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},p)));var de=function se(){var Te=t.get("timebar");Te.draggingHandler=!1,Te.isPlay&&(Te.isPlay=!1,Te.currentHandler=Te.maxHandlerShape,Te.changePlayStatus()),document.removeEventListener("mouseup",se)};Bt.on("mousedown",function(se){(se.target.get("name")==="maxHandlerShape-handler"||se.target.get("name")==="minHandlerShape-handler"||se.target===Rt.foregroundShape)&&document.addEventListener("mouseup",de)}),this.set("timebar",Rt)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var g=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,p=g?g(o[c]):o[c].date,C=g?g(o[l]):o[l].date;if(s!=="tick"){var G=this.get("timebar");G.setText(p,C)}if(u)u(f,p,C);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var H=this.get("filterItemTypes"),J=this.get("changeData"),nt=this.get("getDate"),ut=this.get("shouldIgnore"),lt=o[c].date,_t=o[l].date;if(J||J===void 0){var Bt=this.cacheGraphData.nodes,Rt=this.cacheGraphData.edges,Qt={},de={};f.getNodes().forEach(function(se){return Qt[se.getID()]=!0}),f.getEdges().forEach(function(se){return de[se.getID()]=!0}),H.includes("node")&&(Bt==null||Bt.forEach(function(se){var Te=+((nt==null?void 0:nt(se))||se.date),je=Te>=lt&&Te<=_t||(ut==null?void 0:ut("node",se,{min:lt,max:_t})),Dr=Qt[se.id];Dr&&!je?(f.removeItem(se.id),Qt[se.id]=!1):!Dr&&je&&(f.addItem("node",se),Qt[se.id]=!0)}),Rt==null||Rt.forEach(function(se){var Te=Qt[se.source]&&Qt[se.target]||(ut==null?void 0:ut("edge",se,{min:lt,max:_t})),je=!!f.findById(se.id);je&&!Te?(f.removeItem(se.id),de[se.id]=!1):!je&&Te?(f.addItem("edge",se),de[se.id]=!0):je||(de[se.id]=!1)})),(this.get("filterEdge")||H.includes("edge"))&&(Rt==null||Rt.filter(function(se){var Te=+((nt==null?void 0:nt(se))||se.date),je=Te>=lt&&Te<=_t||(ut==null?void 0:ut("edge",se,{min:lt,max:_t})),Dr=Qt[se.source]&&Qt[se.target],Kr=je&&Dr,zr=de[se.id];zr&&!Kr?(de[se.id]=!1,f.removeItem(se.id)):!zr&&Kr&&(de[se.id]=!0,f.addItem("edge",se))}))}else H.includes("node")&&f.getNodes().forEach(function(se){var Te=se.getModel();if(!(ut!=null&&ut("node",Te,{min:lt,max:_t}))){var je=+((nt==null?void 0:nt(Te))||Te.date);je<lt||je>_t?f.hideItem(se):f.showItem(se)}}),(this.get("filterEdge")||H.includes("edge"))&&f.getEdges().forEach(function(se){var Te=se.getModel();if(!(ut!=null&&ut("edge",Te,{min:o[c].date,max:o[l].date}))){var je=+((nt==null?void 0:nt(Te))||Te.date);if(je<o[c].date||je>o[l].date)f.hideItem(se);else{var Dr=se.getSource().isVisible(),Kr=se.getTarget().isVisible();Dr&&Kr&&f.showItem(se)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(If,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(If,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(nu),Xw=Ww,Yw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vw=_s.applyMatrix;function jw(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var Hw=function(i){Yw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,d.isString)(a)&&(a=document.getElementById(a));var o=Ji("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,g=0,p=0,C=0,G=0;a.addEventListener("mousedown",function(H){if(r.refresh=!1,H.target===o){var J=o.style;g=parseInt(J.width,10),p=parseInt(J.height,10);var nt=t.get("width"),ut=t.get("height");g>nt||p>ut||(G=n.getZoom(),C=t.get("ratio"),f=!0,s=H.clientX,u=H.clientY)}},!1),a.addEventListener("mousemove",function(H){if(!(!f||(0,d.isNil)(H.clientX)||(0,d.isNil)(H.clientY))){var J=t.get("width"),nt=t.get("height"),ut=o.style;c=parseInt(ut.left,10),l=parseInt(ut.top,10),g=parseInt(ut.width,10),p=parseInt(ut.height,10);var lt=s-H.clientX,_t=u-H.clientY;c-lt<0?lt=c:c-lt+g>=J&&(lt=0),l-_t<0?_t=l:l-_t+p>=nt&&(_t=0),c-=lt,l-=_t,Ya(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(lt*G/C,_t*G/C),s=H.clientX,u=H.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],g=[c.maxX-c.minX,c.maxY-c.minY],p={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(p.width=g[0],p.height=p.width/u):(p.height=g[1],p.width=p.height*u),p.minX=l[0]-p.width/2,p.minY=l[1]-p.height/2;var C=f.getMatrix();C||(C=[1,0,0,0,1,0,0,0,1]);var G=it.invert([1,0,0,0,1,0,0,0,1],C),H=Vw({x:p.minX,y:p.minY},G),J=a.getCanvasByPoint(H.x,H.y),nt=this.get("viewport");nt||this.initViewport();var ut=o/p.width,lt=ut*r,_t=ut*n,Bt=r*-J.x/p.width,Rt=n*-J.y/p.height,Qt=Bt+lt,de=Rt+_t;Bt<0&&(lt+=Bt,Bt=0),Qt>r&&(lt=lt-(Qt-r)),Rt<0&&(_t+=Rt,Rt=0),de>n&&(_t=_t-(de-n)),this.set("ratio",t);var se="".concat(Bt,"px"),Te="".concat(Rt,"px");Ya(nt,{left:se,top:Te,width:"".concat(lt,"px"),height:"".concat(_t,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=Ji("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,d.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var g=Ji('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(g);var p=Ji('<span style="display: table-cell; vertical-align: middle; "></span>');g.appendChild(p),t.set("containerDOM",g),t.set("containerSpan",p);var C=Ji('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",C),t.updateImgSize(),p.appendChild(C),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=jw(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=Ji('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(nu),Kw=Hw,Zw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ld=function(){return Ld=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ld.apply(this,arguments)},$w=_s.distance,w0=.05,_0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},qw=function(i){Zw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,d.clone)(_0),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-w0:a=1/(1-w0);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(J){J.remove(),J.destroy()}),l=[],a.forEach(function(J){var nt=J.getModel(),ut=nt.x,lt=nt.y;$w({x:ut,y:lt},f)<s&&(o[nt.id]=J)});var g=n.getEdges(),p=[];g.forEach(function(J){var nt=J.getModel(),ut=nt.source,lt=nt.target;c(nt)&&(u==="only-source"||u==="one"?o[ut]&&!o[lt]&&p.push(J):u==="only-target"||u==="one"?o[lt]&&!o[ut]&&p.push(J):u==="both"&&o[ut]&&o[lt]&&p.push(J))});var C=r.get("showNodeLabel"),G=r.get("showEdgelabel"),H=n.get("group");p.forEach(function(J){var nt=J.get("group").get("children");nt.forEach(function(ut){var lt=ut.get("type"),_t=H.addShape(lt,{attrs:ut.attr()});l.push(_t),C&&lt==="text"&&_t.set("visible",!0)})}),Object.keys(o).forEach(function(J){var nt=o[J],ut=nt.get("group").clone();if(H.add(ut),l.push(ut),G)for(var lt=ut.get("children"),_t=0;_t<lt.length;_t++){var Bt=lt[_t];Bt.get("type")==="text"&&Bt.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||_0;o=s.addShape("circle",{attrs:Ld({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(nu),Qw=qw,Jw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),t_=_s.pointLineDistance,e_={stroke:"#FA8C16",lineWidth:1},r_=function(i){Jw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:e_,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,d.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},g={x:n.x+r.width/2,y:n.y+r.height},p={x:n.x,y:n.y+r.height/2},C={x:n.x+r.width,y:n.y+r.height/2},G=[],H=[],J=null;if(this.clearAlignLine(),(0,d.each)(s,function(ut){ut[4].isVisible&&(G.push(a.getLineDisObject(ut,c)),G.push(a.getLineDisObject(ut,l)),G.push(a.getLineDisObject(ut,g)))}),(0,d.each)(u,function(ut){ut[4].isVisible&&(H.push(a.getLineDisObject(ut,p)),H.push(a.getLineDisObject(ut,l)),H.push(a.getLineDisObject(ut,C)))}),G.sort(function(ut,lt){return ut.dis-lt.dis}),H.sort(function(ut,lt){return ut.dis-lt.dis}),G.length!==0&&G[0].dis<f){t.y=G[0].line[1]-G[0].point.y+n.y,J={type:"item",horizontals:[G[0]]};for(var nt=1;nt<3;nt++)G[0].dis===G[nt].dis&&J.horizontals.push(G[nt])}if(H.length!==0&&H[0].dis<f){t.x=H[0].line[0]-H[0].point.x+n.x,J?J.verticals=[H[0]]:J={type:"item",verticals:[H[0]]};for(var nt=1;nt<3;nt++)H[0].dis===H[nt].dis&&J.verticals.push(H[nt])}J&&(J.bbox=r,this.addAlignLine(J))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,d.each)(a,function(g){var p=g.line,C=g.point,G=(p[0]+p[2])/2,H,J;C.x<G?(H=C.x-r.width/2,J=Math.max(p[0],p[2])):(H=C.x+r.width/2,J=Math.min(p[0],p[2]));var nt=(0,d.mix)({x1:H,y1:p[1],x2:J,y2:p[1]},u),ut=l.addShape("line",{attrs:nt,capture:!1});f.push(ut)}),o&&(0,d.each)(o,function(g){var p=g.line,C=g.point,G=(p[1]+p[3])/2,H,J;C.y<G?(H=C.y-r.height/2,J=Math.max(p[1],p[3])):(H=C.y+r.height/2,J=Math.min(p[1],p[3]));var nt=(0,d.mix)({x1:p[0],y1:H,x2:p[0],y2:J},u),ut=l.addShape("line",{attrs:nt,capture:!1});f.push(ut)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:t_(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,d.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(nu),n_=r_,a_=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xo=function(){return xo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},xo.apply(this,arguments)},i_=["click","mouseenter"],o_=function(i){a_(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=Ji(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();Ya(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,g={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(p){var C=s[f[p]],G=p;switch(p){case"top":C+=l;break;case"left":C+=c;break;case"bottom":C=n.getHeight()-t[1]-C+l,G="top";break;default:C=n.getWidth()-t[0]-C+c,G="left";break}g[G]=C}),g.top+=o+n.getContainer().offsetTop,g.left+=a+n.getContainer().offsetLeft,Object.keys(g).forEach(function(p){g[p]="".concat(g[p],"px")}),g},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";i_.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();Ya(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var g=l.get("children"),p=g[0],C=g[1];p.attr(xo(xo({},p.get("oriAttrs")),s)),C.attr(xo(xo({},C.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var g=l.get("children"),p=g[0],C=g[1];p.attr(xo(xo({},p.get("oriAttrs")),f)),C.attr(xo(xo({},C.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(J){return J.get("name")==="root"}),l=c.find(function(J){return J.get("name")==="node-group"}),g=c.find(function(J){return J.get("name")==="edge-group"}),p=l.get("children").filter(function(J){return J.get("active")}),C=g.get("children").filter(function(J){return J.get("active")}),G=0,H=["getNodes","getEdges"];H.forEach(function(J){o[J]().forEach(function(nt){var ut=!1,lt=J==="getNodes"?p:C;lt.forEach(function(_t){var Bt=n[_t.get("id")];ut=ut||Bt(nt.getModel())}),ut?(o.setItemState(nt,u,!1),o.setItemState(nt,s,!0),G++):(o.setItemState(nt,s,!1),o.setItemState(nt,u,!0))})}),G||H.forEach(function(J){o[J]().forEach(function(nt){o.clearItemStates(nt,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new lc({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(Mr,En){s[Mr].forEach(function(yn){var Ar,Xr=f[En].addGroup({id:yn.id,name:"node-container"}),sn,un=yn.type,An=t.getShapeSize(yn),Gn=An.width,ga=An.height,Oa=An.r,gi=t.getStyle(Mr.substr(0,4),yn);switch(yn.type){case"circle":sn={r:Oa,x:0,y:0};break;case"rect":sn={width:Gn,height:ga,x:-Gn/2,y:-ga/2};break;case"ellipse":sn={rx:Gn,ry:ga,x:0,y:0},un="ellipse";break;case"line":sn={x1:-Gn/2,y1:0,x2:Gn/2,y2:0},un="line";break;case"quadratic":sn={path:[["M",-Gn/2,0],["Q",0,Gn/2,Gn/2,0]]},un="path";break;case"cubic":sn={path:[["M",-Gn/2,0],["C",-Gn/6,Gn/2,Gn/6,-Gn/2,Gn/2,0]]},un="path";break;case"diamond":sn={path:[["M",0,-ga],["L",Gn,0],["L",0,ga],["L",-Gn,0],["Z"]]},un="path";break;case"triangle":sn={path:[["M",-Gn,ga],["L",0,-ga],["L",Gn,ga],["Z"]]},un="path";break;case"star":sn={path:_s.getStarPath(Oa*3,Oa*1.2)},un="path";break;default:sn={r:Oa,x:0,y:0};break}var ti=Xr.addShape(un,{attrs:xo(xo({},sn),gi),name:"".concat(yn.type,"-node-keyShape"),oriAttrs:xo({opacity:1},gi)});if(yn.label){var pi=ti.getBBox(),wi=((Ar=yn.labelCfg)===null||Ar===void 0?void 0:Ar.style)||{},ji=xo({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},wi);Xr.addShape("text",{attrs:xo({x:pi.maxX+4,y:0,text:yn.label},ji),className:"legend-label",name:"".concat(yn.type,"-node-text"),oriAttrs:ji})}})});var c=this.get("padding"),l,g=n.find(function(Mr){return Mr.get("name")==="title-container"}),p={height:0,maxY:0,width:0};if(this.get("title")){g||(g=n.addGroup({name:"title-container"}));var C={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},G=this.get("titleConfig")||{},H=Object.assign(C,G.style||{});l=g.addShape("text",{attrs:xo({text:this.get("title")},H)}),p=g.getCanvasBBox(),g.setMatrix([1,0,0,0,1,0,G.offsetX,G.offsetY,1])}this.layoutItems();var J=n.getCanvasBBox(),nt=a.getCanvasBBox(),ut=nt.minX<0?Math.abs(nt.minX)+c[3]:c[3],lt=p.maxY<nt.minY?Math.abs(p.maxY-nt.minY)+c[0]:p.maxY+c[0],_t=[1,0,0,0,1,0,ut,lt,1];a.setMatrix(_t),J=n.getCanvasBBox();var Bt=[J.minX+J.width+c[1],J.minY+J.height+c[2]];if(l){var G=xo({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));p=g.getCanvasBBox();var Rt=g.getMatrix()||[1,0,0,0,1,0,0,0,1];G.position==="center"?Rt[6]=Bt[0]/2+G.offsetX:G.position==="right"?(Rt[6]=Bt[0]-c[3]+G.offsetX,l.attr({textAlign:"right"})):(Rt[6]=c[3]+G.offsetX,l.attr({textAlign:"left"})),g.setMatrix(Rt),p=g.getCanvasBBox(),ut=nt.minX<0?Math.abs(nt.minX)+c[3]:c[3],lt=nt.minY<p.maxY?Math.abs(p.maxY-nt.minY)+c[0]:p.maxY+c[0],_t=[1,0,0,0,1,0,ut,lt,1],a.setMatrix(_t);var Qt=[1,0,0,0,1,0,ut,lt,1];this.get("layout")==="vertical"?Qt[6]+=nt.maxX+this.get("horiSep"):Qt[7]+=nt.maxY+this.get("vertiSep"),o.setMatrix(Qt)}else{nt=a.getCanvasBBox();var de=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?de[6]+=_t[6]+nt.maxX+this.get("horiSep"):de[7]+=_t[7]+nt.maxY+this.get("vertiSep"),o.setMatrix(de)}J=n.getCanvasBBox(),nt=a.getCanvasBBox(),_t=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var se=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Te=o.getCanvasBBox();Bt=[Math.max(nt.width+_t[6],Te.width+se[6])+c[1],Math.max(nt.height+_t[7],Te.height+se[7])+c[2]],r.changeSize(Bt[0],Bt[1]);var je=this.get("containerStyle"),Dr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],Kr=_s.invertMatrix({x:0,y:0},Dr),zr=n.addShape("rect",{attrs:xo({x:Kr.x+(je.lineWidth||1),y:Kr.y+(je.lineWidth||1),width:Bt[0]-2*(je.lineWidth||1),height:Bt[1]-2*(je.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},je),name:"legend-back-rect",capture:!1});return zr.toBack(),Bt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(lt){return lt.get("name")==="root"}),f=u.find(function(lt){return lt.get("name")==="node-group"}),c=u.find(function(lt){return lt.get("name")==="edge-group"}),l={min:0,max:-1/0},g=-1/0;f.get("children").forEach(function(lt,_t){_t===0&&(l.min=s[0]);var Bt=lt.get("children")[0],Rt=lt.getCanvasBBox(),Qt=Bt.getBBox(),de=Qt.width,se=Qt.height,Te=0,je=0,Dr=0;a==="vertical"?(je=s[1],Dr=s[0]+de/2,s[0]=Dr+Rt.height+n,Te=Rt.maxX+je+de/2):(je=s[0]+de/2,Dr=s[1],s[0]=je+Rt.width+r,Te=Rt.maxY+Dr+se/2),s[0]>l.max&&(l.max=s[0]),Te>g&&(g=Te),lt.setMatrix([1,0,0,0,1,0,je,Dr,1])});var p=l.max-l.min,C={min:0,max:-1/0},G=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?G.maxX+r:G.maxY+n,c.get("children").forEach(function(lt,_t){_t===0&&(C.min=s[0]);var Bt=lt.get("children")[0],Rt=lt.getCanvasBBox(),Qt=Bt.getBBox(),de=Qt.width,se=Qt.height,Te=0,je=0;a==="vertical"?(Te=s[1],je=s[0],s[0]=je+Rt.height+n,lt.setMatrix([1,0,0,0,1,0,0,je+se/2,1])):(Te=s[0],je=s[1],s[0]=Te+Rt.width+r,lt.setMatrix([1,0,0,0,1,0,Te+de/2,0,1])),s[0]>C.max&&(C.max=s[0])});var H=C.max-C.min;if(o&&o!==""&&o!=="left"){var J=p-H,nt=o==="center"?Math.abs(J)/2:Math.abs(J),ut=J<0?f:c;ut.get("children").forEach(function(lt){var _t=lt.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?_t[7]+=nt:_t[6]+=nt,lt.setMatrix(_t)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,d.uniqueId)(),type:n.type||"circle",style:xo({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:xo({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,d.uniqueId)(),type:s,size:f,style:xo({lineWidth:(0,d.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:xo({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,d.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,d.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,d.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,d.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return xo(xo({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(nu),s_=o_,u_=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fu=function(){return Fu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Fu.apply(this,arguments)},S0=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&mv()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var M0="canvas-annotation",f_=function(i){u_(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Fu(Fu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",g=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),p="<p class='g6-annotation-close'>x</p>",C=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(C,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(p,`
        </div>
        `).concat(g,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new lc({container:n,width:s.right-s.left,height:s.bottom-s.top});Ya(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,d.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var g,p=((g=l==null?void 0:l.getModel)===null||g===void 0?void 0:g.call(l))||{},C=p.label,G=p.id;return C||G||"-"}),t.get("getContent")||t.set("getContent",function(l){var g,p;if(!l)return"-";var C=((g=l.getModel)===null||g===void 0?void 0:g.call(l))||{},G=C.label,H=C.id,J=(p=l.getType)===null||p===void 0?void 0:p.call(l),nt=J?"".concat(J,": "):"";return"".concat(nt).concat(G||H||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,g=u-s,p=r.position,C=p===void 0?"top":p,G=r.offsetX,H=G===void 0?0:G,J=r.offsetY,nt=J===void 0?0:J,ut=S0(r,["position","offsetX","offsetY"]),lt=r.height,_t=lt===void 0?"fit-content":lt,Bt=r.width,Rt=Bt===void 0?n.getWidth():Bt;_t==="100%"&&(_t=l),Rt==="100%"&&(Rt=g);var Qt="unset",de="unset",se={};switch(C){case"right":Qt="".concat(l,"px"),se={top:0,right:0},se.right+=s+H,se.top+=f+nt;break;case"bottom":de="".concat(g,"px"),se={bottom:0,left:0},se.left+=s+H,se.bottom+=f+nt;break;case"top":de="".concat(g,"px");case"left":Qt="".concat(l,"px");default:se={top:0,left:0},se.left+=s+H,se.top+=f+nt;break}Object.keys(se).forEach(function(je){se[je]="".concat(se[je],"px")});var Te=Ji("<div class='".concat(r.className," g6-annotation-container'></div>"));return Ya(Te,Fu(Fu({position:"absolute",display:C==="top"||C==="bottom"?"inline-flex":"unset",width:(0,d.isNumber)(Rt)?"".concat(Rt,"px"):Rt,height:(0,d.isNumber)(_t)?"".concat(_t,"px"):_t,maxHeight:Qt,maxWidth:de,overflow:"scroll"},se),ut)),a.appendChild(Te),Te.addEventListener("scroll",function(je){t.updateLinks()}),Te}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),g=l.x,p=l.y;Object.values(n).forEach(function(C){var G=C.card;if(G){var H=G.style,J=Rl(H.left),nt=Rl(H.top),ut=G.getBoundingClientRect(),lt=ut.width,_t=ut.height,Bt=J,Rt=nt;J+lt>g-f&&(Bt=g-f-lt),J<0&&(Bt=0),nt+_t>p-c&&(Rt=p-c-_t),nt<0&&(Rt=0),Ya(G,{left:"".concat(Bt,"px"),top:"".concat(Rt,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),g=l.minHeight,p=l.minWidth,C=l.width,G=l.height,H=l.collapsed,J=H===void 0?!1:H,nt=l.x,ut=l.y,lt=l.title,_t=l.content,Bt=l.maxTitleLength,Rt=l.defaultBegin,Qt=S0(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),de=o.get("linkGroup"),se=this.get("rows")||[[]],Te=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),je=Te?M0:t.getID(),Dr=s[je]||{},Kr=Dr.card,zr=Dr.link,Mr=Dr.x,En=Dr.y,yn=Dr.title,Ar=Dr.content,Xr=this.get("getTitle"),sn=this.get("getContent"),un=this.get("getContentPlaceholder")||function(){return""},An=this.get("getTitlePlaceHolder")||function(){return""},Gn=un(t),ga=An(t),Oa=Ji(this.getDOMContent(Fu({itemId:je,collapsed:J,title:((a=yn||lt||(Xr==null?void 0:Xr(t)))===null||a===void 0?void 0:a.substr(0,Bt))||ga,content:Ar||_t||(sn==null?void 0:sn(t))||Gn},Qt))),gi=(0,d.isNumber)(g)?"".concat(g,"px"):g;Ya(Oa,{minHeight:J?"unset":gi,minWidth:(0,d.isNumber)(p)?"".concat(p,"px"):p,height:G,width:C});var ti=!!Kr;ti?(zr==null||zr.remove(!0),f.replaceChild(Oa,Kr)):f.appendChild(Oa);var pi;if(!c){if(pi=f.getBoundingClientRect()||{},nt!==void 0&&ut!==void 0)Mr=nt,En=ut;else if(!ti&&!Te){var wi=pi.top,ji=Rt||{},Pi=ji.left,Gu=ji.right,$o=Gu===void 0?16:Gu,zu=ji.top,qo=zu===void 0?8:zu,Qo=ji.bottom,wu=$o,Ss=qo;isNaN(Pi)||(wu=f.scrollWidth-Pi),isNaN(Qo)||(Ss=f.scrollHeight-Qo);var Hs=(0,d.isNumber)(p)?p:100;Mr=f.scrollWidth-Oa.scrollWidth-(se.length-1)*Hs-wu;var Va=se[se.length-1],hi=(Va[Va.length-1]||{}).bbox;En=(hi==null?void 0:hi.bottom)-wi||Ss}Ya(Oa,{position:"absolute",left:"".concat(Mr,"px"),top:"".concat(En,"px"),cusor:c?"unset":"move"})}this.bindListener(Oa,je);var Wa=Oa.getBoundingClientRect();if(!Te){var vi=Dd(t,Wa,u,this.get("canvas")),Li=this.get("linkStyle");zr=de.addShape("path",{attrs:Fu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:vi},Li)})}if(s[je]=Fu(Fu({},s[je]||{}),{id:je,collapsed:J,card:Oa,link:zr,x:Mr,y:En,cardBBox:Wa,content:Ar||_t,title:yn||lt,contentPlaceholder:Gn,titlePlaceholder:ga,isCanvas:Te}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var ra=!isNaN(nt)&&!isNaN(ut);if(!ti&&!Te&&!ra){var Ka=pi.bottom,$a=Ka===void 0?0:Ka,wi=pi.top;se[se.length-1].push({id:je,bbox:Wa}),Wa.top>$a-wi-Wa.height-16&&se.push([]),this.set("rows",se)}}this.updateCardSize(je);var Di=this.get("onAnnotationChange");Di==null||Di(s[je],ti?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Rl(o.paddingLeft)+Rl(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":Ya(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":Ya(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Fu(Fu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;Ya(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var g=n.get("itemHighlightState");c.setItemState(l,g,!0)}var p=f[r].link;if(p){var C=n.get("linkHighlightStyle")||{};p.attr(C)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var g=n.get("itemHighlightState");c.setItemState(l,g,!1)}var p=f[r].link;if(p){var C=n.get("linkHighlightStyle")||{};Object.keys(C).forEach(function(H){p.attr(H,void 0),p.attr(H,void 0)});var G=n.get("linkStyle");p.attr(G)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(f){var g=u.target,p=g.className;if(!(p!=="g6-annotation-title"&&p!=="g6-annotation-content")){var C=p==="g6-annotation-title"?g.getBoundingClientRect():g.parentNode.getBoundingClientRect(),G=C.width,H=C.height,J=getComputedStyle(g),nt=p==="g6-annotation-title"?"input":"textarea",ut=Ji("<".concat(nt,' class="').concat(p,'-input" type="textarea" style="width:').concat(G,"px; height: ").concat(H,'px; min-width: 16px;"/>')),lt=Ji('<div class="'.concat(p,'-input-wrapper" style="width: ').concat(G,"px; height: ").concat(H,"px; min-width: 16px; margin-right: ").concat(J.marginRight,'" />'));lt.appendChild(ut),g.parentNode.replaceChild(lt,g);var _t=f[r],Bt=_t.contentPlaceholder,Rt=_t.titlePlaceholder,Qt=_t.content,de=_t.title,se=Qt;p==="g6-annotation-title"?(ut.name="title",ut.maxLength=l,se=de):ut.name="content",se?(ut.innerHTML=g.innerHTML,ut.value=g.innerHTML):ut.placeholder=p==="g6-annotation-title"?Rt:Bt,ut.focus(),ut.addEventListener("blur",function(Te){ut.value&&(g.innerHTML=ut.value,_t[ut.name||"title"]=ut.value),lt.parentNode.replaceChild(g,lt),n.updateCardSize(r);var je=n.get("onAnnotationChange");je==null||je(_t,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Rl(c.left),top:Rl(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,l=u.clientY,g=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!g)){var p=g.x,C=g.y,G=g.left,H=g.top,J=g.card,nt=c-p,ut=l-C;G+=nt,H+=ut;var lt=n.get("graph"),_t=lt.getPointByCanvas(0,0),Bt=lt.getPointByCanvas(lt.getWidth(),lt.getHeight()),Rt=lt.getClientByPoint(_t.x,_t.y),Qt=Rt.x,de=Rt.y,se=lt.getClientByPoint(Bt.x,Bt.y),Te=se.x,je=se.y,Dr=J.getBoundingClientRect(),Kr=Dr.right-Dr.left,zr=Dr.bottom-Dr.top;(G>Te-Qt-Kr&&nt>0||G<0&&nt<0)&&(G-=nt),(H>je-de-zr&&ut>0||H<0&&ut<0)&&(H-=ut),Ya(J,{left:"".concat(G,"px"),top:"".concat(H,"px"),visibility:"hidden"}),p=c,C=l;var Mr=(f[r]||{}).link;if(Mr){var En=lt.findById(r);Mr.attr("path",Dd(En,Dr,lt,n.get("canvas")))}n.set("dragging",{x:p,y:C,left:G,top:H,card:J})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var l=n.get("dragging");if(l){var g=l.left,p=l.top,C=l.card;c[r].x=g,c[r].y=p,Ya(C,{visibility:"visible"}),n.set("dragging",!1);var G=n.get("rows");G==null||G.forEach(function(J){for(var nt=J.length-1;nt>=0;nt--)J[nt].id===r&&J.splice(nt,1)});var H=n.get("onAnnotationChange");H==null||H(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Rl(s.marginLeft),f=o.getBoundingClientRect().width;Ya(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=Dd(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,g=u.y,p=u.id,C=u.collapsed,G=u.card;if(!(G&&G.style.display==="none"&&!t)){var H=n.findById(p)||n.get("canvas");s.push({id:p,x:l,y:g,collapsed:C,title:f||(a==null?void 0:a(H)),content:c||(o==null?void 0:o(H)),visible:G&&G.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,g=a.visible,p=n.findById(o);if(!p&&o===M0&&(p=n.get("canvas")),!p){var C=r.get("cardInfoMap")||{};C[o]=a,r.set("cardInfoMap",C);return}r.toggleAnnotation(p,{x:s,y:u,title:f,content:c,collapsed:l}),g||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(nu),c_=f_,l_=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var g=t[l],p=c.x-g.x,C=c.y-g.y,G=p*p+C*C;o>G&&(o=G,r=c,n=g,a=[f,l])})});var s=20,u=_s.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},Dd=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,g=u.maxY,p=e.getModel(),C=p.x,G=p.y;f+=C,c+=G,l+=C,g+=G,o={left:{x:f,y:(c+g)/2},right:{x:l,y:(c+g)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:g}}}Object.keys(o).forEach(function(de){var se=o[de],Te=se.x,je=se.y,Dr=r.getClientByPoint(Te,je);o[de]=n.getPointByClient(Dr.x,Dr.y)});var H=t.top,J=H===void 0?0:H,nt=t.left,ut=nt===void 0?0:nt,lt=t.right,_t=lt===void 0?0:lt,Bt=t.bottom,Rt=Bt===void 0?0:Bt,Qt={left:n.getPointByClient(ut,(J+Rt)/2),right:n.getPointByClient(_t,(J+Rt)/2),top:n.getPointByClient((ut+_t)/2,J),bottom:n.getPointByClient((ut+_t)/2,Rt)};return l_(o,Qt)},Rl=function(e){return Number(e.replace(/\s+|px/gi,""))||0},h_={PluginBase:nu,Menu:Sb,Grid:bb,Minimap:Lb,Bundling:kb,ToolBar:Wb,Tooltip:Vb,Fisheye:Fb,TimeBar:Xw,ImageMinimap:Kw,EdgeFilterLens:Qw,SnapLine:n_,Legend:s_,Annotation:c_},v_=h_,Zo=v_;cc("circle",{options:{size:bn.defaultNode.size,style:{x:0,y:0,stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},bn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,g=o.text;if(l){var p="".concat(this.type,"-icon");g?t.shapeMap[p]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:p,name:p,draggable:!0}):t.shapeMap[p]=t.addShape("image",{attrs:(0,x.__assign)({x:-f/2,y:-c/2},o),className:p,name:p,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0]/2;if(o){var C="link-point-left";t.shapeMap[C]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p,y:0,r:f/2||c||5}),className:C,name:C,isAnchorPoint:!0})}if(s){var G="link-point-right";t.shapeMap[G]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p,y:0,r:f/2||c||5}),className:G,name:G,isAnchorPoint:!0})}if(a){var H="link-point-top";t.shapeMap[H]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-p,r:f/2||c||5}),className:H,name:H,isAnchorPoint:!0})}if(u){var J="link-point-bottom";t.shapeMap[J]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:p,r:f/2||c||5}),className:J,name:J,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,x.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,x.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cc("rect",{options:{size:[100,30],style:{radius:0,stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,x.__assign)({},bn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0],C=g[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,x.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),cc("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},bn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0]/2,C=g[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-C,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:C,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,x.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cc("diamond",{options:{size:[80,80],style:{stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},bn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0],C=g[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,x.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cc("triangle",{options:{size:40,direction:"up",style:{stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,x.__assign)({},bn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,g=a.show,p=a.offset,C=a.text;if(g)if(C)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var G=-c/2,H=-l/2;(u==="up"||u==="down")&&(H+=p),(u==="left"||u==="right")&&(G+=p),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:G,y:H},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,g=a.size,p=a.r,C=(0,x.__rest)(a,["top","left","right","bottom","size","r"]),G=this.getSize(e),H=G[0];if(f){var J=null,nt=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="up"?J=[-ut,nt]:s==="down"?J=[-ut,-nt]:s==="left"&&(J=[-ut,ut-nt]),J&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},C),{x:J[0],y:J[1],r:g/2||p||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var lt=null,nt=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="up"?lt=[ut,nt]:s==="down"?lt=[ut,-nt]:s==="right"&&(lt=[ut,ut-nt]),lt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},C),{x:lt[0],y:lt[1],r:g/2||p||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var _t=null,nt=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="up"?_t=[ut-nt,-nt]:s==="left"?_t=[ut,-nt]:s==="right"&&(_t=[-ut,-nt]),_t&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},C),{x:_t[0],y:_t[1],r:g/2||p||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var Bt=null,nt=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="down"?Bt=[-ut+nt,nt]:s==="left"?Bt=[ut,nt]:s==="right"&&(Bt=[-ut,nt]),Bt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},C),{x:Bt[0],y:Bt[1],r:g/2||p||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,x.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(Mr){return Mr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(Mr){return Mr.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(Mr){return Mr.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(Mr){return Mr.get("className")==="link-point-bottom"}),l=n,g=s||u||f||c;g&&(l=g.attr());var p=(0,d.mix)({},l,e.linkPoints),C=p.fill,G=p.stroke,H=p.lineWidth,J=p.size/2;J||(J=p.r);var nt=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},ut=nt.left,lt=nt.right,_t=nt.top,Bt=nt.bottom,Rt=this.getSize(e),Qt=Rt[0],de={r:J,fill:C,stroke:G,lineWidth:H},se=null,Te=Qt*Math.sin(1/3*Math.PI),je=Qt*Math.sin(1/3*Math.PI);o==="up"?se=[-je,Te]:o==="down"?se=[-je,-Te]:o==="left"&&(se=[-je,je-Te]),se&&(s?!ut&&ut!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,x.__assign)((0,x.__assign)({},de),{x:se[0],y:se[1]})):ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},de),{x:se[0],y:se[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Dr=null;o==="up"?Dr=[je,Te]:o==="down"?Dr=[je,-Te]:o==="right"&&(Dr=[je,je-Te]),Dr&&(u?!lt&&lt!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,x.__assign)((0,x.__assign)({},de),{x:Dr[0],y:Dr[1]})):lt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},de),{x:Dr[0],y:Dr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var Kr=null;o==="up"?Kr=[je-Te,-Te]:o==="left"?Kr=[je,-Te]:o==="right"&&(Kr=[-je,-Te]),Kr&&(f?!_t&&_t!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,x.__assign)((0,x.__assign)({},de),{x:Kr[0],y:Kr[1]})):_t&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},de),{x:Kr[0],y:Kr[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var zr=null;o==="down"?zr=[-je+Te,Te]:o==="left"?zr=[je,Te]:o==="right"&&(zr=[-je,Te]),zr&&(c?!Bt&&Bt!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,x.__assign)((0,x.__assign)({},de),{x:zr[0],y:zr[1]})):Bt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},de),{x:zr[0],y:zr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),cc("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:bn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:bn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:bn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,x.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,x.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,g=n.text,p=(0,x.__rest)(n,["width","height","x","y","offset","text"]);g?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},p),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,x.__assign)((0,x.__assign)({},p),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,g=n.text,p=(0,x.__rest)(n,["width","height","x","y","offset","text"]);g?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},p),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,x.__assign)((0,x.__assign)({},p),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0],C=g[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],g=null,p=s.show,C=s.width,G=-l/2+a.offset;p&&(G=-l/2+C+a.offset);var H=a.style,J=f.style,nt=f.paddingTop;return(0,d.isString)(e.description)?(g=t.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},H),{x:G,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=g,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},J),{x:G,y:17+(nt||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(g=t.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},H),{x:G,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=g),g},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,x.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],g=c[1],p=t.get("keyShape");p.attr((0,x.__assign)((0,x.__assign)({},a),{x:-l/2,y:-g/2,width:l,height:g}));var C=t.getContainer(),G=C.shapeMap["rect-logo-icon"]||C.find(function(Oa){return Oa.get("className")==="rect-logo-icon"}),H=G?G.attr():{},J=(0,d.mix)({},H,e.logoIcon),nt=J.width;nt===void 0&&(nt=this.options.logoIcon.width);var ut=e.logoIcon?e.logoIcon.show:void 0,lt=s.offset,_t=-l/2+nt+lt;!ut&&ut!==void 0&&(_t=-l/2+lt);var Bt=C.shapeMap["node-label"]||C.find(function(Oa){return Oa.get("className")==="node-label"}),Rt=C.shapeMap["rect-description"]||C.find(function(Oa){return Oa.get("className")==="rect-description"});if(e.label)if(!Bt)C.shapeMap["node-label"]=C.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},s.style),{x:_t,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var Qt=e.labelCfg?e.labelCfg.style:{},de=(0,d.mix)({},Bt.attr(),Qt);e.label&&(de.text=e.label),de.x=_t,(0,d.isString)(e.description)&&(de.y=-5),Rt&&(Rt.resetMatrix(),Rt.attr({x:_t})),Bt.resetMatrix(),Bt.attr(de)}if((0,d.isString)(e.description)){var se=f.paddingTop;if(!Rt)C.shapeMap["rect-description"]=C.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},f.style),{x:_t,y:17+(se||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var Qt=e.descriptionCfg?e.descriptionCfg.style:{},Te=(0,d.mix)({},Rt.attr(),Qt);(0,d.isString)(e.description)&&(Te.text=e.description),Te.x=_t,Rt.resetMatrix(),Rt.attr((0,x.__assign)((0,x.__assign)({},Te),{y:17+(se||0)}))}}var je=C.shapeMap["pre-rect"]||C.find(function(Oa){return Oa.get("className")==="pre-rect"});if(je&&!je.destroyed){var Dr=(0,d.mix)({},je.attr(),e.preRect);je.attr((0,x.__assign)((0,x.__assign)({},Dr),{x:-l/2,y:-g/2,height:g}))}if(G&&!G.destroyed)if(!ut&&ut!==void 0)G.remove(),delete C.shapeMap["pre-rect"];else{var Kr=J.width,zr=J.height,Mr=J.x,En=J.y,yn=J.offset,Ar=(0,x.__rest)(J,["width","height","x","y","offset"]);G.attr((0,x.__assign)((0,x.__assign)({},Ar),{x:Mr||-l/2+Kr+yn,y:En||-zr/2,width:Kr,height:zr}))}else ut&&this.drawLogoIcon(e,C);var Xr=C.shapeMap["rect-state-icon"]||C.find(function(Oa){return Oa.get("className")==="rect-state-icon"}),sn=Xr?Xr.attr():{},un=(0,d.mix)({},sn,e.stateIcon);if(Xr){!un.show&&un.show!==void 0&&(Xr.remove(),delete C.shapeMap["rect-state-icon"]);var An=un.width,zr=un.height,Mr=un.x,En=un.y,Gn=un.offset,ga=(0,x.__rest)(un,["width","height","x","y","offset"]);Xr.attr((0,x.__assign)((0,x.__assign)({},ga),{x:Mr||l/2-An+Gn,y:En||-zr/2,width:An,height:zr}))}else un.show&&this.drawStateIcon(e,C);this.updateLinkPoints(e,C)},getOptions:function(e,t){return t==="move"?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),cc("star",{options:{size:60,style:{stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},bn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,g=(0,x.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),p=this.getSize(e),C=p[0];if(s){var G=Math.cos(.1*Math.PI)*C,H=Math.sin((18+72*0)/180*Math.PI)*C;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:G,y:-H,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var G=Math.cos(.5*Math.PI)*C,H=Math.sin((18+72*1)/180*Math.PI)*C;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:G,y:-H,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var G=Math.cos(.9*Math.PI)*C,H=Math.sin((18+72*2)/180*Math.PI)*C;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:G,y:-H,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var G=Math.cos(1.3*Math.PI)*C,H=Math.sin((18+72*3)/180*Math.PI)*C;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:G,y:-H,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var G=Math.cos(1.7*Math.PI)*C,H=Math.sin((18+72*4)/180*Math.PI)*C;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:G,y:-H,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return _s.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,x.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Te){return Te.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Te){return Te.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Te){return Te.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Te){return Te.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Te){return Te.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,d.mix)({},f,e.linkPoints),g=l.fill,p=l.stroke,C=l.lineWidth,G=l.size/2;G||(G=l.r);var H=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},J=H.left,nt=H.right,ut=H.top,lt=H.leftBottom,_t=H.rightBottom,Bt=this.getSize(e),Rt=Bt[0],Qt={r:G,fill:g,stroke:p,lineWidth:C},de=Math.cos((18+72*0)/180*Math.PI)*Rt,se=Math.sin((18+72*0)/180*Math.PI)*Rt;a?!nt&&nt!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se})):nt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),de=Math.cos((18+72*1)/180*Math.PI)*Rt,se=Math.sin((18+72*1)/180*Math.PI)*Rt,o?!ut&&ut!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se})):ut&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),de=Math.cos((18+72*2)/180*Math.PI)*Rt,se=Math.sin((18+72*2)/180*Math.PI)*Rt,n?!J&&J!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se})):J&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),de=Math.cos((18+72*3)/180*Math.PI)*Rt,se=Math.sin((18+72*3)/180*Math.PI)*Rt,s?!lt&&lt!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se})):lt&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),de=Math.cos((18+72*4)/180*Math.PI)*Rt,se=Math.sin((18+72*4)/180*Math.PI)*Rt,u?!_t&&_t!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se})):_t&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Qt),{x:de,y:-se}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var A0=_s.defaultSubjectColors,Yh="fan-shape-";cc("donut",{options:{size:bn.defaultNode.size,style:{x:0,y:0,stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},bn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;return c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),d_(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,x.__assign)({},r)),g_(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var d_=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=C0(a,s),c=f.configs,l=f.totalValue;if(l){var g=T0(r),p=g.lineWidth,C=g.arcR,G=[C,0],H=0;if(u===1){Nd(t,{arcR:C,arcBegin:G,beginAngle:H,config:c[0],fanIndex:0,lineWidth:p,totalValue:l,drawWhole:!0});return}for(var J=0;J<c.length;J++){var nt=Nd(t,{arcR:C,arcBegin:G,beginAngle:H,config:c[J],fanIndex:J,lineWidth:p,totalValue:l});if(nt.shouldEnd)return;G=nt.arcBegin,H=nt.beginAngle}}}},Nd=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,l=c===void 0?!1:c,g=t.updateShape,p=g===void 0?void 0:g,C=o.value/f;if(C<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var G,H,J;if(l||C>.999)G=[r,1e-4],J=1;else{var nt=C*Math.PI*2;H=a+nt,G=[r*Math.cos(H),-r*Math.sin(H)],J=nt>Math.PI?1:0}var ut={path:[["M",n[0],n[1]],["A",r,r,0,J,0,G[0],G[1]]],stroke:o.color||(p==null?void 0:p.attr("stroke"))||A0[s%A0.length],lineWidth:u};return p?p.attr(ut):e.shapeMap["".concat(Yh).concat(s)]=e.addShape("path",{attrs:ut,name:"".concat(Yh).concat(s),draggable:!0}),{beginAngle:H,arcBegin:G,shape:e.shapeMap["".concat(Yh).concat(s)],shouldEnd:l||C>.999}},g_=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=C0(n,o),c=f.configs,l=f.totalValue;if(l)for(var g=T0(r),p=g.lineWidth,C=g.arcR,G=[C,0],H=0,J=0;J<c.length;J++){var nt="".concat(Yh).concat(J),ut=Nd(u,{arcR:C,arcBegin:G,beginAngle:H,config:c[J],fanIndex:J,lineWidth:p,totalValue:l,drawWhole:c.length===1,updateShape:u.shapeMap[nt]});if(ut.shape&&(s[nt]=!0),ut.shouldEnd)break;G=ut.arcBegin,H=ut.beginAngle}}var lt=Object.keys(u.shapeMap).filter(function(_t){return _t.includes(Yh)});lt.forEach(function(_t){s[_t]||(u.shapeMap[_t].remove(!0),delete u.shapeMap[_t])})},C0=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},T0=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},Av=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},p_=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},rM=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Pd=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},I0=function(e){return Pd(e)},nM=function(e,t){return[e,{x:e.x,y:t.y},t]},Cv=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},y_=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},kd=function(e,t,r){var n=y_(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},O0=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},Rd=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Tv=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},m_=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},x_=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},b_=function(e,t){return m_(e,t.x).concat(x_(e,t.y))},Vh=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},E_=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},L0=function(e,t,r,n,a){return Vh(e,t)+Vh(e,r)+E_(e,[t,r,n,a])},w_=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},aM=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Iv=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,g=n.y-t.y,p=a*u-o*s,C=f*g-c*l,G=a*c-o*f,H=s*g-u*l;return p*C<=0&&G*H<=0},Bd=function(e,t,r){if(r.width||r.height){var n=Rd(r),a=n[0],o=n[1],s=n[2],u=n[3];return Iv(e,t,a,o)||Iv(e,t,a,u)||Iv(e,t,o,s)||Iv(e,t,s,u)}return!1},__=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Bd(o,t,r)||Bd(o,t,n))return;a.push(o)}}),Pd(a)},S_=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),l={},g={},p={};g[t.id]=0,p[t.id]=L0(t,r,t);var C=new P0;C.add({id:t.id,value:p[t.id]});var G={};e.forEach(function(_t){G[_t.id]=_t});for(var H;Object.keys(c).length;){var J=C.minId(!1);if(J)H=c[J];else break;if(H===r){var nt=[];return w_(nt,G,l,r.id),nt}delete c[H.id],C.remove(H.id),f.push(H);var ut=__(e,H,n,a),lt=function(Bt){Bt.forEach(function(Rt){if(f.indexOf(Rt)===-1){var Qt=Rt.id;c[Qt]||(c[Qt]=Rt);var de=p[H.id]+Vh(H,Rt);if(g[Qt]&&de>=g[Qt]){C.add({id:Qt,value:p[Qt]});return}l[Qt]=H.id,g[Qt]=de,p[Qt]=g[Qt]+L0(Rt,r,t,o,s),C.add({id:Qt,value:p[Qt]})}})};lt(ut)}return[t,r]},M_=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},A_=function(e,t,r,n){var a=Vh(e,t),o=Vh(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},D0=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(M_(a,s,u)){var f=A_(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},N0=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=Av(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=Av(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=Av(t);else if(n.getType()==="combo"){var g=n.getKeyShape().getBBox();if(g){var p=n.getModel(),C=p.x,G=p.y;s={x:C,y:G,width:g.width,height:g.height,minX:g.minX+C,maxX:g.maxX+C,minY:g.minY+G,maxY:g.maxY+G},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Av(t)}else s=n&&n.getBBox();var H=Cv(o,a),J=Cv(s,a),nt=kd(H,e,t),ut=kd(J,t,e),lt=p_([nt,ut]),_t=O0(H,lt),Bt=O0(J,lt),Rt=[];Rt=Rt.concat(Rd(_t)).concat(Rd(Bt));var Qt={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[lt,_t,Bt].forEach(function(se){Rt=Rt.concat(b_(se,Qt).filter(function(Te){return Tv(Te,H)&&Tv(Te,J)}))}),[{x:nt.x,y:ut.y},{x:ut.x,y:nt.y}].forEach(function(se){Tv(se,H)&&Tv(se,J)&&Rt.push(se)}),Rt.unshift(nt),Rt.push(ut),Rt=Pd(Rt);var de=S_(Rt,nt,ut,o,s,e,t);return de.unshift(e),de.push(t),I0(de)},C_=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},P0=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),T_=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},I_=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},O_=function(e,t){return[e,t]},L_=function(e,t,r,n,a){return I0(N0(e,t,r,n,a.offset))},D_={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:T_,fallbackRoute:L_},iM={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:I_,fallbackRoute:O_},pc=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},N_=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=Cv(a.getBBox(),r),s=pc(o.minX,t);s<=pc(o.maxX,t);s+=1)for(var u=pc(o.minY,t);u<=pc(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Fd=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},k0=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},R0=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},B0=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=Cv(f,u);for(var g in l)l[g]=pc(l[g],a.gridSize);if(c){for(var p=0,C=s;p<C.length;p++)for(var G=C[p],H=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],g=0;g<4;g++){var J=H[g],nt=_s.getLineIntersect(e,{x:e.x+G.stepX*l.width,y:e.y+G.stepY*l.height},J[0],J[1]);nt&&!Bd(e,nt,f)&&(nt.id="".concat(nt.x,"|||").concat(nt.y),o.push(nt))}return o}var ut=kd(l,e,n);return ut.id="".concat(ut.x,"|||").concat(ut.y),[ut]},Gd=function(e,t,r,n){var a=Fd(e,t),o=r[e.id];if(!o){var s=Fd(n,e);return k0(s,a)}var u=Fd({x:o.x,y:o.y},e);return k0(u,a)},P_=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,l=e.x,g=e.y,p={x:l,y:g,id:c};Gd(p,o,t,r)&&(f={x:o.x===n.x?n.x:p.x*s,y:o.y===n.y?n.y:p.y*s},u.unshift(f));for(var C=t[c];C&&C.id!==c;){var G={x:l,y:g,id:c},H={x:C.x,y:C.y,id:C.id},J=Gd(H,G,t,r);J&&(f={x:H.x===G.x?f.x:H.x*s,y:H.y===G.y?f.y:H.y*s},u.unshift(f)),c=H.id,l=H.x,g=H.y,C=t[c]}return u[0].x=l===r.x?a.x:f.x,u[0].y=g===r.y?a.y:f.y,u.unshift(a),u},k_=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,d.deepMix)(D_,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=N_(o.obstacles.concat([r,n]),u,o.offset),c={x:pc(e.x,u),y:pc(e.y,u)},l={x:pc(t.x,u),y:pc(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(l.x,"|||").concat(l.y);var g=B0(c,e,r,l,o),p=B0(l,t,n,c,o);g.forEach(function(Ar){delete f[Ar.id]}),p.forEach(function(Ar){delete f[Ar.id]});for(var C={},G={},H={},J={},nt={},ut=new P0,lt=0;lt<g.length;lt++){var _t=g[lt];C[_t.id]=_t,J[_t.id]=0,nt[_t.id]=R0(_t,p,o.distFunc),ut.add({id:_t.id,value:nt[_t.id]})}var Bt=o.maximumLoops,Rt,Qt,de,se,Te,je,Dr=1/0,Kr={};for(p.forEach(function(Ar){Kr["".concat(Ar.x,"|||").concat(Ar.y)]=!0}),Object.keys(C).forEach(function(Ar){var Xr=C[Ar].id;nt[Xr]<=Dr&&(Dr=nt[Xr],Rt=C[Xr])});Object.keys(C).length>0&&Bt>0;){var zr=ut.minId((Bt+1)%30===0);if(zr)Rt=C[zr];else break;if(Kr["".concat(Rt.x,"|||").concat(Rt.y)])return P_(Rt,H,c,t,e,l,u);delete C[Rt.id],ut.remove(Rt.id),G[Rt.id]=!0;for(var lt=0;lt<o.directions.length;lt++){Qt=o.directions[lt];var Mr="".concat(Math.round(Rt.x)+Qt.stepX,"|||").concat(Math.round(Rt.y)+Qt.stepY);if(de={x:Rt.x+Qt.stepX,y:Rt.y+Qt.stepY,id:Mr},!G[Mr]&&(je=Gd(Rt,de,H,c),!(je>o.maxAllowedDirectionChange)&&!f[Mr])){C[Mr]||(C[Mr]=de);var En=s[je];se=o.distFunc(Rt,de)+(isNaN(En)?u:En),Te=J[Rt.id]+se;var yn=J[Mr];yn&&Te>=yn||(H[Mr]=Rt,J[Mr]=Te,nt[Mr]=Te+R0(de,p,o.distFunc),ut.add({id:Mr,value:nt[Mr]}))}}Bt-=1}return o.fallbackRoute(e,t,r,n,o)};Cg("polyline",{options:{color:bn.defaultEdge.color,size:bn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:bn.defaultEdge.style.stroke,lineAppendWidth:bn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:bn.edgeLabel.style.fill,fontSize:bn.edgeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,x.__assign)({},bn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,g=this.options.routeCfg,p=(0,d.mix)({},g,e.routeCfg);p.offset=n.offset;var C=this.getPath(u,f,c,l,p,!s);((0,d.isArray)(C)&&C.length<=1||(0,d.isString)(C)&&C.indexOf("L")===-1)&&(C="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(C="M0 0, L0 0");var G=(0,d.mix)({},bn.defaultEdge.style,n,{lineWidth:e.size,path:C});return G},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(lt){return lt.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),g=(0,d.mix)({},n,l,e.style),p=e.sourceNode,C=e.targetNode,G=g.radius,H=this.options.routeCfg,J=(0,d.mix)({},H,e.routeCfg);J.offset=g.offset;var nt=this.getPath(c,p,C,G,J,!f);((0,d.isArray)(nt)&&nt.length<=1||(0,d.isString)(nt)&&nt.indexOf("L")===-1)&&(nt="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(nt="M0 0, L0 0"),l.endArrow&&g.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&g.startArrow===!1&&(e.style.startArrow={path:""});var ut=(0,d.mix)(n,a.attr(),{lineWidth:o,path:nt},e.style);a&&a.attr(ut)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return D0(e,n);var c=[];return(0,d.each)(e,function(C,G){G===0?c.push(["M",C.x,C.y]):c.push(["L",C.x,C.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var l=f?N0(e[e.length-1],e[0],r,t,s):k_(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var g=D0(l,n);return g}l=C_(l);var p=_s.pointsToPolygon(l);return p}},"single-edge");var F0=vc.cloneEvent,G0=vc.isNaN,z0=Math.abs,R_=10,B_=["shift","ctrl","alt","control"],F_={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(G0(r)||G0(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(ut){ut.set("ori-visibility",ut.get("ori-visibility")||ut.get("visible")),ut.hide()})}for(var f=n.getNodes(),c=0,l=f.length;c<l;c++)for(var g=f[c].getContainer(),p=g.get("children"),C=0,G=p;C<G.length;C++){var H=G[C],J=H.get("isKeyShape");J||(H.set("ori-visibility",H.get("ori-visibility")||H.get("visible")),H.hide())}}if(typeof window!="undefined"){var nt=this;this.handleDOMContextMenu=function(ut){return nt.onMouseUp(ut)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=F0(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(z0(this.origin.x-e.clientX)+z0(this.origin.y-e.clientY)<R_)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(Rt){return Rt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var g=f[c].get("group").get("children");g&&g.forEach(function(Rt){var Qt=Rt.get("ori-visibility");Rt.set("ori-visibility",void 0),Qt&&Rt.show()})}if(a>u)for(var p=n.getNodes(),C=0,G=p.length;C<G;C++)for(var H=p[C].getContainer(),J=H.get("children"),nt=0,ut=J;nt<ut.length;nt++){var lt=ut[nt],_t=lt.get("isKeyShape");if(!_t){var Bt=lt.get("ori-visibility");lt.set("ori-visibility",void 0),Bt&&lt.show()}}}if(!this.dragging){this.origin=null;return}e=F0(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(B_.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,d.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,d.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},G_={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,x.__assign)((0,x.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,x.__assign)((0,x.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(p){var C=p.get("id");return c===C});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(p){var C=p.hasLocked();C||t.targets.push(p)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var g=[];this.targets.forEach(function(p){var C=p.getModel(),G=C.x,H=C.y,J=C.id;g.push({x:G,y:H,id:J})}),this.set("beforeDragNodes",g)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(p){var C=p.getEdges();C.forEach(function(G){G.isVisible()&&(t.hidenEdge[G.getID()]=!0,G.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,d.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,d.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),l=f.get("id");r[l]||(r[l]={x:c.x||0,y:c.y||0});var g=a.x-n.x+r[l].x,p=a.y-n.y+r[l].y,C={x:g,y:p};o?t.updateItem(f,C,!1):f.updatePosition(C)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var g=e.x-this.origin.x+this.originPoint.minX,p=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:g,y:p})}else{var r=t.get("group"),n=(0,d.deepMix)({},Ll.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,x.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,g=f.maxX,p=f.maxY;c<r&&(r=c),l<a&&(a=l),g>n&&(n=g),p>o&&(o=p)}var C=Math.floor(r),G=Math.floor(a),H=Math.ceil(n)-Math.floor(r),J=Math.ceil(o)-Math.floor(a);return{x:C,y:G,width:H,height:J,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},Ov=null,z_={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this,r=this.shouldClearStatusOnSecond;r&&(Ov=null),this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,d.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){var n=e.shouldClearStatusOnSecond,a=t.getModel().id;if(Ov===a&&n){e.throttleClearActiveState(i,e),Ov=null;return}for(var o=e.activeState,s=e.inactiveState,u=r.getNodes(),f=r.getCombos(),c=r.getEdges(),l=r.get("vedges"),g=u.length,p=f.length,C=c.length,G=l.length,H=e.inactiveItems||{},J=e.activeItems||{},nt=0;nt<g;nt++){var ut=u[nt],lt=ut.getID(),_t=ut.hasState("selected");e.resetSelected&&_t&&r.setItemState(ut,"selected",!1),J[lt]&&(r.setItemState(ut,o,!1),delete J[lt]),s&&!H[lt]&&(r.setItemState(ut,s,!0),H[lt]=ut)}for(var nt=0;nt<p;nt++){var Bt=f[nt],Rt=Bt.getID(),_t=Bt.hasState("selected");e.resetSelected&&_t&&r.setItemState(Bt,"selected",!1),J[Rt]&&(r.setItemState(Bt,o,!1),delete J[Rt]),s&&!H[Rt]&&(r.setItemState(Bt,s,!0),H[Rt]=Bt)}for(var nt=0;nt<C;nt++){var Qt=c[nt],de=Qt.getID();J[de]&&(r.setItemState(Qt,o,!1),delete J[de]),s&&!H[de]&&(r.setItemState(Qt,s,!0),H[de]=Qt)}for(var nt=0;nt<G;nt++){var se=l[nt],Te=se.getID();J[Te]&&(r.setItemState(se,o,!1),delete J[Te]),s&&!H[Te]&&(r.setItemState(se,s,!0),H[Te]=se)}if(t&&!t.destroyed){s&&(r.setItemState(t,s,!1),delete H[t.getID()]),J[t.getID()]||(r.setItemState(t,o,!0),J[t.getID()]=t);for(var je=t.getEdges(),Dr=je.length,nt=0;nt<Dr;nt++){var Qt=je[nt],de=Qt.getID(),Kr=void 0;Qt.getSource()===t?Kr=Qt.getTarget():Kr=Qt.getSource();var zr=Kr.getID();s&&H[zr]&&(r.setItemState(Kr,s,!1),delete H[zr]),J[zr]||(r.setItemState(Kr,o,!0),J[zr]=Kr),H[de]&&(r.setItemState(Qt,s,!1),delete H[de]),J[de]||(r.setItemState(Qt,o,!0),J[de]=Qt),Qt.toFront()}}e.activeItems=J,e.inactiveItems=H,n&&(Ov=t.getModel().id),r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,d.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Lv=Math.min,U0=Math.max,W0=Math.abs,X0="shift",U_=["drag","shift","ctrl","alt","control"],W_={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:X0,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return U_.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=X0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush,n=this.selectOnCombo,a=(t==null?void 0:t.getType())==="combo";a&&!n||!a&&t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=Lv(f.x,c.x),g=U0(f.x,c.x),p=Lv(f.y,c.y),C=U0(f.y,c.y),G=[],H=[];n.getNodes().forEach(function(ut){if(ut.isVisible()&&s(ut,l,g,p,C)&&o(ut,"select",t)){G.push(ut);var lt=ut.getModel();H.push(lt.id),n.setItemState(ut,u,!0)}});var J=[];this.includeEdges&&G.forEach(function(ut){var lt=ut.getOutEdges();lt.forEach(function(_t){if(_t.isVisible()){var Bt=_t.getModel(),Rt=Bt.source,Qt=Bt.target;H.includes(Rt)&&H.includes(Qt)&&o(_t,"select",t)&&(J.push(_t),n.setItemState(_t,t.selectedState,!0))}})});var nt=[];this.includeCombos&&n.getCombos().forEach(function(ut){if(ut.isVisible()&&s(ut,l,g,p,C)&&o(ut,"select",t)){nt.push(ut);var lt=ut.getModel();H.push(lt.id),n.setItemState(ut,u,!0)}}),this.selectedEdges=J,this.selectedNodes=G,this.selectedCombos=nt,this.onSelect&&this.onSelect(G,J,nt),n.emit("nodeselectchange",{selectedItems:{nodes:G,edges:J,combos:nt},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:W0(e.canvasX-t.x),height:W0(e.canvasY-t.y),x:Lv(e.canvasX,t.x),y:Lv(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Y0="shift",X_=["shift","ctrl","alt","control"],Y_={getDefaultCfg:function(){return{multiple:!0,trigger:Y0,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return X_.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Y0,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,d.each)(c,function(G){G!==r&&a.setItemState(G,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var g=a.findAllByState("node",t.selectedState),p=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:g,edges:p,combos:C},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var g=a.findAllByState("node",t.selectedState),p=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:g,edges:p,combos:C},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var g=a.findAllByState("node",t.selectedState),p=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:g,edges:p,combos:C},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,d.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,d.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,d.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},V_=Kt,Dv=.05,j_={getDefaultCfg:function(){return this.isFireFox=_p()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(G,H){return Math.hypot(H.x-G.x,H.y-G.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),g=this.graph.get("canvas"),p=g.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:p.x,y:p.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-Dv*u:c=1/(1-Dv*u):e.wheelDelta<0?c=1-Dv*u:c=1/(1-Dv*u),l=f*c;var g=this.get("minZoom")||n.get("minZoom"),p=this.get("maxZoom")||n.get("maxZoom");l>p?l=p:l<g&&(l=g);var C=this.get("enableOptimize");if(C){var G=this.get("optimizeZoom"),H=this.get("optimized"),J=n.getNodes(),nt=n.getEdges(),ut=J.length,lt=nt.length;if(!H){for(var _t=0;_t<ut;_t++){var Bt=J[_t];if(!Bt.destroyed)for(var Rt=Bt.get("group").get("children"),Qt=Rt.length,de=0;de<Qt;de++){var se=Rt[de];!se.destoryed&&!se.get("isKeyShape")&&(se.set("ori-visibility",se.get("ori-visibility")||se.get("visible")),se.hide())}}for(var Te=0;Te<lt;Te++)for(var je=nt[Te],Rt=je.get("group").get("children"),Qt=Rt.length,de=0;de<Qt;de++){var se=Rt[de];se.set("ori-visibility",se.get("ori-visibility")||se.get("visible")),se.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Dr=setTimeout(function(){var Va=n.getZoom(),hi=t.get("optimized");if(hi){t.set("optimized",!1);for(var Wa=0;Wa<ut;Wa++){var vi=J[Wa],Li=vi.get("group").get("children"),ra=Li.length;if(Va<G){var Ka=vi.getKeyShape(),$a=Ka.get("ori-visibility");Ka.set("ori-visibility",void 0),$a&&Ka.show()}else for(var Di=0;Di<ra;Di++){var Qa=Li[Di],$a=Qa.get("ori-visibility");Qa.set("ori-visibility",void 0),!Qa.get("visible")&&$a&&$a&&Qa.show()}}for(var ui=0;ui<lt;ui++){var oo=nt[ui],Li=oo.get("group").get("children"),ra=Li.length;if(Va<G){var Ka=oo.getKeyShape(),$a=Ka.get("ori-visibility");Ka.set("ori-visibility",void 0),$a&&Ka.show()}else for(var Di=0;Di<ra;Di++){var Qa=Li[Di];if(!Qa.get("visible")){var $a=Qa.get("ori-visibility");Qa.set("ori-visibility",void 0),$a&&Qa.show()}}}}},100);this.set("timeout",Dr)}if(f<=1){var Kr=void 0,zr=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Kr=n.findAllByState("node",a.fixState),zr=n.findAllByState("edge",a.fixState);for(var Mr=f/l,En=Kr.length,yn=0;yn<En;yn++){var Bt=Kr[yn],Ar=Bt.getContainer(),Xr=Bt.getModel(),sn=Bt.getOriginStyle(),un=Bt.getStateStyle(a.fixState),An=Bt.get("shapeFactory").getShape(Xr.type).getStateStyle(a.fixState,Bt)[a.fixState];if(a.fixAll){if(l<=1){var Gn=(0,d.clone)(Ar.getMatrix());Gn||(Gn=[1,0,0,0,1,0,0,0,1]);var ga=Bt.getModel(),Oa=ga.x,gi=ga.y;Gn=V_(Gn,[["t",-Oa,-gi],["s",Mr,Mr],["t",Oa,gi]]),Ar.setMatrix(Gn)}}else for(var Rt=Ar.get("children"),Qt=Rt.length,de=0;de<Qt;de++){var se=Rt[de],ti=void 0,pi=void 0;if(a.fixLabel){var wi=se.get("type");if(wi==="text"){ti=se.attr("fontSize")||12;var ji=un[se.get("name")],Pi=An[se.get("name")],Gu=ji?ji.fontSize:12,$o=Pi?Pi.fontSize:12,zu=Gu||$o||12;if(l<=1&&se.attr("fontSize",zu/l),pi)break}}if(a.fixLineWidth&&se.get("isKeyShape")){pi=se.attr("lineWidth")||0;var qo=un.lineWidth||An.lineWidth||sn.lineWidth||0;if(l<=1&&se.attr("lineWidth",qo/l),ti)break}}}for(var Qo=zr.length,wu=0;wu<Qo;wu++)for(var je=zr[wu],Ar=je.getContainer(),Rt=Ar.get("children"),Xr=je.getModel(),un=je.getStateStyle(a.fixState),An=je.get("shapeFactory").getShape(Xr.type).getStateStyle(a.fixState,je)[a.fixState],Qt=Rt.length,de=0;de<Qt;de++){var se=Rt[de],ti=void 0,pi=void 0;if(a.fixLabel||a.fixAll){var wi=se.get("type");if(wi==="text"){ti=se.attr("fontSize")||12;var ji=un[se.get("name")],Pi=An[se.get("name")],Gu=ji?ji.fontSize:12,$o=Pi?Pi.fontSize:12,zu=Gu||$o||12;if(l<=1&&se.attr("fontSize",zu/l),pi)break}}if((a.fixLineWidth||a.fixAll)&&se.get("isKeyShape")){pi=se.attr("lineWidth")||0;var qo=un.lineWidth||An.lineWidth||1;if(l<=1&&se.attr("lineWidth",qo/l),ti)break}}}}var Ss=this.get("animate"),Hs=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},Ss,Hs),n.emit("wheelzoom",e)}}},V0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,Ya(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Ya(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){Ya(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,g=o.getBoundingClientRect();c>n/2?c-=g.width:c+=this.offset,l>a/2?l-=g.height:l+=this.offset;var p="".concat(c,"px"),C="".concat(l,"px");Ya(this.container,{left:p,top:C,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=Ji('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),Ya(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},H_=(0,x.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},V0),K_=(0,x.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},V0),j0="click",Z_=["click","dblclick"],$_={getDefaultCfg:function(){return{trigger:j0,onChange:function(){}}},getEvents:function(){var e,t;return Z_.includes(this.trigger)?t=this.trigger:(t=j0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},q_=vc.calculationItemsBBox,Q_=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,d.each)(r,function(n){i(n,t)})}},J_={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,g=c.y,p=c.id;u.push({x:l,y:g,id:p})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],Q_(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(g){var p=g.getModel();return a.parentId,p.id!==a.id&&!t.currentItemChildCombos.includes(p.id)});l.map(function(g){var p=g.getBBox(),C=p.centerX,G=p.centerY,H=p.width,J=u-C,nt=f-G,ut=2*Math.sqrt(J*J+nt*nt);c+H-ut>.8*c?r.setItemState(g,t.activeState,!0):r.setItemState(g,t.activeState,!1)})}(0,d.each)(this.targets,function(g){t.updateCombo(g,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,d.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,g=f.id;s.after.combos.push({x:c,y:l,id:g}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,d.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,d.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var g=e.x-this.origin.x+this.originPoint.minX,p=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:g,y:p})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=q_(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,x.__assign)((0,x.__assign)({},Ll.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,x.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},H0="dblclick",tS=["click","dblclick"],eS={getDefaultCfg:function(){return{trigger:H0,relayout:!0}},getEvents:function(){var e,t;return tS.includes(this.trigger)?t=this.trigger:(t=H0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},rS=vc.isPolygonsIntersect,nS=vc.pathToPoints,K0="shift",aS=["drag","shift","ctrl","alt","control"],iS=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=nS(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return rS(t,r)},oS={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:K0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return aS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=K0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&iS(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(g){if(g.isVisible()){var p=g.getModel(),C=p.source,G=p.target;u.includes(C)&&u.includes(G)&&n(g,"select",e)&&(f.push(g),r.setItemState(g,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,x.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},Z0="click",sS=["click","drag"],$0=void 0,uS=["shift","ctrl","control","alt","meta",void 0],fS={getDefaultCfg:function(){return{trigger:Z0,key:$0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;sS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Z0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&uS.indexOf(e.key.toLowerCase())===-1&&(e.trigger=$0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,x.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,x.__assign)((0,x.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,x.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},q0="ctrl",cS=["shift","ctrl","alt","control"],lS="1",hS={getDefaultCfg:function(){return{trigger:q0,combinedKey:lS,functionName:"fitView",functionParams:[]}},getEvents:function(){return cS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=q0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},vS=["shift","ctrl","alt","control","meta"],dS={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||vS.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(Xr){return e["".concat(Xr,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var l=this.graph.get("width"),g=this.graph.get("height"),p=this.graph.get("canvas").getCanvasBBox(),C=this.scalableRange,G=this.scalableRange;C<1&&C>-1&&(C=l*C,G=g*G);var H=p.minX,J=p.maxX,nt=p.minY,ut=p.maxY;f>0?J<-C?f=0:J-f<-C&&(f=J+C):f<0&&(H>l+C?f=0:H-f>l+C&&(f=H-(l+C))),c>0?ut<-G?c=0:ut-c<-G&&(c=ut+G):c<0&&(nt>g+G?c=0:nt-c>g+G&&(c=nt-(g+G))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var lt=this.get("enableOptimize");if(lt){var _t=this.get("optimizeZoom"),Bt=this.get("optimized"),Rt=r.getNodes(),Qt=r.getEdges(),de=Rt.length,se=Qt.length;if(!Bt){for(var Te=0;Te<de;Te++){var je=Rt[Te];if(!je.destroyed)for(var Dr=je.get("group").get("children"),Kr=Dr.length,zr=0;zr<Kr;zr++){var Mr=Dr[zr];!Mr.destoryed&&!Mr.get("isKeyShape")&&(Mr.set("ori-visibility",Mr.get("ori-visibility")||Mr.get("visible")),Mr.hide())}}for(var En=0;En<se;En++)for(var yn=Qt[En],Dr=yn.get("group").get("children"),Kr=Dr.length,zr=0;zr<Kr;zr++){var Mr=Dr[zr];Mr.set("ori-visibility",Mr.get("ori-visibility")||Mr.get("visible")),Mr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Ar=setTimeout(function(){var Xr=r.getZoom(),sn=t.get("optimized");if(sn){t.set("optimized",!1);for(var un=0;un<de;un++){var An=Rt[un],Gn=An.get("group").get("children"),ga=Gn.length;if(Xr<_t){var Oa=An.getKeyShape(),gi=Oa.get("ori-visibility");gi&&Oa.show()}else for(var ti=0;ti<ga;ti++){var pi=Gn[ti],gi=pi.get("ori-visibility");!pi.get("visible")&&gi&&gi&&pi.show()}}for(var wi=0;wi<se;wi++){var ji=Qt[wi],Gn=ji.get("group").get("children"),ga=Gn.length;if(Xr<_t){var Oa=ji.getKeyShape(),gi=Oa.get("ori-visibility");gi&&Oa.show()}else for(var ti=0;ti<ga;ti++){var pi=Gn[ti];if(!pi.get("visible")){var gi=pi.get("ori-visibility");gi&&pi.show()}}}}},100);this.set("timeout",Ar)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,d.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,d.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},gS={"drag-canvas":F_,"zoom-canvas":j_,"drag-node":G_,"activate-relations":z_,"brush-select":W_,"click-select":Y_,"lasso-select":oS,tooltip:H_,"edge-tooltip":K_,"collapse-expand":$_,"drag-combo":J_,"collapse-expand-combo":eS,"create-edge":fS,"shortcuts-call":hS,"scroll-canvas":dS};(0,d.each)(gS,function(i,e){Tg(e,i)});var pS=(0,x.__assign)((0,x.__assign)({},B),fm),oM=Zo.Grid,sM=Zo.Minimap,uM=Zo.Bundling,fM=Zo.Menu,yS=Zo.Fisheye,cM=Zo.ToolBar,lM=Zo.Tooltip,mS=Zo.TimeBar,xS=Zo.ImageMinimap,bS=Zo.EdgeFilterLens,ES=Zo.SnapLine,hM=Zo.Legend,wS=Zo.Annotation,Q0={version:Ll.version,Graph:Ip,TreeGraph:pb,Util:vc,Layout:Za.Layouts,TreeLayout:Jx,registerLayout:tb,Global:Ll,registerBehavior:Tg,registerCombo:um,registerEdge:Cg,registerNode:cc,Minimap:Zo.Minimap,Grid:Zo.Grid,Bundling:Zo.Bundling,Menu:Zo.Menu,ToolBar:Zo.ToolBar,Tooltip:Zo.Tooltip,Legend:Zo.Legend,TimeBar:mS,SnapLine:ES,Fisheye:yS,ImageMinimap:xS,EdgeFilterLens:bS,Annotation:wS,Algorithm:pS,Arrow:wg,Marker:_g,Shape:jc};Q0.version="4.8.23";var _S=Q0,vM="4.8.23"},199905:function(yr,R,z){"use strict";z.r(R),z.d(R,{Graph:function(){return q},GraphWithEvent:function(){return ee},algorithm:function(){return B},comparision:function(){return k},essence:function(){return Y},generate:function(){return P}});var B={};z.r(B),z.d(B,{components:function(){return xe},dfs:function(){return Wt},dijkstra:function(){return Or},dijkstraAll:function(){return Sr},findCycles:function(){return Nn},floydWarshall:function(){return wt},isAcyclic:function(){return ft},postorder:function(){return O},preorder:function(){return w},prim:function(){return ae},tarjan:function(){return Rr},topsort:function(){return la}});var Y={};z.r(Y),z.d(Y,{hasSelfLoop:function(){return Aa},isGraph:function(){return Rn},isNullGraph:function(){return Ga},isSimpleGraph:function(){return Jn}});var k={};z.r(k),z.d(k,{containAllSameEdges:function(){return mr},containAllSameNodes:function(){return ar},containSameEdges:function(){return Me},containSameNodes:function(){return Pt},getSameEdges:function(){return He},getSameNodes:function(){return ve},isGraphComplement:function(){return an},isGraphContainsAnother:function(){return Xe},isGraphOptionSame:function(){return br},isGraphSame:function(){return Mn}});var P={};z.r(P),z.d(P,{getGraphComplement:function(){return Vn}});var N;(function(me){me.DEFAULT_EDGE_NAME="\0",me.GRAPH_NODE="\0",me.EDGE_KEY_DELIM=""})(N||(N={}));function D(me,Dt){var fe=me.get(Dt)||0;me.set(Dt,fe+1)}function E(me,Dt){var fe=me.get(Dt);fe!==void 0&&(fe=fe-1,fe>0?me.set(Dt,fe):me.delete(Dt))}function y(me,Dt,fe,Ae){var be=String(Dt),De=String(fe);if(!me&&be>De){var or=be;be=De,De=or}return be+N.EDGE_KEY_DELIM+De+N.EDGE_KEY_DELIM+(Ae===void 0?N.DEFAULT_EDGE_NAME:Ae)}function M(me,Dt,fe,Ae){var be=String(Dt),De=String(fe),or={v:Dt,w:fe};if(!me&&be>De){var Fr=or.v;or.v=or.w,or.w=Fr}return Ae!==void 0&&(or.name=Ae),or}function S(me,Dt){return y(me,Dt.v,Dt.w,Dt.name)}function m(me){return typeof me=="function"}var I=function(Dt){return Dt.nodes().map(function(fe){var Ae=Dt.node(fe),be=Dt.parent(fe),De={id:fe,value:Ae,parent:be};return De.value===void 0&&delete De.value,De.parent===void 0&&delete De.parent,De})},A=function(Dt){return Dt.edges().map(function(fe){var Ae=Dt.edge(fe),be={v:fe.v,w:fe.w,value:Ae,name:fe.name};return be.name===void 0&&delete be.name,be.value===void 0&&delete be.value,be})},L=function(Dt){var fe={options:{directed:Dt.isDirected(),multigraph:Dt.isMultigraph(),compound:Dt.isCompound()},nodes:I(Dt),edges:A(Dt),value:Dt.graph()};return fe.value===void 0&&delete fe.value,fe},U=function(Dt){var fe=new q(Dt.options);return Dt.value!==void 0&&fe.setGraph(Dt.value),Dt.nodes.forEach(function(Ae){fe.setNode(Ae.id,Ae.value),Ae.parent&&fe.setParent(Ae.id,Ae.parent)}),Dt.edges.forEach(function(Ae){fe.setEdge(Ae.v,Ae.w,Ae.value,Ae.name)}),fe};function V(me,Dt){var fe=Object.keys(me);if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(me);Dt&&(Ae=Ae.filter(function(be){return Object.getOwnPropertyDescriptor(me,be).enumerable})),fe.push.apply(fe,Ae)}return fe}function x(me){for(var Dt=1;Dt<arguments.length;Dt++){var fe=arguments[Dt]!=null?arguments[Dt]:{};Dt%2?V(Object(fe),!0).forEach(function(Ae){d(me,Ae,fe[Ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(fe)):V(Object(fe)).forEach(function(Ae){Object.defineProperty(me,Ae,Object.getOwnPropertyDescriptor(fe,Ae))})}return me}function d(me,Dt,fe){return Dt in me?Object.defineProperty(me,Dt,{value:fe,enumerable:!0,configurable:!0,writable:!0}):me[Dt]=fe,me}function at(me,Dt){if(!(me instanceof Dt))throw new TypeError("Cannot call a class as a function")}function W(me,Dt){for(var fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(me,Ae.key,Ae)}}function j(me,Dt,fe){return Dt&&W(me.prototype,Dt),fe&&W(me,fe),Object.defineProperty(me,"prototype",{writable:!1}),me}var $={compound:!1,multigraph:!1,directed:!0},q=function(){function me(){var Dt=this,fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};at(this,me),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=N.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Dt.directed},this.isMultigraph=function(){return Dt.multigraph},this.isCompound=function(){return Dt.compound},this.setGraph=function(be){return Dt.label=be,Dt},this.graph=function(){return Dt.label},this.setDefaultNodeLabel=function(be){return m(be)?Dt.defaultNodeLabelFn=be:Dt.defaultNodeLabelFn=function(){return be},Dt},this.nodeCount=function(){return Dt.nodeCountNum},this.node=function(be){return Dt.nodesLabelMap.get(be)},this.nodes=function(){return Array.from(Dt.nodesLabelMap.keys())},this.sources=function(){return Dt.nodes().filter(function(be){var De;return!(!((De=Dt.inEdgesMap.get(be))===null||De===void 0)&&De.size)})},this.sinks=function(){return Dt.nodes().filter(function(be){var De;return!(!((De=Dt.outEdgesMap.get(be))===null||De===void 0)&&De.size)})},this.setNodes=function(be,De){return be.map(function(or){return Dt.setNode(or,De)}),Dt},this.hasNode=function(be){return Dt.nodesLabelMap.has(be)},this.checkCompound=function(){if(!Dt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(be){if(Dt.isCompound()){var De,or=(De=Dt.parentMap)===null||De===void 0?void 0:De.get(be);if(or!==Dt.GRAPH_NODE)return or}},this.removeFromParentsChildList=function(be){var De=Dt.parentMap.get(be);Dt.childrenMap.get(De).delete(be)},this.setParent=function(be,De){var or,Fr;Dt.checkCompound();for(var Jr=De===void 0?Dt.GRAPH_NODE:De,Pn=Dt.parent(Jr);Pn;){if(be===Pn)throw new Error("Setting "+De+" as parent of "+be+" would create a cycle");Pn=Dt.parent(Pn)}De&&Dt.setNode(De),Dt.setNode(be),Dt.removeFromParentsChildList(be),(or=Dt.parentMap)===null||or===void 0||or.set(be,Jr);var Bn=Dt.childrenMap.get(Jr);return Bn.set(be,!0),(Fr=Dt.childrenMap)===null||Fr===void 0||Fr.set(Jr,Bn),Dt},this.children=function(be){var De=be===void 0?Dt.GRAPH_NODE:be;if(Dt.isCompound()){var or,Fr=(or=Dt.childrenMap)===null||or===void 0?void 0:or.get(De);return Fr?Array.from(Fr.keys()):void 0}if(De===Dt.GRAPH_NODE)return Dt.nodes();if(be&&Dt.hasNode(be))return[]},this.predecessors=function(be){var De=Dt.predecessorsMap.get(be);return De?Array.from(De.keys()):void 0},this.successors=function(be){var De=Dt.successorsMap.get(be);return De?Array.from(De.keys()):void 0},this.neighbors=function(be){var De;if(Dt.hasNode(be))return Array.from(new Set((De=Dt.predecessors(be))===null||De===void 0?void 0:De.concat(Dt.successors(be))))},this.isLeaf=function(be){var De;if(Dt.isDirected()){var or;return!(!((or=Dt.successors(be))===null||or===void 0)&&or.length)}return!(!((De=Dt.neighbors(be))===null||De===void 0)&&De.length)},this.filterNodes=function(be){var De=Dt.directed,or=Dt.multigraph,Fr=Dt.compound,Jr=new me({directed:De,multigraph:or,compound:Fr});if(Jr.setGraph(Dt.graph()),Dt.nodes().forEach(function(Bn){be(Bn)&&Jr.setNode(Bn,Dt.node(Bn))}),Dt.edges().forEach(function(Bn){Jr.hasNode(Bn.v)&&Jr.hasNode(Bn.w)&&Jr.setEdgeObj(Bn,Dt.edge(Bn))}),Fr){var Pn=function(Zn){for(var ba=Dt.parent(Zn);ba!==void 0&&!Jr.hasNode(ba);)ba=Dt.parent(ba);return ba};Jr.nodes().forEach(function(Bn){Jr.setParent(Bn,Pn(Bn))})}return Jr},this.setDefaultEdgeLabel=function(be){return m(be)?Dt.defaultEdgeLabelFn=be:Dt.defaultEdgeLabelFn=function(){return be},Dt},this.edgeCount=function(){return Dt.edgeCountNum},this.setEdgeObj=function(be,De){return Dt.setEdge(be.v,be.w,De,be.name)},this.setPath=function(be,De){return be.reduce(function(or,Fr){return Dt.setEdge(or,Fr,De),Fr}),Dt},this.edgeFromArgs=function(be,De,or){return Dt.edge({v:be,w:De,name:or})},this.edge=function(be){return Dt.edgesLabelsMap.get(S(Dt.isDirected(),be))},this.hasEdge=function(be,De,or){return Dt.edgesLabelsMap.has(S(Dt.isDirected(),{v:be,w:De,name:or}))},this.removeEdgeObj=function(be){var De=be.v,or=be.w,Fr=be.name;return Dt.removeEdge(De,or,Fr)},this.edges=function(){return Array.from(Dt.edgesMap.values())},this.inEdges=function(be,De){var or=Dt.inEdgesMap.get(be);if(or)return Array.from(or.values()).filter(function(Fr){return!De||Fr.v===De})},this.outEdges=function(be,De){var or=Dt.outEdgesMap.get(be);if(or)return Array.from(or.values()).filter(function(Fr){return!De||Fr.w===De})},this.nodeEdges=function(be,De){var or;if(Dt.hasNode(be))return(or=Dt.inEdges(be,De))===null||or===void 0?void 0:or.concat(Dt.outEdges(be,De))},this.toJSON=function(){return L(Dt)},this.nodeInDegree=function(be){var De=Dt.inEdgesMap.get(be);return De?De.size:0},this.nodeOutDegree=function(be){var De=Dt.outEdgesMap.get(be);return De?De.size:0},this.nodeDegree=function(be){return Dt.nodeInDegree(be)+Dt.nodeOutDegree(be)},this.source=function(be){return be.v},this.target=function(be){return be.w};var Ae=x(x({},$),fe);this.compound=Ae.compound,this.directed=Ae.directed,this.multigraph=Ae.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return j(me,[{key:"setNode",value:function(fe,Ae){var be=this.nodesLabelMap,De=this.defaultNodeLabelFn,or=this.isCompound,Fr=this.parentMap,Jr=this.childrenMap,Pn=this.inEdgesMap,Bn=this.outEdgesMap,Zn=this.predecessorsMap,ba=this.successorsMap;if(be.has(fe))return Ae!==void 0&&be.set(fe,Ae),this;if(be.set(fe,Ae||De(fe)),or()){var Ca;Fr==null||Fr.set(fe,this.GRAPH_NODE),Jr==null||Jr.set(fe,new Map),Jr!=null&&Jr.has(this.GRAPH_NODE)||Jr==null||Jr.set(this.GRAPH_NODE,new Map),Jr==null||(Ca=Jr.get(this.GRAPH_NODE))===null||Ca===void 0||Ca.set(fe,!0)}return[Pn,Bn,Zn,ba].forEach(function(li){return li.set(fe,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(fe){var Ae=this;if(this.hasNode(fe)){var be=function(fi){Ae.removeEdge(fi.v,fi.w,fi.name)},De=this.inEdgesMap,or=this.outEdgesMap,Fr=this.predecessorsMap,Jr=this.successorsMap,Pn=this.nodesLabelMap;if(this.isCompound()){var Bn,Zn,ba;this.removeFromParentsChildList(fe),(Bn=this.parentMap)===null||Bn===void 0||Bn.delete(fe),(Zn=this.children(fe))===null||Zn===void 0||Zn.forEach(function(ta){return Ae.setParent(ta)}),(ba=this.childrenMap)===null||ba===void 0||ba.delete(fe)}var Ca=De.get(fe),li=or.get(fe);Array.from(Ca.values()).forEach(function(ta){return be(ta)}),Array.from(li.values()).forEach(function(ta){return be(ta)}),Pn.delete(fe),De.delete(fe),or.delete(fe),Fr.delete(fe),Jr.delete(fe),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(fe,Ae,be,De){var or,Fr,Jr=M(this.isDirected(),fe,Ae,De),Pn=S(this.isDirected(),Jr),Bn=Jr.v,Zn=Jr.w;if(this.edgesLabelsMap.has(Pn))return this.edgesLabelsMap.set(Pn,be),this;if(De!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(Bn),this.setNode(Zn),this.edgesLabelsMap.set(Pn,be||this.defaultEdgeLabelFn(Bn,Zn,De)),Object.freeze(Jr),this.edgesMap.set(Pn,Jr);var ba=this.predecessorsMap.get(Zn),Ca=this.successorsMap.get(Bn);return D(ba,Bn),D(Ca,Zn),(or=this.inEdgesMap.get(Zn))===null||or===void 0||or.set(Pn,Jr),(Fr=this.outEdgesMap.get(Bn))===null||Fr===void 0||Fr.set(Pn,Jr),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(fe,Ae,be){var De=y(this.isDirected(),fe,Ae,be),or=this.edgesMap.get(De);if(or){var Fr=M(this.isDirected(),fe,Ae,be),Jr=Fr.v,Pn=Fr.w;this.edgesLabelsMap.delete(De),this.edgesMap.delete(De);var Bn=this.predecessorsMap.get(Pn),Zn=this.successorsMap.get(Jr);E(Bn,Jr),E(Zn,Pn),this.inEdgesMap.get(Pn).delete(De),this.outEdgesMap.get(Jr).delete(De),this.edgeCountNum-=1}return this}}]),me}();q.fromJSON=U;function et(me){"@babel/helpers - typeof";return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt},et(me)}function Q(me,Dt){if(!(me instanceof Dt))throw new TypeError("Cannot call a class as a function")}function it(me,Dt){for(var fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(me,Ae.key,Ae)}}function ht(me,Dt,fe){return Dt&&it(me.prototype,Dt),fe&&it(me,fe),Object.defineProperty(me,"prototype",{writable:!1}),me}function dt(){return typeof Reflect!="undefined"&&Reflect.get?dt=Reflect.get:dt=function(Dt,fe,Ae){var be=Ot(Dt,fe);if(be){var De=Object.getOwnPropertyDescriptor(be,fe);return De.get?De.get.call(arguments.length<3?Dt:Ae):De.value}},dt.apply(this,arguments)}function Ot(me,Dt){for(;!Object.prototype.hasOwnProperty.call(me,Dt)&&(me=kt(me),me!==null););return me}function It(me,Dt){if(typeof Dt!="function"&&Dt!==null)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(Dt&&Dt.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),Object.defineProperty(me,"prototype",{writable:!1}),Dt&&Kt(me,Dt)}function Kt(me,Dt){return Kt=Object.setPrototypeOf||function(Ae,be){return Ae.__proto__=be,Ae},Kt(me,Dt)}function Ft(me){var Dt=yt();return function(){var Ae=kt(me),be;if(Dt){var De=kt(this).constructor;be=Reflect.construct(Ae,arguments,De)}else be=Ae.apply(this,arguments);return Nt(this,be)}}function Nt(me,Dt){if(Dt&&(et(Dt)==="object"||typeof Dt=="function"))return Dt;if(Dt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return st(me)}function st(me){if(me===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}function yt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(me){return!1}}function kt(me){return kt=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},kt(me)}var ee=function(me){It(fe,me);var Dt=Ft(fe);function fe(){var Ae;Q(this,fe);for(var be=arguments.length,De=new Array(be),or=0;or<be;or++)De[or]=arguments[or];return Ae=Dt.call.apply(Dt,[this].concat(De)),Ae.eventPool={},Ae}return ht(fe,[{key:"appendEvent",value:function(be,De){this.eventPool[be]||(this.eventPool[be]=[]),this.eventPool[be].push(De)}},{key:"removeEvent",value:function(be,De){if(this.eventPool[be]){var or=this.eventPool[be].indexOf(De);or>-1&&this.eventPool[be].splice(or,1)}}},{key:"emitEvent",value:function(be){for(var De=arguments.length,or=new Array(De>1?De-1:0),Fr=1;Fr<De;Fr++)or[Fr-1]=arguments[Fr];this.eventPool[be]&&this.eventPool[be].forEach(function(Jr){Jr.apply(void 0,or)})}},{key:"setNode",value:function(be,De){return dt(kt(fe.prototype),"setNode",this).call(this,be,De),this.emitEvent("nodeAdd",be,De),this}},{key:"removeNode",value:function(be){return dt(kt(fe.prototype),"removeNode",this).call(this,be),this.emitEvent("nodeRemove",be),this}},{key:"setEdge",value:function(be,De,or,Fr){return dt(kt(fe.prototype),"setEdge",this).call(this,be,De,or,Fr),this.emitEvent("edgeAdd",be,De,or,Fr),this}},{key:"removeEdge",value:function(be,De,or){return dt(kt(fe.prototype),"removeEdge",this).call(this,be,De,or),this.emitEvent("edgeRemove",be,De,or),this}}]),fe}(q);function $t(me,Dt){for(var fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(me,Ae.key,Ae)}}function ge(me,Dt,fe){return Dt&&$t(me.prototype,Dt),fe&&$t(me,fe),Object.defineProperty(me,"prototype",{writable:!1}),me}function Pe(me,Dt){if(!(me instanceof Dt))throw new TypeError("Cannot call a class as a function")}var tr=ge(function me(){var Dt=this;Pe(this,me),this.arr=[],this.keyIndice=new Map,this.size=function(){return Dt.arr.length},this.keys=function(){return Dt.arr.map(function(fe){return fe.key})},this.has=function(fe){return Dt.keyIndice.has(fe)},this.priority=function(fe){var Ae=Dt.keyIndice.get(fe);if(Ae!==void 0)return Dt.arr[Ae].priority},this.swap=function(fe,Ae){var be=Dt.arr,De=Dt.keyIndice,or=[be[fe],be[Ae]],Fr=or[0],Jr=or[1];be[fe]=Jr,be[Ae]=Fr,De.set(Fr.key,Ae),De.set(Jr.key,fe)},this.innerDecrease=function(fe){for(var Ae=Dt.arr,be=Ae[fe].priority,De,or=fe;or!==0;){var Fr;if(De=or>>1,((Fr=Ae[De])===null||Fr===void 0?void 0:Fr.priority)<be)break;Dt.swap(or,De),or=De}},this.heapify=function(fe){var Ae=Dt.arr,be=fe<<1,De=be+1,or=fe;be<Ae.length&&(or=Ae[be].priority<Ae[or].priority?be:or,De<Ae.length&&(or=Ae[De].priority<Ae[or].priority?De:or),or!==fe&&(Dt.swap(fe,or),Dt.heapify(or)))},this.min=function(){if(Dt.size()===0)throw new Error("Queue underflow");return Dt.arr[0].key},this.add=function(fe,Ae){var be=Dt.keyIndice,De=Dt.arr;if(!be.has(fe)){var or=De.length;return be.set(fe,or),De.push({key:fe,priority:Ae}),Dt.innerDecrease(or),!0}return!1},this.removeMin=function(){Dt.swap(0,Dt.arr.length-1);var fe=Dt.arr.pop();return Dt.keyIndice.delete(fe.key),Dt.heapify(0),fe.key},this.decrease=function(fe,Ae){if(!Dt.has(fe))throw new Error("There's no key named ".concat(fe));var be=Dt.keyIndice.get(fe);if(Ae>Dt.arr[be].priority)throw new Error("New priority is greater than current priority.Key: ".concat(fe," Old: + ").concat(Dt.arr[be].priority," New: ").concat(Ae));Dt.arr[be].priority=Ae,Dt.innerDecrease(be)}}),Jt=function(Dt,fe){var Ae=new q,be=new Map,De=new tr,or;function Fr(Bn){var Zn=Bn.v===or?Bn.w:Bn.v,ba=De.priority(Zn);if(ba!==void 0){var Ca=fe(Bn);Ca<ba&&(be.set(Zn,or),De.decrease(Zn,Ca))}}if(Dt.nodeCount()===0)return Ae;Dt.nodes().forEach(function(Bn){De.add(Bn,Number.POSITIVE_INFINITY),Ae.setNode(Bn)}),De.decrease(Dt.nodes()[0],0);for(var Jr=!1;De.size()>0;){var Pn;if(or=De.removeMin(),be.has(or))Ae.setEdge(or,be.get(or));else{if(Jr)throw new Error("Input graph is not connected: "+Dt.graph());Jr=!0}(Pn=Dt.nodeEdges(or))===null||Pn===void 0||Pn.forEach(Fr)}return Ae},ae=Jt,Se=function(Dt){var fe=new Set,Ae=[],be=Dt.nodes();return be.forEach(function(De){for(var or=[],Fr=[De];Fr.length>0;){var Jr=Fr.pop();if(!fe.has(Jr)){var Pn,Bn;fe.add(Jr),or.push(Jr),(Pn=Dt.successors(Jr))===null||Pn===void 0||Pn.forEach(function(Zn){return Fr.push(Zn)}),(Bn=Dt.predecessors(Jr))===null||Bn===void 0||Bn.forEach(function(Zn){return Fr.push(Zn)})}}or.length&&Ae.push(or)}),Ae},xe=Se,we=function me(Dt,fe,Ae,be,De,or){be.includes(fe)||(be.push(fe),Ae||or.push(fe),De(fe).forEach(function(Fr){return me(Dt,Fr,Ae,be,De,or)}),Ae&&or.push(fe))},zt=function(Dt,fe,Ae){var be=Array.isArray(fe)?fe:[fe],De=function(Pn){return Dt.isDirected()?Dt.successors(Pn):Dt.neighbors(Pn)},or=[],Fr=[];return be.forEach(function(Jr){if(Dt.hasNode(Jr))we(Dt,Jr,Ae==="post",Fr,De,or);else throw new Error("Graph does not have node: "+Jr)}),or},Wt=zt;function Ie(me,Dt){return _e(me)||re(me,Dt)||ie(me,Dt)||Yt()}function Yt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ie(me,Dt){if(me){if(typeof me=="string")return Oe(me,Dt);var fe=Object.prototype.toString.call(me).slice(8,-1);if(fe==="Object"&&me.constructor&&(fe=me.constructor.name),fe==="Map"||fe==="Set")return Array.from(me);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return Oe(me,Dt)}}function Oe(me,Dt){(Dt==null||Dt>me.length)&&(Dt=me.length);for(var fe=0,Ae=new Array(Dt);fe<Dt;fe++)Ae[fe]=me[fe];return Ae}function re(me,Dt){var fe=me==null?null:typeof Symbol!="undefined"&&me[Symbol.iterator]||me["@@iterator"];if(fe!=null){var Ae=[],be=!0,De=!1,or,Fr;try{for(fe=fe.call(me);!(be=(or=fe.next()).done)&&(Ae.push(or.value),!(Dt&&Ae.length===Dt));be=!0);}catch(Jr){De=!0,Fr=Jr}finally{try{!be&&fe.return!=null&&fe.return()}finally{if(De)throw Fr}}return Ae}}function _e(me){if(Array.isArray(me))return me}var Ge=function(){return 1},Ct=function(Dt,fe,Ae,be){return Nr(Dt,fe,Ae||Ge,be||function(De){return Dt.outEdges(De)})},Nr=function(Dt,fe,Ae,be){var De=new Map,or=new tr,Fr,Jr,Pn=function(ba){var Ca=ba.v!==Fr?ba.v:ba.w,li=De.get(Ca),ta=Ae(ba),fi=Jr.distance+ta;if(ta<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ba+" Weight: "+ta);fi<li.distance&&(li.distance=fi,li.predecessor=Fr,or.decrease(Ca,fi))};for(Dt.nodes().forEach(function(Zn){var ba=Zn===fe?0:Number.POSITIVE_INFINITY;De.set(Zn,{distance:ba}),or.add(Zn,ba)});or.size()>0&&(Fr=or.removeMin(),Jr=De.get(Fr),!(Jr&&Jr.distance===Number.POSITIVE_INFINITY));)be(Fr).forEach(Pn);var Bn={};return Array.from(De.entries()).forEach(function(Zn){var ba=Ie(Zn,2),Ca=ba[0],li=ba[1];return Bn[String(Ca)]=li,Bn}),Bn},Or=Ct,Ur=function(Dt,fe,Ae){var be={};return Dt.nodes().forEach(function(De){return be[String(De)]=Or(Dt,De,fe,Ae),be}),be},Sr=Ur,gn=function(Dt){var fe=0,Ae=[],be=new Map,De=[];function or(Fr){var Jr,Pn={onStack:!0,lowlink:fe,index:fe};if(be.set(Fr,Pn),fe+=1,Ae.push(Fr),(Jr=Dt.successors(Fr))===null||Jr===void 0||Jr.forEach(function(Ca){var li;if(be.has(Ca)){if(!((li=be.get(Ca))===null||li===void 0)&&li.onStack){var fi=be.get(Ca);Pn.lowlink=Math.min(Pn.lowlink,fi.index)}}else{or(Ca);var ta=be.get(Ca);Pn.lowlink=Math.min(Pn.lowlink,ta.lowlink)}}),Pn.lowlink===Pn.index){var Bn=[],Zn;do{Zn=Ae.pop();var ba=be.get(Zn);ba.onStack=!1,Bn.push(Zn)}while(Fr!==Zn);De.push(Bn)}}return Dt.nodes().forEach(function(Fr){be.has(Fr)||or(Fr)}),De},Rr=gn,ln=function(Dt){return Rr(Dt).filter(function(fe){return fe.length>1||fe.length===1&&Dt.hasEdge(fe[0],fe[0])})},Nn=ln;function Ln(me){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt},Ln(me)}function fn(me,Dt){for(var fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(me,Ae.key,Ae)}}function qe(me,Dt,fe){return Dt&&fn(me.prototype,Dt),fe&&fn(me,fe),Object.defineProperty(me,"prototype",{writable:!1}),me}function rr(me,Dt){if(!(me instanceof Dt))throw new TypeError("Cannot call a class as a function")}function vr(me,Dt){if(typeof Dt!="function"&&Dt!==null)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(Dt&&Dt.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),Object.defineProperty(me,"prototype",{writable:!1}),Dt&&dn(me,Dt)}function Pr(me){var Dt=Hn();return function(){var Ae=Wn(me),be;if(Dt){var De=Wn(this).constructor;be=Reflect.construct(Ae,arguments,De)}else be=Ae.apply(this,arguments);return en(this,be)}}function en(me,Dt){if(Dt&&(Ln(Dt)==="object"||typeof Dt=="function"))return Dt;if(Dt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pn(me)}function pn(me){if(me===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}function rn(me){var Dt=typeof Map=="function"?new Map:void 0;return rn=function(Ae){if(Ae===null||!oa(Ae))return Ae;if(typeof Ae!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Dt!="undefined"){if(Dt.has(Ae))return Dt.get(Ae);Dt.set(Ae,be)}function be(){return jn(Ae,arguments,Wn(this).constructor)}return be.prototype=Object.create(Ae.prototype,{constructor:{value:be,enumerable:!1,writable:!0,configurable:!0}}),dn(be,Ae)},rn(me)}function jn(me,Dt,fe){return Hn()?jn=Reflect.construct:jn=function(be,De,or){var Fr=[null];Fr.push.apply(Fr,De);var Jr=Function.bind.apply(be,Fr),Pn=new Jr;return or&&dn(Pn,or.prototype),Pn},jn.apply(null,arguments)}function Hn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(me){return!1}}function oa(me){return Function.toString.call(me).indexOf("[native code]")!==-1}function dn(me,Dt){return dn=Object.setPrototypeOf||function(Ae,be){return Ae.__proto__=be,Ae},dn(me,Dt)}function Wn(me){return Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},Wn(me)}var Dn=function(me){vr(fe,me);var Dt=Pr(fe);function fe(){return rr(this,fe),Dt.apply(this,arguments)}return qe(fe)}(rn(Error));function Cn(me){var Dt=new Set,fe=new Set,Ae=[];function be(De){if(fe.has(De))throw new Dn;if(!Dt.has(De)){var or;fe.add(De),Dt.add(De),(or=me.predecessors(De))===null||or===void 0||or.forEach(be),fe.delete(De),Ae.push(De)}}if(me.sinks().forEach(be),Dt.size!==me.nodeCount())throw new Dn;return Ae}var la=Cn,K=function(Dt){try{la(Dt)}catch(fe){if(fe instanceof Dn)return!1;throw fe}return!0},ft=K,rt=function(Dt,fe){return Wt(Dt,fe,"post")},O=rt,b=function(Dt,fe){return Wt(Dt,fe,"pre")},w=b,X=function(){return 1};function xt(me,Dt,fe){return At(me,Dt||X,fe||function(Ae){return me.outEdges(Ae)})}function At(me,Dt,fe){var Ae={},be=me.nodes();return be.forEach(function(De){var or=String(De);Ae[or]={},Ae[or][or]={distance:0},be.forEach(function(Fr){De!==Fr&&(Ae[or][String(Fr)]={distance:Number.POSITIVE_INFINITY})}),fe(De).forEach(function(Fr){var Jr=Fr.v===De?Fr.w:Fr.v,Pn=Dt(Fr);Ae[or][String(Jr)]={distance:Pn,predecessor:De}})}),be.forEach(function(De){var or=String(De),Fr=Ae[or];be.forEach(function(Jr){var Pn=String(Jr),Bn=Ae[Pn];be.forEach(function(Zn){var ba=String(Zn),Ca=Bn[or],li=Fr[ba],ta=Bn[ba],fi=Ca.distance+li.distance;fi<ta.distance&&(ta.distance=fi,ta.predecessor=li.predecessor)})})}),Ae}var wt=xt,Pt=function(Dt,fe){for(var Ae=Dt.nodes(),be=0;be<Ae.length;be++){var De=Ae[be];if(fe.hasNode(De))return!0}return!1},Me=function(Dt,fe){for(var Ae=Dt.edges(),be=0;be<Ae.length;be++){var De=Ae[be];if(fe.hasEdge(De.v,De.w,De.name))return!0}return!1},ve=function(Dt,fe){var Ae=Dt.nodes(),be=Ae.filter(function(De){return fe.hasNode(De)});return be},He=function(Dt,fe){var Ae=Dt.edges(),be=Ae.filter(function(De){return fe.hasEdge(De.v,De.w,De.name)});return be},br=function(Dt,fe){return Dt.isCompound()===fe.isCompound()&&Dt.isDirected()===fe.isDirected()&&Dt.isMultigraph()===fe.isMultigraph()},ar=function(Dt,fe){var Ae=ve(Dt,fe);return Ae.length===Dt.nodes().length},mr=function(Dt,fe){var Ae=He(Dt,fe);return Ae.length===Dt.edges().length},Mn=function(Dt,fe){return br(Dt,fe)&&Dt.nodeCount()===fe.nodeCount()&&ar(Dt,fe)&&Dt.edgeCount()===fe.edgeCount()&&mr(Dt,fe)},Xe=function(Dt,fe){return ar(Dt,fe)&&mr(Dt,fe)};function hr(me,Dt){return Ta(me)||xa(me,Dt)||on(me,Dt)||Er()}function Er(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(me,Dt){if(me){if(typeof me=="string")return Wr(me,Dt);var fe=Object.prototype.toString.call(me).slice(8,-1);if(fe==="Object"&&me.constructor&&(fe=me.constructor.name),fe==="Map"||fe==="Set")return Array.from(me);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return Wr(me,Dt)}}function Wr(me,Dt){(Dt==null||Dt>me.length)&&(Dt=me.length);for(var fe=0,Ae=new Array(Dt);fe<Dt;fe++)Ae[fe]=me[fe];return Ae}function xa(me,Dt){var fe=me==null?null:typeof Symbol!="undefined"&&me[Symbol.iterator]||me["@@iterator"];if(fe!=null){var Ae=[],be=!0,De=!1,or,Fr;try{for(fe=fe.call(me);!(be=(or=fe.next()).done)&&(Ae.push(or.value),!(Dt&&Ae.length===Dt));be=!0);}catch(Jr){De=!0,Fr=Jr}finally{try{!be&&fe.return!=null&&fe.return()}finally{if(De)throw Fr}}return Ae}}function Ta(me){if(Array.isArray(me))return me}function Rn(me){return me instanceof q}function Jn(me){if(me.isMultigraph())return!1;for(var Dt=me.edges(),fe=new Map,Ae=0;Ae<Dt.length;Ae++){var be=Dt[Ae];if(be.v===be.w)return!1;var De=[be.v,be.w].sort(),or=hr(De,2),Fr=or[0],Jr=or[1],Pn="".concat(Fr,"-").concat(Jr);if(fe.has(Pn))return!1;fe.set(Pn,!0)}return!0}function Ga(me){return me.nodes().length===0}function Aa(me){for(var Dt=me.edges(),fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];if(Ae.v===Ae.w)return!0}return!1}var an=function(Dt,fe){if(!Jn(Dt)||!Jn(fe)||!ar(Dt,fe)||Me(Dt,fe))return!1;var Ae=Dt.nodeCount();return Dt.edgeCount()+fe.edgeCount()===Ae*(Ae-1)/2},Vn=function(Dt){if(!Jn(Dt))return null;for(var fe=Dt.nodeCount(),Ae=new q({compound:Dt.isCompound(),directed:Dt.isDirected(),multigraph:Dt.isMultigraph()}),be=Dt.nodes(),De=0;De<fe;De++){var or=be[De];Ae.setNode(or,Dt.node(or));for(var Fr=De+1;Fr<fe;Fr++){var Jr=be[Fr];Dt.hasEdge(or,Jr)||Ae.setEdge(or,Jr)}}return Ae}},981746:function(yr){(function(z,B){yr.exports=B()})(typeof self!="undefined"?self:this,function(){return function(R){var z={};function B(Y){if(z[Y])return z[Y].exports;var k=z[Y]={i:Y,l:!1,exports:{}};return R[Y].call(k.exports,k,k.exports,B),k.l=!0,k.exports}return B.m=R,B.c=z,B.d=function(Y,k,P){B.o(Y,k)||Object.defineProperty(Y,k,{configurable:!1,enumerable:!0,get:P})},B.n=function(Y){var k=Y&&Y.__esModule?function(){return Y.default}:function(){return Y};return B.d(k,"a",k),k},B.o=function(Y,k){return Object.prototype.hasOwnProperty.call(Y,k)},B.p="",B(B.s=36)}([function(R,z,B){"use strict";var Y=B(3);z.a=function(k){return Array.isArray?Array.isArray(k):Object(Y.a)(k,"Array")}},function(R,z,B){"use strict";var Y=function(k){return k!==null&&typeof k!="function"&&isFinite(k.length)};z.a=Y},function(R,z,B){"use strict";var Y=B(3);z.a=function(k){return Object(Y.a)(k,"Function")}},function(R,z,B){"use strict";var Y={}.toString,k=function(P,N){return Y.call(P)==="[object "+N+"]"};z.a=k},function(R,z,B){"use strict";var Y=B(3);z.a=function(k){return Object(Y.a)(k,"String")}},function(R,z,B){"use strict";var Y=B(3),k=function(P){return Object(Y.a)(P,"Number")};z.a=k},function(R,z,B){var Y=B(38),k=Y.mix;function P(N,D,E,y){return y===void 0&&(y="height"),E==="center"?(N[y]+D[y])/2:N.height}R.exports={assign:k,getHeight:P}},function(R,z,B){"use strict";var Y=function(k){return k==null};z.a=Y},function(R,z,B){"use strict";var Y=B(0),k=B(12);function P(N,D){if(N){var E;if(Object(Y.a)(N))for(var y=0,M=N.length;y<M&&(E=D(N[y],y),E!==!1);y++);else if(Object(k.a)(N)){for(var S in N)if(N.hasOwnProperty(S)&&(E=D(N[S],S),E===!1))break}}}z.a=P},function(R,z,B){"use strict";var Y=B(7);z.a=function(k){return Object(Y.a)(k)?"":k.toString()}},function(R,z,B){"use strict";var Y=B(14),k=B(3),P=function(N){if(!Object(Y.a)(N)||!Object(k.a)(N,"Object"))return!1;if(Object.getPrototypeOf(N)===null)return!0;for(var D=N;Object.getPrototypeOf(D)!==null;)D=Object.getPrototypeOf(D);return Object.getPrototypeOf(N)===D};z.a=P},function(R,z,B){var Y=B(18),k=function(){function P(D,E){E===void 0&&(E={});var y=this;y.options=E,y.rootNode=Y(D,E)}var N=P.prototype;return N.execute=function(){throw new Error("please override this method")},P}();R.exports=k},function(R,z,B){"use strict";z.a=function(Y){var k=typeof Y;return Y!==null&&k==="object"||k==="function"}},function(R,z,B){"use strict";var Y=B(1),k=function(P,N){return Object(Y.a)(P)?P.indexOf(N)>-1:!1};z.a=k},function(R,z,B){"use strict";var Y=function(k){return typeof k=="object"&&k!==null};z.a=Y},function(R,z,B){"use strict";var Y=B(8),k=B(2),P=Object.values?function(N){return Object.values(N)}:function(N){var D=[];return Object(Y.a)(N,function(E,y){Object(k.a)(N)&&y==="prototype"||D.push(E)}),D};z.a=P},function(R,z,B){"use strict";z.a=k;function Y(P,N){for(var D in N)N.hasOwnProperty(D)&&D!=="constructor"&&N[D]!==void 0&&(P[D]=N[D])}function k(P,N,D,E){return N&&Y(P,N),D&&Y(P,D),E&&Y(P,E),P}},function(R,z,B){var Y=B(35),k=["LR","RL","TB","BT","H","V"],P=["LR","RL","H"],N=function(y){return P.indexOf(y)>-1},D=k[0];R.exports=function(E,y,M){var S=y.direction||D;if(y.isHorizontal=N(S),S&&k.indexOf(S)===-1)throw new TypeError("Invalid direction: "+S);if(S===k[0])M(E,y);else if(S===k[1])M(E,y),E.right2left();else if(S===k[2])M(E,y);else if(S===k[3])M(E,y),E.bottom2top();else if(S===k[4]||S===k[5]){var m=Y(E,y),I=m.left,A=m.right;M(I,y),M(A,y),y.isHorizontal?I.right2left():I.bottom2top(),A.translate(I.x-A.x,I.y-A.y),E.x=I.x,E.y=A.y;var L=E.getBoundingBox();y.isHorizontal?L.top<0&&E.translate(0,-L.top):L.left<0&&E.translate(-L.left,0)}var U=y.fixedRoot;return U===void 0&&(U=!0),U&&E.translate(-(E.x+E.width/2+E.hgap),-(E.y+E.height/2+E.vgap)),E}},function(R,z,B){var Y=B(6),k=18,P=k*2,N=k,D={getId:function(S){return S.id||S.name},getPreH:function(S){return S.preH||0},getPreV:function(S){return S.preV||0},getHGap:function(S){return S.hgap||N},getVGap:function(S){return S.vgap||N},getChildren:function(S){return S.children},getHeight:function(S){return S.height||P},getWidth:function(S){var m=S.label||" ";return S.width||m.split("").length*k}};function E(M,S){var m=this;if(m.vgap=m.hgap=0,M instanceof E)return M;m.data=M;var I=S.getHGap(M),A=S.getVGap(M);return m.preH=S.getPreH(M),m.preV=S.getPreV(M),m.width=S.getWidth(M),m.height=S.getHeight(M),m.width+=m.preH,m.height+=m.preV,m.id=S.getId(M),m.x=m.y=0,m.depth=0,m.children||(m.children=[]),m.addGap(I,A),m}Y.assign(E.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(S,m){var I=this;I.hgap+=S,I.vgap+=m,I.width+=2*S,I.height+=2*m},eachNode:function(S){for(var m=this,I=[m],A;A=I.shift();)S(A),I=A.children.concat(I)},DFTraverse:function(S){this.eachNode(S)},BFTraverse:function(S){for(var m=this,I=[m],A;A=I.shift();)S(A),I=I.concat(A.children)},getBoundingBox:function(){var S={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(m){S.left=Math.min(S.left,m.x),S.top=Math.min(S.top,m.y),S.width=Math.max(S.width,m.x+m.width),S.height=Math.max(S.height,m.y+m.height)}),S},translate:function(S,m){S===void 0&&(S=0),m===void 0&&(m=0),this.eachNode(function(I){I.x+=S,I.y+=m,I.x+=I.preH,I.y+=I.preV})},right2left:function(){var S=this,m=S.getBoundingBox();S.eachNode(function(I){I.x=I.x-(I.x-m.left)*2-I.width}),S.translate(m.width,0)},bottom2top:function(){var S=this,m=S.getBoundingBox();S.eachNode(function(I){I.y=I.y-(I.y-m.top)*2-I.height}),S.translate(0,m.height)}});function y(M,S,m){S===void 0&&(S={}),S=Y.assign({},D,S);var I=new E(M,S),A=[I],L;if(!m&&!M.collapsed){for(;L=A.shift();)if(!L.data.collapsed){var U=S.getChildren(L.data),V=U?U.length:0;if(L.children=new Array(V),U&&V)for(var x=0;x<V;x++){var d=new E(U[x],S);L.children[x]=d,A.push(d),d.parent=L,d.depth=L.depth+1}}}return I}R.exports=y},function(R,z,B){"use strict";var Y=B(1),k=function(P,N){if(!Object(Y.a)(P))return P;for(var D=[],E=0;E<P.length;E++){var y=P[E];N(y,E)&&D.push(y)}return D};z.a=k},function(R,z,B){"use strict";var Y=B(7),k=B(21);function P(N,D){var E=Object(k.a)(D),y=E.length;if(Object(Y.a)(N))return!y;for(var M=0;M<y;M+=1){var S=E[M];if(D[S]!==N[S]||!(S in N))return!1}return!0}z.a=P},function(R,z,B){"use strict";var Y=B(8),k=B(2),P=Object.keys?function(N){return Object.keys(N)}:function(N){var D=[];return Object(Y.a)(N,function(E,y){Object(k.a)(N)&&y==="prototype"||D.push(y)}),D};z.a=P},function(R,z,B){"use strict";var Y=B(0);z.a=function(k){if(Object(Y.a)(k))return k.reduce(function(P,N){return Math.max(P,N)},k[0])}},function(R,z,B){"use strict";var Y=B(0);z.a=function(k){if(Object(Y.a)(k))return k.reduce(function(P,N){return Math.min(P,N)},k[0])}},function(R,z,B){"use strict";var Y=B(1),k=Array.prototype.splice,P=function(D,E){if(!Object(Y.a)(D))return[];for(var y=D?E.length:0,M=y-1;y--;){var S=void 0,m=E[y];(y===M||m!==S)&&(S=m,k.call(D,m,1))}return D};z.a=P},function(R,z,B){"use strict";var Y=B(8),k=B(0),P=B(10),N=function(D,E,y){if(!Object(k.a)(D)&&!Object(P.a)(D))return D;var M=y;return Object(Y.a)(D,function(S,m){M=E(M,S,m)}),M};z.a=N},function(R,z,B){"use strict";z.a=Y;function Y(k,P){P===void 0&&(P=new Map);var N=[];if(Array.isArray(k))for(var D=0,E=k.length;D<E;D++){var y=k[D];P.has(y)||(N.push(y),P.set(y,!0))}return N}},function(R,z,B){"use strict";z.a=N;var Y=B(0),k=B(2),P=B(28);function N(D,E){if(!E)return{0:D};if(!Object(k.a)(E)){var y=Object(Y.a)(E)?E:E.replace(/\s+/g,"").split("*");E=function(M){for(var S="_",m=0,I=y.length;m<I;m++)S+=M[y[m]]&&M[y[m]].toString();return S}}return Object(P.a)(D,E)}},function(R,z,B){"use strict";var Y=B(0),k=B(2),P=Object.prototype.hasOwnProperty;function N(D,E){if(!E||!Object(Y.a)(D))return{};for(var y={},M=Object(k.a)(E)?E:function(A){return A[E]},S,m=0;m<D.length;m++){var I=D[m];S=M(I),P.call(y,S)?y[S].push(I):y[S]=[I]}return y}z.a=N},function(R,z,B){"use strict";z.a=function(Y,k){return Y.hasOwnProperty(k)}},function(R,z,B){"use strict";var Y={}.toString,k=function(P){return Y.call(P).replace(/^\[object /,"").replace(/]$/,"")};z.a=k},function(R,z,B){"use strict";var Y=Object.prototype,k=function(P){var N=P&&P.constructor,D=typeof N=="function"&&N.prototype||Y;return P===D};z.a=k},function(R,z,B){"use strict";var Y=B(2);z.a=function(k,P){if(!Object(Y.a)(k))throw new TypeError("Expected a function");var N=function(){for(var D=[],E=0;E<arguments.length;E++)D[E]=arguments[E];var y=P?P.apply(this,D):D[0],M=N.cache;if(M.has(y))return M.get(y);var S=k.apply(this,D);return M.set(y,S),S};return N.cache=new Map,N}},function(R,z,B){"use strict";var Y=B(14),k=B(1),P=B(4),N=function(D,E){if(D===E)return!0;if(!D||!E||Object(P.a)(D)||Object(P.a)(E))return!1;if(Object(k.a)(D)||Object(k.a)(E)){if(D.length!==E.length)return!1;for(var y=!0,M=0;M<D.length&&(y=N(D[M],E[M]),!!y);M++);return y}if(Object(Y.a)(D)||Object(Y.a)(E)){var S=Object.keys(D),m=Object.keys(E);if(S.length!==m.length)return!1;for(var y=!0,M=0;M<S.length&&(y=N(D[S[M]],E[S[M]]),!!y);M++);return y}return!1};z.a=N},function(R,z,B){"use strict";var Y=B(116),k=B(15),P=B(32),N=B(4),D;z.a=Object(P.a)(function(E,y){y===void 0&&(y={});var M=y.fontSize,S=y.fontFamily,m=y.fontWeight,I=y.fontStyle,A=y.fontVariant;return D||(D=document.createElement("canvas").getContext("2d")),D.font=[I,A,m,M+"px",S].join(" "),D.measureText(Object(N.a)(E)?E:"").width},function(E,y){return y===void 0&&(y={}),Object(Y.a)([E],Object(k.a)(y)).join("")})},function(R,z,B){var Y=B(18);R.exports=function(k,P){for(var N=Y(k.data,P,!0),D=Y(k.data,P,!0),E=k.children.length,y=Math.round(E/2),M=P.getSide||function(A,L){return L<y?"right":"left"},S=0;S<E;S++){var m=k.children[S],I=M(m,S);I==="right"?D.children.push(m):N.children.push(m)}return N.eachNode(function(A){A.isRoot()||(A.side="left")}),D.eachNode(function(A){A.isRoot()||(A.side="right")}),{left:N,right:D}}},function(R,z,B){var Y={compactBox:B(37),dendrogram:B(120),indented:B(122),mindmap:B(124)};R.exports=Y},function(R,z,B){function Y(m,I){m.prototype=Object.create(I.prototype),m.prototype.constructor=m,k(m,I)}function k(m,I){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(L,U){return L.__proto__=U,L},k(m,I)}var P=B(11),N=B(119),D=B(17),E=B(6),y=function(m){Y(I,m);function I(){return m.apply(this,arguments)||this}var A=I.prototype;return A.execute=function(){var U=this;return D(U.rootNode,U.options,N)},I}(P),M={};function S(m,I){return I=E.assign({},M,I),new y(m,I).execute()}R.exports=S},function(R,z,B){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var Y=B(13);B.d(z,"contains",function(){return Y.a}),B.d(z,"includes",function(){return Y.a});var k=B(39);B.d(z,"difference",function(){return k.a});var P=B(40);B.d(z,"find",function(){return P.a});var N=B(41);B.d(z,"findIndex",function(){return N.a});var D=B(42);B.d(z,"firstValue",function(){return D.a});var E=B(43);B.d(z,"flatten",function(){return E.a});var y=B(44);B.d(z,"flattenDeep",function(){return y.a});var M=B(45);B.d(z,"getRange",function(){return M.a});var S=B(46);B.d(z,"pull",function(){return S.a});var m=B(24);B.d(z,"pullAt",function(){return m.a});var I=B(25);B.d(z,"reduce",function(){return I.a});var A=B(47);B.d(z,"remove",function(){return A.a});var L=B(48);B.d(z,"sortBy",function(){return L.a});var U=B(49);B.d(z,"union",function(){return U.a});var V=B(26);B.d(z,"uniq",function(){return V.a});var x=B(50);B.d(z,"valuesOfKey",function(){return x.a});var d=B(51);B.d(z,"head",function(){return d.a});var at=B(52);B.d(z,"last",function(){return at.a});var W=B(53);B.d(z,"startsWith",function(){return W.a});var j=B(54);B.d(z,"endsWith",function(){return j.a});var $=B(19);B.d(z,"filter",function(){return $.a});var q=B(55);B.d(z,"every",function(){return q.a});var et=B(56);B.d(z,"some",function(){return et.a});var Q=B(57);B.d(z,"group",function(){return Q.a});var it=B(28);B.d(z,"groupBy",function(){return it.a});var ht=B(27);B.d(z,"groupToMap",function(){return ht.a});var dt=B(58);B.d(z,"getWrapBehavior",function(){return dt.a});var Ot=B(59);B.d(z,"wrapBehavior",function(){return Ot.a});var It=B(60);B.d(z,"number2color",function(){return It.a});var Kt=B(61);B.d(z,"parseRadius",function(){return Kt.a});var Ft=B(62);B.d(z,"clamp",function(){return Ft.a});var Nt=B(63);B.d(z,"fixedBase",function(){return Nt.a});var st=B(64);B.d(z,"isDecimal",function(){return st.a});var yt=B(65);B.d(z,"isEven",function(){return yt.a});var kt=B(66);B.d(z,"isInteger",function(){return kt.a});var ee=B(67);B.d(z,"isNegative",function(){return ee.a});var $t=B(68);B.d(z,"isNumberEqual",function(){return $t.a});var ge=B(69);B.d(z,"isOdd",function(){return ge.a});var Pe=B(70);B.d(z,"isPositive",function(){return Pe.a});var tr=B(22);B.d(z,"max",function(){return tr.a});var Jt=B(71);B.d(z,"maxBy",function(){return Jt.a});var ae=B(23);B.d(z,"min",function(){return ae.a});var Se=B(72);B.d(z,"minBy",function(){return Se.a});var xe=B(73);B.d(z,"mod",function(){return xe.a});var we=B(74);B.d(z,"toDegree",function(){return we.a});var zt=B(75);B.d(z,"toInteger",function(){return zt.a});var Wt=B(76);B.d(z,"toRadian",function(){return Wt.a});var Ie=B(77);B.d(z,"forIn",function(){return Ie.a});var Yt=B(29);B.d(z,"has",function(){return Yt.a});var ie=B(78);B.d(z,"hasKey",function(){return ie.a});var Oe=B(79);B.d(z,"hasValue",function(){return Oe.a});var re=B(21);B.d(z,"keys",function(){return re.a});var _e=B(20);B.d(z,"isMatch",function(){return _e.a});var Ge=B(15);B.d(z,"values",function(){return Ge.a});var Ct=B(80);B.d(z,"lowerCase",function(){return Ct.a});var Nr=B(81);B.d(z,"lowerFirst",function(){return Nr.a});var Or=B(82);B.d(z,"substitute",function(){return Or.a});var Ur=B(83);B.d(z,"upperCase",function(){return Ur.a});var Sr=B(84);B.d(z,"upperFirst",function(){return Sr.a});var gn=B(30);B.d(z,"getType",function(){return gn.a});var Rr=B(85);B.d(z,"isArguments",function(){return Rr.a});var ln=B(0);B.d(z,"isArray",function(){return ln.a});var Nn=B(1);B.d(z,"isArrayLike",function(){return Nn.a});var Ln=B(86);B.d(z,"isBoolean",function(){return Ln.a});var fn=B(87);B.d(z,"isDate",function(){return fn.a});var qe=B(88);B.d(z,"isError",function(){return qe.a});var rr=B(2);B.d(z,"isFunction",function(){return rr.a});var vr=B(89);B.d(z,"isFinite",function(){return vr.a});var Pr=B(7);B.d(z,"isNil",function(){return Pr.a});var en=B(90);B.d(z,"isNull",function(){return en.a});var pn=B(5);B.d(z,"isNumber",function(){return pn.a});var rn=B(12);B.d(z,"isObject",function(){return rn.a});var jn=B(14);B.d(z,"isObjectLike",function(){return jn.a});var Hn=B(10);B.d(z,"isPlainObject",function(){return Hn.a});var oa=B(31);B.d(z,"isPrototype",function(){return oa.a});var dn=B(91);B.d(z,"isRegExp",function(){return dn.a});var Wn=B(4);B.d(z,"isString",function(){return Wn.a});var Dn=B(3);B.d(z,"isType",function(){return Dn.a});var Cn=B(92);B.d(z,"isUndefined",function(){return Cn.a});var la=B(93);B.d(z,"isElement",function(){return la.a});var K=B(94);B.d(z,"requestAnimationFrame",function(){return K.a});var ft=B(95);B.d(z,"clearAnimationFrame",function(){return ft.a});var rt=B(96);B.d(z,"augment",function(){return rt.a});var O=B(97);B.d(z,"clone",function(){return O.a});var b=B(98);B.d(z,"debounce",function(){return b.a});var w=B(32);B.d(z,"memoize",function(){return w.a});var X=B(99);B.d(z,"deepMix",function(){return X.a});var xt=B(8);B.d(z,"each",function(){return xt.a});var At=B(100);B.d(z,"extend",function(){return At.a});var wt=B(101);B.d(z,"indexOf",function(){return wt.a});var Pt=B(102);B.d(z,"isEmpty",function(){return Pt.a});var Me=B(33);B.d(z,"isEqual",function(){return Me.a});var ve=B(103);B.d(z,"isEqualWith",function(){return ve.a});var He=B(104);B.d(z,"map",function(){return He.a});var br=B(105);B.d(z,"mapValues",function(){return br.a});var ar=B(16);B.d(z,"mix",function(){return ar.a}),B.d(z,"assign",function(){return ar.a});var mr=B(106);B.d(z,"get",function(){return mr.a});var Mn=B(107);B.d(z,"set",function(){return Mn.a});var Xe=B(108);B.d(z,"pick",function(){return Xe.a});var hr=B(109);B.d(z,"omit",function(){return hr.a});var Er=B(110);B.d(z,"throttle",function(){return Er.a});var on=B(111);B.d(z,"toArray",function(){return on.a});var Wr=B(9);B.d(z,"toString",function(){return Wr.a});var xa=B(112);B.d(z,"uniqueId",function(){return xa.a});var Ta=B(113);B.d(z,"noop",function(){return Ta.a});var Rn=B(114);B.d(z,"identity",function(){return Rn.a});var Jn=B(115);B.d(z,"size",function(){return Jn.a});var Ga=B(34);B.d(z,"measureTextWidth",function(){return Ga.a});var Aa=B(117);B.d(z,"getEllipsisText",function(){return Aa.a});var an=B(118);B.d(z,"Cache",function(){return an.a})},function(R,z,B){"use strict";var Y=B(19),k=B(13),P=function(N,D){return D===void 0&&(D=[]),Object(Y.a)(N,function(E){return!Object(k.a)(D,E)})};z.a=P},function(R,z,B){"use strict";var Y=B(2),k=B(20),P=B(0),N=B(10);function D(E,y){if(!Object(P.a)(E))return null;var M;if(Object(Y.a)(y)&&(M=y),Object(N.a)(y)&&(M=function(m){return Object(k.a)(m,y)}),M){for(var S=0;S<E.length;S+=1)if(M(E[S]))return E[S]}return null}z.a=D},function(R,z,B){"use strict";function Y(k,P,N){N===void 0&&(N=0);for(var D=N;D<k.length;D++)if(P(k[D],D))return D;return-1}z.a=Y},function(R,z,B){"use strict";var Y=B(7),k=B(0),P=function(N,D){for(var E=null,y=0;y<N.length;y++){var M=N[y],S=M[D];if(!Object(Y.a)(S)){Object(k.a)(S)?E=S[0]:E=S;break}}return E};z.a=P},function(R,z,B){"use strict";var Y=B(0),k=function(P){if(!Object(Y.a)(P))return[];for(var N=[],D=0;D<P.length;D++)N=N.concat(P[D]);return N};z.a=k},function(R,z,B){"use strict";var Y=B(0),k=function(P,N){if(N===void 0&&(N=[]),!Object(Y.a)(P))N.push(P);else for(var D=0;D<P.length;D+=1)k(P[D],N);return N};z.a=k},function(R,z,B){"use strict";var Y=B(0),k=B(22),P=B(23),N=function(D){var E=D.filter(function(I){return!isNaN(I)});if(!E.length)return{min:0,max:0};if(Object(Y.a)(D[0])){for(var y=[],M=0;M<D.length;M++)y=y.concat(D[M]);E=y}var S=Object(k.a)(E),m=Object(P.a)(E);return{min:m,max:S}};z.a=N},function(R,z,B){"use strict";var Y=Array.prototype,k=Y.splice,P=Y.indexOf,N=function(D){for(var E=[],y=1;y<arguments.length;y++)E[y-1]=arguments[y];for(var M=0;M<E.length;M++)for(var S=E[M],m=-1;(m=P.call(D,S))>-1;)k.call(D,m,1);return D};z.a=N},function(R,z,B){"use strict";var Y=B(1),k=B(24),P=function(N,D){var E=[];if(!Object(Y.a)(N))return E;for(var y=-1,M=[],S=N.length;++y<S;){var m=N[y];D(m,y,N)&&(E.push(m),M.push(y))}return Object(k.a)(N,M),E};z.a=P},function(R,z,B){"use strict";var Y=B(0),k=B(4),P=B(2);function N(D,E){var y;if(Object(P.a)(E))y=function(S,m){return E(S)-E(m)};else{var M=[];Object(k.a)(E)?M.push(E):Object(Y.a)(E)&&(M=E),y=function(S,m){for(var I=0;I<M.length;I+=1){var A=M[I];if(S[A]>m[A])return 1;if(S[A]<m[A])return-1}return 0}}return D.sort(y),D}z.a=N},function(R,z,B){"use strict";var Y=B(26),k=function(){for(var P=[],N=0;N<arguments.length;N++)P[N]=arguments[N];return Object(Y.a)([].concat.apply([],P))};z.a=k},function(R,z,B){"use strict";var Y=B(0),k=B(7);z.a=function(P,N){for(var D=[],E={},y=0;y<P.length;y++){var M=P[y],S=M[N];if(!Object(k.a)(S)){Object(Y.a)(S)||(S=[S]);for(var m=0;m<S.length;m++){var I=S[m];E[I]||(D.push(I),E[I]=!0)}}}return D}},function(R,z,B){"use strict";z.a=k;var Y=B(1);function k(P){if(Object(Y.a)(P))return P[0]}},function(R,z,B){"use strict";z.a=k;var Y=B(1);function k(P){if(Object(Y.a)(P)){var N=P;return N[N.length-1]}}},function(R,z,B){"use strict";var Y=B(0),k=B(4);function P(N,D){return Object(Y.a)(N)||Object(k.a)(N)?N[0]===D:!1}z.a=P},function(R,z,B){"use strict";var Y=B(0),k=B(4);function P(N,D){return Object(Y.a)(N)||Object(k.a)(N)?N[N.length-1]===D:!1}z.a=P},function(R,z,B){"use strict";var Y=function(k,P){for(var N=0;N<k.length;N++)if(!P(k[N],N))return!1;return!0};z.a=Y},function(R,z,B){"use strict";var Y=function(k,P){for(var N=0;N<k.length;N++)if(P(k[N],N))return!0;return!1};z.a=Y},function(R,z,B){"use strict";var Y=B(27);z.a=function(k,P){if(!P)return[k];var N=Object(Y.a)(k,P),D=[];for(var E in N)D.push(N[E]);return D}},function(R,z,B){"use strict";function Y(k,P){return k["_wrap_"+P]}z.a=Y},function(R,z,B){"use strict";function Y(k,P){if(k["_wrap_"+P])return k["_wrap_"+P];var N=function(D){k[P](D)};return k["_wrap_"+P]=N,N}z.a=Y},function(R,z,B){"use strict";var Y={};function k(P){var N=Y[P];if(!N){for(var D=P.toString(16),E=D.length;E<6;E++)D="0"+D;N="#"+D,Y[P]=N}return N}z.a=k},function(R,z,B){"use strict";var Y=B(0);function k(P){var N=0,D=0,E=0,y=0;return Object(Y.a)(P)?P.length===1?N=D=E=y=P[0]:P.length===2?(N=E=P[0],D=y=P[1]):P.length===3?(N=P[0],D=y=P[1],E=P[2]):(N=P[0],D=P[1],E=P[2],y=P[3]):N=D=E=y=P,{r1:N,r2:D,r3:E,r4:y}}z.a=k},function(R,z,B){"use strict";var Y=function(k,P,N){return k<P?P:k>N?N:k};z.a=Y},function(R,z,B){"use strict";var Y=function(k,P){var N=P.toString(),D=N.indexOf(".");if(D===-1)return Math.round(k);var E=N.substr(D+1).length;return E>20&&(E=20),parseFloat(k.toFixed(E))};z.a=Y},function(R,z,B){"use strict";var Y=B(5),k=function(P){return Object(Y.a)(P)&&P%1!==0};z.a=k},function(R,z,B){"use strict";var Y=B(5),k=function(P){return Object(Y.a)(P)&&P%2===0};z.a=k},function(R,z,B){"use strict";var Y=B(5),k=Number.isInteger?Number.isInteger:function(P){return Object(Y.a)(P)&&P%1===0};z.a=k},function(R,z,B){"use strict";var Y=B(5),k=function(P){return Object(Y.a)(P)&&P<0};z.a=k},function(R,z,B){"use strict";z.a=k;var Y=1e-5;function k(P,N,D){return D===void 0&&(D=Y),Math.abs(P-N)<D}},function(R,z,B){"use strict";var Y=B(5),k=function(P){return Object(Y.a)(P)&&P%2!==0};z.a=k},function(R,z,B){"use strict";var Y=B(5),k=function(P){return Object(Y.a)(P)&&P>0};z.a=k},function(R,z,B){"use strict";var Y=B(0),k=B(2);z.a=function(P,N){if(Object(Y.a)(P)){for(var D,E=-1/0,y=0;y<P.length;y++){var M=P[y],S=Object(k.a)(N)?N(M):M[N];S>E&&(D=M,E=S)}return D}}},function(R,z,B){"use strict";var Y=B(0),k=B(2);z.a=function(P,N){if(Object(Y.a)(P)){for(var D,E=1/0,y=0;y<P.length;y++){var M=P[y],S=Object(k.a)(N)?N(M):M[N];S<E&&(D=M,E=S)}return D}}},function(R,z,B){"use strict";var Y=function(k,P){return(k%P+P)%P};z.a=Y},function(R,z,B){"use strict";var Y=180/Math.PI,k=function(P){return Y*P};z.a=k},function(R,z,B){"use strict";z.a=parseInt},function(R,z,B){"use strict";var Y=Math.PI/180,k=function(P){return Y*P};z.a=k},function(R,z,B){"use strict";var Y=B(8);z.a=Y.a},function(R,z,B){"use strict";var Y=B(29);z.a=Y.a},function(R,z,B){"use strict";var Y=B(13),k=B(15);z.a=function(P,N){return Object(Y.a)(Object(k.a)(P),N)}},function(R,z,B){"use strict";var Y=B(9),k=function(P){return Object(Y.a)(P).toLowerCase()};z.a=k},function(R,z,B){"use strict";var Y=B(9),k=function(P){var N=Object(Y.a)(P);return N.charAt(0).toLowerCase()+N.substring(1)};z.a=k},function(R,z,B){"use strict";function Y(k,P){return!k||!P?k:k.replace(/\\?\{([^{}]+)\}/g,function(N,D){return N.charAt(0)==="\\"?N.slice(1):P[D]===void 0?"":P[D]})}z.a=Y},function(R,z,B){"use strict";var Y=B(9),k=function(P){return Object(Y.a)(P).toUpperCase()};z.a=k},function(R,z,B){"use strict";var Y=B(9),k=function(P){var N=Object(Y.a)(P);return N.charAt(0).toUpperCase()+N.substring(1)};z.a=k},function(R,z,B){"use strict";var Y=B(3),k=function(P){return Object(Y.a)(P,"Arguments")};z.a=k},function(R,z,B){"use strict";var Y=B(3),k=function(P){return Object(Y.a)(P,"Boolean")};z.a=k},function(R,z,B){"use strict";var Y=B(3),k=function(P){return Object(Y.a)(P,"Date")};z.a=k},function(R,z,B){"use strict";var Y=B(3),k=function(P){return Object(Y.a)(P,"Error")};z.a=k},function(R,z,B){"use strict";var Y=B(5);z.a=function(k){return Object(Y.a)(k)&&isFinite(k)}},function(R,z,B){"use strict";var Y=function(k){return k===null};z.a=Y},function(R,z,B){"use strict";var Y=B(3),k=function(P){return Object(Y.a)(P,"RegExp")};z.a=k},function(R,z,B){"use strict";var Y=function(k){return k===void 0};z.a=Y},function(R,z,B){"use strict";var Y=function(k){return k instanceof Element||k instanceof HTMLDocument};z.a=Y},function(R,z,B){"use strict";z.a=Y;function Y(k){var P=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(N){return setTimeout(N,16)};return P(k)}},function(R,z,B){"use strict";z.a=Y;function Y(k){var P=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;P(k)}},function(R,z,B){"use strict";var Y=B(16),k=B(2),P=function(){for(var N=[],D=0;D<arguments.length;D++)N[D]=arguments[D];for(var E=N[0],y=1;y<N.length;y++){var M=N[y];Object(k.a)(M)&&(M=M.prototype),Object(Y.a)(E.prototype,M)}};z.a=P},function(R,z,B){"use strict";var Y=B(0),k=function(P){if(typeof P!="object"||P===null)return P;var N;if(Object(Y.a)(P)){N=[];for(var D=0,E=P.length;D<E;D++)typeof P[D]=="object"&&P[D]!=null?N[D]=k(P[D]):N[D]=P[D]}else{N={};for(var y in P)typeof P[y]=="object"&&P[y]!=null?N[y]=k(P[y]):N[y]=P[y]}return N};z.a=k},function(R,z,B){"use strict";function Y(k,P,N){var D;return function(){var E=this,y=arguments,M=function(){D=null,N||k.apply(E,y)},S=N&&!D;clearTimeout(D),D=setTimeout(M,P),S&&k.apply(E,y)}}z.a=Y},function(R,z,B){"use strict";var Y=B(0),k=B(10),P=5;function N(E,y,M,S){M=M||0,S=S||P;for(var m in y)if(y.hasOwnProperty(m)){var I=y[m];I!==null&&Object(k.a)(I)?(Object(k.a)(E[m])||(E[m]={}),M<S?N(E[m],I,M+1,S):E[m]=y[m]):Object(Y.a)(I)?(E[m]=[],E[m]=E[m].concat(I)):I!==void 0&&(E[m]=I)}}var D=function(E){for(var y=[],M=1;M<arguments.length;M++)y[M-1]=arguments[M];for(var S=0;S<y.length;S+=1)N(E,y[S]);return E};z.a=D},function(R,z,B){"use strict";var Y=B(16),k=B(2),P=function(N,D,E,y){Object(k.a)(D)||(E=D,D=N,N=function(){});var M=Object.create?function(m,I){return Object.create(m,{constructor:{value:I}})}:function(m,I){function A(){}A.prototype=m;var L=new A;return L.constructor=I,L},S=M(D.prototype,N);return N.prototype=Object(Y.a)(S,N.prototype),N.superclass=M(D.prototype,D),Object(Y.a)(S,E),Object(Y.a)(N,y),N};z.a=P},function(R,z,B){"use strict";var Y=B(1),k=function(P,N){if(!Object(Y.a)(P))return-1;var D=Array.prototype.indexOf;if(D)return D.call(P,N);for(var E=-1,y=0;y<P.length;y++)if(P[y]===N){E=y;break}return E};z.a=k},function(R,z,B){"use strict";var Y=B(7),k=B(1),P=B(30),N=B(31),D=Object.prototype.hasOwnProperty;function E(y){if(Object(Y.a)(y))return!0;if(Object(k.a)(y))return!y.length;var M=Object(P.a)(y);if(M==="Map"||M==="Set")return!y.size;if(Object(N.a)(y))return!Object.keys(y).length;for(var S in y)if(D.call(y,S))return!1;return!0}z.a=E},function(R,z,B){"use strict";var Y=B(2),k=B(33);z.a=function(P,N,D){return Object(Y.a)(D)?!!D(P,N):Object(k.a)(P,N)}},function(R,z,B){"use strict";var Y=B(1),k=function(P,N){if(!Object(Y.a)(P))return P;for(var D=[],E=0;E<P.length;E++){var y=P[E];D.push(N(y,E))}return D};z.a=k},function(R,z,B){"use strict";var Y=B(7),k=B(12),P=function(N){return N};z.a=function(N,D){D===void 0&&(D=P);var E={};return Object(k.a)(N)&&!Object(Y.a)(N)&&Object.keys(N).forEach(function(y){E[y]=D(N[y],y)}),E}},function(R,z,B){"use strict";var Y=B(4);z.a=function(k,P,N){for(var D=0,E=Object(Y.a)(P)?P.split("."):P;k&&D<E.length;)k=k[E[D++]];return k===void 0||D<E.length?N:k}},function(R,z,B){"use strict";var Y=B(12),k=B(4),P=B(5);z.a=function(N,D,E){var y=N,M=Object(k.a)(D)?D.split("."):D;return M.forEach(function(S,m){m<M.length-1?(Object(Y.a)(y[S])||(y[S]=Object(P.a)(M[m+1])?[]:{}),y=y[S]):y[S]=E}),N}},function(R,z,B){"use strict";var Y=B(8),k=B(10),P=Object.prototype.hasOwnProperty;z.a=function(N,D){if(N===null||!Object(k.a)(N))return{};var E={};return Object(Y.a)(D,function(y){P.call(N,y)&&(E[y]=N[y])}),E}},function(R,z,B){"use strict";var Y=B(25);z.a=function(k,P){return Object(Y.a)(k,function(N,D,E){return P.includes(E)||(N[E]=D),N},{})}},function(R,z,B){"use strict";z.a=function(Y,k,P){var N,D,E,y,M=0;P||(P={});var S=function(){M=P.leading===!1?0:Date.now(),N=null,y=Y.apply(D,E),N||(D=E=null)},m=function(){var I=Date.now();!M&&P.leading===!1&&(M=I);var A=k-(I-M);return D=this,E=arguments,A<=0||A>k?(N&&(clearTimeout(N),N=null),M=I,y=Y.apply(D,E),N||(D=E=null)):!N&&P.trailing!==!1&&(N=setTimeout(S,A)),y};return m.cancel=function(){clearTimeout(N),M=0,N=D=E=null},m}},function(R,z,B){"use strict";var Y=B(1);z.a=function(k){return Object(Y.a)(k)?Array.prototype.slice.call(k):[]}},function(R,z,B){"use strict";var Y={};z.a=function(k){return k=k||"g",Y[k]?Y[k]+=1:Y[k]=1,k+Y[k]}},function(R,z,B){"use strict";z.a=function(){}},function(R,z,B){"use strict";z.a=function(Y){return Y}},function(R,z,B){"use strict";z.a=P;var Y=B(7),k=B(1);function P(N){return Object(Y.a)(N)?0:Object(k.a)(N)?N.length:Object.keys(N).length}},function(R,z,B){"use strict";z.a=W;var Y=function(Nt,st){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yt,kt){yt.__proto__=kt}||function(yt,kt){for(var ee in kt)Object.prototype.hasOwnProperty.call(kt,ee)&&(yt[ee]=kt[ee])},Y(Nt,st)};function k(Nt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Class extends value "+String(st)+" is not a constructor or null");Y(Nt,st);function yt(){this.constructor=Nt}Nt.prototype=st===null?Object.create(st):(yt.prototype=st.prototype,new yt)}var P=function(){return P=Object.assign||function(st){for(var yt,kt=1,ee=arguments.length;kt<ee;kt++){yt=arguments[kt];for(var $t in yt)Object.prototype.hasOwnProperty.call(yt,$t)&&(st[$t]=yt[$t])}return st},P.apply(this,arguments)};function N(Nt,st){var yt={};for(var kt in Nt)Object.prototype.hasOwnProperty.call(Nt,kt)&&st.indexOf(kt)<0&&(yt[kt]=Nt[kt]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ee=0,kt=Object.getOwnPropertySymbols(Nt);ee<kt.length;ee++)st.indexOf(kt[ee])<0&&Object.prototype.propertyIsEnumerable.call(Nt,kt[ee])&&(yt[kt[ee]]=Nt[kt[ee]]);return yt}function D(Nt,st,yt,kt){var ee=arguments.length,$t=ee<3?st:kt===null?kt=Object.getOwnPropertyDescriptor(st,yt):kt,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$t=Reflect.decorate(Nt,st,yt,kt);else for(var Pe=Nt.length-1;Pe>=0;Pe--)(ge=Nt[Pe])&&($t=(ee<3?ge($t):ee>3?ge(st,yt,$t):ge(st,yt))||$t);return ee>3&&$t&&Object.defineProperty(st,yt,$t),$t}function E(Nt,st){return function(yt,kt){st(yt,kt,Nt)}}function y(Nt,st,yt,kt,ee,$t){function ge(Yt){if(Yt!==void 0&&typeof Yt!="function")throw new TypeError("Function expected");return Yt}for(var Pe=kt.kind,tr=Pe==="getter"?"get":Pe==="setter"?"set":"value",Jt=!st&&Nt?kt.static?Nt:Nt.prototype:null,ae=st||(Jt?Object.getOwnPropertyDescriptor(Jt,kt.name):{}),Se,xe=!1,we=yt.length-1;we>=0;we--){var zt={};for(var Wt in kt)zt[Wt]=Wt==="access"?{}:kt[Wt];for(var Wt in kt.access)zt.access[Wt]=kt.access[Wt];zt.addInitializer=function(Yt){if(xe)throw new TypeError("Cannot add initializers after decoration has completed");$t.push(ge(Yt||null))};var Ie=(0,yt[we])(Pe==="accessor"?{get:ae.get,set:ae.set}:ae[tr],zt);if(Pe==="accessor"){if(Ie===void 0)continue;if(Ie===null||typeof Ie!="object")throw new TypeError("Object expected");(Se=ge(Ie.get))&&(ae.get=Se),(Se=ge(Ie.set))&&(ae.set=Se),(Se=ge(Ie.init))&&ee.push(Se)}else(Se=ge(Ie))&&(Pe==="field"?ee.push(Se):ae[tr]=Se)}Jt&&Object.defineProperty(Jt,kt.name,ae),xe=!0}function M(Nt,st,yt){for(var kt=arguments.length>2,ee=0;ee<st.length;ee++)yt=kt?st[ee].call(Nt,yt):st[ee].call(Nt);return kt?yt:void 0}function S(Nt){return typeof Nt=="symbol"?Nt:"".concat(Nt)}function m(Nt,st,yt){return typeof st=="symbol"&&(st=st.description?"[".concat(st.description,"]"):""),Object.defineProperty(Nt,"name",{configurable:!0,value:yt?"".concat(yt," ",st):st})}function I(Nt,st){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Nt,st)}function A(Nt,st,yt,kt){function ee($t){return $t instanceof yt?$t:new yt(function(ge){ge($t)})}return new(yt||(yt=Promise))(function($t,ge){function Pe(ae){try{Jt(kt.next(ae))}catch(Se){ge(Se)}}function tr(ae){try{Jt(kt.throw(ae))}catch(Se){ge(Se)}}function Jt(ae){ae.done?$t(ae.value):ee(ae.value).then(Pe,tr)}Jt((kt=kt.apply(Nt,st||[])).next())})}function L(Nt,st){var yt={label:0,sent:function(){if($t[0]&1)throw $t[1];return $t[1]},trys:[],ops:[]},kt,ee,$t,ge;return ge={next:Pe(0),throw:Pe(1),return:Pe(2)},typeof Symbol=="function"&&(ge[Symbol.iterator]=function(){return this}),ge;function Pe(Jt){return function(ae){return tr([Jt,ae])}}function tr(Jt){if(kt)throw new TypeError("Generator is already executing.");for(;ge&&(ge=0,Jt[0]&&(yt=0)),yt;)try{if(kt=1,ee&&($t=Jt[0]&2?ee.return:Jt[0]?ee.throw||(($t=ee.return)&&$t.call(ee),0):ee.next)&&!($t=$t.call(ee,Jt[1])).done)return $t;switch(ee=0,$t&&(Jt=[Jt[0]&2,$t.value]),Jt[0]){case 0:case 1:$t=Jt;break;case 4:return yt.label++,{value:Jt[1],done:!1};case 5:yt.label++,ee=Jt[1],Jt=[0];continue;case 7:Jt=yt.ops.pop(),yt.trys.pop();continue;default:if($t=yt.trys,!($t=$t.length>0&&$t[$t.length-1])&&(Jt[0]===6||Jt[0]===2)){yt=0;continue}if(Jt[0]===3&&(!$t||Jt[1]>$t[0]&&Jt[1]<$t[3])){yt.label=Jt[1];break}if(Jt[0]===6&&yt.label<$t[1]){yt.label=$t[1],$t=Jt;break}if($t&&yt.label<$t[2]){yt.label=$t[2],yt.ops.push(Jt);break}$t[2]&&yt.ops.pop(),yt.trys.pop();continue}Jt=st.call(Nt,yt)}catch(ae){Jt=[6,ae],ee=0}finally{kt=$t=0}if(Jt[0]&5)throw Jt[1];return{value:Jt[0]?Jt[1]:void 0,done:!0}}}var U=Object.create?function(Nt,st,yt,kt){kt===void 0&&(kt=yt);var ee=Object.getOwnPropertyDescriptor(st,yt);(!ee||("get"in ee?!st.__esModule:ee.writable||ee.configurable))&&(ee={enumerable:!0,get:function(){return st[yt]}}),Object.defineProperty(Nt,kt,ee)}:function(Nt,st,yt,kt){kt===void 0&&(kt=yt),Nt[kt]=st[yt]};function V(Nt,st){for(var yt in Nt)yt!=="default"&&!Object.prototype.hasOwnProperty.call(st,yt)&&U(st,Nt,yt)}function x(Nt){var st=typeof Symbol=="function"&&Symbol.iterator,yt=st&&Nt[st],kt=0;if(yt)return yt.call(Nt);if(Nt&&typeof Nt.length=="number")return{next:function(){return Nt&&kt>=Nt.length&&(Nt=void 0),{value:Nt&&Nt[kt++],done:!Nt}}};throw new TypeError(st?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(Nt,st){var yt=typeof Symbol=="function"&&Nt[Symbol.iterator];if(!yt)return Nt;var kt=yt.call(Nt),ee,$t=[],ge;try{for(;(st===void 0||st-- >0)&&!(ee=kt.next()).done;)$t.push(ee.value)}catch(Pe){ge={error:Pe}}finally{try{ee&&!ee.done&&(yt=kt.return)&&yt.call(kt)}finally{if(ge)throw ge.error}}return $t}function at(){for(var Nt=[],st=0;st<arguments.length;st++)Nt=Nt.concat(d(arguments[st]));return Nt}function W(){for(var Nt=0,st=0,yt=arguments.length;st<yt;st++)Nt+=arguments[st].length;for(var kt=Array(Nt),ee=0,st=0;st<yt;st++)for(var $t=arguments[st],ge=0,Pe=$t.length;ge<Pe;ge++,ee++)kt[ee]=$t[ge];return kt}function j(Nt,st,yt){if(yt||arguments.length===2)for(var kt=0,ee=st.length,$t;kt<ee;kt++)($t||!(kt in st))&&($t||($t=Array.prototype.slice.call(st,0,kt)),$t[kt]=st[kt]);return Nt.concat($t||Array.prototype.slice.call(st))}function $(Nt){return this instanceof $?(this.v=Nt,this):new $(Nt)}function q(Nt,st,yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var kt=yt.apply(Nt,st||[]),ee,$t=[];return ee={},ge("next"),ge("throw"),ge("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ge(xe){kt[xe]&&(ee[xe]=function(we){return new Promise(function(zt,Wt){$t.push([xe,we,zt,Wt])>1||Pe(xe,we)})})}function Pe(xe,we){try{tr(kt[xe](we))}catch(zt){Se($t[0][3],zt)}}function tr(xe){xe.value instanceof $?Promise.resolve(xe.value.v).then(Jt,ae):Se($t[0][2],xe)}function Jt(xe){Pe("next",xe)}function ae(xe){Pe("throw",xe)}function Se(xe,we){xe(we),$t.shift(),$t.length&&Pe($t[0][0],$t[0][1])}}function et(Nt){var st,yt;return st={},kt("next"),kt("throw",function(ee){throw ee}),kt("return"),st[Symbol.iterator]=function(){return this},st;function kt(ee,$t){st[ee]=Nt[ee]?function(ge){return(yt=!yt)?{value:$(Nt[ee](ge)),done:!1}:$t?$t(ge):ge}:$t}}function Q(Nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=Nt[Symbol.asyncIterator],yt;return st?st.call(Nt):(Nt=typeof x=="function"?x(Nt):Nt[Symbol.iterator](),yt={},kt("next"),kt("throw"),kt("return"),yt[Symbol.asyncIterator]=function(){return this},yt);function kt($t){yt[$t]=Nt[$t]&&function(ge){return new Promise(function(Pe,tr){ge=Nt[$t](ge),ee(Pe,tr,ge.done,ge.value)})}}function ee($t,ge,Pe,tr){Promise.resolve(tr).then(function(Jt){$t({value:Jt,done:Pe})},ge)}}function it(Nt,st){return Object.defineProperty?Object.defineProperty(Nt,"raw",{value:st}):Nt.raw=st,Nt}var ht=Object.create?function(Nt,st){Object.defineProperty(Nt,"default",{enumerable:!0,value:st})}:function(Nt,st){Nt.default=st};function dt(Nt){if(Nt&&Nt.__esModule)return Nt;var st={};if(Nt!=null)for(var yt in Nt)yt!=="default"&&Object.prototype.hasOwnProperty.call(Nt,yt)&&U(st,Nt,yt);return ht(st,Nt),st}function Ot(Nt){return Nt&&Nt.__esModule?Nt:{default:Nt}}function It(Nt,st,yt,kt){if(yt==="a"&&!kt)throw new TypeError("Private accessor was defined without a getter");if(typeof st=="function"?Nt!==st||!kt:!st.has(Nt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return yt==="m"?kt:yt==="a"?kt.call(Nt):kt?kt.value:st.get(Nt)}function Kt(Nt,st,yt,kt,ee){if(kt==="m")throw new TypeError("Private method is not writable");if(kt==="a"&&!ee)throw new TypeError("Private accessor was defined without a setter");if(typeof st=="function"?Nt!==st||!ee:!st.has(Nt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return kt==="a"?ee.call(Nt,yt):ee?ee.value=yt:st.set(Nt,yt),yt}function Ft(Nt,st){if(st===null||typeof st!="object"&&typeof st!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Nt=="function"?st===Nt:Nt.has(st)}},function(R,z,B){"use strict";var Y=B(4),k=B(9),P=B(34);z.a=function(N,D,E,y){y===void 0&&(y="...");var M=16,S=Object(P.a)(y,E),m=Object(Y.a)(N)?N:Object(k.a)(N),I=D,A=[],L,U;if(Object(P.a)(N,E)<=D)return N;for(;L=m.substr(0,M),U=Object(P.a)(L,E),!(U+S>I&&U>I);)if(A.push(L),I-=U,m=m.substr(M),!m)return A.join("");for(;L=m.substr(0,1),U=Object(P.a)(L,E),!(U+S>I);)if(A.push(L),I-=U,m=m.substr(1),!m)return A.join("");return""+A.join("")+y}},function(R,z,B){"use strict";var Y=function(){function k(){this.map={}}return k.prototype.has=function(P){return this.map[P]!==void 0},k.prototype.get=function(P,N){var D=this.map[P];return D===void 0?N:D},k.prototype.set=function(P,N){this.map[P]=N},k.prototype.clear=function(){this.map={}},k.prototype.delete=function(P){delete this.map[P]},k.prototype.size=function(){return Object.keys(this.map).length},k}();z.a=Y},function(R,z){function B(E,y,M,S){S===void 0&&(S=[]);var m=this;m.w=E||0,m.h=y||0,m.y=M||0,m.x=0,m.c=S||[],m.cs=S.length,m.prelim=0,m.mod=0,m.shift=0,m.change=0,m.tl=null,m.tr=null,m.el=null,m.er=null,m.msel=0,m.mser=0}B.fromNode=function(E,y){if(!E)return null;var M=[];return E.children.forEach(function(S){M.push(B.fromNode(S,y))}),y?new B(E.height,E.width,E.x,M):new B(E.width,E.height,E.y,M)};function Y(E,y,M){M?E.y+=y:E.x+=y,E.children.forEach(function(S){Y(S,y,M)})}function k(E,y){var M=y?E.y:E.x;return E.children.forEach(function(S){M=Math.min(k(S,y),M)}),M}function P(E,y){var M=k(E,y);Y(E,-M,y)}function N(E,y,M){M?y.y=E.x:y.x=E.x,E.c.forEach(function(S,m){N(S,y.children[m],M)})}function D(E,y,M){M===void 0&&(M=0),y?(E.x=M,M+=E.width):(E.y=M,M+=E.height),E.children.forEach(function(S){D(S,y,M)})}R.exports=function(E,y){y===void 0&&(y={});var M=y.isHorizontal;function S(Q){if(Q.cs===0){m(Q);return}S(Q.c[0]);for(var it=q(V(Q.c[0].el),0,null),ht=1;ht<Q.cs;++ht){S(Q.c[ht]);var dt=V(Q.c[ht].er);I(Q,ht,it),it=q(dt,ht,it)}at(Q),m(Q)}function m(Q){Q.cs===0?(Q.el=Q,Q.er=Q,Q.msel=Q.mser=0):(Q.el=Q.c[0].el,Q.msel=Q.c[0].msel,Q.er=Q.c[Q.cs-1].er,Q.mser=Q.c[Q.cs-1].mser)}function I(Q,it,ht){for(var dt=Q.c[it-1],Ot=dt.mod,It=Q.c[it],Kt=It.mod;dt!==null&&It!==null;){V(dt)>ht.low&&(ht=ht.nxt);var Ft=Ot+dt.prelim+dt.w-(Kt+It.prelim);Ft>0&&(Kt+=Ft,A(Q,it,ht.index,Ft));var Nt=V(dt),st=V(It);Nt<=st&&(dt=U(dt),dt!==null&&(Ot+=dt.mod)),Nt>=st&&(It=L(It),It!==null&&(Kt+=It.mod))}!dt&&It?x(Q,it,It,Kt):dt&&!It&&d(Q,it,dt,Ot)}function A(Q,it,ht,dt){Q.c[it].mod+=dt,Q.c[it].msel+=dt,Q.c[it].mser+=dt,j(Q,it,ht,dt)}function L(Q){return Q.cs===0?Q.tl:Q.c[0]}function U(Q){return Q.cs===0?Q.tr:Q.c[Q.cs-1]}function V(Q){return Q.y+Q.h}function x(Q,it,ht,dt){var Ot=Q.c[0].el;Ot.tl=ht;var It=dt-ht.mod-Q.c[0].msel;Ot.mod+=It,Ot.prelim-=It,Q.c[0].el=Q.c[it].el,Q.c[0].msel=Q.c[it].msel}function d(Q,it,ht,dt){var Ot=Q.c[it].er;Ot.tr=ht;var It=dt-ht.mod-Q.c[it].mser;Ot.mod+=It,Ot.prelim-=It,Q.c[it].er=Q.c[it-1].er,Q.c[it].mser=Q.c[it-1].mser}function at(Q){Q.prelim=(Q.c[0].prelim+Q.c[0].mod+Q.c[Q.cs-1].mod+Q.c[Q.cs-1].prelim+Q.c[Q.cs-1].w)/2-Q.w/2}function W(Q,it){it+=Q.mod,Q.x=Q.prelim+it,$(Q);for(var ht=0;ht<Q.cs;ht++)W(Q.c[ht],it)}function j(Q,it,ht,dt){if(ht!==it-1){var Ot=it-ht;Q.c[ht+1].shift+=dt/Ot,Q.c[it].shift-=dt/Ot,Q.c[it].change-=dt-dt/Ot}}function $(Q){for(var it=0,ht=0,dt=0;dt<Q.cs;dt++)it+=Q.c[dt].shift,ht+=it+Q.c[dt].change,Q.c[dt].mod+=ht}function q(Q,it,ht){for(;ht!==null&&Q>=ht.low;)ht=ht.nxt;return{low:Q,index:it,nxt:ht}}D(E,M);var et=B.fromNode(E,M);return S(et),W(et,0),N(et,E,M),P(E,M),E}},function(R,z,B){function Y(m,I){m.prototype=Object.create(I.prototype),m.prototype.constructor=m,k(m,I)}function k(m,I){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(L,U){return L.__proto__=U,L},k(m,I)}var P=B(11),N=B(121),D=B(17),E=B(6),y=function(m){Y(I,m);function I(){return m.apply(this,arguments)||this}var A=I.prototype;return A.execute=function(){var U=this;return U.rootNode.width=0,D(U.rootNode,U.options,N)},I}(P),M={};function S(m,I){return I=E.assign({},M,I),new y(m,I).execute()}R.exports=S},function(R,z,B){var Y=B(6);function k(D,E){D===void 0&&(D=0),E===void 0&&(E=[]);var y=this;y.x=y.y=0,y.leftChild=y.rightChild=null,y.height=0,y.children=E}var P={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function N(D,E,y){y?(E.x=D.x,E.y=D.y):(E.x=D.y,E.y=D.x),D.children.forEach(function(M,S){N(M,E.children[S],y)})}R.exports=function(D,E){E===void 0&&(E={}),E=Y.assign({},P,E);var y=0;function M(L){if(!L)return null;L.width=0,L.depth&&L.depth>y&&(y=L.depth);var U=L.children,V=U.length,x=new k(L.height,[]);return U.forEach(function(d,at){var W=M(d);x.children.push(W),at===0&&(x.leftChild=W),at===V-1&&(x.rightChild=W)}),x.originNode=L,x.isLeaf=L.isLeaf(),x}function S(L){if(L.isLeaf||L.children.length===0)L.drawingDepth=y;else{var U=L.children.map(function(x){return S(x)}),V=Math.min.apply(null,U);L.drawingDepth=V-1}return L.drawingDepth}var m;function I(L){L.x=L.drawingDepth*E.rankSep,L.isLeaf?(L.y=0,m&&(L.y=m.y+m.height+E.nodeSep,L.originNode.parent!==m.originNode.parent&&(L.y+=E.subTreeSep)),m=L):(L.children.forEach(function(U){I(U)}),L.y=(L.leftChild.y+L.rightChild.y)/2)}var A=M(D);return S(A),I(A),N(A,D,E.isHorizontal),D}},function(R,z,B){function Y(A,L){A.prototype=Object.create(L.prototype),A.prototype.constructor=A,k(A,L)}function k(A,L){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,x){return V.__proto__=x,V},k(A,L)}var P=B(11),N=B(123),D=B(35),E=B(6),y=["LR","RL","H"],M=y[0],S=function(A){Y(L,A);function L(){return A.apply(this,arguments)||this}var U=L.prototype;return U.execute=function(){var x=this,d=x.options,at=x.rootNode;d.isHorizontal=!0;var W=d.indent,j=W===void 0?20:W,$=d.dropCap,q=$===void 0?!0:$,et=d.direction,Q=et===void 0?M:et,it=d.align;if(Q&&y.indexOf(Q)===-1)throw new TypeError("Invalid direction: "+Q);if(Q===y[0])N(at,j,q,it);else if(Q===y[1])N(at,j,q,it),at.right2left();else if(Q===y[2]){var ht=D(at,d),dt=ht.left,Ot=ht.right;N(dt,j,q,it),dt.right2left(),N(Ot,j,q,it);var It=dt.getBoundingBox();Ot.translate(It.width,0),at.x=Ot.x-at.width/2}return at},L}(P),m={};function I(A,L){return L=E.assign({},m,L),new S(A,L).execute()}R.exports=I},function(R,z,B){var Y=B(6);function k(P,N,D,E,y){var M=typeof D=="function"?D(P):D*P.depth;if(!E)try{if(P.id===P.parent.children[0].id){P.x+=M,P.y=N?N.y:0;return}}catch(I){}if(P.x+=M,N){if(P.y=N.y+Y.getHeight(N,P,y),N.parent&&P.parent.id!==N.parent.id){var S=N.parent,m=S.y+Y.getHeight(S,P,y);P.y=m>P.y?m:P.y}}else P.y=0}R.exports=function(P,N,D,E){var y=null;P.eachNode(function(M){k(M,y,N,D,E),y=M})}},function(R,z,B){function Y(m,I){m.prototype=Object.create(I.prototype),m.prototype.constructor=m,k(m,I)}function k(m,I){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(L,U){return L.__proto__=U,L},k(m,I)}var P=B(11),N=B(125),D=B(17),E=B(6),y=function(m){Y(I,m);function I(){return m.apply(this,arguments)||this}var A=I.prototype;return A.execute=function(){var U=this;return D(U.rootNode,U.options,N)},I}(P),M={};function S(m,I){return I=E.assign({},M,I),new y(m,I).execute()}R.exports=S},function(R,z,B){var Y=B(6);function k(D,E){var y=0;return D.children.length?D.children.forEach(function(M){y+=k(M,E)}):y=D.height,D._subTreeSep=E.getSubTreeSep(D.data),D.totalHeight=Math.max(D.height,y)+2*D._subTreeSep,D.totalHeight}function P(D){var E=D.children,y=E.length;if(y){E.forEach(function(L){P(L)});var M=E[0],S=E[y-1],m=S.y-M.y+S.height,I=0;if(E.forEach(function(L){I+=L.totalHeight}),m>D.height)D.y=M.y+m/2-D.height/2;else if(E.length!==1||D.height>I){var A=D.y+(D.height-m)/2-M.y;E.forEach(function(L){L.translate(0,A)})}else D.y=(M.y+M.height/2+S.y+S.height/2)/2-D.height/2}}var N={getSubTreeSep:function(){return 0}};R.exports=function(D,E){E===void 0&&(E={}),E=Y.assign({},N,E),D.parent={x:0,width:0,height:0,y:0},D.BFTraverse(function(y){y.x=y.parent.x+y.parent.width}),D.parent=null,k(D,E),D.startY=0,D.y=D.totalHeight/2-D.height/2,D.eachNode(function(y){var M=y.children,S=M.length;if(S){var m=M[0];if(m.startY=y.startY+y._subTreeSep,S===1)m.y=y.y+y.height/2-m.height/2;else{m.y=m.startY+m.totalHeight/2-m.height/2;for(var I=1;I<S;I++){var A=M[I];A.startY=M[I-1].startY+M[I-1].totalHeight,A.y=A.startY+A.totalHeight/2-A.height/2}}}}),P(D)}}])})},483360:function(yr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(P,N,D,E){E===void 0&&(E=D);var y=Object.getOwnPropertyDescriptor(N,D);(!y||("get"in y?!N.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return N[D]}}),Object.defineProperty(P,E,y)}:function(P,N,D,E){E===void 0&&(E=D),P[E]=N[D]}),Y=this&&this.__exportStar||function(P,N){for(var D in P)D!=="default"&&!Object.prototype.hasOwnProperty.call(N,D)&&B(N,P,D)};Object.defineProperty(R,"__esModule",{value:!0}),R.getLayoutByName=R.unRegisterLayout=R.registerLayout=void 0;var k=z(695326);Object.defineProperty(R,"registerLayout",{enumerable:!0,get:function(){return k.registerLayout}}),Object.defineProperty(R,"unRegisterLayout",{enumerable:!0,get:function(){return k.unRegisterLayout}}),Object.defineProperty(R,"getLayoutByName",{enumerable:!0,get:function(){return k.getLayoutByName}}),Y(z(702584),R)},762329:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Base=void 0;var z=function(){function B(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return B.prototype.layout=function(Y){return this.init(Y),this.execute(!0)},B.prototype.init=function(Y){this.nodes=Y.nodes||[],this.edges=Y.edges||[],this.combos=Y.combos||[],this.comboEdges=Y.comboEdges||[],this.hiddenNodes=Y.hiddenNodes||[],this.hiddenEdges=Y.hiddenEdges||[],this.hiddenCombos=Y.hiddenCombos||[],this.vedges=Y.vedges||[]},B.prototype.execute=function(Y){},B.prototype.executeWithWorker=function(){},B.prototype.getDefaultCfg=function(){return{}},B.prototype.updateCfg=function(Y){Y&&Object.assign(this,Y)},B.prototype.getType=function(){return"base"},B.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},B}();R.Base=z},964885:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,S){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,S)};return function(M,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");y(M,S);function m(){this.constructor=M}M.prototype=S===null?Object.create(S):(m.prototype=S.prototype,new m)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.CircularLayout=void 0;var Y=z(762329),k=z(449784);function P(y,M,S,m){y.forEach(function(I,A){y[A].children=[],y[A].parent=[]}),m?M.forEach(function(I){var A=(0,k.getEdgeTerminal)(I,"source"),L=(0,k.getEdgeTerminal)(I,"target"),U=0;A&&(U=S[A]);var V=0;L&&(V=S[L]);var x=y[U].children,d=y[V].parent;x.push(y[V].id),d.push(y[U].id)}):M.forEach(function(I){var A=(0,k.getEdgeTerminal)(I,"source"),L=(0,k.getEdgeTerminal)(I,"target"),U=0;A&&(U=S[A]);var V=0;L&&(V=S[L]);var x=y[U].children,d=y[V].children;x.push(y[V].id),d.push(y[U].id)})}function N(y,M,S){for(var m=S.length,I=0;I<m;I++){var A=(0,k.getEdgeTerminal)(S[I],"source"),L=(0,k.getEdgeTerminal)(S[I],"target");if(y.id===A&&M.id===L||M.id===A&&y.id===L)return!0}return!1}function D(y,M){var S=y.degree,m=M.degree;return S<m?-1:S>m?1:0}var E=function(y){B(M,y);function M(S){var m=y.call(this)||this;return m.radius=null,m.nodeSize=void 0,m.startRadius=null,m.endRadius=null,m.startAngle=0,m.endAngle=2*Math.PI,m.clockwise=!0,m.divisions=1,m.ordering=null,m.angleRatio=1,m.nodes=[],m.edges=[],m.nodeMap={},m.degrees=[],m.width=300,m.height=300,m.updateCfg(S),m}return M.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},M.prototype.execute=function(){var S,m=this,I=m.nodes,A=m.edges,L=I.length;if(L===0){m.onLayoutEnd&&m.onLayoutEnd();return}!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),m.center||(m.center=[m.width/2,m.height/2]);var U=m.center;if(L===1){I[0].x=U[0],I[0].y=U[1],m.onLayoutEnd&&m.onLayoutEnd();return}var V=m.radius,x=m.startRadius,d=m.endRadius,at=m.divisions,W=m.startAngle,j=m.endAngle,$=m.angleRatio,q=m.ordering,et=m.clockwise,Q=m.nodeSpacing,it=m.nodeSize,ht=(j-W)/L,dt={};I.forEach(function(Pe,tr){dt[Pe.id]=tr}),m.nodeMap=dt;var Ot=(0,k.getDegree)(I.length,dt,A);if(m.degrees=Ot,Q){var It=(0,k.getFuncByUnknownType)(10,Q),Kt=(0,k.getFuncByUnknownType)(10,it),Ft=-1/0;I.forEach(function(Pe){var tr=Kt(Pe);Ft<tr&&(Ft=tr)});var Nt=0;I.forEach(function(Pe,tr){tr===0?Nt+=Ft||10:Nt+=(It(Pe)||0)+(Ft||10)}),V=Nt/(2*Math.PI)}else!V&&!x&&!d?V=m.height>m.width?m.width/2:m.height/2:!x&&d?x=d:x&&!d&&(d=x);var st=ht*$,yt=[];q==="topology"?yt=m.topologyOrdering():q==="topology-directed"?yt=m.topologyOrdering(!0):q==="degree"?yt=m.degreeOrdering():yt=I;for(var kt=Math.ceil(L/at),ee=0;ee<L;++ee){var $t=V;!$t&&x!==null&&d!==null&&($t=x+ee*(d-x)/(L-1)),$t||($t=10+ee*100/(L-1));var ge=W+ee%kt*st+2*Math.PI/at*Math.floor(ee/kt);et||(ge=j-ee%kt*st-2*Math.PI/at*Math.floor(ee/kt)),yt[ee].x=U[0]+Math.cos(ge)*$t,yt[ee].y=U[1]+Math.sin(ge)*$t,yt[ee].weight=Ot[ee].all}return(S=m.onLayoutEnd)===null||S===void 0||S.call(m),{nodes:yt,edges:this.edges}},M.prototype.topologyOrdering=function(S){S===void 0&&(S=!1);var m=this,I=m.degrees,A=m.edges,L=m.nodes,U=(0,k.clone)(L),V=m.nodeMap,x=[U[0]],d=[L[0]],at=[],W=L.length;at[0]=!0,P(U,A,V,S);var j=0;return U.forEach(function($,q){if(q!==0)if((q===W-1||I[q].all!==I[q+1].all||N(x[j],$,A))&&!at[q])x.push($),d.push(L[V[$.id]]),at[q]=!0,j++;else{for(var et=x[j].children,Q=!1,it=0;it<et.length;it++){var ht=V[et[it]];if(I[ht].all===I[q].all&&!at[ht]){x.push(U[ht]),d.push(L[V[U[ht].id]]),at[ht]=!0,Q=!0;break}}for(var dt=0;!Q&&(at[dt]||(x.push(U[dt]),d.push(L[V[U[dt].id]]),at[dt]=!0,Q=!0),dt++,dt!==W););}}),d},M.prototype.degreeOrdering=function(){var S=this,m=S.nodes,I=[],A=S.degrees;return m.forEach(function(L,U){L.degree=A[U].all,I.push(L)}),I.sort(D),I},M.prototype.getType=function(){return"circular"},M}(Y.Base);R.CircularLayout=E},263861:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,S){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,S)};return function(M,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");y(M,S);function m(){this.constructor=M}M.prototype=S===null?Object.create(S):(m.prototype=S.prototype,new m)}}(),Y=this&&this.__assign||function(){return Y=Object.assign||function(y){for(var M,S=1,m=arguments.length;S<m;S++){M=arguments[S];for(var I in M)Object.prototype.hasOwnProperty.call(M,I)&&(y[I]=M[I])}return y},Y.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.ComboCombinedLayout=void 0;var k=z(416470),P=z(762329),N=z(449784),D=z(702584),E=function(y){B(M,y);function M(S){var m=y.call(this)||this;return m.center=[0,0],m.nodes=[],m.edges=[],m.combos=[],m.comboEdges=[],m.comboPadding=10,m.comboTrees=[],m.updateCfg(S),m}return M.prototype.getDefaultCfg=function(){return{}},M.prototype.execute=function(){var S=this,m=S.nodes,I=S.center;if(!m||m.length===0){S.onLayoutEnd&&S.onLayoutEnd();return}if(m.length===1){m[0].x=I[0],m[0].y=I[1],S.onLayoutEnd&&S.onLayoutEnd();return}S.initVals(),S.run(),S.onLayoutEnd&&S.onLayoutEnd()},M.prototype.run=function(){var S,m=this,I=m.nodes,A=m.edges,L=m.combos,U=m.comboEdges,V=m.center,x={};I.forEach(function(Ft){x[Ft.id]=Ft});var d={};L.forEach(function(Ft){d[Ft.id]=Ft});var at=m.getInnerGraphs(x),W=[],j=[],$={},q=!0;this.comboTrees.forEach(function(Ft){var Nt=at[Ft.id],st=Y(Y({},Ft),{x:Nt.x||d[Ft.id].x,y:Nt.y||d[Ft.id].y,fx:Nt.fx||d[Ft.id].fx,fy:Nt.fy||d[Ft.id].fy,mass:Nt.mass||d[Ft.id].mass,size:Nt.size});j.push(st),!isNaN(st.x)&&st.x!==0&&!isNaN(st.y)&&st.y!==0?q=!1:(st.x=Math.random()*100,st.y=Math.random()*100),W.push(Ft.id),(0,N.traverseTreeUp)(Ft,function(yt){return yt.id!==Ft.id&&($[yt.id]=Ft.id),!0})}),I.forEach(function(Ft){if(!(Ft.comboId&&d[Ft.comboId])){var Nt=Y({},Ft);j.push(Nt),!isNaN(Nt.x)&&Nt.x!==0&&!isNaN(Nt.y)&&Nt.y!==0?q=!1:(Nt.x=Math.random()*100,Nt.y=Math.random()*100),W.push(Ft.id)}});var et=[];if(A.concat(U).forEach(function(Ft){var Nt=$[Ft.source]||Ft.source,st=$[Ft.target]||Ft.target;Nt!==st&&W.includes(Nt)&&W.includes(st)&&et.push({source:Nt,target:st})}),j!=null&&j.length){if(j.length===1)j[0].x=V[0],j[0].y=V[1];else{var Q={nodes:j,edges:et},it=this.outerLayout||new D.GForceLayout({gravity:1,factor:4,linkDistance:function(Ft,Nt,st){var yt,kt,ee=((((yt=Nt.size)===null||yt===void 0?void 0:yt[0])||30)+(((kt=st.size)===null||kt===void 0?void 0:kt[0])||30))/2;return Math.min(ee*1.5,700)}}),ht=(S=it.getType)===null||S===void 0?void 0:S.call(it);if(it.updateCfg({center:V,kg:5,preventOverlap:!0,animate:!1}),q&&k.FORCE_LAYOUT_TYPE_MAP[ht]){var dt=j.length<100?new D.MDSLayout:new D.GridLayout;dt.layout(Q)}it.layout(Q)}j.forEach(function(Ft){var Nt=at[Ft.id];if(!Nt){var st=x[Ft.id];st&&(st.x=Ft.x,st.y=Ft.y);return}Nt.visited=!0,Nt.x=Ft.x,Nt.y=Ft.y,Nt.nodes.forEach(function(yt){yt.x+=Ft.x,yt.y+=Ft.y})})}for(var Ot=Object.keys(at),It=function(Ft){var Nt=Ot[Ft],st=at[Nt];if(!st)return"continue";st.nodes.forEach(function(yt){st.visited||(yt.x+=st.x||0,yt.y+=st.y||0),x[yt.id]&&(x[yt.id].x=yt.x,x[yt.id].y=yt.y)}),d[Nt]&&(d[Nt].x=st.x,d[Nt].y=st.y)},Kt=Ot.length-1;Kt>=0;Kt--)It(Kt);return{nodes:I,edges:A,combos:L,comboEdges:U}},M.prototype.getInnerGraphs=function(S){var m=this,I=m.comboTrees,A=m.nodeSize,L=m.edges,U=m.comboPadding,V=m.spacing,x={},d=this.innerLayout||new D.ConcentricLayout({type:"concentric",sortBy:"id"});return d.center=[0,0],d.preventOverlap=!0,d.nodeSpacing=V,(I||[]).forEach(function(at){(0,N.traverseTreeUp)(at,function(W){var j,$=(U==null?void 0:U(W))||10;if((0,N.isArray)($)&&($=Math.max.apply(Math,$)),!((j=W.children)===null||j===void 0)&&j.length){var et=W.children.map(function(kt){if(kt.itemType==="combo")return x[kt.id];var ee=S[kt.id]||{};return Y(Y({},ee),kt)}),Q=et.map(function(kt){return kt.id}),it={nodes:et,edges:L.filter(function(kt){return Q.includes(kt.source)&&Q.includes(kt.target)})},ht=1/0;et.forEach(function(kt){var ee;kt.size||(kt.size=((ee=x[kt.id])===null||ee===void 0?void 0:ee.size)||(A==null?void 0:A(kt))||[30,30]),(0,N.isNumber)(kt.size)&&(kt.size=[kt.size,kt.size]),ht>kt.size[0]&&(ht=kt.size[0]),ht>kt.size[1]&&(ht=kt.size[1])}),d.layout(it);var dt=(0,N.getLayoutBBox)(et),Ot=dt.minX,It=dt.minY,Kt=dt.maxX,Ft=dt.maxY,Nt={x:(Kt+Ot)/2,y:(Ft+It)/2};it.nodes.forEach(function(kt){kt.x-=Nt.x,kt.y-=Nt.y});var st=Math.max(Kt-Ot,ht)+$*2,yt=Math.max(Ft-It,ht)+$*2;x[W.id]={id:W.id,nodes:et,size:[st,yt]}}else if(W.itemType==="combo"){var q=$?[$*2,$*2]:[30,30];x[W.id]={id:W.id,nodes:[],size:q}}return!0})}),x},M.prototype.initVals=function(){var S=this,m=S.nodeSize,I=S.spacing,A,L;if((0,N.isNumber)(I)?L=function(){return I}:(0,N.isFunction)(I)?L=I:L=function(){return 0},this.spacing=L,!m)A=function(W){var j=L(W);if(W.size){if((0,N.isArray)(W.size)){var $=W.size[0]>W.size[1]?W.size[0]:W.size[1];return($+j)/2}if((0,N.isObject)(W.size)){var $=W.size.width>W.size.height?W.size.width:W.size.height;return($+j)/2}return(W.size+j)/2}return 10+j/2};else if((0,N.isFunction)(m))A=function(W){var j=m(W),$=L(W);if((0,N.isArray)(W.size)){var q=W.size[0]>W.size[1]?W.size[0]:W.size[1];return(q+$)/2}return((j||10)+$)/2};else if((0,N.isArray)(m)){var U=m[0]>m[1]?m[0]:m[1],V=U/2;A=function(W){return V+L(W)/2}}else{var x=m/2;A=function(W){return x+L(W)/2}}this.nodeSize=A;var d=S.comboPadding,at;(0,N.isNumber)(d)?at=function(){return d}:(0,N.isArray)(d)?at=function(){return Math.max.apply(null,d)}:(0,N.isFunction)(d)?at=d:at=function(){return 0},this.comboPadding=at},M.prototype.getType=function(){return"comboCombined"},M}(P.Base);R.ComboCombinedLayout=E},366590:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var N=function(D,E){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,M){y.__proto__=M}||function(y,M){for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&(y[S]=M[S])},N(D,E)};return function(D,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");N(D,E);function y(){this.constructor=D}D.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.ComboForceLayout=void 0;var Y=z(762329),k=z(449784),P=function(N){B(D,N);function D(E){var y=N.call(this)||this;return y.center=[0,0],y.maxIteration=100,y.gravity=10,y.comboGravity=10,y.linkDistance=10,y.alpha=1,y.alphaMin=.001,y.alphaDecay=1-Math.pow(y.alphaMin,1/300),y.alphaTarget=0,y.velocityDecay=.6,y.edgeStrength=.6,y.nodeStrength=30,y.preventOverlap=!1,y.preventNodeOverlap=!1,y.preventComboOverlap=!1,y.collideStrength=void 0,y.nodeCollideStrength=.5,y.comboCollideStrength=.5,y.comboSpacing=20,y.comboPadding=10,y.optimizeRangeFactor=1,y.onTick=function(){},y.onLayoutEnd=function(){},y.depthAttractiveForceScale=1,y.depthRepulsiveForceScale=2,y.nodes=[],y.edges=[],y.combos=[],y.comboTrees=[],y.width=300,y.height=300,y.bias=[],y.nodeMap={},y.oriComboMap={},y.indexMap={},y.comboMap={},y.previousLayouted=!1,y.updateCfg(E),y}return D.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},D.prototype.execute=function(){var E=this,y=E.nodes,M=E.center;if(E.comboTree={id:"comboTreeRoot",depth:-1,children:E.comboTrees},!y||y.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}if(y.length===1){y[0].x=M[0],y[0].y=M[1],E.onLayoutEnd&&E.onLayoutEnd();return}E.initVals(),E.run(),E.onLayoutEnd&&E.onLayoutEnd()},D.prototype.run=function(){var E=this,y=E.nodes,M=E.previousLayouted?E.maxIteration/5:E.maxIteration;!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight);var S=E.center,m=E.velocityDecay,I=E.comboMap;E.previousLayouted||E.initPos(I);for(var A=function(x){var d=[];y.forEach(function(at,W){d[W]={x:0,y:0}}),E.applyCalculate(d),E.applyComboCenterForce(d),y.forEach(function(at,W){!(0,k.isNumber)(at.x)||!(0,k.isNumber)(at.y)||(at.x+=d[W].x*m,at.y+=d[W].y*m)}),E.alpha+=(E.alphaTarget-E.alpha)*E.alphaDecay,E.onTick()},L=0;L<M;L++)A(L);var U=[0,0];y.forEach(function(x){!(0,k.isNumber)(x.x)||!(0,k.isNumber)(x.y)||(U[0]+=x.x,U[1]+=x.y)}),U[0]/=y.length,U[1]/=y.length;var V=[S[0]-U[0],S[1]-U[1]];y.forEach(function(x,d){!(0,k.isNumber)(x.x)||!(0,k.isNumber)(x.y)||(x.x+=V[0],x.y+=V[1])}),E.combos.forEach(function(x){var d=I[x.id];d&&d.empty&&(x.x=d.cx||x.x,x.y=d.cy||x.y)}),E.previousLayouted=!0},D.prototype.initVals=function(){var E=this,y=E.edges,M=E.nodes,S=E.combos,m={},I={},A={};M.forEach(function($t,ge){I[$t.id]=$t,A[$t.id]=ge}),E.nodeMap=I,E.indexMap=A;var L={};S.forEach(function($t){L[$t.id]=$t}),E.oriComboMap=L,E.comboMap=E.getComboMap();var U=E.preventOverlap;E.preventComboOverlap=E.preventComboOverlap||U,E.preventNodeOverlap=E.preventNodeOverlap||U;var V=E.collideStrength;V&&(E.comboCollideStrength=V,E.nodeCollideStrength=V),E.comboCollideStrength=E.comboCollideStrength?E.comboCollideStrength:0,E.nodeCollideStrength=E.nodeCollideStrength?E.nodeCollideStrength:0;for(var x=0;x<y.length;++x){var d=(0,k.getEdgeTerminal)(y[x],"source"),at=(0,k.getEdgeTerminal)(y[x],"target");m[d]?m[d]++:m[d]=1,m[at]?m[at]++:m[at]=1}for(var W=[],x=0;x<y.length;++x){var d=(0,k.getEdgeTerminal)(y[x],"source"),at=(0,k.getEdgeTerminal)(y[x],"target");W[x]=m[d]/(m[d]+m[at])}this.bias=W;var j=E.nodeSize,$=E.nodeSpacing,q,et;if((0,k.isNumber)($)?et=function(){return $}:(0,k.isFunction)($)?et=$:et=function(){return 0},this.nodeSpacing=et,!j)q=function($t){if($t.size){if((0,k.isArray)($t.size)){var ge=$t.size[0]>$t.size[1]?$t.size[0]:$t.size[1];return ge/2}if((0,k.isObject)($t.size)){var ge=$t.size.width>$t.size.height?$t.size.width:$t.size.height;return ge/2}return $t.size/2}return 10};else if((0,k.isFunction)(j))q=function($t){return j($t)};else if((0,k.isArray)(j)){var Q=j[0]>j[1]?j[0]:j[1],it=Q/2;q=function($t){return it}}else{var ht=j/2;q=function($t){return ht}}this.nodeSize=q;var dt=E.comboSpacing,Ot;(0,k.isNumber)(dt)?Ot=function(){return dt}:(0,k.isFunction)(dt)?Ot=dt:Ot=function(){return 0},this.comboSpacing=Ot;var It=E.comboPadding,Kt;(0,k.isNumber)(It)?Kt=function(){return It}:(0,k.isArray)(It)?Kt=function(){return Math.max.apply(null,It)}:(0,k.isFunction)(It)?Kt=It:Kt=function(){return 0},this.comboPadding=Kt;var Ft=this.linkDistance,Nt;Ft||(Ft=10),(0,k.isNumber)(Ft)?Nt=function($t){return Ft}:Nt=Ft,this.linkDistance=Nt;var st=this.edgeStrength,yt;st||(st=1),(0,k.isNumber)(st)?yt=function($t){return st}:yt=st,this.edgeStrength=yt;var kt=this.nodeStrength,ee;kt||(kt=30),(0,k.isNumber)(kt)?ee=function($t){return kt}:ee=kt,this.nodeStrength=ee},D.prototype.initPos=function(E){var y=this,M=y.nodes;M.forEach(function(S,m){var I=S.comboId,A=E[I];I&&A?(S.x=A.cx+100/(m+1),S.y=A.cy+100/(m+1)):(S.x=100/(m+1),S.y=100/(m+1))})},D.prototype.getComboMap=function(){var E=this,y=E.nodeMap,M=E.comboTrees,S=E.oriComboMap,m={};return(M||[]).forEach(function(I){var A=[];(0,k.traverseTreeUp)(I,function(L){if(L.itemType==="node"||!S[L.id])return!0;if(m[L.id]===void 0){var U={id:L.id,name:L.id,cx:0,cy:0,count:0,depth:E.oriComboMap[L.id].depth||0,children:[]};m[L.id]=U}var V=L.children;V&&V.forEach(function(at){if(!m[at.id]&&!y[at.id])return!0;A.push(at)});var x=m[L.id];if(x.cx=0,x.cy=0,A.length===0){x.empty=!0;var d=S[L.id];x.cx=d.x,x.cy=d.y}return A.forEach(function(at){if(x.count++,at.itemType!=="node"){var W=m[at.id];(0,k.isNumber)(W.cx)&&(x.cx+=W.cx),(0,k.isNumber)(W.cy)&&(x.cy+=W.cy);return}var j=y[at.id];j&&((0,k.isNumber)(j.x)&&(x.cx+=j.x),(0,k.isNumber)(j.y)&&(x.cy+=j.y))}),x.cx/=x.count||1,x.cy/=x.count||1,x.children=A,!0})}),m},D.prototype.applyComboCenterForce=function(E){var y=this,M=y.gravity,S=y.comboGravity||M,m=this.alpha,I=y.comboTrees,A=y.indexMap,L=y.nodeMap,U=y.comboMap;(I||[]).forEach(function(V){(0,k.traverseTreeUp)(V,function(x){if(x.itemType==="node")return!0;var d=U[x.id];if(!d)return!0;var at=U[x.id],W=(at.depth+1)/10*.5,j=at.cx,$=at.cy;return at.cx=0,at.cy=0,at.children.forEach(function(q){if(q.itemType!=="node"){var et=U[q.id];et&&(0,k.isNumber)(et.cx)&&(at.cx+=et.cx),et&&(0,k.isNumber)(et.cy)&&(at.cy+=et.cy);return}var Q=L[q.id],it=Q.x-j||.005,ht=Q.y-$||.005,dt=Math.sqrt(it*it+ht*ht),Ot=A[Q.id],It=S*m/dt*W;E[Ot].x-=it*It,E[Ot].y-=ht*It,(0,k.isNumber)(Q.x)&&(at.cx+=Q.x),(0,k.isNumber)(Q.y)&&(at.cy+=Q.y)}),at.cx/=at.count||1,at.cy/=at.count||1,!0})})},D.prototype.applyCalculate=function(E){var y=this,M=y.comboMap,S=y.nodes,m={};S.forEach(function(A,L){S.forEach(function(U,V){if(!(L<V)){var x=A.x-U.x||.005,d=A.y-U.y||.005,at=x*x+d*d,W=Math.sqrt(at);at<1&&(at=W),m["".concat(A.id,"-").concat(U.id)]={vx:x,vy:d,vl2:at,vl:W},m["".concat(U.id,"-").concat(A.id)]={vl2:at,vl:W,vx:-x,vy:-d}}})}),y.updateComboSizes(M),y.calRepulsive(E,m),y.calAttractive(E,m);var I=y.preventComboOverlap;I&&y.comboNonOverlapping(E,M)},D.prototype.updateComboSizes=function(E){var y=this,M=y.comboTrees,S=y.nodeMap,m=y.nodeSize,I=y.comboSpacing,A=y.comboPadding;(M||[]).forEach(function(L){var U=[];(0,k.traverseTreeUp)(L,function(V){if(V.itemType==="node")return!0;var x=E[V.id];if(!x)return!1;var d=V.children;d&&d.forEach(function(j){!E[j.id]&&!S[j.id]||U.push(j)}),x.minX=1/0,x.minY=1/0,x.maxX=-1/0,x.maxY=-1/0,U.forEach(function(j){if(j.itemType!=="node")return!0;var $=S[j.id];if(!$)return!0;var q=m($),et=$.x-q,Q=$.y-q,it=$.x+q,ht=$.y+q;x.minX>et&&(x.minX=et),x.minY>Q&&(x.minY=Q),x.maxX<it&&(x.maxX=it),x.maxY<ht&&(x.maxY=ht)});var at=y.oriComboMap[V.id].size||10;(0,k.isArray)(at)&&(at=at[0]);var W=Math.max(x.maxX-x.minX,x.maxY-x.minY,at);return x.r=W/2+I(x)/2+A(x),!0})})},D.prototype.comboNonOverlapping=function(E,y){var M=this,S=M.comboTree,m=M.comboCollideStrength,I=M.indexMap,A=M.nodeMap;(0,k.traverseTreeUp)(S,function(L){if(!y[L.id]&&!A[L.id]&&L.id!=="comboTreeRoot")return!1;var U=L.children;return U&&U.length>1&&U.forEach(function(V,x){if(V.itemType==="node")return!1;var d=y[V.id];d&&U.forEach(function(at,W){if(x<=W||at.itemType==="node")return!1;var j=y[at.id];if(!j)return!1;var $=d.cx-j.cx||.005,q=d.cy-j.cy||.005,et=$*$+q*q,Q=d.r||1,it=j.r||1,ht=Q+it,dt=it*it,Ot=Q*Q;if(et<ht*ht){var It=V.children;if(!It||It.length===0)return!1;var Kt=at.children;if(!Kt||Kt.length===0)return!1;var Ft=Math.sqrt(et),Nt=(ht-Ft)/Ft*m,st=$*Nt,yt=q*Nt,kt=dt/(Ot+dt),ee=1-kt;It.forEach(function($t){if($t.itemType!=="node")return!1;if(A[$t.id]){var ge=I[$t.id];Kt.forEach(function(Pe){if(Pe.itemType!=="node"||!A[Pe.id])return!1;var tr=I[Pe.id];E[ge].x+=st*kt,E[ge].y+=yt*kt,E[tr].x-=st*ee,E[tr].y-=yt*ee})}})}})}),!0})},D.prototype.calRepulsive=function(E,y){var M=this,S=M.nodes,m=M.width*M.optimizeRangeFactor,I=M.nodeStrength,A=M.alpha,L=M.nodeCollideStrength,U=M.preventNodeOverlap,V=M.nodeSize,x=M.nodeSpacing,d=M.depthRepulsiveForceScale,at=M.center;S.forEach(function(W,j){if(!(!W.x||!W.y)){if(at){var $=M.gravity,q=W.x-at[0]||.005,et=W.y-at[1]||.005,Q=Math.sqrt(q*q+et*et);E[j].x-=q*$*A/Q,E[j].y-=et*$*A/Q}S.forEach(function(it,ht){if(j!==ht&&!(!it.x||!it.y)){var dt=y["".concat(W.id,"-").concat(it.id)],Ot=dt.vl2,It=dt.vl;if(!(It>m)){var Kt=y["".concat(W.id,"-").concat(it.id)],Ft=Kt.vx,Nt=Kt.vy,st=Math.log(Math.abs(it.depth-W.depth)/10)+1||1;st=st<1?1:st,it.comboId!==W.comboId&&(st+=1);var yt=st?Math.pow(d,st):1,kt=I(it)*A/Ot*yt;if(E[j].x+=Ft*kt,E[j].y+=Nt*kt,j<ht&&U){var ee=V(W)+x(W)||1,$t=V(it)+x(it)||1,ge=ee+$t;if(Ot<ge*ge){var Pe=(ge-It)/It*L,tr=$t*$t,Jt=tr/(ee*ee+tr),ae=Ft*Pe,Se=Nt*Pe;E[j].x+=ae*Jt,E[j].y+=Se*Jt,Jt=1-Jt,E[ht].x-=ae*Jt,E[ht].y-=Se*Jt}}}}})}})},D.prototype.calAttractive=function(E,y){var M=this,S=M.edges,m=M.linkDistance,I=M.alpha,A=M.edgeStrength,L=M.bias,U=M.depthAttractiveForceScale;S.forEach(function(V,x){var d=(0,k.getEdgeTerminal)(V,"source"),at=(0,k.getEdgeTerminal)(V,"target");if(!(!d||!at||d===at)){var W=M.indexMap[d],j=M.indexMap[at],$=M.nodeMap[d],q=M.nodeMap[at];if(!(!$||!q)){var et=$.depth===q.depth?0:Math.log(Math.abs($.depth-q.depth)/10);$.comboId===q.comboId&&(et=et/2);var Q=et?Math.pow(U,et):1;if($.comboId!==q.comboId&&Q===1?Q=U/2:$.comboId===q.comboId&&(Q=2),!(!(0,k.isNumber)(q.x)||!(0,k.isNumber)($.x)||!(0,k.isNumber)(q.y)||!(0,k.isNumber)($.y))){var it=y["".concat(at,"-").concat(d)],ht=it.vl,dt=it.vx,Ot=it.vy,It=(ht-m(V))/ht*I*A(V)*Q,Kt=dt*It,Ft=Ot*It,Nt=L[x];E[j].x-=Kt*Nt,E[j].y-=Ft*Nt,E[W].x+=Kt*(1-Nt),E[W].y+=Ft*(1-Nt)}}}})},D.prototype.getType=function(){return"comboForce"},D}(Y.Base);R.ComboForceLayout=P},843281:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var N=function(D,E){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,M){y.__proto__=M}||function(y,M){for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&(y[S]=M[S])},N(D,E)};return function(D,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");N(D,E);function y(){this.constructor=D}D.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.ConcentricLayout=void 0;var Y=z(449784),k=z(762329),P=function(N){B(D,N);function D(E){var y=N.call(this)||this;return y.nodeSize=30,y.minNodeSpacing=10,y.nodeSpacing=10,y.preventOverlap=!1,y.equidistant=!1,y.startAngle=3/2*Math.PI,y.clockwise=!0,y.sortBy="degree",y.nodes=[],y.edges=[],y.width=300,y.height=300,y.onLayoutEnd=function(){},y.updateCfg(E),y}return D.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},D.prototype.execute=function(){var E,y,M=this,S=M.nodes,m=M.edges,I=S.length;if(I===0){(E=M.onLayoutEnd)===null||E===void 0||E.call(M);return}!M.width&&typeof window!="undefined"&&(M.width=window.innerWidth),!M.height&&typeof window!="undefined"&&(M.height=window.innerHeight),M.center||(M.center=[M.width/2,M.height/2]);var A=M.center;if(I===1){S[0].x=A[0],S[0].y=A[1],(y=M.onLayoutEnd)===null||y===void 0||y.call(M);return}var L=M.nodeSize,U=M.nodeSpacing,V=[],x,d=0;(0,Y.isArray)(L)?x=Math.max(L[0],L[1]):x=L,(0,Y.isArray)(U)?d=Math.max(U[0],U[1]):(0,Y.isNumber)(U)&&(d=U),S.forEach(function(st){V.push(st);var yt=x;(0,Y.isArray)(st.size)?yt=Math.max(st.size[0],st.size[1]):(0,Y.isNumber)(st.size)?yt=st.size:(0,Y.isObject)(st.size)&&(yt=Math.max(st.size.width,st.size.height)),x=Math.max(x,yt),(0,Y.isFunction)(U)&&(d=Math.max(U(st),d))}),M.clockwise=M.counterclockwise!==void 0?!M.counterclockwise:M.clockwise;var at={},W={};if(V.forEach(function(st,yt){at[st.id]=st,W[st.id]=yt}),(M.sortBy==="degree"||!(0,Y.isString)(M.sortBy)||V[0][M.sortBy]===void 0)&&(M.sortBy="degree",!(0,Y.isNumber)(S[0].degree))){var j=(0,Y.getDegree)(S.length,W,m);V.forEach(function(st,yt){st.degree=j[yt].all})}V.sort(function(st,yt){return yt[M.sortBy]-st[M.sortBy]}),M.maxValueNode=V[0],M.maxLevelDiff=M.maxLevelDiff||M.maxValueNode[M.sortBy]/4;var $=[[]],q=$[0];V.forEach(function(st){if(q.length>0){var yt=Math.abs(q[0][M.sortBy]-st[M.sortBy]);M.maxLevelDiff&&yt>=M.maxLevelDiff&&(q=[],$.push(q))}q.push(st)});var et=x+(d||M.minNodeSpacing);if(!M.preventOverlap){var Q=$.length>0&&$[0].length>1,it=Math.min(M.width,M.height)/2-et,ht=it/($.length+(Q?1:0));et=Math.min(et,ht)}var dt=0;if($.forEach(function(st){var yt=M.sweep;yt===void 0&&(yt=2*Math.PI-2*Math.PI/st.length);var kt=st.dTheta=yt/Math.max(1,st.length-1);if(st.length>1&&M.preventOverlap){var ee=Math.cos(kt)-Math.cos(0),$t=Math.sin(kt)-Math.sin(0),ge=Math.sqrt(et*et/(ee*ee+$t*$t));dt=Math.max(ge,dt)}st.r=dt,dt+=et}),M.equidistant){for(var Ot=0,It=0,Kt=0;Kt<$.length;Kt++){var Ft=$[Kt],Nt=Ft.r-It;Ot=Math.max(Ot,Nt)}It=0,$.forEach(function(st,yt){yt===0&&(It=st.r),st.r=It,It+=Ot})}return $.forEach(function(st){var yt=st.dTheta,kt=st.r;st.forEach(function(ee,$t){var ge=M.startAngle+(M.clockwise?1:-1)*yt*$t;ee.x=A[0]+kt*Math.cos(ge),ee.y=A[1]+kt*Math.sin(ge)})}),M.onLayoutEnd&&M.onLayoutEnd(),{nodes:S,edges:m}},D.prototype.getType=function(){return"concentric"},D}(k.Base);R.ConcentricLayout=P},416470:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.FORCE_LAYOUT_TYPE_MAP=R.LAYOUT_MESSAGE=void 0,R.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},R.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},920171:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var M=function(S,m){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,A){I.__proto__=A}||function(I,A){for(var L in A)Object.prototype.hasOwnProperty.call(A,L)&&(I[L]=A[L])},M(S,m)};return function(S,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");M(S,m);function I(){this.constructor=S}S.prototype=m===null?Object.create(m):(I.prototype=m.prototype,new I)}}(),Y=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(R,"__esModule",{value:!0}),R.DagreLayout=void 0;var k=Y(z(441106)),P=z(449784),N=z(762329),D=z(627652),E=function(M){B(S,M);function S(m){var I=M.call(this)||this;return I.rankdir="TB",I.nodesep=50,I.ranksep=50,I.controlPoints=!1,I.sortByCombo=!1,I.edgeLabelSpace=!0,I.radial=!1,I.nodes=[],I.edges=[],I.onLayoutEnd=function(){},I.layoutNode=function(A){var L=I,U=L.nodes,V=U.find(function(d){return d.id===A});if(V){var x=V.layout!==!1;return x}return!0},I.updateCfg(m),I}return S.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},S.prototype.execute=function(){var m=this,I,A,L,U,V=this,x=V.nodes,d=V.nodeSize,at=V.rankdir,W=V.combos,j=V.begin,$=V.radial,q=V.comboEdges,et=q===void 0?[]:q,Q=V.vedges,it=Q===void 0?[]:Q;if(x){var ht=V.edges||[],dt=new D.Graph({multigraph:!0,compound:!0});V.nodeMap={};var Ot={};x.forEach(function(qe){V.nodeMap[qe.id]=qe,qe.comboId&&(Ot[qe.comboId]=Ot[qe.comboId]||[],Ot[qe.comboId].push(qe.id))});var It=[],Kt={};!((I=V.nodeOrder)===null||I===void 0)&&I.length?(V.nodeOrder.forEach(function(qe){Kt[qe]=!0,It.push(V.nodeMap[qe])}),x.forEach(function(qe){Kt[qe.id]||It.push(qe)})):It=x;var Ft;d?(0,P.isArray)(d)?Ft=function(){return d}:Ft=function(){return[d,d]}:Ft=function(qe){return qe.size?(0,P.isArray)(qe.size)?qe.size:(0,P.isObject)(qe.size)?[qe.size.width||40,qe.size.height||40]:[qe.size,qe.size]:[40,40]};var Nt=(0,P.getFunc)(V.ranksep,50,V.ranksepFunc),st=(0,P.getFunc)(V.nodesep,50,V.nodesepFunc),yt=st,kt=Nt;(at==="LR"||at==="RL")&&(yt=Nt,kt=st),dt.setDefaultEdgeLabel(function(){return{}}),dt.setGraph(V);var ee={};this.sortByCombo&&W&&W.forEach(function(qe){if(ee[qe.id]=qe,qe.collapsed){var rr=Ft(qe),vr=kt(qe),Pr=yt(qe),en=rr[0]+2*Pr,pn=rr[1]+2*vr;dt.setNode(qe.id,{width:en,height:pn})}qe.parentId&&(ee[qe.parentId]||dt.setNode(qe.parentId,{}),dt.setParent(qe.id,qe.parentId))}),It.filter(function(qe){return qe.layout!==!1}).forEach(function(qe){var rr=Ft(qe),vr=kt(qe),Pr=yt(qe),en=rr[0]+2*Pr,pn=rr[1]+2*vr,rn=qe.layer;(0,P.isNumber)(rn)?dt.setNode(qe.id,{width:en,height:pn,layer:rn}):dt.setNode(qe.id,{width:en,height:pn}),m.sortByCombo&&qe.comboId&&(ee[qe.comboId]||(ee[qe.comboId]={id:qe.comboId},dt.setNode(qe.comboId,{})),dt.setParent(qe.id,qe.comboId))}),ht.forEach(function(qe){var rr=(0,P.getEdgeTerminal)(qe,"source"),vr=(0,P.getEdgeTerminal)(qe,"target");m.layoutNode(rr)&&m.layoutNode(vr)&&dt.setEdge(rr,vr,{weight:qe.weight||1})}),(A=et==null?void 0:et.concat(it||[]))===null||A===void 0||A.forEach(function(qe){var rr,vr,Pr=qe.source,en=qe.target,pn=!((rr=ee[Pr])===null||rr===void 0)&&rr.collapsed?[Pr]:Ot[Pr]||[Pr],rn=!((vr=ee[en])===null||vr===void 0)&&vr.collapsed?[en]:Ot[en]||[en];pn.forEach(function(jn){rn.forEach(function(Hn){dt.setEdge(jn,Hn,{weight:qe.weight||1})})})});var $t=void 0;!((L=V.preset)===null||L===void 0)&&L.nodes&&($t=new D.Graph({multigraph:!0,compound:!0}),V.preset.nodes.forEach(function(qe){$t==null||$t.setNode(qe.id,qe)})),k.default.layout(dt,{prevGraph:$t,edgeLabelSpace:V.edgeLabelSpace,keepNodeOrder:!!V.nodeOrder,nodeOrder:V.nodeOrder});var ge=[0,0];if(j){var Pe=1/0,tr=1/0;dt.nodes().forEach(function(qe){var rr=dt.node(qe);Pe>rr.x&&(Pe=rr.x),tr>rr.y&&(tr=rr.y)}),dt.edges().forEach(function(qe){var rr,vr=dt.edge(qe);(rr=vr.points)===null||rr===void 0||rr.forEach(function(Pr){Pe>Pr.x&&(Pe=Pr.x),tr>Pr.y&&(tr=Pr.y)})}),ge[0]=j[0]-Pe,ge[1]=j[1]-tr}var Jt=at==="LR"||at==="RL";if($){var ae=this,Se=ae.focusNode,xe=ae.ranksep,we=ae.getRadialPos,zt=(0,P.isString)(Se)?Se:Se==null?void 0:Se.id,Wt=zt?(U=dt.node(zt))===null||U===void 0?void 0:U._rank:0,Ie=[],Yt=Jt?"y":"x",ie=Jt?"height":"width",Oe=1/0,re=-1/0;dt.nodes().forEach(function(qe){var rr=dt.node(qe);if(V.nodeMap[qe]){var vr=st(V.nodeMap[qe]);if(Wt===0)Ie[rr._rank]||(Ie[rr._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ie[rr._rank].nodes.push(qe),Ie[rr._rank].totalWidth+=vr*2+rr[ie],Ie[rr._rank].maxSize<Math.max(rr.width,rr.height)&&(Ie[rr._rank].maxSize=Math.max(rr.width,rr.height));else{var Pr=rr._rank-Wt;if(Pr===0)Ie[Pr]||(Ie[Pr]={nodes:[],totalWidth:0,maxSize:-1/0}),Ie[Pr].nodes.push(qe),Ie[Pr].totalWidth+=vr*2+rr[ie],Ie[Pr].maxSize<Math.max(rr.width,rr.height)&&(Ie[Pr].maxSize=Math.max(rr.width,rr.height));else{var en=Math.abs(Pr);Ie[en]||(Ie[en]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ie[en].totalWidth+=vr*2+rr[ie],Ie[en].maxSize<Math.max(rr.width,rr.height)&&(Ie[en].maxSize=Math.max(rr.width,rr.height)),Pr<0?Ie[en].left.push(qe):Ie[en].right.push(qe)}}var pn=rr[Yt]-rr[ie]/2-vr,rn=rr[Yt]+rr[ie]/2+vr;pn<Oe&&(Oe=pn),rn>re&&(re=rn)}});var _e=xe||50,Ge={},Ct=(re-Oe)/.9,Nr=[(Oe+re-Ct)*.5,(Oe+re+Ct)*.5],Or=function(qe,rr,vr,Pr){vr===void 0&&(vr=-1/0),Pr===void 0&&(Pr=[0,1]);var en=vr;return qe.forEach(function(pn){var rn=dt.node(pn);Ge[pn]=rr;var jn=we(rn[Yt],Nr,Ct,rr,Pr),Hn=jn.x,oa=jn.y;if(V.nodeMap[pn]){V.nodeMap[pn].x=Hn+ge[0],V.nodeMap[pn].y=oa+ge[1],V.nodeMap[pn]._order=rn._order;var dn=Nt(V.nodeMap[pn]);en<dn&&(en=dn)}}),en},Ur=!0,Sr=0;Ie.forEach(function(qe){var rr,vr,Pr,en,pn,rn,jn;if(!(!(!((rr=qe==null?void 0:qe.nodes)===null||rr===void 0)&&rr.length)&&!(!((vr=qe==null?void 0:qe.left)===null||vr===void 0)&&vr.length)&&!(!((Pr=qe==null?void 0:qe.right)===null||Pr===void 0)&&Pr.length))){if(Ur&&qe.nodes.length===1){var Hn=qe.nodes[0];if(!V.nodeMap[Hn])return;V.nodeMap[Hn].x=ge[0],V.nodeMap[Hn].y=ge[1],Ge[qe.nodes[0]]=0,_e=Nt(V.nodeMap[Hn]),Ur=!1;return}_e=Math.max(_e,qe.totalWidth/(2*Math.PI));var oa=-1/0;if(Wt===0||!((en=qe.nodes)===null||en===void 0)&&en.length)oa=Or(qe.nodes,_e,oa,[0,1]);else{var dn=((pn=qe.left)===null||pn===void 0?void 0:pn.length)/(((rn=qe.left)===null||rn===void 0?void 0:rn.length)+((jn=qe.right)===null||jn===void 0?void 0:jn.length));oa=Or(qe.left,_e,oa,[0,dn]),oa=Or(qe.right,_e,oa,[dn+.05,1])}_e+=oa,Ur=!1,Sr-qe.maxSize}}),dt.edges().forEach(function(qe){var rr,vr,Pr,en=dt.edge(qe),pn=ht.findIndex(function(Cn){var la=(0,P.getEdgeTerminal)(Cn,"source"),K=(0,P.getEdgeTerminal)(Cn,"target");return la===qe.v&&K===qe.w});if(!(pn<=-1)&&V.edgeLabelSpace&&V.controlPoints&&ht[pn].type!=="loop"){var rn=Yt==="x"?"y":"x",jn=(rr=en==null?void 0:en.points)===null||rr===void 0?void 0:rr.slice(1,en.points.length-1),Hn=[],oa=(vr=dt.node(qe.v))===null||vr===void 0?void 0:vr[rn],dn=oa-((Pr=dt.node(qe.w))===null||Pr===void 0?void 0:Pr[rn]),Wn=Ge[qe.v],Dn=Wn-Ge[qe.w];jn==null||jn.forEach(function(Cn){var la=(Cn[rn]-oa)/dn*Dn+Wn,K=we(Cn[Yt],Nr,Ct,la);Hn.push({x:K.x+ge[0],y:K.y+ge[1]})}),ht[pn].controlPoints=Hn}})}else{var gn=new Set,Rr=at==="BT"||at==="RL",ln=Rr?function(qe,rr){return rr-qe}:function(qe,rr){return qe-rr};dt.nodes().forEach(function(qe){var rr=dt.node(qe);if(rr){var vr=m.nodeMap[qe];vr||(vr=W==null?void 0:W.find(function(Pr){return Pr.id===qe})),vr&&(vr.x=rr.x+ge[0],vr.y=rr.y+ge[1],vr._order=rr._order,gn.add(Jt?vr.x:vr.y))}});var Nn=Array.from(gn).sort(ln),Ln=Jt?function(qe,rr){return qe.x!==rr.x}:function(qe,rr){return qe.y!==rr.y},fn=Jt?function(qe,rr,vr){var Pr=Math.max(rr.y,vr.y),en=Math.min(rr.y,vr.y);return qe.filter(function(pn){return pn.y<=Pr&&pn.y>=en})}:function(qe,rr,vr){var Pr=Math.max(rr.x,vr.x),en=Math.min(rr.x,vr.x);return qe.filter(function(pn){return pn.x<=Pr&&pn.x>=en})};dt.edges().forEach(function(qe){var rr,vr=dt.edge(qe),Pr=ht.findIndex(function(rn){var jn=(0,P.getEdgeTerminal)(rn,"source"),Hn=(0,P.getEdgeTerminal)(rn,"target");return jn===qe.v&&Hn===qe.w});if(!(Pr<=-1)&&V.edgeLabelSpace&&V.controlPoints&&ht[Pr].type!=="loop"){(rr=vr==null?void 0:vr.points)===null||rr===void 0||rr.forEach(function(rn){rn.x+=ge[0],rn.y+=ge[1]});var en=V.nodeMap[qe.v],pn=V.nodeMap[qe.w];ht[Pr].controlPoints=y(vr==null?void 0:vr.points,en,pn,Nn,Jt,Ln,fn)}})}return V.onLayoutEnd&&V.onLayoutEnd(),{nodes:x,edges:ht}}},S.prototype.getRadialPos=function(m,I,A,L,U){U===void 0&&(U=[0,1]);var V=(m-I[0])/A;V=V*(U[1]-U[0])+U[0];var x=V*2*Math.PI;return{x:Math.cos(x)*L,y:Math.sin(x)*L}},S.prototype.getType=function(){return"dagre"},S}(N.Base);R.DagreLayout=E;var y=function(M,S,m,I,A,L,U){var V=(M==null?void 0:M.slice(1,M.length-1))||[];if(S&&m){var x=S.x,d=S.y,at=m.x,W=m.y;if(A&&(x=S.y,d=S.x,at=m.y,W=m.x),W!==d&&x!==at){var j=I.indexOf(d),$=I[j+1];if($){var q=V[0],et=A?{x:(d+$)/2,y:(q==null?void 0:q.y)||at}:{x:(q==null?void 0:q.x)||at,y:(d+$)/2};(!q||L(q,et))&&V.unshift(et)}var Q=I.indexOf(W),it=Math.abs(Q-j);if(it===1)V=U(V,S,m),V.length||V.push(A?{x:(d+W)/2,y:x}:{x,y:(d+W)/2});else if(it>1){var ht=I[Q-1];if(ht){var dt=V[V.length-1],Ot=A?{x:(W+ht)/2,y:(dt==null?void 0:dt.y)||at}:{x:(dt==null?void 0:dt.x)||x,y:(W+ht)/2};(!dt||L(dt,Ot))&&V.push(Ot)}}}}return V}},177057:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,S){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,S)};return function(M,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");y(M,S);function m(){this.constructor=M}M.prototype=S===null?Object.create(S):(m.prototype=S.prototype,new m)}}(),Y=this&&this.__assign||function(){return Y=Object.assign||function(y){for(var M,S=1,m=arguments.length;S<m;S++){M=arguments[S];for(var I in M)Object.prototype.hasOwnProperty.call(M,I)&&(y[I]=M[I])}return y},Y.apply(this,arguments)},k=this&&this.__spreadArray||function(y,M,S){if(S||arguments.length===2)for(var m=0,I=M.length,A;m<I;m++)(A||!(m in M))&&(A||(A=Array.prototype.slice.call(M,0,m)),A[m]=M[m]);return y.concat(A||Array.prototype.slice.call(M))};Object.defineProperty(R,"__esModule",{value:!0}),R.DagreCompoundLayout=void 0;var P=z(762329),N=z(631969),D=z(449784),E=function(y){B(M,y);function M(S){var m=y.call(this)||this;return m.rankdir="TB",m.nodesep=50,m.edgesep=5,m.ranksep=50,m.controlPoints=!0,m.anchorPoint=!0,m.nodes=[],m.edges=[],m.combos=[],m.onLayoutEnd=function(){},m.updateCfg(S),m}return M.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},M.prototype.init=function(S){var m=S.hiddenNodes||[],I=S.hiddenEdges||[],A=S.hiddenCombos||[];this.nodes=this.getDataByOrder((S.nodes||[]).concat(m)),this.edges=this.getDataByOrder((S.edges||[]).concat(I)),this.combos=(S.combos||[]).concat(A.map(function(L){return Y(Y({},L),{collapsed:!0})}))},M.prototype.execute=function(){var S=this,m=S.nodes,I=S.edges;if(m){var A=S.getLayoutConfig(),L=A.graphDef,U=A.graphOption,V=A.graphSettings,x=(0,N.buildGraph)(L,U,V),d=(0,N.flatGraph)(x,!0);return this.updatePosition(d),S.onLayoutEnd&&S.onLayoutEnd(),{nodes:m,edges:I}}},M.prototype.getNodePath=function(S){var m=this,I=m.nodes,A=m.combos,L=I.find(function(V){return V.id===S}),U=function(V,x){x===void 0&&(x=[]);var d=A.find(function(at){return at.id===V});return d?(x.unshift(V),d.parentId?U(d.parentId,x):x):x};return L&&L.comboId?U(L.comboId,[S]):[S]},M.prototype.getLayoutConfig=function(){var S,m,I,A=this,L=A.nodes,U=A.edges,V=A.combos,x=A.nodeSize,d=A.rankdir,at=A.align,W=A.edgesep,j=A.nodesep,$=A.ranksep,q=A.settings,et=(V||[]).reduce(function(Pe,tr){var Jt=L.filter(function(Se){return Se.comboId===tr.id}).map(function(Se){return Se.id}),ae=(V||[]).filter(function(Se){return Se.parentId===tr.id}).map(function(Se){return Se.id});return(Jt.length||ae.length)&&(Pe[tr.id]=k(k([],Jt,!0),ae,!0)),Pe},{}),Q;x?(0,D.isArray)(x)?Q=function(){return x}:Q=function(){return[x,x]}:Q=function(Pe){return Pe&&Pe.size?(0,D.isArray)(Pe.size)?Pe.size:(0,D.isObject)(Pe.size)?[Pe.size.width||40,Pe.size.height||40]:[Pe.size,Pe.size]:[40,40]};var it=function(Pe){return Pe&&Pe.size?(0,D.isArray)(Pe.size)?Pe.size:[Pe.size,Pe.size]:[80,40]},ht=it(V==null?void 0:V[0]),dt=ht[0],Ot=ht[1],It=(m=(S=A.graphSettings)===null||S===void 0?void 0:S.subScene)===null||m===void 0?void 0:m.meta,Kt=((I=V.find(function(Pe){return!Pe.collapsed}))===null||I===void 0?void 0:I.padding)||[20,20,20,20],Ft=Kt[0],Nt=Kt[1],st=Kt[2],yt=Kt[3],kt={compound:et,nodes:k([],(L||[]).map(function(Pe){var tr=Q(Pe),Jt=tr[0],ae=tr[1];return Y(Y({},Pe),{width:Jt,height:ae})}),!0),edges:k([],(U||[]).map(function(Pe){return Y(Y({},Pe),{v:Pe.source,w:Pe.target})}),!0)},ee={expanded:(V||[]).filter(function(Pe){return!Pe.collapsed}).map(function(Pe){return Pe.id})},$t={graph:{meta:{align:at,rankDir:d,nodeSep:j,edgeSep:W,rankSep:$}},subScene:{meta:{paddingTop:Ft||(It==null?void 0:It.paddingTop)||20,paddingRight:Nt||(It==null?void 0:It.paddingRight)||20,paddingBottom:st||(It==null?void 0:It.paddingBottom)||20,paddingLeft:yt||(It==null?void 0:It.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:dt,height:Ot}}},ge=(0,N.mergeConfig)(q,Y({},(0,N.mergeConfig)($t,N.LAYOUT_CONFIG)));return A.graphSettings=ge,{graphDef:kt,graphOption:ee,graphSettings:ge}},M.prototype.updatePosition=function(S){var m=S.nodes,I=S.edges;this.updateNodePosition(m,I),this.updateEdgePosition(m,I)},M.prototype.getBegin=function(S,m){var I=this,A=I.begin,L=[0,0];if(A){var U=1/0,V=1/0;S.forEach(function(x){U>x.x&&(U=x.x),V>x.y&&(V=x.y)}),m.forEach(function(x){x.points.forEach(function(d){U>d.x&&(U=d.x),V>d.y&&(V=d.y)})}),L[0]=A[0]-U,L[1]=A[1]-V}return L},M.prototype.updateNodePosition=function(S,m){var I=this,A=I.combos,L=I.nodes,U=I.edges,V=I.anchorPoint,x=I.graphSettings,d=this.getBegin(S,m);S.forEach(function(at){var W,j=at.x,$=at.y,q=at.id,et=at.type,Q=at.coreBox;if(et===N.HierarchyNodeType.META&&q!==N.ROOT_NAME){var it=A.findIndex(function(Kt){return Kt.id===q}),ht=(W=x==null?void 0:x.subScene)===null||W===void 0?void 0:W.meta;A[it].offsetX=j+d[0],A[it].offsetY=$+d[1],A[it].fixSize=[Q.width,Q.height],A[it].fixCollapseSize=[Q.width,Q.height],at.expanded?A[it].padding=[ht==null?void 0:ht.paddingTop,ht==null?void 0:ht.paddingRight,ht==null?void 0:ht.paddingBottom,ht==null?void 0:ht.paddingLeft]:A[it].padding=[0,0,0,0]}else if(et===N.HierarchyNodeType.OP){var it=L.findIndex(function(Ft){return Ft.id===q});if(L[it].x=j+d[0],L[it].y=$+d[1],V){var dt=[],Ot=m.filter(function(Ft){return Ft.v===q}),It=m.filter(function(Ft){return Ft.w===q});Ot.length>0&&Ot.forEach(function(Ft){var Nt=Ft.points[0],st=(Nt.x-j)/at.width+.5,yt=(Nt.y-$)/at.height+.5;dt.push([st,yt]),Ft.baseEdgeList.forEach(function(kt){var ee=U.find(function($t){return $t.source===kt.v&&$t.target===kt.w});ee&&(ee.sourceAnchor=dt.length-1)})}),It.length>0&&It.forEach(function(Ft){var Nt=Ft.points[Ft.points.length-1],st=(Nt.x-j)/at.width+.5,yt=(Nt.y-$)/at.height+.5;dt.push([st,yt]),Ft.baseEdgeList.forEach(function(kt){var ee=U.find(function($t){return $t.source===kt.v&&$t.target===kt.w});ee&&(ee.targetAnchor=dt.length-1)})}),L[it].anchorPoints=dt.length>0?dt:L[it].anchorPoints||[]}}})},M.prototype.updateEdgePosition=function(S,m){var I=this,A=I.combos,L=I.edges,U=I.controlPoints,V=this.getBegin(S,m);U&&(A.forEach(function(x){x.inEdges=[],x.outEdges=[]}),L.forEach(function(x){var d,at,W,j,$=S.find(function(Kt){return Kt.id===x.source}),q=S.find(function(Kt){return Kt.id===x.target}),et=[],Q=[];if($&&q)Q=(0,N.getEdges)($==null?void 0:$.id,q==null?void 0:q.id,S);else if(!$||!q){var it=I.getNodePath(x.source),ht=I.getNodePath(x.target),dt=it.reverse().slice($?0:1).find(function(Kt){return S.find(function(Ft){return Ft.id===Kt})}),Ot=ht.reverse().slice(q?0:1).find(function(Kt){return S.find(function(Ft){return Ft.id===Kt})});$=S.find(function(Kt){return Kt.id===dt}),q=S.find(function(Kt){return Kt.id===Ot}),Q=(0,N.getEdges)($==null?void 0:$.id,q==null?void 0:q.id,S,{v:x.source,w:x.target})}if(et=Q.reduce(function(Kt,Ft){return k(k([],Kt,!0),Ft.points.map(function(Nt){return Y(Y({},Nt),{x:Nt.x+V[0],y:Nt.y+V[1]})}),!0)},[]),et=et.slice(1,-1),x.controlPoints=et,(q==null?void 0:q.type)===N.NodeType.META){var It=A.findIndex(function(Kt){return Kt.id===(q==null?void 0:q.id)});if(!A[It]||!((d=A[It].inEdges)===null||d===void 0)&&d.some(function(Kt){return Kt.source===$.id&&Kt.target===q.id}))return;(at=A[It].inEdges)===null||at===void 0||at.push({source:$.id,target:q.id,controlPoints:et})}if(($==null?void 0:$.type)===N.NodeType.META){var It=A.findIndex(function(Ft){return Ft.id===($==null?void 0:$.id)});if(!A[It]||!((W=A[It].outEdges)===null||W===void 0)&&W.some(function(Ft){return Ft.source===$.id&&Ft.target===q.id}))return;(j=A[It].outEdges)===null||j===void 0||j.push({source:$.id,target:q.id,controlPoints:et})}}))},M.prototype.getType=function(){return"dagreCompound"},M.prototype.getDataByOrder=function(S){return S.every(function(m){return m.layoutOrder!==void 0})||S.forEach(function(m,I){m.layoutOrder=I}),S.sort(function(m,I){return m.layoutOrder-I.layoutOrder})},M}(P.Base);R.DagreCompoundLayout=E},627652:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var P=function(N,D){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,y){E.__proto__=y}||function(E,y){for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&(E[M]=y[M])},P(N,D)};return function(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");P(N,D);function E(){this.constructor=N}N.prototype=D===null?Object.create(D):(E.prototype=D.prototype,new E)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.Graph=void 0;var Y=z(199905),k=function(P){B(N,P);function N(){return P!==null&&P.apply(this,arguments)||this}return N}(Y.Graph);R.Graph=k},441106:function(yr,R,z){"use strict";var B=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(R,"__esModule",{value:!0});var Y=B(z(265236)),k=z(269209);R.default={layout:Y.default,util:{time:k.time,notime:k.notime}}},178029:function(yr,R,z){"use strict";var B=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(R,"__esModule",{value:!0});var Y=B(z(40773)),k=function(D){var E=function(M){return function(S){var m;return((m=M.edge(S))===null||m===void 0?void 0:m.weight)||1}},y=D.graph().acyclicer==="greedy"?(0,Y.default)(D,E(D)):P(D);y==null||y.forEach(function(M){var S=D.edge(M);D.removeEdgeObj(M),S.forwardName=M.name,S.reversed=!0,D.setEdge(M.w,M.v,S,"rev-".concat(Math.random()))})},P=function(D){var E=[],y={},M={},S=function(m){var I;M[m]||(M[m]=!0,y[m]=!0,(I=D.outEdges(m))===null||I===void 0||I.forEach(function(A){y[A.w]?E.push(A):S(A.w)}),delete y[m])};return D.nodes().forEach(S),E},N=function(D){D.edges().forEach(function(E){var y=D.edge(E);if(y.reversed){D.removeEdgeObj(E);var M=y.forwardName;delete y.reversed,delete y.forwardName,D.setEdge(E.w,E.v,y,M)}})};R.default={run:k,undo:N}},111500:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),Y=function(P){var N,D=function(E){var y=P.children(E),M=P.node(E);if(y!=null&&y.length&&y.forEach(function(I){return D(I)}),M.hasOwnProperty("minRank")){M.borderLeft=[],M.borderRight=[];for(var S=M.minRank,m=M.maxRank+1;S<m;S+=1)k(P,"borderLeft","_bl",E,M,S),k(P,"borderRight","_br",E,M,S)}};(N=P.children())===null||N===void 0||N.forEach(function(E){return D(E)})},k=function(P,N,D,E,y,M){var S={rank:M,borderType:N,width:0,height:0},m=y[N][M-1],I=(0,B.addDummyNode)(P,"border",S,D);y[N][M]=I,P.setParent(I,E),m&&P.setEdge(m,I,{weight:1})};R.default=Y},335279:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(y){var M,S=(M=y.graph().rankdir)===null||M===void 0?void 0:M.toLowerCase();(S==="lr"||S==="rl")&&Y(y)},B=function(y){var M,S=(M=y.graph().rankdir)===null||M===void 0?void 0:M.toLowerCase();(S==="bt"||S==="rl")&&P(y),(S==="lr"||S==="rl")&&(D(y),Y(y))},Y=function(y){y.nodes().forEach(function(M){k(y.node(M))}),y.edges().forEach(function(M){k(y.edge(M))})},k=function(y){var M=y.width;y.width=y.height,y.height=M},P=function(y){y.nodes().forEach(function(M){N(y.node(M))}),y.edges().forEach(function(M){var S,m=y.edge(M);(S=m.points)===null||S===void 0||S.forEach(function(I){return N(I)}),m.hasOwnProperty("y")&&N(m)})},N=function(y){y!=null&&y.y&&(y.y=-y.y)},D=function(y){y.nodes().forEach(function(M){E(y.node(M))}),y.edges().forEach(function(M){var S,m=y.edge(M);(S=m.points)===null||S===void 0||S.forEach(function(I){return E(I)}),m.hasOwnProperty("x")&&E(m)})},E=function(y){var M=y.x;y.x=y.y,y.y=M};R.default={adjust:z,undo:B}},455532:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(k,P){if(k!=="next"&&k!=="prev")return P},B=function(k){k.prev.next=k.next,k.next.prev=k.prev,delete k.next,delete k.prev},Y=function(){function k(){var P={};P.prev=P,P.next=P.prev,this.shortcut=P}return k.prototype.dequeue=function(){var P=this.shortcut,N=P.prev;if(N&&N!==P)return B(N),N},k.prototype.enqueue=function(P){var N=this.shortcut;P.prev&&P.next&&B(P),P.next=N.next,N.next.prev=P,N.next=P,P.prev=N},k.prototype.toString=function(){for(var P=[],N=this.shortcut,D=N.prev;D!==N;)P.push(JSON.stringify(D,z)),D=D==null?void 0:D.prev;return"[".concat(P.join(", "),"]")},k}();R.default=Y},40773:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var A=function(L,U){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,x){V.__proto__=x}||function(V,x){for(var d in x)Object.prototype.hasOwnProperty.call(x,d)&&(V[d]=x[d])},A(L,U)};return function(L,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");A(L,U);function V(){this.constructor=L}L.prototype=U===null?Object.create(U):(V.prototype=U.prototype,new V)}}(),Y=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(R,"__esModule",{value:!0});var k=Y(z(455532)),P=z(199905),N=function(A){B(L,A);function L(){return A!==null&&A.apply(this,arguments)||this}return L}(k.default),D=function(A){B(L,A);function L(){return A!==null&&A.apply(this,arguments)||this}return L}(P.Graph),E=function(){return 1},y=function(A,L){var U;if(A.nodeCount()<=1)return[];var V=m(A,L||E),x=M(V.graph,V.buckets,V.zeroIdx);return(U=x.map(function(d){return A.outEdges(d.v,d.w)}))===null||U===void 0?void 0:U.flat()},M=function(A,L,U){for(var V=[],x=L[L.length-1],d=L[0],at;A.nodeCount();){for(;at=d.dequeue();)S(A,L,U,at);for(;at=x.dequeue();)S(A,L,U,at);if(A.nodeCount()){for(var W=L.length-2;W>0;--W)if(at=L[W].dequeue(),at){V=V.concat(S(A,L,U,at,!0));break}}}return V},S=function(A,L,U,V,x){var d,at,W=[];return(d=A.inEdges(V.v))===null||d===void 0||d.forEach(function(j){var $=A.edge(j),q=A.node(j.v);x&&W.push({v:j.v,w:j.w,in:0,out:0}),q.out===void 0&&(q.out=0),q.out-=$,I(L,U,q)}),(at=A.outEdges(V.v))===null||at===void 0||at.forEach(function(j){var $=A.edge(j),q=j.w,et=A.node(q);et.in===void 0&&(et.in=0),et.in-=$,I(L,U,et)}),A.removeNode(V.v),x?W:void 0},m=function(A,L){var U=new D,V=0,x=0;A.nodes().forEach(function($){U.setNode($,{v:$,in:0,out:0})}),A.edges().forEach(function($){var q=U.edge($)||0,et=(L==null?void 0:L($))||1,Q=q+et;U.setEdge($.v,$.w,Q),x=Math.max(x,U.node($.v).out+=et),V=Math.max(V,U.node($.w).in+=et)});for(var d=[],at=x+V+3,W=0;W<at;W++)d.push(new N);var j=V+1;return U.nodes().forEach(function($){I(d,j,U.node($))}),{buckets:d,zeroIdx:j,graph:U}},I=function(A,L,U){U.out?U.in?A[U.out-U.in+L].enqueue(U):A[A.length-1].enqueue(U):A[0].enqueue(U)};R.default=y},265236:function(yr,R,z){"use strict";var B=this&&this.__assign||function(){return B=Object.assign||function(Jt){for(var ae,Se=1,xe=arguments.length;Se<xe;Se++){ae=arguments[Se];for(var we in ae)Object.prototype.hasOwnProperty.call(ae,we)&&(Jt[we]=ae[we])}return Jt},B.apply(this,arguments)},Y=this&&this.__importDefault||function(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}};Object.defineProperty(R,"__esModule",{value:!0});var k=Y(z(178029)),P=Y(z(546171)),N=Y(z(576827)),D=z(269209),E=Y(z(933562)),y=Y(z(59596)),M=Y(z(111500)),S=Y(z(335279)),m=Y(z(819597)),I=Y(z(100095)),A=Y(z(724956)),L=z(627652),U=function(Jt,ae){var Se=ae&&ae.debugTiming?D.time:D.notime;Se("layout",function(){ae&&!ae.keepNodeOrder&&ae.prevGraph&&Se("  inheritOrder",function(){x(Jt,ae.prevGraph)});var xe=Se("  buildLayoutGraph",function(){return ht(Jt)});ae&&ae.edgeLabelSpace===!1||Se("  makeSpaceForEdgeLabels",function(){dt(xe)});try{Se("  runLayout",function(){V(xe,Se,ae)})}catch(we){if(we.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,we);return}throw we}Se("  updateInputGraph",function(){d(Jt,xe)})})},V=function(Jt,ae,Se){ae("    removeSelfEdges",function(){ee(Jt)}),ae("    acyclic",function(){k.default.run(Jt)}),ae("    nestingGraph.run",function(){y.default.run(Jt)}),ae("    rank",function(){(0,N.default)((0,D.asNonCompoundGraph)(Jt))}),ae("    injectEdgeLabelProxies",function(){Ot(Jt)}),ae("    removeEmptyRanks",function(){(0,D.removeEmptyRanks)(Jt)}),ae("    nestingGraph.cleanup",function(){y.default.cleanup(Jt)}),ae("    normalizeRanks",function(){(0,D.normalizeRanks)(Jt)}),ae("    assignRankMinMax",function(){It(Jt)}),ae("    removeEdgeLabelProxies",function(){Kt(Jt)}),ae("    normalize.run",function(){P.default.run(Jt)}),ae("    parentDummyChains",function(){(0,E.default)(Jt)}),ae("    addBorderSegments",function(){(0,M.default)(Jt)}),Se&&Se.keepNodeOrder&&ae("    initDataOrder",function(){(0,A.default)(Jt,Se.nodeOrder)}),ae("    order",function(){(0,m.default)(Jt,Se==null?void 0:Se.keepNodeOrder)}),ae("    insertSelfEdges",function(){$t(Jt)}),ae("    adjustCoordinateSystem",function(){S.default.adjust(Jt)}),ae("    position",function(){(0,I.default)(Jt)}),ae("    positionSelfEdges",function(){ge(Jt)}),ae("    removeBorderNodes",function(){kt(Jt)}),ae("    normalize.undo",function(){P.default.undo(Jt)}),ae("    fixupEdgeLabelCoords",function(){st(Jt)}),ae("    undoCoordinateSystem",function(){S.default.undo(Jt)}),ae("    translateGraph",function(){Ft(Jt)}),ae("    assignNodeIntersects",function(){Nt(Jt)}),ae("    reversePoints",function(){yt(Jt)}),ae("    acyclic.undo",function(){k.default.undo(Jt)})},x=function(Jt,ae){Jt.nodes().forEach(function(Se){var xe=Jt.node(Se),we=ae.node(Se);we!==void 0?(xe.fixorder=we._order,delete we._order):delete xe.fixorder})},d=function(Jt,ae){Jt.nodes().forEach(function(Se){var xe,we=Jt.node(Se);if(we){var zt=ae.node(Se);we.x=zt.x,we.y=zt.y,we._order=zt.order,we._rank=zt.rank,!((xe=ae.children(Se))===null||xe===void 0)&&xe.length&&(we.width=zt.width,we.height=zt.height)}}),Jt.edges().forEach(function(Se){var xe=Jt.edge(Se),we=ae.edge(Se);xe.points=we?we.points:[],we&&we.hasOwnProperty("x")&&(xe.x=we.x,xe.y=we.y)}),Jt.graph().width=ae.graph().width,Jt.graph().height=ae.graph().height},at=["nodesep","edgesep","ranksep","marginx","marginy"],W={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},j=["acyclicer","ranker","rankdir","align"],$=["width","height","layer","fixorder"],q={width:0,height:0},et=["minlen","weight","width","height","labeloffset"],Q={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},it=["labelpos"],ht=function(Jt){var ae=new L.Graph({multigraph:!0,compound:!0}),Se=tr(Jt.graph()),xe={};return j==null||j.forEach(function(we){Se[we]!==void 0&&(xe[we]=Se[we])}),ae.setGraph(Object.assign({},W,Pe(Se,at),xe)),Jt.nodes().forEach(function(we){var zt=tr(Jt.node(we)),Wt=B(B({},q),zt),Ie=Pe(Wt,$);ae.setNode(we,Ie),ae.setParent(we,Jt.parent(we))}),Jt.edges().forEach(function(we){var zt=tr(Jt.edge(we)),Wt={};it==null||it.forEach(function(Ie){zt[Ie]!==void 0&&(Wt[Ie]=zt[Ie])}),ae.setEdgeObj(we,Object.assign({},Q,Pe(zt,et),Wt))}),ae},dt=function(Jt){var ae=Jt.graph();ae.ranksep||(ae.ranksep=0),ae.ranksep/=2,Jt.nodes().forEach(function(Se){var xe=Jt.node(Se);isNaN(xe.layer)||xe.layer||(xe.layer=0)}),Jt.edges().forEach(function(Se){var xe,we=Jt.edge(Se);we.minlen*=2,((xe=we.labelpos)===null||xe===void 0?void 0:xe.toLowerCase())!=="c"&&(ae.rankdir==="TB"||ae.rankdir==="BT"?we.width+=we.labeloffset:we.height+=we.labeloffset)})},Ot=function(Jt){Jt.edges().forEach(function(ae){var Se=Jt.edge(ae);if(Se.width&&Se.height){var xe=Jt.node(ae.v),we=Jt.node(ae.w),zt={e:ae,rank:(we.rank-xe.rank)/2+xe.rank};(0,D.addDummyNode)(Jt,"edge-proxy",zt,"_ep")}})},It=function(Jt){var ae=0;Jt.nodes().forEach(function(Se){var xe,we,zt=Jt.node(Se);zt.borderTop&&(zt.minRank=(xe=Jt.node(zt.borderTop))===null||xe===void 0?void 0:xe.rank,zt.maxRank=(we=Jt.node(zt.borderBottom))===null||we===void 0?void 0:we.rank,ae=Math.max(ae,zt.maxRank||-1/0))}),Jt.graph().maxRank=ae},Kt=function(Jt){Jt.nodes().forEach(function(ae){var Se=Jt.node(ae);Se.dummy==="edge-proxy"&&(Jt.edge(Se.e).labelRank=Se.rank,Jt.removeNode(ae))})},Ft=function(Jt){var ae,Se=0,xe,we=0,zt=Jt.graph(),Wt=zt.marginx||0,Ie=zt.marginy||0,Yt=function(ie){if(ie){var Oe=ie.x,re=ie.y,_e=ie.width,Ge=ie.height;!isNaN(Oe)&&!isNaN(_e)&&(ae===void 0&&(ae=Oe-_e/2),ae=Math.min(ae,Oe-_e/2),Se=Math.max(Se,Oe+_e/2)),!isNaN(re)&&!isNaN(Ge)&&(xe===void 0&&(xe=re-Ge/2),xe=Math.min(xe,re-Ge/2),we=Math.max(we,re+Ge/2))}};Jt.nodes().forEach(function(ie){Yt(Jt.node(ie))}),Jt.edges().forEach(function(ie){var Oe=Jt.edge(ie);Oe!=null&&Oe.hasOwnProperty("x")&&Yt(Oe)}),ae-=Wt,xe-=Ie,Jt.nodes().forEach(function(ie){var Oe=Jt.node(ie);Oe&&(Oe.x-=ae,Oe.y-=xe)}),Jt.edges().forEach(function(ie){var Oe,re=Jt.edge(ie);(Oe=re.points)===null||Oe===void 0||Oe.forEach(function(_e){_e.x-=ae,_e.y-=xe}),re.hasOwnProperty("x")&&(re.x-=ae),re.hasOwnProperty("y")&&(re.y-=xe)}),zt.width=Se-ae+Wt,zt.height=we-xe+Ie},Nt=function(Jt){Jt.edges().forEach(function(ae){var Se=Jt.edge(ae),xe=Jt.node(ae.v),we=Jt.node(ae.w),zt,Wt;Se.points?(zt=Se.points[0],Wt=Se.points[Se.points.length-1]):(Se.points=[],zt=we,Wt=xe),Se.points.unshift((0,D.intersectRect)(xe,zt)),Se.points.push((0,D.intersectRect)(we,Wt))})},st=function(Jt){Jt.edges().forEach(function(ae){var Se=Jt.edge(ae);if(Se!=null&&Se.hasOwnProperty("x"))switch((Se.labelpos==="l"||Se.labelpos==="r")&&(Se.width-=Se.labeloffset),Se.labelpos){case"l":Se.x-=Se.width/2+Se.labeloffset;break;case"r":Se.x+=Se.width/2+Se.labeloffset;break}})},yt=function(Jt){Jt.edges().forEach(function(ae){var Se,xe=Jt.edge(ae);xe.reversed&&((Se=xe.points)===null||Se===void 0||Se.reverse())})},kt=function(Jt){Jt.nodes().forEach(function(ae){var Se,xe,we;if(!((Se=Jt.children(ae))===null||Se===void 0)&&Se.length){var zt=Jt.node(ae),Wt=Jt.node(zt.borderTop),Ie=Jt.node(zt.borderBottom),Yt=Jt.node(zt.borderLeft[((xe=zt.borderLeft)===null||xe===void 0?void 0:xe.length)-1]),ie=Jt.node(zt.borderRight[((we=zt.borderRight)===null||we===void 0?void 0:we.length)-1]);zt.width=Math.abs((ie==null?void 0:ie.x)-(Yt==null?void 0:Yt.x))||10,zt.height=Math.abs((Ie==null?void 0:Ie.y)-(Wt==null?void 0:Wt.y))||10,zt.x=((Yt==null?void 0:Yt.x)||0)+zt.width/2,zt.y=((Wt==null?void 0:Wt.y)||0)+zt.height/2}}),Jt.nodes().forEach(function(ae){var Se;((Se=Jt.node(ae))===null||Se===void 0?void 0:Se.dummy)==="border"&&Jt.removeNode(ae)})},ee=function(Jt){Jt.edges().forEach(function(ae){if(ae.v===ae.w){var Se=Jt.node(ae.v);Se.selfEdges||(Se.selfEdges=[]),Se.selfEdges.push({e:ae,label:Jt.edge(ae)}),Jt.removeEdgeObj(ae)}})},$t=function(Jt){var ae=(0,D.buildLayerMatrix)(Jt);ae==null||ae.forEach(function(Se){var xe=0;Se==null||Se.forEach(function(we,zt){var Wt,Ie=Jt.node(we);Ie.order=zt+xe,(Wt=Ie.selfEdges)===null||Wt===void 0||Wt.forEach(function(Yt){(0,D.addDummyNode)(Jt,"selfedge",{width:Yt.label.width,height:Yt.label.height,rank:Ie.rank,order:zt+ ++xe,e:Yt.e,label:Yt.label},"_se")}),delete Ie.selfEdges})})},ge=function(Jt){Jt.nodes().forEach(function(ae){var Se=Jt.node(ae);if(Se.dummy==="selfedge"){var xe=Jt.node(Se.e.v),we=xe.x+xe.width/2,zt=xe.y,Wt=Se.x-we,Ie=xe.height/2;Jt.setEdgeObj(Se.e,Se.label),Jt.removeNode(ae),Se.label.points=[{x:we+2*Wt/3,y:zt-Ie},{x:we+5*Wt/6,y:zt-Ie},{y:zt,x:we+Wt},{x:we+5*Wt/6,y:zt+Ie},{x:we+2*Wt/3,y:zt+Ie}],Se.label.x=Se.x,Se.label.y=Se.y}})},Pe=function(Jt,ae){var Se={};return ae==null||ae.forEach(function(xe){Jt[xe]!==void 0&&(Se[xe]=+Jt[xe])}),Se},tr=function(Jt){Jt===void 0&&(Jt={});var ae={};return Object.keys(Jt).forEach(function(Se){ae[Se.toLowerCase()]=Jt[Se]}),ae};R.default=U},59596:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),Y=function(E){var y,M=(0,B.addDummyNode)(E,"root",{},"_root"),S=P(E),m=Math.max.apply(Math,Object.values(S));Math.abs(m)===1/0&&(m=1);var I=m-1,A=2*I+1;E.graph().nestingRoot=M,E.edges().forEach(function(U){E.edge(U).minlen*=A});var L=N(E)+1;(y=E.children())===null||y===void 0||y.forEach(function(U){k(E,M,A,L,I,S,U)}),E.graph().nodeRankFactor=A},k=function(E,y,M,S,m,I,A){var L=E.children(A);if(!(L!=null&&L.length)){A!==y&&E.setEdge(y,A,{weight:0,minlen:M});return}var U=(0,B.addBorderNode)(E,"_bt"),V=(0,B.addBorderNode)(E,"_bb"),x=E.node(A);E.setParent(U,A),x.borderTop=U,E.setParent(V,A),x.borderBottom=V,L==null||L.forEach(function(d){k(E,y,M,S,m,I,d);var at=E.node(d),W=at.borderTop?at.borderTop:d,j=at.borderBottom?at.borderBottom:d,$=at.borderTop?S:2*S,q=W!==j?1:m-I[A]+1;E.setEdge(U,W,{minlen:q,weight:$,nestingEdge:!0}),E.setEdge(j,V,{minlen:q,weight:$,nestingEdge:!0})}),E.parent(A)||E.setEdge(y,U,{weight:0,minlen:m+I[A]})},P=function(E){var y,M={},S=function(m,I){var A=E.children(m);A==null||A.forEach(function(L){return S(L,I+1)}),M[m]=I};return(y=E.children())===null||y===void 0||y.forEach(function(m){return S(m,1)}),M},N=function(E){var y=0;return E.edges().forEach(function(M){y+=E.edge(M).weight}),y},D=function(E){var y=E.graph();y.nestingRoot&&E.removeNode(y.nestingRoot),delete y.nestingRoot,E.edges().forEach(function(M){var S=E.edge(M);S.nestingEdge&&E.removeEdgeObj(M)})};R.default={run:Y,cleanup:D}},546171:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),Y=function(N){N.graph().dummyChains=[],N.edges().forEach(function(D){return k(N,D)})},k=function(N,D){var E=D.v,y=N.node(E).rank,M=D.w,S=N.node(M).rank,m=D.name,I=N.edge(D),A=I.labelRank;if(S!==y+1){N.removeEdgeObj(D);var L=N.graph(),U,V,x;for(x=0,++y;y<S;++x,++y)I.points=[],V={edgeLabel:I,width:0,height:0,edgeObj:D,rank:y},U=(0,B.addDummyNode)(N,"edge",V,"_d"),y===A&&(V.width=I.width,V.height=I.height,V.dummy="edge-label",V.labelpos=I.labelpos),N.setEdge(E,U,{weight:I.weight},m),x===0&&(L.dummyChains||(L.dummyChains=[]),L.dummyChains.push(U)),E=U;N.setEdge(E,M,{weight:I.weight},m)}},P=function(N){var D;(D=N.graph().dummyChains)===null||D===void 0||D.forEach(function(E){var y=N.node(E),M=y.edgeLabel,S;y.edgeObj&&N.setEdgeObj(y.edgeObj,M);for(var m=E;y.dummy;)S=N.successors(m)[0],N.removeNode(m),M.points.push({x:y.x,y:y.y}),y.dummy==="edge-label"&&(M.x=y.x,M.y=y.y,M.width=y.width,M.height=y.height),m=S,y=N.node(m)})};R.default={run:Y,undo:P}},680314:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(B,Y,k){var P={},N;k==null||k.forEach(function(D){for(var E=B.parent(D),y,M;E;){if(y=B.parent(E),y?(M=P[y],P[y]=E):(M=N,N=E),M&&M!==E){Y.setEdge(M,E);return}E=y}})};R.default=z},989921:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(B,Y){return Y.map(function(k){var P=B.inEdges(k);if(!(P!=null&&P.length))return{v:k};{var N={sum:0,weight:0};return P==null||P.forEach(function(D){var E=B.edge(D),y=B.node(D.v);N.sum+=E.weight*y.order,N.weight+=E.weight}),{v:k,barycenter:N.sum/N.weight,weight:N.weight}}})};R.default=z},277006:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(627652),Y=function(P,N,D){var E=k(P),y=new B.Graph({compound:!0}).setGraph({root:E}).setDefaultNodeLabel(function(M){return P.node(M)});return P.nodes().forEach(function(M){var S,m=P.node(M),I=P.parent(M);(m.rank===N||m.minRank<=N&&N<=m.maxRank)&&(y.setNode(M),y.setParent(M,I||E),(S=P[D](M))===null||S===void 0||S.forEach(function(A){var L=A.v===M?A.w:A.v,U=y.edgeFromArgs(L,M),V=U!==void 0?U.weight:0;y.setEdge(L,M,{weight:P.edge(A).weight+V})}),m.hasOwnProperty("minRank")&&y.setNode(M,{borderLeft:m.borderLeft[N],borderRight:m.borderRight[N]}))}),y},k=function(P){for(var N;P.hasNode(N="_root".concat(Math.random())););return N};R.default=Y},632957:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),Y=function(P,N,D){for(var E=(0,B.zipObject)(D,D.map(function(L,U){return U})),y=N.map(function(L){var U,V=(U=P.outEdges(L))===null||U===void 0?void 0:U.map(function(x){return{pos:E[x.w]||0,weight:P.edge(x).weight}});return V==null?void 0:V.sort(function(x,d){return x.pos-d.pos})}),M=y.flat().filter(function(L){return L!==void 0}),S=1;S<D.length;)S<<=1;var m=2*S-1;S-=1;var I=Array(m).fill(0,0,m),A=0;return M==null||M.forEach(function(L){if(L){var U=L.pos+S;I[U]+=L.weight;for(var V=0;U>0;)U%2&&(V+=I[U+1]),U=U-1>>1,I[U]+=L.weight;A+=L.weight*V}}),A},k=function(P,N){for(var D=0,E=1;E<(N==null?void 0:N.length);E+=1)D+=Y(P,N[E-1],N[E]);return D};R.default=k},819597:function(yr,R,z){"use strict";var B=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(R,"__esModule",{value:!0});var Y=B(z(115697)),k=B(z(632957)),P=B(z(277006)),N=B(z(680314)),D=B(z(99455)),E=z(449784),y=z(627652),M=z(269209),S=function(L,U){for(var V=(0,M.maxRank)(L),x=[],d=[],at=1;at<V+1;at++)x.push(at);for(var at=V-1;at>-1;at--)d.push(at);var W=m(L,x,"inEdges"),j=m(L,d,"outEdges"),$=(0,Y.default)(L);A(L,$);for(var q=Number.POSITIVE_INFINITY,et,at=0,Q=0;Q<4;++at,++Q){I(at%2?W:j,at%4>=2,!1,U),$=(0,M.buildLayerMatrix)(L);var it=(0,k.default)(L,$);it<q&&(Q=0,et=(0,E.clone)($),q=it)}$=(0,Y.default)(L),A(L,$);for(var at=0,Q=0;Q<4;++at,++Q){I(at%2?W:j,at%4>=2,!0,U),$=(0,M.buildLayerMatrix)(L);var it=(0,k.default)(L,$);it<q&&(Q=0,et=(0,E.clone)($),q=it)}A(L,et)},m=function(L,U,V){return U.map(function(x){return(0,P.default)(L,x,V)})},I=function(L,U,V,x){var d=new y.Graph;L==null||L.forEach(function(at){for(var W,j=at.graph().root,$=(0,D.default)(at,j,d,U,V,x),q=0;q<((W=$.vs)===null||W===void 0?void 0:W.length);q++){var et=at.node($.vs[q]);et&&(et.order=q)}(0,N.default)(at,d,$.vs)})},A=function(L,U){U==null||U.forEach(function(V){V==null||V.forEach(function(x,d){L.node(x).order=d})})};R.default=S},724956:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(B,Y){for(var k=B.nodes().filter(function(y){var M;return!(!((M=B.children(y))===null||M===void 0)&&M.length)}),P=k.map(function(y){return B.node(y).rank}),N=Math.max.apply(Math,P),D=[],E=0;E<N+1;E++)D[E]=[];Y==null||Y.forEach(function(y){var M=B.node(y);!M||M!=null&&M.dummy||isNaN(M.rank)||(M.fixorder=D[M.rank].length,D[M.rank].push(y))})};R.default=z},115697:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(772549),Y=function(k){for(var P={},N=k.nodes().filter(function(L){var U;return!(!((U=k.children(L))===null||U===void 0)&&U.length)}),D=N.map(function(L){return k.node(L).rank}),E=(0,B.max)(D),y=[],M=0;M<E+1;M++)y.push([]);var S=function(L){var U;if(!P.hasOwnProperty(L)){P[L]=!0;var V=k.node(L);isNaN(V.rank)||y[V.rank].push(L),(U=k.successors(L))===null||U===void 0||U.forEach(function(x){return S(x)})}},m=N.sort(function(L,U){return k.node(L).rank-k.node(U).rank}),I=m.filter(function(L){return k.node(L).fixorder!==void 0}),A=I.sort(function(L,U){return k.node(L).fixorder-k.node(U).fixorder});return A==null||A.forEach(function(L){isNaN(k.node(L).rank)||y[k.node(L).rank].push(L),P[L]=!0}),m==null||m.forEach(S),y};R.default=Y},707043:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(k,P){var N,D,E,y={};k==null||k.forEach(function(S,m){y[S.v]={i:m,indegree:0,in:[],out:[],vs:[S.v]};var I=y[S.v];S.barycenter!==void 0&&(I.barycenter=S.barycenter,I.weight=S.weight)}),(N=P.edges())===null||N===void 0||N.forEach(function(S){var m=y[S.v],I=y[S.w];m!==void 0&&I!==void 0&&(I.indegree++,m.out.push(y[S.w]))});var M=(E=(D=Object.values(y)).filter)===null||E===void 0?void 0:E.call(D,function(S){return!S.indegree});return B(M)},B=function(k){for(var P,N,D=[],E=function(I){return function(A){A.merged||(A.barycenter===void 0||I.barycenter===void 0||A.barycenter>=I.barycenter)&&Y(I,A)}},y=function(I){return function(A){A.in.push(I),--A.indegree===0&&k.push(A)}},M=function(){var I=k.pop();D.push(I),(P=I.in.reverse())===null||P===void 0||P.forEach(function(A){return E(I)(A)}),(N=I.out)===null||N===void 0||N.forEach(function(A){return y(I)(A)})};k!=null&&k.length;)M();var S=D.filter(function(I){return!I.merged}),m=["vs","i","barycenter","weight"];return S.map(function(I){var A={};return m==null||m.forEach(function(L){I[L]!==void 0&&(A[L]=I[L])}),A})},Y=function(k,P){var N,D=0,E=0;k.weight&&(D+=k.barycenter*k.weight,E+=k.weight),P.weight&&(D+=P.barycenter*P.weight,E+=P.weight),k.vs=(N=P.vs)===null||N===void 0?void 0:N.concat(k.vs),k.barycenter=D/E,k.weight=E,k.i=Math.min(P.i,k.i),P.merged=!0};R.default=z},99455:function(yr,R,z){"use strict";var B=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(R,"__esModule",{value:!0});var Y=B(z(989921)),k=B(z(707043)),P=B(z(421498)),N=function(y,M,S,m,I,A){var L,U,V,x,d=y.children(M),at=y.node(M),W=at?at.borderLeft:void 0,j=at?at.borderRight:void 0,$={};W&&(d=d==null?void 0:d.filter(function(dt){return dt!==W&&dt!==j}));var q=(0,Y.default)(y,d||[]);q==null||q.forEach(function(dt){var Ot;if(!((Ot=y.children(dt.v))===null||Ot===void 0)&&Ot.length){var It=N(y,dt.v,S,m,A);$[dt.v]=It,It.hasOwnProperty("barycenter")&&E(dt,It)}});var et=(0,k.default)(q,S);D(et,$),(L=et.filter(function(dt){return dt.vs.length>0}))===null||L===void 0||L.forEach(function(dt){var Ot=y.node(dt.vs[0]);Ot&&(dt.fixorder=Ot.fixorder,dt.order=Ot.order)});var Q=(0,P.default)(et,m,I,A);if(W&&(Q.vs=[W,Q.vs,j].flat(),!((U=y.predecessors(W))===null||U===void 0)&&U.length)){var it=y.node(((V=y.predecessors(W))===null||V===void 0?void 0:V[0])||""),ht=y.node(((x=y.predecessors(j))===null||x===void 0?void 0:x[0])||"");Q.hasOwnProperty("barycenter")||(Q.barycenter=0,Q.weight=0),Q.barycenter=(Q.barycenter*Q.weight+it.order+ht.order)/(Q.weight+2),Q.weight+=2}return Q},D=function(y,M){y==null||y.forEach(function(S){var m,I=(m=S.vs)===null||m===void 0?void 0:m.map(function(A){return M[A]?M[A].vs:A});S.vs=I.flat()})},E=function(y,M){y.barycenter!==void 0?(y.barycenter=(y.barycenter*y.weight+M.barycenter*M.weight)/(y.weight+M.weight),y.weight+=M.weight):(y.barycenter=M.barycenter,y.weight=M.weight)};R.default=N},421498:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),Y=function(N,D,E,y){var M=(0,B.partition)(N,function(x){var d=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return y?!d&&x.hasOwnProperty("barycenter"):d||x.hasOwnProperty("barycenter")}),S=M.lhs,m=M.rhs.sort(function(x,d){return-x.i- -d.i}),I=[],A=0,L=0,U=0;S==null||S.sort(P(!!D,!!E)),U=k(I,m,U),S==null||S.forEach(function(x){var d;U+=(d=x.vs)===null||d===void 0?void 0:d.length,I.push(x.vs),A+=x.barycenter*x.weight,L+=x.weight,U=k(I,m,U)});var V={vs:I.flat()};return L&&(V.barycenter=A/L,V.weight=L),V},k=function(N,D,E){for(var y=E,M;D.length&&(M=D[D.length-1]).i<=y;)D.pop(),N==null||N.push(M.vs),y++;return y},P=function(N,D){return function(E,y){if(E.fixorder!==void 0&&y.fixorder!==void 0)return E.fixorder-y.fixorder;if(E.barycenter<y.barycenter)return-1;if(E.barycenter>y.barycenter)return 1;if(D&&E.order!==void 0&&y.order!==void 0){if(E.order<y.order)return-1;if(E.order>y.order)return 1}return N?y.i-E.i:E.i-y.i}};R.default=Y},933562:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(k){var P,N={},D=0,E=function(y){var M,S=D;(M=k.children(y))===null||M===void 0||M.forEach(E),N[y]={low:S,lim:D++}};return(P=k.children())===null||P===void 0||P.forEach(E),N},B=function(k,P,N,D){var E=[],y=[],M=Math.min(P[N].low,P[D].low),S=Math.max(P[N].lim,P[D].lim),m,I;m=N;do m=k.parent(m),E.push(m);while(m&&(P[m].low>M||S>P[m].lim));for(I=m,m=D;m&&m!==I;)y.push(m),m=k.parent(m);return{lca:I,path:E.concat(y.reverse())}},Y=function(k){var P,N=z(k);(P=k.graph().dummyChains)===null||P===void 0||P.forEach(function(D){var E,y,M=D,S=k.node(M),m=S.edgeObj;if(m)for(var I=B(k,N,m.v,m.w),A=I.path,L=I.lca,U=0,V=A[U],x=!0;M!==m.w;){if(S=k.node(M),x){for(;V!==L&&((E=k.node(V))===null||E===void 0?void 0:E.maxRank)<S.rank;)U++,V=A[U];V===L&&(x=!1)}if(!x){for(;U<A.length-1&&((y=k.node(A[U+1]))===null||y===void 0?void 0:y.minRank)<=S.rank;)U++;V=A[U]}k.setParent(M,V),M=k.successors(M)[0]}})};R.default=Y},371963:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var W=function(j,$){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,et){q.__proto__=et}||function(q,et){for(var Q in et)Object.prototype.hasOwnProperty.call(et,Q)&&(q[Q]=et[Q])},W(j,$)};return function(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");W(j,$);function q(){this.constructor=j}j.prototype=$===null?Object.create($):(q.prototype=$.prototype,new q)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.width=R.sep=R.positionX=R.balance=R.alignCoordinates=R.findSmallestWidthAlignment=R.buildBlockGraph=R.horizontalCompaction=R.verticalAlignment=R.hasConflict=R.addConflict=R.findOtherInnerSegmentNode=R.findType2Conflicts=R.findType1Conflicts=void 0;var Y=z(199905),k=z(772549),P=z(269209),N=function(W){B(j,W);function j(){return W!==null&&W.apply(this,arguments)||this}return j}(Y.Graph),D=function(W,j){var $={},q=function(et,Q){var it=0,ht=0,dt=et.length,Ot=Q==null?void 0:Q[(Q==null?void 0:Q.length)-1];return Q==null||Q.forEach(function(It,Kt){var Ft,Nt=(0,R.findOtherInnerSegmentNode)(W,It),st=Nt?W.node(Nt).order:dt;(Nt||It===Ot)&&((Ft=Q.slice(ht,Kt+1))===null||Ft===void 0||Ft.forEach(function(yt){var kt;(kt=W.predecessors(yt))===null||kt===void 0||kt.forEach(function(ee){var $t,ge=W.node(ee),Pe=ge.order;(Pe<it||st<Pe)&&!(ge.dummy&&(!(($t=W.node(yt))===null||$t===void 0)&&$t.dummy))&&(0,R.addConflict)($,ee,yt)})}),ht=Kt+1,it=st)}),Q};return j!=null&&j.length&&j.reduce(q),$};R.findType1Conflicts=D;var E=function(W,j){var $={};function q(ht,dt,Ot,It,Kt){for(var Ft,Nt,st,yt=dt;yt<Ot;yt++)st=ht[yt],!((Ft=W.node(st))===null||Ft===void 0)&&Ft.dummy&&((Nt=W.predecessors(st))===null||Nt===void 0||Nt.forEach(function(kt){var ee=W.node(kt);ee.dummy&&(ee.order<It||ee.order>Kt)&&(0,R.addConflict)($,kt,st)}))}function et(ht){return JSON.stringify(ht.slice(1))}function Q(ht,dt){var Ot=et(ht);dt.get(Ot)||(q.apply(void 0,ht),dt.set(Ot,!0))}var it=function(ht,dt){var Ot=-1,It,Kt=0,Ft=new Map;return dt==null||dt.forEach(function(Nt,st){var yt;if(((yt=W.node(Nt))===null||yt===void 0?void 0:yt.dummy)==="border"){var kt=W.predecessors(Nt)||[];kt.length&&(It=W.node(kt[0]).order,Q([dt,Kt,st,Ot,It],Ft),Kt=st,Ot=It)}Q([dt,Kt,dt.length,It,ht.length],Ft)}),dt};return j!=null&&j.length&&j.reduce(it),$};R.findType2Conflicts=E;var y=function(W,j){var $,q;if(!(($=W.node(j))===null||$===void 0)&&$.dummy)return(q=W.predecessors(j))===null||q===void 0?void 0:q.find(function(et){return W.node(et).dummy})};R.findOtherInnerSegmentNode=y;var M=function(W,j,$){var q=j,et=$;if(q>et){var Q=q;q=et,et=Q}var it=W[q];it||(W[q]=it={}),it[et]=!0};R.addConflict=M;var S=function(W,j,$){var q=j,et=$;if(q>et){var Q=j;q=et,et=Q}return!!W[q]};R.hasConflict=S;var m=function(W,j,$,q){var et={},Q={},it={};return j==null||j.forEach(function(ht){ht==null||ht.forEach(function(dt,Ot){et[dt]=dt,Q[dt]=dt,it[dt]=Ot})}),j==null||j.forEach(function(ht){var dt=-1;ht==null||ht.forEach(function(Ot){var It=q(Ot);if(It.length){It=It.sort(function(yt,kt){return it[yt]-it[kt]});for(var Kt=(It.length-1)/2,Ft=Math.floor(Kt),Nt=Math.ceil(Kt);Ft<=Nt;++Ft){var st=It[Ft];Q[Ot]===Ot&&dt<it[st]&&!(0,R.hasConflict)($,Ot,st)&&(Q[st]=Ot,Q[Ot]=et[Ot]=et[st],dt=it[st])}}})}),{root:et,align:Q}};R.verticalAlignment=m;var I=function(W,j,$,q,et){var Q,it={},ht=(0,R.buildBlockGraph)(W,j,$,et),dt=et?"borderLeft":"borderRight",Ot=function(Ft,Nt){for(var st=ht.nodes(),yt=st.pop(),kt={};yt;)kt[yt]?Ft(yt):(kt[yt]=!0,st.push(yt),st=st.concat(Nt(yt))),yt=st.pop()},It=function(Ft){it[Ft]=(ht.inEdges(Ft)||[]).reduce(function(Nt,st){return Math.max(Nt,(it[st.v]||0)+ht.edge(st))},0)},Kt=function(Ft){var Nt=(ht.outEdges(Ft)||[]).reduce(function(yt,kt){return Math.min(yt,(it[kt.w]||0)-ht.edge(kt))},Number.POSITIVE_INFINITY),st=W.node(Ft);Nt!==Number.POSITIVE_INFINITY&&st.borderType!==dt&&(it[Ft]=Math.max(it[Ft],Nt))};return Ot(It,ht.predecessors.bind(ht)),Ot(Kt,ht.successors.bind(ht)),(Q=Object.values(q))===null||Q===void 0||Q.forEach(function(Ft){it[Ft]=it[$[Ft]]}),it};R.horizontalCompaction=I;var A=function(W,j,$,q){var et=new N,Q=W.graph(),it=(0,R.sep)(Q.nodesep,Q.edgesep,q);return j==null||j.forEach(function(ht){var dt;ht==null||ht.forEach(function(Ot){var It=$[Ot];if(et.setNode(It),dt){var Kt=$[dt],Ft=et.edgeFromArgs(Kt,It);et.setEdge(Kt,It,Math.max(it(W,Ot,dt),Ft||0))}dt=Ot})}),et};R.buildBlockGraph=A;var L=function(W,j){return(0,P.minBy)(Object.values(j),function($){var q,et=Number.NEGATIVE_INFINITY,Q=Number.POSITIVE_INFINITY;return(q=Object.keys($))===null||q===void 0||q.forEach(function(it){var ht=$[it],dt=(0,R.width)(W,it)/2;et=Math.max(ht+dt,et),Q=Math.min(ht-dt,Q)}),et-Q})};R.findSmallestWidthAlignment=L;function U(W,j){var $=Object.values(j),q=(0,k.min)($),et=(0,k.max)($);["u","d"].forEach(function(Q){["l","r"].forEach(function(it){var ht=Q+it,dt=W[ht],Ot;if(dt!==j){var It=Object.values(dt);Ot=it==="l"?q-(0,k.min)(It):et-(0,k.max)(It),Ot&&(W[ht]={},Object.keys(dt).forEach(function(Kt){W[ht][Kt]=dt[Kt]+Ot}))}})})}R.alignCoordinates=U;var V=function(W,j){var $={};return Object.keys(W.ul).forEach(function(q){if(j)$[q]=W[j.toLowerCase()][q];else{var et=Object.values(W).map(function(Q){return Q[q]});$[q]=(et[0]+et[1])/2}}),$};R.balance=V;var x=function(W){var j=(0,P.buildLayerMatrix)(W),$=Object.assign((0,R.findType1Conflicts)(W,j),(0,R.findType2Conflicts)(W,j)),q={},et;["u","d"].forEach(function(it){et=it==="u"?j:Object.values(j).reverse(),["l","r"].forEach(function(ht){ht==="r"&&(et=et.map(function(Kt){return Object.values(Kt).reverse()}));var dt=(it==="u"?W.predecessors:W.successors).bind(W),Ot=(0,R.verticalAlignment)(W,et,$,dt),It=(0,R.horizontalCompaction)(W,et,Ot.root,Ot.align,ht==="r");ht==="r"&&Object.keys(It).forEach(function(Kt){It[Kt]=-It[Kt]}),q[it+ht]=It})});var Q=(0,R.findSmallestWidthAlignment)(W,q);return U(q,Q),(0,R.balance)(q,W.graph().align)};R.positionX=x;var d=function(W,j,$){return function(q,et,Q){var it=q.node(et),ht=q.node(Q),dt=0,Ot;if(dt+=it.width/2,it.hasOwnProperty("labelpos"))switch((it.labelpos||"").toLowerCase()){case"l":Ot=-it.width/2;break;case"r":Ot=it.width/2;break}if(Ot&&(dt+=$?Ot:-Ot),Ot=0,dt+=(it.dummy?j:W)/2,dt+=(ht.dummy?j:W)/2,dt+=ht.width/2,ht.labelpos)switch((ht.labelpos||"").toLowerCase()){case"l":Ot=ht.width/2;break;case"r":Ot=-ht.width/2;break}return Ot&&(dt+=$?Ot:-Ot),Ot=0,dt}};R.sep=d;var at=function(W,j){return W.node(j).width||0};R.width=at},100095:function(yr,R,z){"use strict";var B=this&&this.__spreadArray||function(E,y,M){if(M||arguments.length===2)for(var S=0,m=y.length,I;S<m;S++)(I||!(S in y))&&(I||(I=Array.prototype.slice.call(y,0,S)),I[S]=y[S]);return E.concat(I||Array.prototype.slice.call(y))};Object.defineProperty(R,"__esModule",{value:!0});var Y=z(269209),k=z(371963),P=function(E){var y=(0,Y.buildLayerMatrix)(E),M=E.graph().ranksep,S=0;y==null||y.forEach(function(m){var I=m.map(function(L){return E.node(L).height}),A=Math.max.apply(Math,B(B([],I,!1),[0],!1));m==null||m.forEach(function(L){E.node(L).y=S+A/2}),S+=A+M})},N=function(E){var y=(0,Y.buildLayerMatrix)(E),M=Object.assign((0,k.findType1Conflicts)(E,y),(0,k.findType2Conflicts)(E,y)),S={},m=[];["u","d"].forEach(function(A){m=A==="u"?y:Object.values(y).reverse(),["l","r"].forEach(function(L){L==="r"&&(m=m.map(function(d){return Object.values(d).reverse()}));var U=(A==="u"?E.predecessors:E.successors).bind(E),V=(0,k.verticalAlignment)(E,m,M,U),x=(0,k.horizontalCompaction)(E,m,V.root,V.align,L==="r");L==="r"&&Object.keys(x).forEach(function(d){return x[d]=-x[d]}),S[A+L]=x})});var I=(0,k.findSmallestWidthAlignment)(E,S);return I&&(0,k.alignCoordinates)(S,I),(0,k.balance)(S,E.graph().align)},D=function(E){var y,M=(0,Y.asNonCompoundGraph)(E);P(M);var S=N(M);(y=Object.keys(S))===null||y===void 0||y.forEach(function(m){M.node(m).x=S[m]})};R.default=D},813614:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.feasibleTreeWithLayer=R.feasibleTree=void 0;var B=z(337323),Y=z(269209),k=z(627652),P=function(S){var m=new k.Graph({directed:!1}),I=S.nodes()[0],A=S.nodeCount();m.setNode(I,{});for(var L,U;N(m,S)<A;)L=y(m,S),U=m.hasNode(L.v)?(0,B.slack)(S,L):-(0,B.slack)(S,L),M(m,S,U);return m};R.feasibleTree=P;var N=function(S,m){var I=function(A){m.nodeEdges(A).forEach(function(L){var U=L.v,V=A===U?L.w:U;!S.hasNode(V)&&!(0,B.slack)(m,L)&&(S.setNode(V,{}),S.setEdge(A,V,{}),I(V))})};return S.nodes().forEach(I),S.nodeCount()},D=function(S){var m=new k.Graph({directed:!1}),I=S.nodes()[0],A=S.nodes().filter(function(V){return!!S.node(V)}).length;m.setNode(I,{});for(var L,U;E(m,S)<A;)L=y(m,S),U=m.hasNode(L.v)?(0,B.slack)(S,L):-(0,B.slack)(S,L),M(m,S,U);return m};R.feasibleTreeWithLayer=D;var E=function(S,m){var I=function(A){var L;(L=m.nodeEdges(A))===null||L===void 0||L.forEach(function(U){var V=U.v,x=A===V?U.w:V;!S.hasNode(x)&&(m.node(x).layer!==void 0||!(0,B.slack)(m,U))&&(S.setNode(x,{}),S.setEdge(A,x,{}),I(x))})};return S.nodes().forEach(I),S.nodeCount()},y=function(S,m){return(0,Y.minBy)(m.edges(),function(I){return S.hasNode(I.v)!==S.hasNode(I.w)?(0,B.slack)(m,I):1/0})},M=function(S,m,I){S.nodes().forEach(function(A){m.node(A).rank||(m.node(A).rank=0),m.node(A).rank+=I})};R.default={feasibleTree:P,feasibleTreeWithLayer:D}},576827:function(yr,R,z){"use strict";var B=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(R,"__esModule",{value:!0});var Y=z(337323),k=z(813614),P=B(z(432253)),N=function(M){switch(M.graph().ranker){case"network-simplex":y(M);break;case"tight-tree":E(M);break;case"longest-path":D(M);break;default:E(M)}},D=Y.longestPath,E=function(M){(0,Y.longestPathWithLayer)(M),(0,k.feasibleTreeWithLayer)(M)},y=function(M){(0,P.default)(M)};R.default=N},432253:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.exchangeEdges=R.enterEdge=R.leaveEdge=R.initLowLimValues=R.calcCutValue=R.initCutValues=void 0;var B=z(813614),Y=z(337323),k=z(269209),P=z(199905),N=P.algorithm.preorder,D=P.algorithm.postorder,E=function(at){var W=(0,k.simplify)(at);(0,Y.longestPath)(W);var j=(0,B.feasibleTree)(W);(0,R.initLowLimValues)(j),(0,R.initCutValues)(j,W);for(var $,q;$=(0,R.leaveEdge)(j);)q=(0,R.enterEdge)(j,W,$),(0,R.exchangeEdges)(j,W,$,q)},y=function(at,W){var j=D(at,at.nodes());j=j==null?void 0:j.slice(0,(j==null?void 0:j.length)-1),j==null||j.forEach(function($){M(at,W,$)})};R.initCutValues=y;var M=function(at,W,j){var $=at.node(j),q=$.parent;at.edgeFromArgs(j,q).cutvalue=(0,R.calcCutValue)(at,W,j)},S=function(at,W,j){var $,q=at.node(j),et=q.parent,Q=!0,it=W.edgeFromArgs(j,et),ht=0;return it||(Q=!1,it=W.edgeFromArgs(et,j)),ht=it.weight,($=W.nodeEdges(j))===null||$===void 0||$.forEach(function(dt){var Ot=dt.v===j,It=Ot?dt.w:dt.v;if(It!==et){var Kt=Ot===Q,Ft=W.edge(dt).weight;if(ht+=Kt?Ft:-Ft,x(at,j,It)){var Nt=at.edgeFromArgs(j,It).cutvalue;ht+=Kt?-Nt:Nt}}}),ht};R.calcCutValue=S;var m=function(at,W){W===void 0&&(W=at.nodes()[0]),I(at,{},1,W)};R.initLowLimValues=m;var I=function(at,W,j,$,q){var et,Q=j,it=j,ht=at.node($);return W[$]=!0,(et=at.neighbors($))===null||et===void 0||et.forEach(function(dt){W[dt]||(it=I(at,W,it,dt,$))}),ht.low=Q,ht.lim=it++,q?ht.parent=q:delete ht.parent,it},A=function(at){return at.edges().find(function(W){return at.edge(W).cutvalue<0})};R.leaveEdge=A;var L=function(at,W,j){var $=j.v,q=j.w;W.hasEdge($,q)||($=j.w,q=j.v);var et=at.node($),Q=at.node(q),it=et,ht=!1;et.lim>Q.lim&&(it=Q,ht=!0);var dt=W.edges().filter(function(Ot){return ht===d(at,at.node(Ot.v),it)&&ht!==d(at,at.node(Ot.w),it)});return(0,k.minBy)(dt,function(Ot){return(0,Y.slack)(W,Ot)})};R.enterEdge=L;var U=function(at,W,j,$){var q=j.v,et=j.w;at.removeEdge(q,et),at.setEdge($.v,$.w,{}),(0,R.initLowLimValues)(at),(0,R.initCutValues)(at,W),V(at,W)};R.exchangeEdges=U;var V=function(at,W){var j=at.nodes().find(function(q){var et;return!(!((et=W.node(q))===null||et===void 0)&&et.parent)}),$=N(at,j);$=$==null?void 0:$.slice(1),$==null||$.forEach(function(q){var et=at.node(q).parent,Q=W.edgeFromArgs(q,et),it=!1;Q||(Q=W.edgeFromArgs(et,q),it=!0),W.node(q).rank=W.node(et).rank+(it?Q.minlen:-Q.minlen)})},x=function(at,W,j){return at.hasEdge(W,j)},d=function(at,W,j){return j.low<=W.lim&&W.lim<=j.lim};R.default=E},337323:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.slack=R.longestPathWithLayer=R.longestPath=void 0;var z=function(k){var P,N={},D=function(E){var y,M=k.node(E);if(!M)return 0;if(N[E])return M.rank;N[E]=!0;var S;return(y=k.outEdges(E))===null||y===void 0||y.forEach(function(m){var I=D(m.w),A=k.edge(m).minlen,L=I-A;L&&(S===void 0||L<S)&&(S=L)}),S||(S=0),M.rank=S,S};(P=k.sources())===null||P===void 0||P.forEach(function(E){return D(E)})};R.longestPath=z;var B=function(k){var P,N={},D,E=function(S){var m,I=k.node(S);if(!I)return 0;if(N[S])return I.rank;N[S]=!0;var A;return(m=k.outEdges(S))===null||m===void 0||m.forEach(function(L){var U=E(L.w),V=k.edge(L).minlen,x=U-V;x&&(A===void 0||x<A)&&(A=x)}),A||(A=0),(D===void 0||A<D)&&(D=A),I.rank=A,A};(P=k.sources())===null||P===void 0||P.forEach(function(S){k.node(S)&&E(S)}),D===void 0&&(D=0);var y={},M=function(S,m){var I,A=k.node(S),L=isNaN(A.layer)?m:A.layer;(A.rank===void 0||A.rank<L)&&(A.rank=L),!y[S]&&(y[S]=!0,(I=k.outEdges(S))===null||I===void 0||I.map(function(U){M(U.w,L+k.edge(U).minlen)}))};k.nodes().forEach(function(S){var m=k.node(S);m&&(isNaN(m.layer)?m.rank-=D:M(S,m.layer))})};R.longestPathWithLayer=B;var Y=function(k,P){return k.node(P.w).rank-k.node(P.v).rank-k.edge(P).minlen};R.slack=Y,R.default={longestPath:z,longestPathWithLayer:B,slack:Y}},269209:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.minBy=R.notime=R.time=R.partition=R.maxRank=R.addBorderNode=R.removeEmptyRanks=R.normalizeRanks=R.buildLayerMatrix=R.intersectRect=R.predecessorWeights=R.successorWeights=R.zipObject=R.asNonCompoundGraph=R.simplify=R.addDummyNode=void 0;var B=z(449784),Y=z(627652),k=function(W,j){return Number(W)-Number(j)},P=function(W,j,$,q){var et;do et="".concat(q).concat(Math.random());while(W.hasNode(et));return $.dummy=j,W.setNode(et,$),et};R.addDummyNode=P;var N=function(W){var j=new Y.Graph().setGraph(W.graph());return W.nodes().forEach(function($){j.setNode($,W.node($))}),W.edges().forEach(function($){var q=j.edgeFromArgs($.v,$.w)||{weight:0,minlen:1},et=W.edge($);j.setEdge($.v,$.w,{weight:q.weight+et.weight,minlen:Math.max(q.minlen,et.minlen)})}),j};R.simplify=N;var D=function(W){var j=new Y.Graph({multigraph:W.isMultigraph()}).setGraph(W.graph());return W.nodes().forEach(function($){var q;!((q=W.children($))===null||q===void 0)&&q.length||j.setNode($,W.node($))}),W.edges().forEach(function($){j.setEdgeObj($,W.edge($))}),j};R.asNonCompoundGraph=D;var E=function(W,j){return W==null?void 0:W.reduce(function($,q,et){return $[q]=j[et],$},{})};R.zipObject=E;var y=function(W){var j={};return W.nodes().forEach(function($){var q,et={};(q=W.outEdges($))===null||q===void 0||q.forEach(function(Q){var it;et[Q.w]=(et[Q.w]||0)+(((it=W.edge(Q))===null||it===void 0?void 0:it.weight)||0)}),j[$]=et}),j};R.successorWeights=y;var M=function(W){var j=W.nodes(),$=j.map(function(q){var et,Q={};return(et=W.inEdges(q))===null||et===void 0||et.forEach(function(it){Q[it.v]=(Q[it.v]||0)+W.edge(it).weight}),Q});return(0,R.zipObject)(j,$)};R.predecessorWeights=M;var S=function(W,j){var $=Number(W.x),q=Number(W.y),et=Number(j.x)-$,Q=Number(j.y)-q,it=Number(W.width)/2,ht=Number(W.height)/2;if(!et&&!Q)return{x:0,y:0};var dt,Ot;return Math.abs(Q)*it>Math.abs(et)*ht?(Q<0&&(ht=-ht),dt=ht*et/Q,Ot=ht):(et<0&&(it=-it),dt=it,Ot=it*Q/et),{x:$+dt,y:q+Ot}};R.intersectRect=S;var m=function(W){for(var j=[],$=(0,R.maxRank)(W)+1,q=0;q<$;q++)j.push([]);W.nodes().forEach(function(et){var Q=W.node(et);if(Q){var it=Q.rank;it!==void 0&&j[it]&&j[it].push(et)}});for(var q=0;q<$;q++)j[q]=j[q].sort(function(Q,it){var ht,dt;return k((ht=W.node(Q))===null||ht===void 0?void 0:ht.order,(dt=W.node(it))===null||dt===void 0?void 0:dt.order)});return j};R.buildLayerMatrix=m;var I=function(W){var j=W.nodes().filter(function(q){var et;return((et=W.node(q))===null||et===void 0?void 0:et.rank)!==void 0}).map(function(q){return W.node(q).rank}),$=Math.min.apply(Math,j);W.nodes().forEach(function(q){var et=W.node(q);et.hasOwnProperty("rank")&&$!==1/0&&(et.rank-=$)})};R.normalizeRanks=I;var A=function(W){var j=W.nodes(),$=j.filter(function(Ot){var It;return((It=W.node(Ot))===null||It===void 0?void 0:It.rank)!==void 0}).map(function(Ot){return W.node(Ot).rank}),q=Math.min.apply(Math,$),et=[];j.forEach(function(Ot){var It,Kt=(((It=W.node(Ot))===null||It===void 0?void 0:It.rank)||0)-q;et[Kt]||(et[Kt]=[]),et[Kt].push(Ot)});for(var Q=0,it=W.graph().nodeRankFactor||0,ht=0;ht<et.length;ht++){var dt=et[ht];dt===void 0?ht%it!==0&&(Q-=1):Q&&(dt==null||dt.forEach(function(Ot){var It=W.node(Ot);It&&(It.rank=It.rank||0,It.rank+=Q)}))}};R.removeEmptyRanks=A;var L=function(W,j,$,q){var et={width:0,height:0};return(0,B.isNumber)($)&&(0,B.isNumber)(q)&&(et.rank=$,et.order=q),(0,R.addDummyNode)(W,"border",et,j)};R.addBorderNode=L;var U=function(W){var j;return W.nodes().forEach(function($){var q,et=(q=W.node($))===null||q===void 0?void 0:q.rank;et!==void 0&&(j===void 0||et>j)&&(j=et)}),j||(j=0),j};R.maxRank=U;var V=function(W,j){var $={lhs:[],rhs:[]};return W==null||W.forEach(function(q){j(q)?$.lhs.push(q):$.rhs.push(q)}),$};R.partition=V;var x=function(W,j){var $=Date.now();try{return j()}finally{console.log("".concat(W," time: ").concat(Date.now()-$,"ms"))}};R.time=x;var d=function(W,j){return j()};R.notime=d;var at=function(W,j){return W.reduce(function($,q){var et=j($),Q=j(q);return et>Q?q:$})};R.minBy=at},934015:function(yr,R,z){"use strict";var B=this&&this.__assign||function(){return B=Object.assign||function(m){for(var I,A=1,L=arguments.length;A<L;A++){I=arguments[A];for(var U in I)Object.prototype.hasOwnProperty.call(I,U)&&(m[U]=I[U])}return m},B.apply(this,arguments)},Y=this&&this.__createBinding||(Object.create?function(m,I,A,L){L===void 0&&(L=A);var U=Object.getOwnPropertyDescriptor(I,A);(!U||("get"in U?!I.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return I[A]}}),Object.defineProperty(m,L,U)}:function(m,I,A,L){L===void 0&&(L=A),m[L]=I[A]}),k=this&&this.__setModuleDefault||(Object.create?function(m,I){Object.defineProperty(m,"default",{enumerable:!0,value:I})}:function(m,I){m.default=I}),P=this&&this.__importStar||function(m){if(m&&m.__esModule)return m;var I={};if(m!=null)for(var A in m)A!=="default"&&Object.prototype.hasOwnProperty.call(m,A)&&Y(I,m,A);return k(I,m),I},N=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(R,"__esModule",{value:!0});var D=P(z(774948)),E=N(z(788221)),y=N(z(87064)),M=z(920171);function S(m,I){var A=m.nodes,L=m.edges,U=I.width,V=I.height;if(!(A!=null&&A.length))return Promise.resolve();var x=[];A.forEach(function(Q){var it=L.filter(function(dt){return dt.source===Q.id||dt.target===Q.id});if(it.length>1){var ht=B({},Q);delete ht.size,x.push(ht)}});var d=[];L.forEach(function(Q){var it=x.find(function(dt){return dt.id===Q.source}),ht=x.find(function(dt){return dt.id===Q.target});it&&ht&&d.push(Q)});var at=new M.DagreLayout({type:"dagre",ranksep:I.nodeMinGap,nodesep:I.nodeMinGap}),W=at.layout({nodes:x,edges:d}).nodes;A.forEach(function(Q){var it=(W||[]).find(function(ht){return ht.id===Q.id});Q.x=(it==null?void 0:it.x)||U/2,Q.y=(it==null?void 0:it.y)||V/2});var j=JSON.parse(JSON.stringify(A)),$=JSON.parse(JSON.stringify(L)),q=D.forceSimulation().nodes(j).force("link",D.forceLink($).id(function(Q){return Q.id}).distance(function(Q){var it=d.find(function(ht){return ht.source===Q.source&&ht.target===Q.target});return it?30:20})).force("charge",D.forceManyBody()).force("center",D.forceCenter(U/2,V/2)).force("x",D.forceX(U/2)).force("y",D.forceY(V/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),et=new Promise(function(Q){q.on("end",function(){A.forEach(function(Ft){var Nt=j.find(function(st){return st.id===Ft.id});Nt&&(Ft.x=Nt.x,Ft.y=Nt.y)});var it=Math.min.apply(Math,A.map(function(Ft){return Ft.x})),ht=Math.max.apply(Math,A.map(function(Ft){return Ft.x})),dt=Math.min.apply(Math,A.map(function(Ft){return Ft.y})),Ot=Math.max.apply(Math,A.map(function(Ft){return Ft.y})),It=U/(ht-it),Kt=V/(Ot-dt);A.forEach(function(Ft){Ft.x!==void 0&&It<1&&(Ft.x=(Ft.x-it)*It),Ft.y!==void 0&&Kt<1&&(Ft.y=(Ft.y-dt)*Kt)}),A.forEach(function(Ft){Ft.sizeTemp=Ft.size,Ft.size=[10,10]}),(0,y.default)(A,L),A.forEach(function(Ft){Ft.size=Ft.sizeTemp||[],delete Ft.sizeTemp}),(0,E.default)({nodes:A,edges:L},I),Q()})});return et}R.default=S},788221:function(yr,R,z){"use strict";var B=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(R,"__esModule",{value:!0});var Y=B(z(28611));function k(P,N){if(!P.nodes||P.nodes.length===0)return P;var D=N.width,E=N.height,y=N.nodeMinGap,M=1e4,S=1e4;P.nodes.forEach(function($){var q=$.size[0]||50,et=$.size[1]||50;M=Math.min(q,M),S=Math.min(et,S)});var m=new Y.default;m.init(D,E,{CELL_H:S,CELL_W:M}),P.nodes.forEach(function($){var q=m.occupyNearest($);q&&(q.node={id:$.id,size:$.size},$.x=q.x,$.y=q.y,$.dx=q.dx,$.dy=q.dy)});for(var I=0;I<P.nodes.length;I++){var A=P.nodes[I],L=m.findGridByNodeId(A.id);if(!L)throw new Error("can not find node cell");var U=L.column,V=L.row;if(A.size[0]+y>M){for(var x=Math.ceil((A.size[0]+y)/M)-1,d=x,at=0;at<x;at++){var W=m.additionColumn.indexOf(U+at+1)>-1;if(W&&!m.cells[U+at+1][V].node)d--;else break}m.insertColumn(U,d)}if(A.size[1]+y>S){for(var x=Math.ceil((A.size[1]+y)/S)-1,d=x,at=0;at<x;at++){var W=m.additionRow.indexOf(V+at+1)>-1;if(W&&!m.cells[U][V+at+1].node)d--;else break}m.insertRow(V,d)}}for(var I=0;I<m.columnNum;I++)for(var j=function(q){var et=m.cells[I][q];if(et.node){var Q=P.nodes.find(function(it){var ht;return it.id===((ht=et==null?void 0:et.node)===null||ht===void 0?void 0:ht.id)});Q&&(Q.x=et.x+Q.size[0]/2,Q.y=et.y+Q.size[1]/2)}},at=0;at<m.rowNum;at++)j(at)}R.default=k},28611:function(yr,R){"use strict";var z=this&&this.__assign||function(){return z=Object.assign||function(Y){for(var k,P=1,N=arguments.length;P<N;P++){k=arguments[P];for(var D in k)Object.prototype.hasOwnProperty.call(k,D)&&(Y[D]=k[D])}return Y},z.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0});var B=function(){function Y(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return Y.prototype.init=function(k,P,N){this.cells=[],this.CELL_W=N.CELL_W||Y.DEFAULT_CELL_W,this.CELL_H=N.CELL_H||Y.DEFAULT_CELL_H,this.columnNum=Math.ceil(k/this.CELL_W),this.rowNum=Math.ceil(P/this.CELL_H),Y.MIN_DIST=Math.pow(k,2)+Math.pow(P,2);for(var D=0;D<this.columnNum;D++){for(var E=[],y=0;y<this.rowNum;y++){var M={dx:D,dy:y,x:D*this.CELL_W,y:y*this.CELL_H,occupied:!1};E.push(M)}this.cells.push(E)}},Y.prototype.findGridByNodeId=function(k){for(var P,N,D=0;D<this.columnNum;D++)for(var E=0;E<this.rowNum;E++)if(this.cells[D][E].node&&((N=(P=this.cells[D][E])===null||P===void 0?void 0:P.node)===null||N===void 0?void 0:N.id)===k)return{column:D,row:E};return null},Y.prototype.sqdist=function(k,P){return Math.pow(k.x-P.x,2)+Math.pow(k.y-P.y,2)},Y.prototype.occupyNearest=function(k){for(var P=Y.MIN_DIST,N,D=null,E=0;E<this.columnNum;E++)for(var y=0;y<this.rowNum;y++)!this.cells[E][y].occupied&&(N=this.sqdist(k,this.cells[E][y]))<P&&(P=N,D=this.cells[E][y]);return D&&(D.occupied=!0),D},Y.prototype.insertColumn=function(k,P){if(!(P<=0)){for(var N=0;N<P;N++){this.cells[N+this.columnNum]=[];for(var D=0;D<this.rowNum;D++)this.cells[N+this.columnNum][D]={dx:N,dy:D,x:N*this.CELL_W,y:D*this.CELL_H,occupied:!1,node:null}}for(var N=this.columnNum-1;N>k;N--)for(var D=0;D<this.rowNum;D++)this.cells[N+P][D]=z(z({},this.cells[N][D]),{x:(N+P)*this.CELL_W,y:D*this.CELL_H}),this.cells[N][D]={x:N*this.CELL_W,y:D*this.CELL_H,occupied:!0,node:null};for(var D=0;D<this.additionColumn.length;D++)this.additionColumn[D]>=k&&(this.additionColumn[D]+=P);for(var N=0;N<P;N++)this.additionColumn.push(k+N+1);this.columnNum+=P}},Y.prototype.insertRow=function(k,P){if(!(P<=0)){for(var N=0;N<P;N++)for(var D=0;D<this.columnNum;D++)this.cells[D][N+this.rowNum]={dx:D,dy:N,x:D*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var D=0;D<this.columnNum;D++)for(var N=this.rowNum-1;N>k;N--)this.cells[D][N+P]=z(z({},this.cells[D][N]),{dx:D,dy:N+P,x:D*this.CELL_W,y:(N+P)*this.CELL_H}),this.cells[D][N]={dx:D,dy:N,x:D*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var N=0;N<this.additionRow.length;N++)this.additionRow[N]>=k&&(this.additionRow[N]+=P);for(var D=0;D<P;D++)this.additionRow.push(k+D+1);this.rowNum+=P}},Y.prototype.getNodes=function(){for(var k=[],P=0;P<this.columnNum;P++)for(var N=0;N<this.rowNum;N++)this.cells[P][N].node&&k.push(this.cells[P][N]);return k},Y.MIN_DIST=50,Y.DEFAULT_CELL_W=80,Y.DEFAULT_CELL_H=80,Y}();R.default=B},290441:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var D=function(E,y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,S){M.__proto__=S}||function(M,S){for(var m in S)Object.prototype.hasOwnProperty.call(S,m)&&(M[m]=S[m])},D(E,y)};return function(E,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");D(E,y);function M(){this.constructor=E}E.prototype=y===null?Object.create(y):(M.prototype=y.prototype,new M)}}(),Y=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(R,"__esModule",{value:!0}),R.ERLayout=void 0;var k=z(762329),P=Y(z(934015)),N=function(D){B(E,D);function E(y){var M=D.call(this)||this;return M.width=300,M.height=300,M.nodeMinGap=50,M.onLayoutEnd=function(){},y&&M.updateCfg(y),M}return E.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},E.prototype.execute=function(){var y=this,M=y.nodes,S=y.edges;return M==null||M.forEach(function(m){m.size||(m.size=[50,50])}),(0,P.default)({nodes:M,edges:S},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){y.onLayoutEnd&&y.onLayoutEnd()})},E.prototype.getType=function(){return"er"},E}(k.Base);R.ERLayout=N},87064:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=1200,B=800,Y=1e7,k=10,P=3.141592653589793,N=1.5707963267948966,D=P*.375,E=P*.625,y=new Map,M=10,S=10,m=.8,I=.1,A=.5;function L(j,$,q){var et=j.x-j.size[0]/2,Q=j.y-j.size[1]/2,it=j.x+j.size[0]/2,ht=j.y+j.size[1]/2,dt=$.x-$.size[0]/2,Ot=$.y-$.size[1]/2,It=$.x+$.size[0]/2,Kt=$.y+$.size[1]/2,Ft=j.x,Nt=j.y,st=$.x,yt=$.y,kt=st-Ft,ee=Math.atan2(kt,yt-Nt),$t=0,ge=0,Pe=0,tr=0;ee>N?(ge=Q-Kt,$t=dt-it,Pe=parseFloat(ge?(ge/Math.cos(ee)).toFixed(2):$t.toFixed(2)),tr=parseFloat($t?($t/Math.sin(ee)).toFixed(2):ge.toFixed(2))):0<ee&&ee<=N?(ge=Ot-ht,$t=dt-it,ge>$t?Pe=tr=parseFloat(ge?(ge/Math.cos(ee)).toFixed(2):$t.toFixed(2)):Pe=tr=parseFloat($t?($t/Math.sin(ee)).toFixed(2):ge.toFixed(2))):ee<-N?(ge=Q-Kt,$t=-(It-et),ge>$t?Pe=tr=parseFloat(ge?(ge/Math.cos(ee)).toFixed(2):$t.toFixed(2)):Pe=tr=parseFloat($t?($t/Math.sin(ee)).toFixed(2):ge.toFixed(2))):(ge=Ot-ht,Math.abs(kt)>(it-et)/2?$t=et-It:$t=kt,ge>$t?Pe=tr=parseFloat(ge?(ge/Math.cos(ee)).toFixed(2):$t.toFixed(2)):Pe=tr=parseFloat($t&&ee!==0?($t/Math.sin(ee)).toFixed(2):ge.toFixed(2)));var Jt=parseFloat(ee.toFixed(2)),ae=q;return q&&(ae=D<Jt&&Jt<E),{distance:Math.abs(Pe<tr?Pe:tr),isHoriz:ae}}function U(j,$){var q=y.get(j.id)||[],et=q.find(function(re){return re.source===$.id||re.target===$.id}),Q=j.size[0]*j.size[1],it=$.size[0]*$.size[1],ht=Q>it?$:j,dt=Q>it?j:$,Ot=ht.x-ht.size[0]/2,It=ht.y-ht.size[1]/2,Kt=ht.x+ht.size[0]/2,Ft=ht.y+ht.size[1]/2,Nt=dt.x-dt.size[0]/2,st=dt.y-dt.size[1]/2,yt=dt.x+dt.size[0]/2,kt=dt.y+dt.size[1]/2,ee=ht.x,$t=ht.y,ge=dt.x,Pe=dt.y,tr=Kt>=Nt&&yt>=Ot&&Ft>=st&&kt>=It,Jt=0,ae=0;if(tr){ae=Math.sqrt(Math.pow(ge-ee,2)+Math.pow(Pe-$t,2));var Se=Ot>Nt?Ot:Nt,xe=It>st?It:st,we=Kt<yt?Kt:yt,zt=Ft<kt?Ft:kt,Wt=we-Se,Ie=zt-xe,Yt=Wt*Ie;ae===0&&(ae=1e-7),Jt=k*1/ae*100+Yt,Jt*=Y}else{var ie=!1,Oe=L(ht,dt,ie);ae=Oe.distance,ie=Oe.isHoriz,ae<=k?ae!==0?et?Jt+=k+Y*1/ae:Jt+=k+Y*k/ae:Jt+=Y:(Jt+=ae,et&&(Jt+=ae*ae))}return Jt}function V(j){for(var $=0,q=0;q<j.length;q++){var et=j[q];(et.x<0||et.y<0||et.x>z||et.y>B)&&($+=1e12);for(var Q=q+1;Q<j.length;Q++)$+=U(et,j[Q])}return $}function x(j,$,q,et){var Q=new Map;q.forEach(function(ee,$t){Q.set(ee.id,ee)});var it=et.filter(function(ee){return ee.source===j.id||ee.target===j.id})||[],ht=[];it.forEach(function(ee){var $t=ee.source===j.id?ee.target:ee.source,ge=Q.get($t);ge&&ht.push(ge)});for(var dt=!0,Ot=0;Ot<ht.length;Ot++){var It=ht[Ot],Kt=Math.atan((j.y-It.y)/(It.x-j.y))*180,Ft=Math.atan(($.y-It.y)/(It.x-$.y))*180,Nt=Kt<30||Kt>150,st=Ft<30||Ft>150,yt=Kt>70&&Kt<110,kt=Ft>70&&Ft<110;if(Nt&&!st||Kt*Ft<0){dt=!1;break}else if(yt&&!kt||Kt*Ft<0){dt=!1;break}else if((It.x-j.x)*(It.x-$.x)<0){dt=!1;break}else if((It.y-j.y)*(It.y-$.y)<0){dt=!1;break}}return dt}function d(j,$){for(var q=!1,et=1,Q=M*et,it=S*et,ht=[Q,-Q,0,0],dt=[0,0,it,-it],Ot=0;Ot<j.length;++Ot)for(var It=j[Ot],Kt=at(It,j),Ft=0;Ft<ht.length;Ft++){var Nt=x(It,{x:It.x+ht[Ft],y:It.y+dt[Ft]},j,$);if(Nt){It.x+=ht[Ft],It.y+=dt[Ft];var st=at(It,j),yt=Math.random();st<Kt||yt<m&&yt>I?(Kt=st,q=!0):(It.x-=ht[Ft],It.y-=dt[Ft])}}return m>I&&(m*=A),q?V(j):0}function at(j,$){var q=0;(j.x<0||j.y<0||j.x+j.size[0]+20>z||j.y+j.size[1]+20>B)&&(q+=1e12);for(var et=0;et<$.length;++et)j.id!==$[et].id&&(q+=U(j,$[et]));return q}function W(j,$){if(j.length===0)return{nodes:j,edges:$};j.forEach(function(It){var Kt=$.filter(function(Ft){return Ft.source===It.id||Ft.target===It.id});y.set(It,Kt)}),j.sort(function(It,Kt){var Ft,Nt;return((Ft=y.get(It.id))===null||Ft===void 0?void 0:Ft.length)-((Nt=y.get(Kt.id))===null||Nt===void 0?void 0:Nt.length)});for(var q=V(j),et=20,Q=1,it=0,ht=50,dt=0;et>0&&(dt++,!(dt>=ht));){var Ot=d(j,$);Ot!==0&&(it=Ot),Q=it-q,q=it,Q===0?--et:et=20}return j.forEach(function(It){It.x=It.x-It.size[0]/2,It.y=It.y-It.size[1]/2}),{nodes:j,edges:$}}R.default=W},191019:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.forceNBody=void 0;var B=z(971829),Y=.81,k=.1;function P(y,M,S,m,I){var A=S/m,L=y.map(function(V,x){var d=M[V.id],at=d.data,W=d.x,j=d.y,$=d.size,q=at.layout.force.nodeStrength;return{x:W,y:j,size:$,index:x,vx:0,vy:0,weight:A*q}}),U=(0,B.quadtree)(L,function(V){return V.x},function(V){return V.y}).visitAfter(N);return L.forEach(function(V){E(V,U)}),L.map(function(V,x){var d=M[y[x].id],at=d.data.layout.force.mass,W=at===void 0?1:at;I[2*x]=V.vx/W,I[2*x+1]=V.vy/W}),I}R.forceNBody=P;function N(y){var M=0,S=0,m=0;if(y.length){for(var I=0;I<4;I++){var A=y[I];A&&A.weight&&(M+=A.weight,S+=A.x*A.weight,m+=A.y*A.weight)}y.x=S/M,y.y=m/M,y.weight=M}else{var A=y;y.x=A.data.x,y.y=A.data.y,y.weight=A.data.weight}}var D=function(y,M,S,m,I,A){var L=A.x-y.x||k,U=A.y-y.y||k,V=m-M,x=L*L+U*U,d=Math.sqrt(x)*x;if(V*V*Y<x){var at=y.weight/d;return A.vx+=L*at,A.vy+=U*at,!0}if(y.length)return!1;if(y.data!==A){var at=y.data.weight/d;A.vx+=L*at,A.vy+=U*at}};function E(y,M){M.visit(function(S,m,I,A,L){return D(S,m,I,A,L,y)})}},306740:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,S){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,S)};return function(M,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");y(M,S);function m(){this.constructor=M}M.prototype=S===null?Object.create(S):(m.prototype=S.prototype,new m)}}(),Y=this&&this.__assign||function(){return Y=Object.assign||function(y){for(var M,S=1,m=arguments.length;S<m;S++){M=arguments[S];for(var I in M)Object.prototype.hasOwnProperty.call(M,I)&&(y[I]=M[I])}return y},Y.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.Force2Layout=void 0;var k=z(762329),P=z(449784),N=z(191019),D=function(y,M){var S;return y?(0,P.isNumber)(y)?S=function(m){return y}:S=y:S=function(m){return M||1},S},E=function(y){B(M,y);function M(S){var m=y.call(this)||this;m.maxIteration=1e3,m.workerEnabled=!1,m.edgeStrength=200,m.nodeStrength=1e3,m.coulombDisScale=.005,m.damping=.9,m.maxSpeed=500,m.minMovement=.4,m.interval=.02,m.factor=1,m.linkDistance=200,m.gravity=0,m.clusterNodeStrength=20,m.preventOverlap=!0,m.distanceThresholdMode="mean",m.tick=function(){},m.nodes=[],m.edges=[],m.width=300,m.height=300,m.nodeMap={},m.nodeIdxMap={},m.judgingDistance=0,m.centripetalOptions={leaf:2,single:2,others:1,center:function(A){return{x:m.width/2,y:m.height/2}}};var I=S.getMass;return m.propsGetMass=I,m.updateCfg(S),m}return M.prototype.getCentripetalOptions=function(){var S=this,m=S.leafCluster,I=S.clustering,A=S.nodeClusterBy,L=S.nodes,U=S.nodeMap,V=S.clusterNodeStrength,x=function(ht){return typeof V=="function"?V(ht):V},d={},at;if(m){at=this.getSameTypeLeafMap()||{};var W=Array.from(new Set(L==null?void 0:L.map(function(ht){return ht[A]})))||[];d={single:100,leaf:function(ht,dt,Ot){var It=at[ht.id]||{},Kt=It.relativeLeafNodes,Ft=It.sameTypeLeafNodes;return(Ft==null?void 0:Ft.length)===(Kt==null?void 0:Kt.length)||(W==null?void 0:W.length)===1?1:x(ht)},others:1,center:function(ht,dt,Ot){var It,Kt=(((It=ht.data)===null||It===void 0?void 0:It.layout)||{}).degree;if(!Kt)return{x:100,y:100};var Ft;if(Kt===1){var Nt=(at[ht.id]||{}).sameTypeLeafNodes,st=Nt===void 0?[]:Nt;st.length===1?Ft=void 0:st.length>1&&(Ft=(0,P.getAvgNodePosition)(st))}else Ft=void 0;return{x:Ft==null?void 0:Ft.x,y:Ft==null?void 0:Ft.y}}}}if(I){at||(at=this.getSameTypeLeafMap());var j=Array.from(new Set(L.map(function(ht,dt){return ht[A]}))).filter(function(ht){return ht!==void 0}),$={};j.forEach(function(ht){var dt=L.filter(function(Ot){return Ot[A]===ht}).map(function(Ot){return U[Ot.id]});$[ht]=(0,P.getAvgNodePosition)(dt)}),d={single:function(ht){return x(ht)},leaf:function(ht){return x(ht)},others:function(ht){return x(ht)},center:function(ht,dt,Ot){var It=$[ht[A]];return{x:It==null?void 0:It.x,y:It==null?void 0:It.y}}}}this.centripetalOptions=Y(Y({},this.centripetalOptions),d);var q=this.centripetalOptions,et=q.leaf,Q=q.single,it=q.others;et&&typeof et!="function"&&(this.centripetalOptions.leaf=function(){return et}),Q&&typeof Q!="function"&&(this.centripetalOptions.single=function(){return Q}),it&&typeof it!="function"&&(this.centripetalOptions.others=function(){return it})},M.prototype.updateCfg=function(S){S&&Object.assign(this,S)},M.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},M.prototype.execute=function(){var S=this;S.stop();var m=S.nodes,I=S.edges,A=S.defSpringLen;if(S.judgingDistance=0,!m||m.length===0){S.onLayoutEnd([]);return}!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]);var L=S.center;if(m.length===1){m[0].x=L[0],m[0].y=L[1],S.onLayoutEnd([Y({},m[0])]);return}S.degreesMap=(0,P.getDegreeMap)(m,I),S.propsGetMass?S.getMass=S.propsGetMass:S.getMass=function(j){var $=1;(0,P.isNumber)(j.mass)&&($=j.mass);var q=S.degreesMap[j.id].all;return!q||q<5?$:q*5*$};var U=S.nodeSize,V;if(S.preventOverlap){var x=S.nodeSpacing,d;(0,P.isNumber)(x)?d=function(){return x}:(0,P.isFunction)(x)?d=x:d=function(){return 0},U?(0,P.isArray)(U)?V=function(j){return Math.max(U[0],U[1])+d(j)}:V=function(j){return U+d(j)}:V=function(j){return j.size?(0,P.isArray)(j.size)?Math.max(j.size[0],j.size[1])+d(j):(0,P.isObject)(j.size)?Math.max(j.size.width,j.size.height)+d(j):j.size+d(j):10+d(j)}}S.nodeSize=V,S.linkDistance=D(S.linkDistance,1),S.nodeStrength=D(S.nodeStrength,1),S.edgeStrength=D(S.edgeStrength,1);var at={},W={};m.forEach(function(j,$){(0,P.isNumber)(j.x)||(j.x=Math.random()*S.width),(0,P.isNumber)(j.y)||(j.y=Math.random()*S.height);var q=S.degreesMap[j.id];at[j.id]=Y(Y({},j),{data:Y(Y({},j.data),{size:S.nodeSize(j)||30,layout:{inDegree:q.in,outDegree:q.out,degree:q.all,tDegree:q.in,sDegree:q.out,force:{mass:S.getMass(j),nodeStrength:S.nodeStrength(j,I)}}})}),W[j.id]=$}),S.nodeMap=at,S.nodeIdxMap=W,S.edgeInfos=[],I==null||I.forEach(function(j){var $=at[j.source],q=at[j.target];!$||!q?elf.edgeInfos.push({}):S.edgeInfos.push({edgeStrength:S.edgeStrength(j),linkDistance:A?A(Y(Y({},j),{source:$,target:q}),$,q):S.linkDistance(j,$,q)||1+(U($)+U($)||0)/2})}),this.getCentripetalOptions(),S.onLayoutEnd=S.onLayoutEnd||function(){},S.run()},M.prototype.run=function(){var S=this,m=S.maxIteration,I=S.nodes,A=S.edges,L=S.workerEnabled,U=S.minMovement,V=S.animate,x=S.nodeMap,d=S.height;if(S.currentMinY=0,S.currentMaxY=d,!!I){var at=[];if(I.forEach(function(it,ht){at[2*ht]=0,at[2*ht+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var W={};A.forEach(function(it){var ht=it.source,dt=it.target;W[ht]=W[ht]||[],W[ht].push(it),W[dt]=W[dt]||[],W[dt].push(it)}),this.relatedEdges=W}var j=m,$=!V;if(L||$){for(var q=0,et=0;(S.judgingDistance>U||et<1)&&et<j;et++)q=et,S.runOneStep(et,at);S.onLayoutEnd(Object.values(x))}else{if(typeof window=="undefined")return;var Q=0;this.timeInterval=window.setInterval(function(){I&&(S.runOneStep(Q,at),Q++,(Q>=j||S.judgingDistance<U)&&(S.onLayoutEnd(Object.values(x)),window.clearInterval(S.timeInterval)))},0)}}},M.prototype.runOneStep=function(S,m){var I,A=this,L=A.nodes,U=A.edges,V=A.nodeMap,x=A.monitor,d=[];if(L!=null&&L.length){A.calRepulsive(d),U&&A.calAttractive(d),A.calGravity(d),A.attractToSide(d);var at=A.interval;if(A.updateVelocity(d,m,at),A.updatePosition(m,at),(I=A.tick)===null||I===void 0||I.call(A),x){var W=this.calTotalEnergy(d);x({energy:W,nodes:L,edges:U,iterations:S})}}},M.prototype.calTotalEnergy=function(S){var m=this,I=m.nodes,A=m.nodeMap;if(!(I!=null&&I.length))return 0;var L=0;return I.forEach(function(U,V){var x=S[2*V],d=S[2*V+1],at=x*x+d*d,W=A[U.id].data.layout.force.mass,j=W===void 0?1:W;L+=j*at*.5}),L},M.prototype.calRepulsive=function(S){var m=this,I=m.nodes,A=m.nodeMap,L=m.factor,U=m.coulombDisScale,V=m.nodeSize;(0,N.forceNBody)(I,A,L,U*U,S)},M.prototype.calAttractive=function(S){var m=this,I=m.edges,A=m.nodeMap,L=m.nodeIdxMap,U=m.edgeInfos,V=m.nodeSize;I.forEach(function(x,d){var at=(0,P.getEdgeTerminal)(x,"source"),W=(0,P.getEdgeTerminal)(x,"target"),j=A[at],$=A[W];if(!(!j||!$)){var q=$.x-j.x,et=$.y-j.y;!q&&!et&&(q=Math.random()*.01,et=Math.random()*.01);var Q=Math.sqrt(q*q+et*et),it=q/Q,ht=et/Q,dt=U[d]||{},Ot=dt.linkDistance,It=Ot===void 0?200:Ot,Kt=dt.edgeStrength,Ft=Kt===void 0?200:Kt,Nt=It-Q,st=Nt*Ft,yt=j.data.layout.force.mass||1,kt=$.data.layout.force.mass||1,ee=1/yt,$t=1/kt,ge=it*st,Pe=ht*st,tr=2*L[at],Jt=2*L[W];S[tr]-=ge*ee,S[tr+1]-=Pe*ee,S[Jt]+=ge*$t,S[Jt+1]+=Pe*$t}})},M.prototype.calGravity=function(S){var m,I=this,A=I.nodes,L=I.edges,U=L===void 0?[]:L,V=I.nodeMap,x=I.width,d=I.height,at=I.center,W=I.gravity,j=I.degreesMap,$=I.centripetalOptions;if(A)for(var q=A.length,et=0;et<q;et++){var Q=2*et,it=V[A[et].id],ht=it.data.layout.force.mass,dt=ht===void 0?1:ht,Ot=0,It=0,Kt=W,Ft=j[it.id],Nt=Ft.in,st=Ft.out,yt=Ft.all,kt=(m=I.getCenter)===null||m===void 0?void 0:m.call(I,it,yt);if(kt){var ee=kt[0],$t=kt[1],ge=kt[2];Ot=it.x-ee,It=it.y-$t,Kt=ge}else Ot=it.x-at[0],It=it.y-at[1];if(Kt&&(S[Q]-=Kt*Ot/dt,S[Q+1]-=Kt*It/dt),$){var Pe=$.leaf,tr=$.single,Jt=$.others,ae=$.center,Se=(ae==null?void 0:ae(it,A,U,x,d))||{x:0,y:0,centerStrength:0},xe=Se.x,we=Se.y,zt=Se.centerStrength;if(!(0,P.isNumber)(xe)||!(0,P.isNumber)(we))continue;var Wt=(it.x-xe)/dt,Ie=(it.y-we)/dt;if(zt&&(S[Q]-=zt*Wt,S[Q+1]-=zt*Ie),yt===0){var Yt=tr(it);if(!Yt)continue;S[Q]-=Yt*Wt,S[Q+1]-=Yt*Ie;continue}if(Nt===0||st===0){var ie=Pe(it,A,U);if(!ie)continue;S[Q]-=ie*Wt,S[Q+1]-=ie*Ie;continue}var Oe=Jt(it);if(!Oe)continue;S[Q]-=Oe*Wt,S[Q+1]-=Oe*Ie}}},M.prototype.attractToSide=function(S){var m=this,I=m.defSideCoe,A=m.height,L=m.nodes,U=m.relatedEdges,V=m.currentMinY,x=V===void 0?0:V,d=m.currentMaxY,at=d===void 0?this.height:d;!I||typeof I!="function"||!(L!=null&&L.length)||L.forEach(function(W,j){var $=I(W,U[W.id]||[]);if($!==0){var q=$<0?x:at,et=Math.abs($);S[2*j+1]-=et*(W.y-q)}})},M.prototype.updateVelocity=function(S,m,I){var A=this,L=A.nodes,U=A.damping,V=A.maxSpeed;L!=null&&L.length&&L.forEach(function(x,d){var at=(m[2*d]+S[2*d]*I)*U||.01,W=(m[2*d+1]+S[2*d+1]*I)*U||.01,j=Math.sqrt(at*at+W*W);if(j>V){var $=V/j;at=$*at,W=$*W}m[2*d]=at,m[2*d+1]=W})},M.prototype.updatePosition=function(S,m){var I=this,A=I.nodes,L=I.distanceThresholdMode,U=I.nodeMap;if(!(A!=null&&A.length)){this.judgingDistance=0;return}var V=0;L==="max"?I.judgingDistance=-1/0:L==="min"&&(I.judgingDistance=1/0);var x=1/0,d=-1/0;A.forEach(function(at,W){var j=U[at.id];if((0,P.isNumber)(at.fx)&&(0,P.isNumber)(at.fy)){at.x=at.fx,at.y=at.fy,j.x=at.x,j.y=at.y;return}var $=S[2*W]*m,q=S[2*W+1]*m;at.x+=$,at.y+=q,j.x=at.x,j.y=at.y,at.y<x&&(x=at.y),at.y>d&&(d=at.y);var et=Math.sqrt($*$+q*q);switch(L){case"max":I.judgingDistance<et&&(I.judgingDistance=et);break;case"min":I.judgingDistance>et&&(I.judgingDistance=et);break;default:V=V+et;break}}),this.currentMinY=x,this.currentMaxY=d,(!L||L==="mean")&&(I.judgingDistance=V/A.length)},M.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},M.prototype.destroy=function(){var S=this;S.stop(),S.tick=null,S.nodes=null,S.edges=null,S.destroyed=!0},M.prototype.getType=function(){return"force2"},M.prototype.getSameTypeLeafMap=function(){var S=this,m=S.nodeClusterBy,I=S.nodes,A=S.edges,L=S.nodeMap,U=S.degreesMap;if(I!=null&&I.length){var V={};return I.forEach(function(x,d){var at=U[x.id].all;at===1&&(V[x.id]=(0,P.getCoreNodeAndRelativeLeafNodes)("leaf",x,A,m,U,L))}),V}},M}(k.Base);R.Force2Layout=E},19712:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(){function B(Y){this.id=Y.id||0,this.rx=Y.rx,this.ry=Y.ry,this.fx=0,this.fy=0,this.mass=Y.mass,this.degree=Y.degree,this.g=Y.g||0}return B.prototype.distanceTo=function(Y){var k=this.rx-Y.rx,P=this.ry-Y.ry;return Math.hypot(k,P)},B.prototype.setPos=function(Y,k){this.rx=Y,this.ry=k},B.prototype.resetForce=function(){this.fx=0,this.fy=0},B.prototype.addForce=function(Y){var k=Y.rx-this.rx,P=Y.ry-this.ry,N=Math.hypot(k,P);N=N<1e-4?1e-4:N;var D=this.g*(this.degree+1)*(Y.degree+1)/N;this.fx+=D*k/N,this.fy+=D*P/N},B.prototype.in=function(Y){return Y.contains(this.rx,this.ry)},B.prototype.add=function(Y){var k=this.mass+Y.mass,P=(this.rx*this.mass+Y.rx*Y.mass)/k,N=(this.ry*this.mass+Y.ry*Y.mass)/k,D=this.degree+Y.degree,E={rx:P,ry:N,mass:k,degree:D};return new B(E)},B}();R.default=z},148564:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var M=function(S,m){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,A){I.__proto__=A}||function(I,A){for(var L in A)Object.prototype.hasOwnProperty.call(A,L)&&(I[L]=A[L])},M(S,m)};return function(S,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");M(S,m);function I(){this.constructor=S}S.prototype=m===null?Object.create(m):(I.prototype=m.prototype,new I)}}(),Y=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(R,"__esModule",{value:!0}),R.ForceAtlas2Layout=void 0;var k=z(762329),P=z(449784),N=Y(z(19712)),D=Y(z(851638)),E=Y(z(762732)),y=function(M){B(S,M);function S(m){var I=M.call(this)||this;return I.center=[0,0],I.width=300,I.height=300,I.nodes=[],I.edges=[],I.kr=5,I.kg=1,I.mode="normal",I.preventOverlap=!1,I.dissuadeHubs=!1,I.barnesHut=void 0,I.maxIteration=0,I.ks=.1,I.ksmax=10,I.tao=.1,I.onLayoutEnd=function(){},I.prune=void 0,I.updateCfg(m),I}return S.prototype.getDefaultCfg=function(){return{}},S.prototype.execute=function(){var m=this,I=m.nodes,A=m.onLayoutEnd,L=m.prune,U=m.maxIteration;!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight);for(var V=[],x=I.length,d=0;d<x;d+=1){var at=I[d],W=10,j=10;(0,P.isNumber)(at.size)&&(W=at.size,j=at.size),(0,P.isArray)(at.size)?(isNaN(at.size[0])||(W=at.size[0]),isNaN(at.size[1])||(j=at.size[1])):(0,P.isObject)(at.size)&&(W=at.size.width,j=at.size.height),m.getWidth&&!isNaN(m.getWidth(at))&&(j=m.getWidth(at)),m.getHeight&&!isNaN(m.getHeight(at))&&(W=m.getHeight(at));var $=Math.max(W,j);V.push($)}m.barnesHut===void 0&&x>250&&(m.barnesHut=!0),m.prune===void 0&&x>100&&(m.prune=!0),this.maxIteration===0&&!m.prune?(U=250,x<=200&&x>100?U=1e3:x>200&&(U=1200),this.maxIteration=U):this.maxIteration===0&&L&&(U=100,x<=200&&x>100?U=500:x>200&&(U=950),this.maxIteration=U),m.kr||(m.kr=50,x>100&&x<=500?m.kr=20:x>500&&(m.kr=1)),m.kg||(m.kg=20,x>100&&x<=500?m.kg=10:x>500&&(m.kg=1)),this.nodes=m.updateNodesByForces(V),A()},S.prototype.updateNodesByForces=function(m){for(var I=this,A=I.edges,L=I.maxIteration,U=I.nodes,V=A.filter(function(Ft){var Nt=(0,P.getEdgeTerminal)(Ft,"source"),st=(0,P.getEdgeTerminal)(Ft,"target");return Nt!==st}),x=U.length,d=V.length,at=[],W={},j={},$=[],q=0;q<x;q+=1)W[U[q].id]=q,at[q]=0,(U[q].x===void 0||isNaN(U[q].x))&&(U[q].x=Math.random()*1e3),(U[q].y===void 0||isNaN(U[q].y))&&(U[q].y=Math.random()*1e3),$.push({x:U[q].x,y:U[q].y});for(var q=0;q<d;q+=1){for(var et=void 0,Q=void 0,it=0,ht=0,dt=0;dt<x;dt+=1){var Ot=(0,P.getEdgeTerminal)(V[q],"source"),It=(0,P.getEdgeTerminal)(V[q],"target");U[dt].id===Ot?(et=U[dt],it=dt):U[dt].id===It&&(Q=U[dt],ht=dt),j[q]={sourceIdx:it,targetIdx:ht}}et&&(at[W[et.id]]+=1),Q&&(at[W[Q.id]]+=1)}var Kt=L;if(U=this.iterate(Kt,W,j,d,at,m),I.prune){for(var dt=0;dt<d;dt+=1)at[j[dt].sourceIdx]<=1?(U[j[dt].sourceIdx].x=U[j[dt].targetIdx].x,U[j[dt].sourceIdx].y=U[j[dt].targetIdx].y):at[j[dt].targetIdx]<=1&&(U[j[dt].targetIdx].x=U[j[dt].sourceIdx].x,U[j[dt].targetIdx].y=U[j[dt].sourceIdx].y);I.prune=!1,I.barnesHut=!1,Kt=100,U=this.iterate(Kt,W,j,d,at,m)}return U},S.prototype.iterate=function(m,I,A,L,U,V){for(var x=this,d=x.nodes,at=x.kr,W=x.preventOverlap,j=x.barnesHut,$=d.length,q=0,et=100,Q=m,it=50,ht=[],dt=[],Ot=[],It=0;It<$;It+=1)if(ht[2*It]=0,ht[2*It+1]=0,j){var Kt={id:It,rx:d[It].x,ry:d[It].y,mass:1,g:at,degree:U[It]};Ot[It]=new N.default(Kt)}for(;Q>0;){for(var It=0;It<$;It+=1)dt[2*It]=ht[2*It],dt[2*It+1]=ht[2*It+1],ht[2*It]=0,ht[2*It+1]=0;ht=this.getAttrForces(Q,it,L,I,A,U,V,ht),j&&(W&&Q>it||!W)?ht=this.getOptRepGraForces(ht,Ot,U):ht=this.getRepGraForces(Q,it,ht,et,V,U);var Ft=this.updatePos(ht,dt,q,U);d=Ft.nodes,q=Ft.sg,Q--,x.tick&&x.tick()}return d},S.prototype.getAttrForces=function(m,I,A,L,U,V,x,d){for(var at=this,W=at.nodes,j=at.preventOverlap,$=at.dissuadeHubs,q=at.mode,et=at.prune,Q=0;Q<A;Q+=1){var it=W[U[Q].sourceIdx],ht=U[Q].sourceIdx,dt=W[U[Q].targetIdx],Ot=U[Q].targetIdx;if(!(et&&(V[ht]<=1||V[Ot]<=1))){var It=[dt.x-it.x,dt.y-it.y],Kt=Math.hypot(It[0],It[1]);Kt=Kt<1e-4?1e-4:Kt,It[0]=It[0]/Kt,It[1]=It[1]/Kt,j&&m<I&&(Kt=Kt-x[ht]-x[Ot]);var Ft=Kt,Nt=Ft;q==="linlog"&&(Ft=Math.log(1+Kt),Nt=Ft),$&&(Ft=Kt/V[ht],Nt=Kt/V[Ot]),j&&m<I&&Kt<=0?(Ft=0,Nt=0):j&&m<I&&Kt>0&&(Ft=Kt,Nt=Kt),d[2*L[it.id]]+=Ft*It[0],d[2*L[dt.id]]-=Nt*It[0],d[2*L[it.id]+1]+=Ft*It[1],d[2*L[dt.id]+1]-=Nt*It[1]}}return d},S.prototype.getRepGraForces=function(m,I,A,L,U,V){for(var x=this,d=x.nodes,at=x.preventOverlap,W=x.kr,j=x.kg,$=x.center,q=x.prune,et=d.length,Q=0;Q<et;Q+=1){for(var it=Q+1;it<et;it+=1)if(!(q&&(V[Q]<=1||V[it]<=1))){var ht=[d[it].x-d[Q].x,d[it].y-d[Q].y],dt=Math.hypot(ht[0],ht[1]);dt=dt<1e-4?1e-4:dt,ht[0]=ht[0]/dt,ht[1]=ht[1]/dt,at&&m<I&&(dt=dt-U[Q]-U[it]);var Ot=W*(V[Q]+1)*(V[it]+1)/dt;at&&m<I&&dt<0?Ot=L*(V[Q]+1)*(V[it]+1):at&&m<I&&dt===0?Ot=0:at&&m<I&&dt>0&&(Ot=W*(V[Q]+1)*(V[it]+1)/dt),A[2*Q]-=Ot*ht[0],A[2*it]+=Ot*ht[0],A[2*Q+1]-=Ot*ht[1],A[2*it+1]+=Ot*ht[1]}var It=[d[Q].x-$[0],d[Q].y-$[1]],Kt=Math.hypot(It[0],It[1]);It[0]=It[0]/Kt,It[1]=It[1]/Kt;var Ft=j*(V[Q]+1);A[2*Q]-=Ft*It[0],A[2*Q+1]-=Ft*It[1]}return A},S.prototype.getOptRepGraForces=function(m,I,A){for(var L=this,U=L.nodes,V=L.kg,x=L.center,d=L.prune,at=U.length,W=9e10,j=-9e10,$=9e10,q=-9e10,et=0;et<at;et+=1)d&&A[et]<=1||(I[et].setPos(U[et].x,U[et].y),U[et].x>=j&&(j=U[et].x),U[et].x<=W&&(W=U[et].x),U[et].y>=q&&(q=U[et].y),U[et].y<=$&&($=U[et].y));for(var Q=Math.max(j-W,q-$),it={xmid:(j+W)/2,ymid:(q+$)/2,length:Q,massCenter:x,mass:at},ht=new D.default(it),dt=new E.default(ht),et=0;et<at;et+=1)d&&A[et]<=1||I[et].in(ht)&&dt.insert(I[et]);for(var et=0;et<at;et+=1)if(!(d&&A[et]<=1)){I[et].resetForce(),dt.updateForce(I[et]),m[2*et]-=I[et].fx,m[2*et+1]-=I[et].fy;var Ot=[U[et].x-x[0],U[et].y-x[1]],It=Math.hypot(Ot[0],Ot[1]);It=It<1e-4?1e-4:It,Ot[0]=Ot[0]/It,Ot[1]=Ot[1]/It;var Kt=V*(A[et]+1);m[2*et]-=Kt*Ot[0],m[2*et+1]-=Kt*Ot[1]}return m},S.prototype.updatePos=function(m,I,A,L){for(var U=this,V=U.nodes,x=U.ks,d=U.tao,at=U.prune,W=U.ksmax,j=V.length,$=[],q=[],et=0,Q=0,it=0;it<j;it+=1)if(!(at&&L[it]<=1)){var ht=[m[2*it]-I[2*it],m[2*it+1]-I[2*it+1]],dt=Math.hypot(ht[0],ht[1]),Ot=[m[2*it]+I[2*it],m[2*it+1]+I[2*it+1]],It=Math.hypot(Ot[0],Ot[1]);$[it]=dt,q[it]=It/2,et+=(L[it]+1)*$[it],Q+=(L[it]+1)*q[it]}var Kt=A;A=d*Q/et,Kt!==0&&(A=A>1.5*Kt?1.5*Kt:A);for(var it=0;it<j;it+=1)if(!(at&&L[it]<=1)&&!((0,P.isNumber)(V[it].fx)&&(0,P.isNumber)(V[it].fy))){var Ft=x*A/(1+A*Math.sqrt($[it])),Nt=Math.hypot(m[2*it],m[2*it+1]);Nt=Nt<1e-4?1e-4:Nt;var st=W/Nt;Ft=Ft>st?st:Ft;var yt=Ft*m[2*it],kt=Ft*m[2*it+1];V[it].x+=yt,V[it].y+=kt}return{nodes:V,sg:A}},S}(k.Base);R.ForceAtlas2Layout=y},851638:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(){function B(Y){this.xmid=Y.xmid,this.ymid=Y.ymid,this.length=Y.length,this.massCenter=Y.massCenter||[0,0],this.mass=Y.mass||1}return B.prototype.getLength=function(){return this.length},B.prototype.contains=function(Y,k){var P=this.length/2;return Y<=this.xmid+P&&Y>=this.xmid-P&&k<=this.ymid+P&&k>=this.ymid-P},B.prototype.NW=function(){var Y=this.xmid-this.length/4,k=this.ymid+this.length/4,P=this.length/2,N={xmid:Y,ymid:k,length:P},D=new B(N);return D},B.prototype.NE=function(){var Y=this.xmid+this.length/4,k=this.ymid+this.length/4,P=this.length/2,N={xmid:Y,ymid:k,length:P},D=new B(N);return D},B.prototype.SW=function(){var Y=this.xmid-this.length/4,k=this.ymid-this.length/4,P=this.length/2,N={xmid:Y,ymid:k,length:P},D=new B(N);return D},B.prototype.SE=function(){var Y=this.xmid+this.length/4,k=this.ymid-this.length/4,P=this.length/2,N={xmid:Y,ymid:k,length:P},D=new B(N);return D},B}();R.default=z},762732:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(){function B(Y){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,Y!=null&&(this.quad=Y)}return B.prototype.insert=function(Y){if(this.body==null){this.body=Y;return}this._isExternal()?(this.quad&&(this.NW=new B(this.quad.NW()),this.NE=new B(this.quad.NE()),this.SW=new B(this.quad.SW()),this.SE=new B(this.quad.SE())),this._putBody(this.body),this._putBody(Y),this.body=this.body.add(Y)):(this.body=this.body.add(Y),this._putBody(Y))},B.prototype._putBody=function(Y){this.quad&&(Y.in(this.quad.NW())&&this.NW?this.NW.insert(Y):Y.in(this.quad.NE())&&this.NE?this.NE.insert(Y):Y.in(this.quad.SW())&&this.SW?this.SW.insert(Y):Y.in(this.quad.SE())&&this.SE&&this.SE.insert(Y))},B.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},B.prototype.updateForce=function(Y){if(!(this.body==null||Y===this.body))if(this._isExternal())Y.addForce(this.body);else{var k=this.quad?this.quad.getLength():0,P=this.body.distanceTo(Y);k/P<this.theta?Y.addForce(this.body):(this.NW&&this.NW.updateForce(Y),this.NE&&this.NE.updateForce(Y),this.SW&&this.SW.updateForce(Y),this.SE&&this.SE.updateForce(Y))}},B}();R.default=z},589806:function(yr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(E,y,M,S){S===void 0&&(S=M);var m=Object.getOwnPropertyDescriptor(y,M);(!m||("get"in m?!y.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return y[M]}}),Object.defineProperty(E,S,m)}:function(E,y,M,S){S===void 0&&(S=M),E[S]=y[M]}),Y=this&&this.__setModuleDefault||(Object.create?function(E,y){Object.defineProperty(E,"default",{enumerable:!0,value:y})}:function(E,y){E.default=y}),k=this&&this.__importStar||function(E){if(E&&E.__esModule)return E;var y={};if(E!=null)for(var M in E)M!=="default"&&Object.prototype.hasOwnProperty.call(E,M)&&B(y,E,M);return Y(y,E),y};Object.defineProperty(R,"__esModule",{value:!0});var P=k(z(774948)),N=z(449784);function D(){function E(zt){return function(){return zt}}var y=function(zt){return zt.cluster},M=E(1),S=E(-1),m=E(100),I=E(.1),A=[0,0],L=[],U={},V=[],x=100,d=100,at={none:{x:0,y:0}},W=[],j,$="force",q=!0,et=.1;function Q(zt){if(!q)return Q;j.tick(),Kt();for(var Wt=0,Ie=L.length,Yt=void 0,ie=zt*et;Wt<Ie;++Wt)Yt=L[Wt],Yt.vx+=(at[y(Yt)].x-Yt.x)*ie,Yt.vy+=(at[y(Yt)].y-Yt.y)*ie}function it(){L&&ht()}function ht(){if(!(!L||!L.length)){if(y(L[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var zt=dt();j=P.forceSimulation(zt.nodes).force("x",P.forceX(x).strength(.1)).force("y",P.forceY(d).strength(.1)).force("collide",P.forceCollide(function(Wt){return Wt.r}).iterations(4)).force("charge",P.forceManyBody().strength(S)).force("links",P.forceLink(zt.nodes.length?zt.links:[]).distance(m).strength(I)),W=j.nodes(),Kt()}}function dt(){var zt=[],Wt=[],Ie={},Yt=[],ie={},Oe=[];return ie=Ot(L),Oe=It(V),Yt=Object.keys(ie),Yt.forEach(function(re,_e){var Ge=ie[re];zt.push({id:re,size:Ge.count,r:Math.sqrt(Ge.sumforceNodeSize/Math.PI)}),Ie[re]=_e}),Oe.forEach(function(re){var _e=(0,N.getEdgeTerminal)(re,"source"),Ge=(0,N.getEdgeTerminal)(re,"target"),Ct=Ie[_e],Nr=Ie[Ge];Ct!==void 0&&Nr!==void 0&&Wt.push({source:Ct,target:Nr,count:re.count})}),{nodes:zt,links:Wt}}function Ot(zt){var Wt={};return zt.forEach(function(Ie){var Yt=y(Ie);Wt[Yt]||(Wt[Yt]={count:0,sumforceNodeSize:0})}),zt.forEach(function(Ie){var Yt=y(Ie),ie=M(Ie),Oe=Wt[Yt];Oe.count=Oe.count+1,Oe.sumforceNodeSize=Oe.sumforceNodeSize+Math.PI*(ie*ie)*1.3,Wt[Yt]=Oe}),Wt}function It(zt){var Wt={},Ie=[];zt.forEach(function(ie){var Oe=Ft(ie),re=0;Wt[Oe]!==void 0&&(re=Wt[Oe]),re+=1,Wt[Oe]=re});var Yt=Object.entries(Wt);return Yt.forEach(function(ie){var Oe=ie[0],re=ie[1],_e=Oe.split("~")[0],Ge=Oe.split("~")[1];_e!==void 0&&Ge!==void 0&&Ie.push({source:_e,target:Ge,count:re})}),Ie}function Kt(){return at={none:{x:0,y:0}},W.forEach(function(zt){at[zt.id]={x:zt.x-A[0],y:zt.y-A[1]}}),at}function Ft(zt){var Wt=(0,N.getEdgeTerminal)(zt,"source"),Ie=(0,N.getEdgeTerminal)(zt,"target"),Yt=y(U[Wt]),ie=y(U[Ie]);return Yt<=ie?"".concat(Yt,"~").concat(ie):"".concat(ie,"~").concat(Yt)}function Nt(zt){U={},zt.forEach(function(Wt){U[Wt.id]=Wt})}function st(zt){return arguments.length?($=zt,it(),Q):$}function yt(zt){return arguments.length?typeof zt=="string"?(y=function(Wt){return Wt[zt]},Q):(y=zt,Q):y}function kt(zt){return arguments.length?(q=zt,Q):q}function ee(zt){return arguments.length?(et=zt,Q):et}function $t(zt){return arguments.length?(x=zt,Q):x}function ge(zt){return arguments.length?(d=zt,Q):d}function Pe(zt){return arguments.length?(Nt(zt||[]),L=zt||[],Q):L}function tr(zt){return arguments.length?(V=zt||[],it(),Q):V}function Jt(zt){return arguments.length?(typeof zt=="function"?M=zt:M=E(+zt),it(),Q):M}function ae(zt){return arguments.length?(typeof zt=="function"?S=zt:S=E(+zt),it(),Q):S}function Se(zt){return arguments.length?(typeof zt=="function"?m=zt:m=E(+zt),it(),Q):m}function xe(zt){return arguments.length?(typeof zt=="function"?I=zt:I=E(+zt),it(),Q):I}function we(zt){return arguments.length?(A=zt,Q):A}return Q.initialize=function(zt){L=zt,it()},Q.template=st,Q.groupBy=yt,Q.enableGrouping=kt,Q.strength=ee,Q.centerX=$t,Q.centerY=ge,Q.nodes=Pe,Q.links=tr,Q.forceNodeSize=Jt,Q.nodeSize=Q.forceNodeSize,Q.forceCharge=ae,Q.forceLinkDistance=Se,Q.forceLinkStrength=xe,Q.offset=we,Q.getFocis=Kt,Q}R.default=D},508810:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var L=function(U,V){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,d){x.__proto__=d}||function(x,d){for(var at in d)Object.prototype.hasOwnProperty.call(d,at)&&(x[at]=d[at])},L(U,V)};return function(U,V){if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");L(U,V);function x(){this.constructor=U}U.prototype=V===null?Object.create(V):(x.prototype=V.prototype,new x)}}(),Y=this&&this.__createBinding||(Object.create?function(L,U,V,x){x===void 0&&(x=V);var d=Object.getOwnPropertyDescriptor(U,V);(!d||("get"in d?!U.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return U[V]}}),Object.defineProperty(L,x,d)}:function(L,U,V,x){x===void 0&&(x=V),L[x]=U[V]}),k=this&&this.__setModuleDefault||(Object.create?function(L,U){Object.defineProperty(L,"default",{enumerable:!0,value:U})}:function(L,U){L.default=U}),P=this&&this.__importStar||function(L){if(L&&L.__esModule)return L;var U={};if(L!=null)for(var V in L)V!=="default"&&Object.prototype.hasOwnProperty.call(L,V)&&Y(U,L,V);return k(U,L),U},N=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(R,"__esModule",{value:!0}),R.ForceLayout=void 0;var D=P(z(774948)),E=N(z(589806)),y=z(449784),M=z(762329),S=z(416470),m=function(L){B(U,L);function U(V){var x=L.call(this)||this;return x.center=[0,0],x.nodeStrength=null,x.edgeStrength=null,x.preventOverlap=!1,x.clusterNodeStrength=null,x.clusterEdgeStrength=null,x.clusterEdgeDistance=null,x.clusterNodeSize=null,x.clusterFociStrength=null,x.linkDistance=50,x.alphaDecay=.028,x.alphaMin=.001,x.alpha=.3,x.collideStrength=1,x.workerEnabled=!1,x.tick=function(){},x.onLayoutEnd=function(){},x.ticking=void 0,V&&x.updateCfg(V),x}return U.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},U.prototype.init=function(V){var x=this;x.nodes=V.nodes||[];var d=V.edges||[];x.edges=d.map(function(at){var W={},j=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(at).forEach(function($){j.indexOf($)>-1||(W[$]=at[$])}),W}),x.ticking=!1},U.prototype.execute=function(V){var x=this,d=x.nodes,at=x.edges;if(!x.ticking){var W=x.forceSimulation,j=x.alphaMin,$=x.alphaDecay,q=x.alpha;if(W){if(V){if(x.clustering&&x.clusterForce&&(x.clusterForce.nodes(d),x.clusterForce.links(at)),W.nodes(d),at&&x.edgeForce)x.edgeForce.links(at);else if(at&&!x.edgeForce){var it=D.forceLink().id(function(It){return It.id}).links(at);x.edgeStrength&&it.strength(x.edgeStrength),x.linkDistance&&it.distance(x.linkDistance),x.edgeForce=it,W.force("link",it)}}x.preventOverlap&&x.overlapProcess(W),W.alpha(q).restart(),this.ticking=!0}else try{var et=D.forceManyBody();if(x.nodeStrength&&et.strength(x.nodeStrength),W=D.forceSimulation().nodes(d),x.clustering){var Q=(0,E.default)();Q.centerX(x.center[0]).centerY(x.center[1]).template("force").strength(x.clusterFociStrength),at&&Q.links(at),d&&Q.nodes(d),Q.forceLinkDistance(x.clusterEdgeDistance).forceLinkStrength(x.clusterEdgeStrength).forceCharge(x.clusterNodeStrength).forceNodeSize(x.clusterNodeSize),x.clusterForce=Q,W.force("group",Q)}if(W.force("center",D.forceCenter(x.center[0],x.center[1])).force("charge",et).alpha(q).alphaDecay($).alphaMin(j),x.preventOverlap&&x.overlapProcess(W),at){var it=D.forceLink().id(function(Ot){return Ot.id}).links(at);x.edgeStrength&&it.strength(x.edgeStrength),x.linkDistance&&it.distance(x.linkDistance),x.edgeForce=it,W.force("link",it)}if(x.workerEnabled&&!A()&&(x.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!x.workerEnabled)W.on("tick",function(){x.tick()}).on("end",function(){x.ticking=!1,x.onLayoutEnd&&x.onLayoutEnd()}),x.ticking=!0;else{W.stop();for(var ht=I(W),dt=1;dt<=ht;dt++)W.tick(),postMessage({nodes:d,currentTick:dt,totalTicks:ht,type:S.LAYOUT_MESSAGE.TICK},void 0);x.ticking=!1}x.forceSimulation=W,x.ticking=!0}catch(Ot){x.ticking=!1,console.warn(Ot)}}},U.prototype.overlapProcess=function(V){var x=this,d=x.nodeSize,at=x.nodeSpacing,W,j,$=x.collideStrength;if((0,y.isNumber)(at)?j=function(){return at}:(0,y.isFunction)(at)?j=at:j=function(){return 0},!d)W=function(it){if(it.size){if((0,y.isArray)(it.size)){var ht=it.size[0]>it.size[1]?it.size[0]:it.size[1];return ht/2+j(it)}if((0,y.isObject)(it.size)){var ht=it.size.width>it.size.height?it.size.width:it.size.height;return ht/2+j(it)}return it.size/2+j(it)}return 10+j(it)};else if((0,y.isFunction)(d))W=function(it){var ht=d(it);return ht+j(it)};else if((0,y.isArray)(d)){var q=d[0]>d[1]?d[0]:d[1],et=q/2;W=function(it){return et+j(it)}}else if((0,y.isNumber)(d)){var Q=d/2;W=function(it){return Q+j(it)}}else W=function(){return 10};V.force("collisionForce",D.forceCollide(W).strength($))},U.prototype.updateCfg=function(V){var x=this;x.ticking&&(x.forceSimulation.stop(),x.ticking=!1),x.forceSimulation=null,Object.assign(x,V)},U.prototype.destroy=function(){var V=this;V.ticking&&(V.forceSimulation.stop(),V.ticking=!1),V.nodes=null,V.edges=null,V.destroyed=!0},U}(M.Base);R.ForceLayout=m;function I(L){var U=L.alphaMin(),V=L.alphaTarget(),x=L.alpha(),d=Math.log((U-V)/(x-V))/Math.log(1-L.alphaDecay()),at=Math.ceil(d);return at}function A(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},885717:function(yr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(k,P,N,D){D===void 0&&(D=N);var E=Object.getOwnPropertyDescriptor(P,N);(!E||("get"in E?!P.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return P[N]}}),Object.defineProperty(k,D,E)}:function(k,P,N,D){D===void 0&&(D=N),k[D]=P[N]}),Y=this&&this.__exportStar||function(k,P){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(P,N)&&B(P,k,N)};Object.defineProperty(R,"__esModule",{value:!0}),Y(z(508810),R)},880374:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var D=function(E,y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,S){M.__proto__=S}||function(M,S){for(var m in S)Object.prototype.hasOwnProperty.call(S,m)&&(M[m]=S[m])},D(E,y)};return function(E,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");D(E,y);function M(){this.constructor=E}E.prototype=y===null?Object.create(y):(M.prototype=y.prototype,new M)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.FruchtermanLayout=void 0;var Y=z(762329),k=z(449784),P=800,N=function(D){B(E,D);function E(y){var M=D.call(this)||this;return M.maxIteration=1e3,M.workerEnabled=!1,M.gravity=10,M.speed=5,M.clustering=!1,M.clusterGravity=10,M.nodes=[],M.edges=[],M.width=300,M.height=300,M.nodeMap={},M.nodeIdxMap={},M.onLayoutEnd=function(){},M.tick=function(){},M.animate=!0,M.updateCfg(y),M}return E.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},E.prototype.execute=function(){var y=this,M,S,m=this,I=m.nodes;if(m.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(m.timeInterval),!I||I.length===0){(M=m.onLayoutEnd)===null||M===void 0||M.call(m);return}!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),m.center||(m.center=[m.width/2,m.height/2]);var A=m.center;if(I.length===1){I[0].x=A[0],I[0].y=A[1],(S=m.onLayoutEnd)===null||S===void 0||S.call(m);return}var L={},U={};return I.forEach(function(V,x){(0,k.isNumber)(V.x)||(V.x=Math.random()*y.width),(0,k.isNumber)(V.y)||(V.y=Math.random()*y.height),L[V.id]=V,U[V.id]=x}),m.nodeMap=L,m.nodeIdxMap=U,m.run()},E.prototype.run=function(){var y,M=this,S=M.nodes;if(S){var m=M.edges,I=M.maxIteration,A=M.workerEnabled,L=M.clustering,U=M.animate,V={};if(L&&S.forEach(function(at){V[at.cluster]===void 0&&(V[at.cluster]={name:at.cluster,cx:0,cy:0,count:0})}),A||!U){for(var x=0;x<I;x++)M.runOneStep(V);(y=M.onLayoutEnd)===null||y===void 0||y.call(M)}else{if(typeof window=="undefined")return;var d=0;this.timeInterval=window.setInterval(function(){var at;M.runOneStep(V),d++,d>=I&&((at=M.onLayoutEnd)===null||at===void 0||at.call(M),window.clearInterval(M.timeInterval))},0)}return{nodes:S,edges:m}}},E.prototype.runOneStep=function(y){var M,S=this,m=S.nodes;if(m){var I=S.edges,A=S.center,L=S.gravity,U=S.speed,V=S.clustering,x=S.height*S.width,d=Math.sqrt(x)/10,at=x/(m.length+1),W=Math.sqrt(at),j=[];if(m.forEach(function(et,Q){j[Q]={x:0,y:0}}),S.applyCalculate(m,I,j,W,at),V){for(var $ in y)y[$].cx=0,y[$].cy=0,y[$].count=0;m.forEach(function(et){var Q=y[et.cluster];(0,k.isNumber)(et.x)&&(Q.cx+=et.x),(0,k.isNumber)(et.y)&&(Q.cy+=et.y),Q.count++});for(var $ in y)y[$].cx/=y[$].count,y[$].cy/=y[$].count;var q=S.clusterGravity||L;m.forEach(function(et,Q){if(!(!(0,k.isNumber)(et.x)||!(0,k.isNumber)(et.y))){var it=y[et.cluster],ht=Math.sqrt((et.x-it.cx)*(et.x-it.cx)+(et.y-it.cy)*(et.y-it.cy)),dt=W*q;j[Q].x-=dt*(et.x-it.cx)/ht,j[Q].y-=dt*(et.y-it.cy)/ht}})}m.forEach(function(et,Q){if(!(!(0,k.isNumber)(et.x)||!(0,k.isNumber)(et.y))){var it=.01*W*L;j[Q].x-=it*(et.x-A[0]),j[Q].y-=it*(et.y-A[1])}}),m.forEach(function(et,Q){if((0,k.isNumber)(et.fx)&&(0,k.isNumber)(et.fy)){et.x=et.fx,et.y=et.fy;return}if(!(!(0,k.isNumber)(et.x)||!(0,k.isNumber)(et.y))){var it=Math.sqrt(j[Q].x*j[Q].x+j[Q].y*j[Q].y);if(it>0){var ht=Math.min(d*(U/P),it);et.x+=j[Q].x/it*ht,et.y+=j[Q].y/it*ht}}}),(M=S.tick)===null||M===void 0||M.call(S)}},E.prototype.applyCalculate=function(y,M,S,m,I){var A=this;A.calRepulsive(y,S,I),M&&A.calAttractive(M,S,m)},E.prototype.calRepulsive=function(y,M,S){y.forEach(function(m,I){M[I]={x:0,y:0},y.forEach(function(A,L){if(I!==L&&!(!(0,k.isNumber)(m.x)||!(0,k.isNumber)(A.x)||!(0,k.isNumber)(m.y)||!(0,k.isNumber)(A.y))){var U=m.x-A.x,V=m.y-A.y,x=U*U+V*V;if(x===0){x=1;var d=I>L?1:-1;U=.01*d,V=.01*d}var at=S/x;M[I].x+=U*at,M[I].y+=V*at}})})},E.prototype.calAttractive=function(y,M,S){var m=this;y.forEach(function(I){var A=(0,k.getEdgeTerminal)(I,"source"),L=(0,k.getEdgeTerminal)(I,"target");if(!(!A||!L)){var U=m.nodeIdxMap[A],V=m.nodeIdxMap[L];if(U!==V){var x=m.nodeMap[A],d=m.nodeMap[L];if(!(!(0,k.isNumber)(d.x)||!(0,k.isNumber)(x.x)||!(0,k.isNumber)(d.y)||!(0,k.isNumber)(x.y))){var at=d.x-x.x,W=d.y-x.y,j=Math.sqrt(at*at+W*W),$=j*j/S;M[V].x-=at/j*$,M[V].y-=W/j*$,M[U].x+=at/j*$,M[U].y+=W/j*$}}}})},E.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},E.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},E.prototype.getType=function(){return"fruchterman"},E}(Y.Base);R.FruchtermanLayout=N},113653:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var D=function(E,y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,S){M.__proto__=S}||function(M,S){for(var m in S)Object.prototype.hasOwnProperty.call(S,m)&&(M[m]=S[m])},D(E,y)};return function(E,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");D(E,y);function M(){this.constructor=E}E.prototype=y===null?Object.create(y):(M.prototype=y.prototype,new M)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.GForceLayout=void 0;var Y=z(762329),k=z(449784),P=function(D,E){var y;return D?(0,k.isNumber)(D)?y=function(M){return D}:y=D:y=function(M){return E||1},y},N=function(D){B(E,D);function E(y){var M=D.call(this)||this;return M.maxIteration=500,M.workerEnabled=!1,M.edgeStrength=200,M.nodeStrength=1e3,M.coulombDisScale=.005,M.damping=.9,M.maxSpeed=1e3,M.minMovement=.5,M.interval=.02,M.factor=1,M.linkDistance=1,M.gravity=10,M.preventOverlap=!0,M.collideStrength=1,M.tick=function(){},M.nodes=[],M.edges=[],M.width=300,M.height=300,M.nodeMap={},M.nodeIdxMap={},M.animate=!0,M.updateCfg(y),M}return E.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},E.prototype.execute=function(){var y,M,S=this,m=S.nodes;if(S.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(S.timeInterval),!m||m.length===0){(y=S.onLayoutEnd)===null||y===void 0||y.call(S);return}!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]);var I=S.center;if(m.length===1){m[0].x=I[0],m[0].y=I[1],(M=S.onLayoutEnd)===null||M===void 0||M.call(S);return}var A={},L={};m.forEach(function(W,j){(0,k.isNumber)(W.x)||(W.x=Math.random()*S.width),(0,k.isNumber)(W.y)||(W.y=Math.random()*S.height),A[W.id]=W,L[W.id]=j}),S.nodeMap=A,S.nodeIdxMap=L,S.linkDistance=P(S.linkDistance,1),S.nodeStrength=P(S.nodeStrength,1),S.edgeStrength=P(S.edgeStrength,1);var U=S.nodeSize,V;if(S.preventOverlap){var x=S.nodeSpacing,d;(0,k.isNumber)(x)?d=function(){return x}:(0,k.isFunction)(x)?d=x:d=function(){return 0},U?(0,k.isArray)(U)?V=function(W){return Math.max(U[0],U[1])+d(W)}:V=function(W){return U+d(W)}:V=function(W){return W.size?(0,k.isArray)(W.size)?Math.max(W.size[0],W.size[1])+d(W):(0,k.isObject)(W.size)?Math.max(W.size.width,W.size.height)+d(W):W.size+d(W):10+d(W)}}S.nodeSize=V;var at=S.edges;S.degrees=(0,k.getDegree)(m.length,S.nodeIdxMap,at),S.getMass||(S.getMass=function(W){var j=W.mass||S.degrees[S.nodeIdxMap[W.id]].all||1;return j}),S.run()},E.prototype.run=function(){var y,M=this,S=M.maxIteration,m=M.nodes,I=M.workerEnabled,A=M.minMovement,L=M.animate;if(m)if(I||!L){for(var U=0;U<S;U++){var V=M.runOneStep(U);if(M.reachMoveThreshold(m,V,A))break}(y=M.onLayoutEnd)===null||y===void 0||y.call(M)}else{if(typeof window=="undefined")return;var x=0;this.timeInterval=window.setInterval(function(){var d,at;if(m){var W=M.runOneStep(x)||[];M.reachMoveThreshold(m,W,A)&&((d=M.onLayoutEnd)===null||d===void 0||d.call(M),window.clearInterval(M.timeInterval)),x++,x>=S&&((at=M.onLayoutEnd)===null||at===void 0||at.call(M),window.clearInterval(M.timeInterval))}},0)}},E.prototype.reachMoveThreshold=function(y,M,S){var m=0;return y.forEach(function(I,A){var L=I.x-M[A].x,U=I.y-M[A].y;m+=Math.sqrt(L*L+U*U)}),m/=y.length,m<S},E.prototype.runOneStep=function(y){var M,S=this,m=S.nodes,I=S.edges,A=[],L=[];if(m){m.forEach(function(x,d){A[2*d]=0,A[2*d+1]=0,L[2*d]=0,L[2*d+1]=0}),S.calRepulsive(A,m),I&&S.calAttractive(A,I),S.calGravity(A,m);var U=Math.max(.02,S.interval-y*.002);S.updateVelocity(A,L,U,m);var V=[];return m.forEach(function(x){V.push({x:x.x,y:x.y})}),S.updatePosition(L,U,m),(M=S.tick)===null||M===void 0||M.call(S),V}},E.prototype.calRepulsive=function(y,M){var S=this,m=S.getMass,I=S.factor,A=S.coulombDisScale,L=S.preventOverlap,U=S.collideStrength,V=U===void 0?1:U,x=S.nodeStrength,d=S.nodeSize;M.forEach(function(at,W){var j=m?m(at):1;M.forEach(function($,q){if(!(W>=q)){var et=at.x-$.x,Q=at.y-$.y;et===0&&Q===0&&(et=Math.random()*.01,Q=Math.random()*.01);var it=et*et+Q*Q,ht=Math.sqrt(it),dt=(ht+.1)*A,Ot=et/ht,It=Q/ht,Kt=(x(at)+x($))*.5*I/(dt*dt),Ft=m?m($):1;if(y[2*W]+=Ot*Kt,y[2*W+1]+=It*Kt,y[2*q]-=Ot*Kt,y[2*q+1]-=It*Kt,L&&(d(at)+d($))/2>ht){var Nt=V*(x(at)+x($))*.5/it;y[2*W]+=Ot*Nt/j,y[2*W+1]+=It*Nt/j,y[2*q]-=Ot*Nt/Ft,y[2*q+1]-=It*Nt/Ft}}})})},E.prototype.calAttractive=function(y,M){var S=this,m=S.nodeMap,I=S.nodeIdxMap,A=S.linkDistance,L=S.edgeStrength,U=S.nodeSize,V=S.getMass;M.forEach(function(x,d){var at=(0,k.getEdgeTerminal)(x,"source"),W=(0,k.getEdgeTerminal)(x,"target"),j=m[at],$=m[W],q=$.x-j.x,et=$.y-j.y;q===0&&et===0&&(q=Math.random()*.01,et=Math.random()*.01);var Q=Math.sqrt(q*q+et*et),it=q/Q,ht=et/Q,dt=A(x,j,$)||1+(U(j)+U($)||0)/2,Ot=dt-Q,It=Ot*L(x),Kt=I[at],Ft=I[W],Nt=V?V(j):1,st=V?V($):1;y[2*Kt]-=it*It/Nt,y[2*Kt+1]-=ht*It/Nt,y[2*Ft]+=it*It/st,y[2*Ft+1]+=ht*It/st})},E.prototype.calGravity=function(y,M){for(var S=this,m=S.center,I=S.gravity,A=S.degrees,L=M.length,U=0;U<L;U++){var V=M[U],x=V.x-m[0],d=V.y-m[1],at=I;if(S.getCenter){var W=S.getCenter(V,A[U].all);W&&(0,k.isNumber)(W[0])&&(0,k.isNumber)(W[1])&&(0,k.isNumber)(W[2])&&(x=V.x-W[0],d=V.y-W[1],at=W[2])}at&&(y[2*U]-=at*x,y[2*U+1]-=at*d)}},E.prototype.updateVelocity=function(y,M,S,m){var I=this,A=S*I.damping;m.forEach(function(L,U){var V=y[2*U]*A||.01,x=y[2*U+1]*A||.01,d=Math.sqrt(V*V+x*x);if(d>I.maxSpeed){var at=I.maxSpeed/d;V=at*V,x=at*x}M[2*U]=V,M[2*U+1]=x})},E.prototype.updatePosition=function(y,M,S){S.forEach(function(m,I){if((0,k.isNumber)(m.fx)&&(0,k.isNumber)(m.fy)){m.x=m.fx,m.y=m.fy;return}var A=y[2*I]*M,L=y[2*I+1]*M;m.x+=A,m.y+=L})},E.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},E.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},E.prototype.getType=function(){return"gForce"},E}(Y.Base);R.GForceLayout=N},687745:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var m=function(I,A){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var V in U)Object.prototype.hasOwnProperty.call(U,V)&&(L[V]=U[V])},m(I,A)};return function(I,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");m(I,A);function L(){this.constructor=I}I.prototype=A===null?Object.create(A):(L.prototype=A.prototype,new L)}}(),Y=this&&this.__awaiter||function(m,I,A,L){function U(V){return V instanceof A?V:new A(function(x){x(V)})}return new(A||(A=Promise))(function(V,x){function d(j){try{W(L.next(j))}catch($){x($)}}function at(j){try{W(L.throw(j))}catch($){x($)}}function W(j){j.done?V(j.value):U(j.value).then(d,at)}W((L=L.apply(m,I||[])).next())})},k=this&&this.__generator||function(m,I){var A={label:0,sent:function(){if(V[0]&1)throw V[1];return V[1]},trys:[],ops:[]},L,U,V,x;return x={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function d(W){return function(j){return at([W,j])}}function at(W){if(L)throw new TypeError("Generator is already executing.");for(;x&&(x=0,W[0]&&(A=0)),A;)try{if(L=1,U&&(V=W[0]&2?U.return:W[0]?U.throw||((V=U.return)&&V.call(U),0):U.next)&&!(V=V.call(U,W[1])).done)return V;switch(U=0,V&&(W=[W[0]&2,V.value]),W[0]){case 0:case 1:V=W;break;case 4:return A.label++,{value:W[1],done:!1};case 5:A.label++,U=W[1],W=[0];continue;case 7:W=A.ops.pop(),A.trys.pop();continue;default:if(V=A.trys,!(V=V.length>0&&V[V.length-1])&&(W[0]===6||W[0]===2)){A=0;continue}if(W[0]===3&&(!V||W[1]>V[0]&&W[1]<V[3])){A.label=W[1];break}if(W[0]===6&&A.label<V[1]){A.label=V[1],V=W;break}if(V&&A.label<V[2]){A.label=V[2],A.ops.push(W);break}V[2]&&A.ops.pop(),A.trys.pop();continue}W=I.call(m,A)}catch(j){W=[6,j],U=0}finally{L=V=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}};Object.defineProperty(R,"__esModule",{value:!0}),R.FruchtermanGPULayout=void 0;var P=z(762329),N=z(449784),D=z(901029),E=z(248835),y=z(108574),M=z(416470),S=function(m){B(I,m);function I(A){var L=m.call(this)||this;return L.maxIteration=1e3,L.gravity=10,L.speed=1,L.clustering=!1,L.clusterField="cluster",L.clusterGravity=10,L.workerEnabled=!1,L.nodes=[],L.edges=[],L.width=300,L.height=300,L.nodeMap={},L.nodeIdxMap={},L.updateCfg(A),L}return I.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},I.prototype.execute=function(){return Y(this,void 0,void 0,function(){var A,L,U,V,x,d=this;return k(this,function(at){switch(at.label){case 0:return A=this,L=A.nodes,!L||L.length===0?(A.onLayoutEnd&&A.onLayoutEnd(),[2]):(!A.width&&typeof window!="undefined"&&(A.width=window.innerWidth),!A.height&&typeof window!="undefined"&&(A.height=window.innerHeight),A.center||(A.center=[A.width/2,A.height/2]),U=A.center,L.length===1?(L[0].x=U[0],L[0].y=U[1],A.onLayoutEnd&&A.onLayoutEnd(),[2]):(V={},x={},L.forEach(function(W,j){(0,N.isNumber)(W.x)||(W.x=Math.random()*d.width),(0,N.isNumber)(W.y)||(W.y=Math.random()*d.height),V[W.id]=W,x[W.id]=j}),A.nodeMap=V,A.nodeIdxMap=x,[4,A.run()]));case 1:return at.sent(),[2]}})})},I.prototype.executeWithWorker=function(A,L){return Y(this,void 0,void 0,function(){var U,V,x,d,at,W=this;return k(this,function(j){switch(j.label){case 0:return U=this,V=U.nodes,x=U.center,!V||V.length===0?[2]:V.length===1?(V[0].x=x[0],V[0].y=x[1],[2]):(d={},at={},V.forEach(function($,q){(0,N.isNumber)($.x)||($.x=Math.random()*W.width),(0,N.isNumber)($.y)||($.y=Math.random()*W.height),d[$.id]=$,at[$.id]=q}),U.nodeMap=d,U.nodeIdxMap=at,[4,U.run(A,L)]);case 1:return j.sent(),[2]}})})},I.prototype.run=function(A,L){return Y(this,void 0,void 0,function(){var U,V,x,d,at,W,j,$,q,et,Q,it,ht,dt,Ot,It,Kt,Ft,Nt,st,yt,kt,ee,$t,ge,Pe,tr=this;return k(this,function(Jt){switch(Jt.label){case 0:for(U=this,V=U.nodes,x=U.edges,d=U.maxIteration,at=U.center,W=U.height*U.width,j=Math.sqrt(W)/10,$=W/(V.length+1),q=Math.sqrt($),et=U.speed,Q=U.clustering,it=(0,E.attributesToTextureData)([U.clusterField],V),ht=it.array,dt=it.count,V.forEach(function(ae,Se){var xe=0,we=0;(0,N.isNumber)(ae.fx)&&(0,N.isNumber)(ae.fy)&&(xe=ae.fx||.001,we=ae.fy||.001),ht[4*Se+1]=xe,ht[4*Se+2]=we}),Ot=V.length,It=(0,E.buildTextureData)(V,x),Kt=It.maxEdgePerVetex,Ft=It.array,Nt=U.workerEnabled,Nt?st=D.World.create({canvas:A,engineOptions:{supportCompute:!0}}):st=D.World.create({engineOptions:{supportCompute:!0}}),yt=U.onLayoutEnd,kt=[],ee=0;ee<dt;ee++)kt.push(0,0,0,0);return $t=st.createKernel(y.fruchtermanBundle).setDispatch([Ot,1,1]).setBinding({u_Data:Ft,u_K:q,u_K2:$,u_Gravity:U.gravity,u_ClusterGravity:U.clusterGravity||U.gravity||1,u_Speed:et,u_MaxDisplace:j,u_Clustering:Q?1:0,u_Center:at,u_AttributeArray:ht,u_ClusterCenters:kt,MAX_EDGE_PER_VERTEX:Kt,VERTEX_COUNT:Ot}),Q&&(ge=st.createKernel(y.clusterBundle).setDispatch([dt,1,1]).setBinding({u_Data:Ft,u_NodeAttributes:ht,u_ClusterCenters:kt,VERTEX_COUNT:Ot,CLUSTER_COUNT:dt})),Pe=function(){return Y(tr,void 0,void 0,function(){var ae,Se;return k(this,function(xe){switch(xe.label){case 0:ae=0,xe.label=1;case 1:return ae<d?[4,$t.execute()]:[3,6];case 2:return xe.sent(),Q?(ge.setBinding({u_Data:$t}),[4,ge.execute()]):[3,4];case 3:xe.sent(),$t.setBinding({u_ClusterCenters:ge}),xe.label=4;case 4:$t.setBinding({u_MaxDisplace:j*=.99}),xe.label=5;case 5:return ae++,[3,1];case 6:return[4,$t.getOutput()];case 7:return Se=xe.sent(),A?L.postMessage({type:M.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Se}):V.forEach(function(we,zt){var Wt=Se[4*zt],Ie=Se[4*zt+1];we.x=Wt,we.y=Ie}),yt&&yt(),[2]}})})},[4,Pe()];case 1:return Jt.sent(),[2]}})})},I.prototype.getType=function(){return"fruchterman-gpu"},I}(P.Base);R.FruchtermanGPULayout=S},108574:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.clusterBundle=R.clusterCode=R.fruchtermanBundle=R.fruchtermanCode=void 0,R.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,R.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',R.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,R.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},785194:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var I=function(A,L){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,V){U.__proto__=V}||function(U,V){for(var x in V)Object.prototype.hasOwnProperty.call(V,x)&&(U[x]=V[x])},I(A,L)};return function(A,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");I(A,L);function U(){this.constructor=A}A.prototype=L===null?Object.create(L):(U.prototype=L.prototype,new U)}}(),Y=this&&this.__awaiter||function(I,A,L,U){function V(x){return x instanceof L?x:new L(function(d){d(x)})}return new(L||(L=Promise))(function(x,d){function at($){try{j(U.next($))}catch(q){d(q)}}function W($){try{j(U.throw($))}catch(q){d(q)}}function j($){$.done?x($.value):V($.value).then(at,W)}j((U=U.apply(I,A||[])).next())})},k=this&&this.__generator||function(I,A){var L={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},U,V,x,d;return d={next:at(0),throw:at(1),return:at(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function at(j){return function($){return W([j,$])}}function W(j){if(U)throw new TypeError("Generator is already executing.");for(;d&&(d=0,j[0]&&(L=0)),L;)try{if(U=1,V&&(x=j[0]&2?V.return:j[0]?V.throw||((x=V.return)&&x.call(V),0):V.next)&&!(x=x.call(V,j[1])).done)return x;switch(V=0,x&&(j=[j[0]&2,x.value]),j[0]){case 0:case 1:x=j;break;case 4:return L.label++,{value:j[1],done:!1};case 5:L.label++,V=j[1],j=[0];continue;case 7:j=L.ops.pop(),L.trys.pop();continue;default:if(x=L.trys,!(x=x.length>0&&x[x.length-1])&&(j[0]===6||j[0]===2)){L=0;continue}if(j[0]===3&&(!x||j[1]>x[0]&&j[1]<x[3])){L.label=j[1];break}if(j[0]===6&&L.label<x[1]){L.label=x[1],x=j;break}if(x&&L.label<x[2]){L.label=x[2],L.ops.push(j);break}x[2]&&L.ops.pop(),L.trys.pop();continue}j=A.call(I,L)}catch($){j=[6,$],V=0}finally{U=x=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}};Object.defineProperty(R,"__esModule",{value:!0}),R.GForceGPULayout=void 0;var P=z(762329),N=z(449784),D=z(901029),E=z(248835),y=z(280628),M=z(549762),S=z(416470),m=function(I){B(A,I);function A(L){var U=I.call(this)||this;return U.maxIteration=1e3,U.edgeStrength=200,U.nodeStrength=1e3,U.coulombDisScale=.005,U.damping=.9,U.maxSpeed=1e3,U.minMovement=.5,U.interval=.02,U.factor=1,U.linkDistance=1,U.gravity=10,U.workerEnabled=!1,U.nodes=[],U.edges=[],U.width=300,U.height=300,U.nodeMap={},U.nodeIdxMap={},U.updateCfg(L),U}return A.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},A.prototype.execute=function(){return Y(this,void 0,void 0,function(){var L,U,V,x,d;return k(this,function(at){switch(at.label){case 0:return L=this,U=L.nodes,!U||U.length===0?(L.onLayoutEnd&&L.onLayoutEnd(),[2]):(!L.width&&typeof window!="undefined"&&(L.width=window.innerWidth),!L.height&&typeof window!="undefined"&&(L.height=window.innerHeight),L.center||(L.center=[L.width/2,L.height/2]),V=L.center,U.length===1?(U[0].x=V[0],U[0].y=V[1],L.onLayoutEnd&&L.onLayoutEnd(),[2]):(x={},d={},U.forEach(function(W,j){(0,N.isNumber)(W.x)||(W.x=Math.random()*L.width),(0,N.isNumber)(W.y)||(W.y=Math.random()*L.height),x[W.id]=W,d[W.id]=j}),L.nodeMap=x,L.nodeIdxMap=d,L.nodeStrength=(0,E.proccessToFunc)(L.nodeStrength,1),L.edgeStrength=(0,E.proccessToFunc)(L.edgeStrength,1),[4,L.run()]));case 1:return at.sent(),[2]}})})},A.prototype.executeWithWorker=function(L,U){var V=this,x=V.nodes,d=V.center;if(!(!x||x.length===0)){if(x.length===1){x[0].x=d[0],x[0].y=d[1];return}var at={},W={};x.forEach(function(j,$){(0,N.isNumber)(j.x)||(j.x=Math.random()*V.width),(0,N.isNumber)(j.y)||(j.y=Math.random()*V.height),at[j.id]=j,W[j.id]=$}),V.nodeMap=at,V.nodeIdxMap=W,V.nodeStrength=(0,E.proccessToFunc)(V.nodeStrength,1),V.edgeStrength=(0,E.proccessToFunc)(V.edgeStrength,1),V.run(L,U)}},A.prototype.run=function(L,U){return Y(this,void 0,void 0,function(){var V,x,d,at,W,j,$,q,et,Q,it,ht,dt,Ot,It,Kt,Ft,Nt,st,yt,kt,ee,$t,ge,Pe,tr,Jt,ae=this;return k(this,function(Se){switch(Se.label){case 0:for(V=this,x=V.nodes,d=V.edges,at=V.maxIteration,!V.width&&typeof window!="undefined"&&(V.width=window.innerWidth),!V.height&&typeof window!="undefined"&&(V.height=window.innerHeight),W=x.length,V.linkDistance=(0,E.proccessToFunc)(V.linkDistance),V.edgeStrength=(0,E.proccessToFunc)(V.edgeStrength),j=(0,E.buildTextureDataWithTwoEdgeAttr)(x,d,V.linkDistance,V.edgeStrength),$=j.maxEdgePerVetex,q=j.array,V.degrees=(0,y.getDegree)(x.length,V.nodeIdxMap,d).map(function(xe){return xe.all}),et=[],Q=[],it=[],ht=[],dt=[],Ot=[],It=[],V.getMass||(V.getMass=function(xe){return V.degrees[V.nodeIdxMap[xe.id]]||1}),Kt=V.gravity,Ft=V.center,x.forEach(function(xe,we){et.push(V.getMass(xe)),Q.push(V.nodeStrength(xe)),V.degrees[we]||(V.degrees[we]=0);var zt=[Ft[0],Ft[1],Kt];if(V.getCenter){var Wt=V.getCenter(xe,V.degrees[we]);Wt&&(0,N.isNumber)(Wt[0])&&(0,N.isNumber)(Wt[1])&&(0,N.isNumber)(Wt[2])&&(zt=Wt)}it.push(zt[0]),ht.push(zt[1]),dt.push(zt[2]),(0,N.isNumber)(xe.fx)&&(0,N.isNumber)(xe.fy)?(Ot.push(xe.fx||.001),It.push(xe.fy||.001)):(Ot.push(0),It.push(0))}),Nt=(0,E.arrayToTextureData)([et,V.degrees,Q,Ot]),st=(0,E.arrayToTextureData)([it,ht,dt,It]),yt=V.workerEnabled,yt?kt=D.World.create({canvas:L,engineOptions:{supportCompute:!0}}):kt=D.World.create({engineOptions:{supportCompute:!0}}),ee=V.onLayoutEnd,$t=[],q.forEach(function(xe){$t.push(xe)}),ge=0;ge<4;ge++)$t.push(0);return Pe=kt.createKernel(M.gForceBundle).setDispatch([W,1,1]).setBinding({u_Data:q,u_damping:V.damping,u_maxSpeed:V.maxSpeed,u_minMovement:V.minMovement,u_coulombDisScale:V.coulombDisScale,u_factor:V.factor,u_NodeAttributeArray1:Nt,u_NodeAttributeArray2:st,MAX_EDGE_PER_VERTEX:$,VERTEX_COUNT:W,u_AveMovement:$t,u_interval:V.interval}),tr=kt.createKernel(M.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:q,VERTEX_COUNT:W,u_AveMovement:[0,0,0,0]}),Jt=function(){return Y(ae,void 0,void 0,function(){var xe,we,zt;return k(this,function(Wt){switch(Wt.label){case 0:xe=0,Wt.label=1;case 1:return xe<at?[4,Pe.execute()]:[3,5];case 2:return Wt.sent(),tr.setBinding({u_Data:Pe}),[4,tr.execute()];case 3:Wt.sent(),we=Math.max(.02,V.interval-xe*.002),Pe.setBinding({u_interval:we,u_AveMovement:tr}),Wt.label=4;case 4:return xe++,[3,1];case 5:return[4,Pe.getOutput()];case 6:return zt=Wt.sent(),L?U.postMessage({type:S.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:zt}):x.forEach(function(Ie,Yt){var ie=zt[4*Yt],Oe=zt[4*Yt+1];Ie.x=ie,Ie.y=Oe}),ee&&ee(),[2]}})})},[4,Jt()];case 1:return Se.sent(),[2]}})})},A.prototype.getType=function(){return"gForce-gpu"},A}(P.Base);R.GForceGPULayout=m},549762:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.aveMovementBundle=R.aveMovementCode=R.gForceBundle=R.gForceCode=void 0,R.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,R.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',R.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,R.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},694414:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var N=function(D,E){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,M){y.__proto__=M}||function(y,M){for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&(y[S]=M[S])},N(D,E)};return function(D,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");N(D,E);function y(){this.constructor=D}D.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.GridLayout=void 0;var Y=z(449784),k=z(762329),P=function(N){B(D,N);function D(E){var y=N.call(this)||this;return y.begin=[0,0],y.preventOverlap=!0,y.preventOverlapPadding=10,y.condense=!1,y.sortBy="degree",y.nodes=[],y.edges=[],y.width=300,y.height=300,y.row=0,y.col=0,y.cellWidth=0,y.cellHeight=0,y.cellUsed={},y.id2manPos={},y.onLayoutEnd=function(){},y.updateCfg(E),y}return D.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},D.prototype.execute=function(){var E=this,y=E.nodes,M=E.edges,S=E.begin,m=y.length;if(m===0)return E.onLayoutEnd&&E.onLayoutEnd(),{nodes:y,edges:M};if(m===1)return y[0].x=S[0],y[0].y=S[1],E.onLayoutEnd&&E.onLayoutEnd(),{nodes:y,edges:M};var I=E.sortBy,A=E.width,L=E.height,U=E.condense,V=E.preventOverlapPadding,x=E.preventOverlap,d=E.nodeSpacing,at=E.nodeSize,W=[];y.forEach(function(Nt){W.push(Nt)});var j={};if(W.forEach(function(Nt,st){j[Nt.id]=st}),(I==="degree"||!(0,Y.isString)(I)||W[0][I]===void 0)&&(I="degree",(0,Y.isNaN)(y[0].degree))){var $=(0,Y.getDegree)(W.length,j,M);W.forEach(function(Nt,st){Nt.degree=$[st].all})}W.sort(function(Nt,st){return st[I]-Nt[I]}),!A&&typeof window!="undefined"&&(A=window.innerWidth),!L&&typeof window!="undefined"&&(L=window.innerHeight);var q=E.rows,et=E.cols!=null?E.cols:E.columns;if(E.cells=m,q!=null&&et!=null?(E.rows=q,E.cols=et):q!=null&&et==null?(E.rows=q,E.cols=Math.ceil(E.cells/E.rows)):q==null&&et!=null?(E.cols=et,E.rows=Math.ceil(E.cells/E.cols)):(E.splits=Math.sqrt(E.cells*E.height/E.width),E.rows=Math.round(E.splits),E.cols=Math.round(E.width/E.height*E.splits)),E.rows=Math.max(E.rows,1),E.cols=Math.max(E.cols,1),E.cols*E.rows>E.cells){var Q=E.small(),it=E.large();(Q-1)*it>=E.cells?E.small(Q-1):(it-1)*Q>=E.cells&&E.large(it-1)}else for(;E.cols*E.rows<E.cells;){var Q=E.small(),it=E.large();(it+1)*Q>=E.cells?E.large(it+1):E.small(Q+1)}if(E.cellWidth=A/E.cols,E.cellHeight=L/E.rows,U&&(E.cellWidth=0,E.cellHeight=0),x||d){var ht=(0,Y.getFuncByUnknownType)(10,d),dt=(0,Y.getFuncByUnknownType)(30,at,!1);W.forEach(function(Nt){(!Nt.x||!Nt.y)&&(Nt.x=0,Nt.y=0);var st=dt(Nt)||30,yt,kt;(0,Y.isArray)(st)?(yt=st[0],kt=st[1]):(yt=st,kt=st);var ee=ht!==void 0?ht(Nt):V,$t=yt+ee,ge=kt+ee;E.cellWidth=Math.max(E.cellWidth,$t),E.cellHeight=Math.max(E.cellHeight,ge)})}E.cellUsed={},E.row=0,E.col=0,E.id2manPos={};for(var Ot=0;Ot<W.length;Ot++){var It=W[Ot],Kt=void 0;if(E.position&&(Kt=E.position(It)),Kt&&(Kt.row!==void 0||Kt.col!==void 0)){var Ft={row:Kt.row,col:Kt.col};if(Ft.col===void 0)for(Ft.col=0;E.used(Ft.row,Ft.col);)Ft.col++;else if(Ft.row===void 0)for(Ft.row=0;E.used(Ft.row,Ft.col);)Ft.row++;E.id2manPos[It.id]=Ft,E.use(Ft.row,Ft.col)}E.getPos(It)}return E.onLayoutEnd&&E.onLayoutEnd(),{edges:M,nodes:W}},D.prototype.small=function(E){var y=this,M,S=y.rows||5,m=y.cols||5;if(E==null)M=Math.min(S,m);else{var I=Math.min(S,m);I===y.rows?y.rows=E:y.cols=E}return M},D.prototype.large=function(E){var y=this,M,S=y.rows||5,m=y.cols||5;if(E==null)M=Math.max(S,m);else{var I=Math.max(S,m);I===y.rows?y.rows=E:y.cols=E}return M},D.prototype.used=function(E,y){var M=this;return M.cellUsed["c-".concat(E,"-").concat(y)]||!1},D.prototype.use=function(E,y){var M=this;M.cellUsed["c-".concat(E,"-").concat(y)]=!0},D.prototype.moveToNextCell=function(){var E=this,y=E.cols||5;E.col++,E.col>=y&&(E.col=0,E.row++)},D.prototype.getPos=function(E){var y=this,M=y.begin,S=y.cellWidth,m=y.cellHeight,I,A,L=y.id2manPos[E.id];if(L)I=L.col*S+S/2+M[0],A=L.row*m+m/2+M[1];else{for(;y.used(y.row,y.col);)y.moveToNextCell();I=y.col*S+S/2+M[0],A=y.row*m+m/2+M[1],y.use(y.row,y.col),y.moveToNextCell()}E.x=I,E.y=A},D.prototype.getType=function(){return"grid"},D}(k.Base);R.GridLayout=P},702584:function(yr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function($,q,et,Q){Q===void 0&&(Q=et);var it=Object.getOwnPropertyDescriptor(q,et);(!it||("get"in it?!q.__esModule:it.writable||it.configurable))&&(it={enumerable:!0,get:function(){return q[et]}}),Object.defineProperty($,Q,it)}:function($,q,et,Q){Q===void 0&&(Q=et),$[Q]=q[et]}),Y=this&&this.__exportStar||function($,q){for(var et in $)et!=="default"&&!Object.prototype.hasOwnProperty.call(q,et)&&B(q,$,et)};Object.defineProperty(R,"__esModule",{value:!0}),R.ERLayout=R.ForceAtlas2Layout=R.ComboCombinedLayout=R.ComboForceLayout=R.GForceGPULayout=R.FruchtermanGPULayout=R.FruchtermanLayout=R.MDSLayout=R.ConcentricLayout=R.RadialLayout=R.DagreCompoundLayout=R.DagreLayout=R.CircularLayout=R.ForceLayout=R.Force2Layout=R.GForceLayout=R.RandomLayout=R.GridLayout=R.Layouts=R.Layout=void 0;var k=z(694414);Object.defineProperty(R,"GridLayout",{enumerable:!0,get:function(){return k.GridLayout}});var P=z(539711);Object.defineProperty(R,"RandomLayout",{enumerable:!0,get:function(){return P.RandomLayout}});var N=z(113653);Object.defineProperty(R,"GForceLayout",{enumerable:!0,get:function(){return N.GForceLayout}});var D=z(306740);Object.defineProperty(R,"Force2Layout",{enumerable:!0,get:function(){return D.Force2Layout}});var E=z(885717);Object.defineProperty(R,"ForceLayout",{enumerable:!0,get:function(){return E.ForceLayout}});var y=z(964885);Object.defineProperty(R,"CircularLayout",{enumerable:!0,get:function(){return y.CircularLayout}});var M=z(920171);Object.defineProperty(R,"DagreLayout",{enumerable:!0,get:function(){return M.DagreLayout}});var S=z(177057);Object.defineProperty(R,"DagreCompoundLayout",{enumerable:!0,get:function(){return S.DagreCompoundLayout}});var m=z(847944);Object.defineProperty(R,"RadialLayout",{enumerable:!0,get:function(){return m.RadialLayout}});var I=z(843281);Object.defineProperty(R,"ConcentricLayout",{enumerable:!0,get:function(){return I.ConcentricLayout}});var A=z(352899);Object.defineProperty(R,"MDSLayout",{enumerable:!0,get:function(){return A.MDSLayout}});var L=z(880374);Object.defineProperty(R,"FruchtermanLayout",{enumerable:!0,get:function(){return L.FruchtermanLayout}});var U=z(687745);Object.defineProperty(R,"FruchtermanGPULayout",{enumerable:!0,get:function(){return U.FruchtermanGPULayout}});var V=z(785194);Object.defineProperty(R,"GForceGPULayout",{enumerable:!0,get:function(){return V.GForceGPULayout}});var x=z(366590);Object.defineProperty(R,"ComboForceLayout",{enumerable:!0,get:function(){return x.ComboForceLayout}});var d=z(263861);Object.defineProperty(R,"ComboCombinedLayout",{enumerable:!0,get:function(){return d.ComboCombinedLayout}});var at=z(148564);Object.defineProperty(R,"ForceAtlas2Layout",{enumerable:!0,get:function(){return at.ForceAtlas2Layout}});var W=z(290441);Object.defineProperty(R,"ERLayout",{enumerable:!0,get:function(){return W.ERLayout}});var j=z(842875);Object.defineProperty(R,"Layout",{enumerable:!0,get:function(){return j.Layout}}),Object.defineProperty(R,"Layouts",{enumerable:!0,get:function(){return j.Layouts}}),Y(z(932867),R)},842875:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Layouts=R.Layout=void 0;var B=z(695326),Y=z(694414),k=z(539711),P=z(306740),N=z(113653),D=z(885717),E=z(964885),y=z(920171),M=z(847944),S=z(843281),m=z(352899),I=z(880374),A=z(687745),L=z(785194),U=z(366590),V=z(263861),x=z(148564),d=z(290441),at=z(177057),W=z(449784),j=function(){function $(q){var et=(0,B.getLayoutByName)(q.type);this.layoutInstance=new et(q)}return $.prototype.layout=function(q){return this.layoutInstance.layout(q)},$.prototype.updateCfg=function(q){this.layoutInstance.updateCfg(q)},$.prototype.init=function(q){this.correctLayers(q.nodes),this.layoutInstance.init(q)},$.prototype.correctLayers=function(q){if(q!=null&&q.length){var et=1/0,Q=[];if(q.forEach(function(ht){(0,W.isString)(ht.layer)&&(ht.layer=parseInt(ht.layer,10)),!(ht.layer===void 0||isNaN(ht.layer))&&(Q.push(ht),ht.layer<et&&(et=ht.layer))}),et<=0){var it=Math.abs(et)+1;Q.forEach(function(ht){return ht.layer+=it})}}},$.prototype.execute=function(){this.layoutInstance.execute()},$.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},$.prototype.destroy=function(){return this.layoutInstance.destroy()},$}();R.Layout=j,R.Layouts={force:D.ForceLayout,fruchterman:I.FruchtermanLayout,forceAtlas2:x.ForceAtlas2Layout,gForce:N.GForceLayout,force2:P.Force2Layout,dagre:y.DagreLayout,dagreCompound:at.DagreCompoundLayout,circular:E.CircularLayout,radial:M.RadialLayout,concentric:S.ConcentricLayout,grid:Y.GridLayout,mds:m.MDSLayout,comboForce:U.ComboForceLayout,comboCombined:V.ComboCombinedLayout,random:k.RandomLayout,"gForce-gpu":L.GForceGPULayout,"fruchterman-gpu":A.FruchtermanGPULayout,er:d.ERLayout}},352899:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var D=function(E,y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,S){M.__proto__=S}||function(M,S){for(var m in S)Object.prototype.hasOwnProperty.call(S,m)&&(M[m]=S[m])},D(E,y)};return function(E,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");D(E,y);function M(){this.constructor=E}E.prototype=y===null?Object.create(y):(M.prototype=y.prototype,new M)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.MDSLayout=void 0;var Y=z(249612),k=z(449784),P=z(762329),N=function(D){B(E,D);function E(y){var M=D.call(this)||this;return M.center=[0,0],M.linkDistance=50,M.nodes=[],M.edges=[],M.onLayoutEnd=function(){},M.updateCfg(y),M}return E.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},E.prototype.execute=function(){var y=this,M=y.nodes,S=y.edges,m=S===void 0?[]:S,I=y.center;if(!M||M.length===0){y.onLayoutEnd&&y.onLayoutEnd();return}if(M.length===1){M[0].x=I[0],M[0].y=I[1],y.onLayoutEnd&&y.onLayoutEnd();return}var A=y.linkDistance,L=(0,k.getAdjMatrix)({nodes:M,edges:m},!1),U=(0,k.floydWarshall)(L);y.handleInfinity(U);var V=(0,k.scaleMatrix)(U,A);y.scaledDistances=V;var x=y.runMDS();return y.positions=x,x.forEach(function(d,at){M[at].x=d[0]+I[0],M[at].y=d[1]+I[1]}),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:M,edges:m}},E.prototype.runMDS=function(){var y=this,M=2,S=y.scaledDistances,m=Y.Matrix.mul(Y.Matrix.pow(S,2),-.5),I=m.mean("row"),A=m.mean("column"),L=m.mean();m.add(L).subRowVector(I).subColumnVector(A);var U=new Y.SingularValueDecomposition(m),V=Y.Matrix.sqrt(U.diagonalMatrix).diagonal();return U.leftSingularVectors.toJSON().map(function(x){return Y.Matrix.mul([x],[V]).toJSON()[0].splice(0,M)})},E.prototype.handleInfinity=function(y){var M=-999999;y.forEach(function(S){S.forEach(function(m){m!==1/0&&M<m&&(M=m)})}),y.forEach(function(S,m){S.forEach(function(I,A){I===1/0&&(y[m][A]=M)})})},E.prototype.getType=function(){return"mds"},E}(P.Base);R.MDSLayout=N},847944:function(yr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(k,P,N,D){D===void 0&&(D=N);var E=Object.getOwnPropertyDescriptor(P,N);(!E||("get"in E?!P.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return P[N]}}),Object.defineProperty(k,D,E)}:function(k,P,N,D){D===void 0&&(D=N),k[D]=P[N]}),Y=this&&this.__exportStar||function(k,P){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(P,N)&&B(P,k,N)};Object.defineProperty(R,"__esModule",{value:!0}),Y(z(255974),R)},366082:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(249612),Y=function(){function k(P){this.distances=P.distances,this.dimension=P.dimension||2,this.linkDistance=P.linkDistance}return k.prototype.layout=function(){var P=this,N=P.dimension,D=P.distances,E=P.linkDistance;try{var y=B.Matrix.mul(B.Matrix.pow(D,2),-.5),M=y.mean("row"),S=y.mean("column"),m=y.mean();y.add(m).subRowVector(M).subColumnVector(S);var I=new B.SingularValueDecomposition(y),A=B.Matrix.sqrt(I.diagonalMatrix).diagonal();return I.leftSingularVectors.toJSON().map(function(d){return B.Matrix.mul([d],[A]).toJSON()[0].splice(0,N)})}catch(d){for(var L=[],U=0;U<D.length;U++){var V=Math.random()*E,x=Math.random()*E;L.push([V,x])}return L}},k}();R.default=Y},255974:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var m=function(I,A){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var V in U)Object.prototype.hasOwnProperty.call(U,V)&&(L[V]=U[V])},m(I,A)};return function(I,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");m(I,A);function L(){this.constructor=I}I.prototype=A===null?Object.create(A):(L.prototype=A.prototype,new L)}}(),Y=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(R,"__esModule",{value:!0}),R.RadialLayout=void 0;var k=z(449784),P=z(762329),N=Y(z(366082)),D=Y(z(706290));function E(m){for(var I=m.length,A=m[0].length,L=[],U=0;U<I;U++){for(var V=[],x=0;x<A;x++)m[U][x]!==0?V.push(1/(m[U][x]*m[U][x])):V.push(0);L.push(V)}return L}function y(m,I){var A=-1;return m.forEach(function(L,U){L.id===I&&(A=U)}),A}function M(m,I){return Math.sqrt((m[0]-I[0])*(m[0]-I[0])+(m[1]-I[1])*(m[1]-I[1]))}var S=function(m){B(I,m);function I(A){var L=m.call(this)||this;return L.maxIteration=1e3,L.focusNode=null,L.unitRadius=null,L.linkDistance=50,L.preventOverlap=!1,L.strictRadial=!0,L.maxPreventOverlapIteration=200,L.sortStrength=10,L.nodes=[],L.edges=[],L.updateCfg(A),L}return I.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10,initWithMDS:!0}},I.prototype.execute=function(){var A=this,L=A.nodes,U=A.edges||[];if(!L||L.length===0){A.onLayoutEnd&&A.onLayoutEnd();return}!A.width&&typeof window!="undefined"&&(A.width=window.innerWidth),!A.height&&typeof window!="undefined"&&(A.height=window.innerHeight),A.center||(A.center=[A.width/2,A.height/2]);var V=A.center;if(L.length===1){L[0].x=V[0],L[0].y=V[1],A.onLayoutEnd&&A.onLayoutEnd();return}var x=A.linkDistance,d=null;if((0,k.isString)(A.focusNode)){for(var at=!1,W=0;W<L.length;W++)L[W].id===A.focusNode&&(d=L[W],A.focusNode=d,at=!0,W=L.length);at||(d=null)}else d=A.focusNode;d||(d=L[0],A.focusNode=d);var j=y(L,d.id);j<0&&(j=0),A.focusIndex=j;var $=(0,k.getAdjMatrix)({nodes:L,edges:U},!1),q=(0,k.floydWarshall)($),et=A.maxToFocus(q,j);A.handleInfinity(q,j,et+1),A.distances=q;var Q=q[j],it=A.width||500,ht=A.height||500,dt=it-V[0]>V[0]?V[0]:it-V[0],Ot=ht-V[1]>V[1]?V[1]:ht-V[1];dt===0&&(dt=it/2),Ot===0&&(Ot=ht/2);var It=Ot>dt?dt:Ot,Kt=Math.max.apply(Math,Q),Ft=[];Q.forEach(function(xe,we){A.unitRadius||(A.unitRadius=It/Kt),Ft[we]=xe*A.unitRadius}),A.radii=Ft;var Nt=A.eIdealDisMatrix();A.eIdealDistances=Nt;var st=E(Nt);if(A.weights=st,A.initWithMDS){var yt=new N.default({linkDistance:x,distances:Nt}),kt=yt.layout();kt.forEach(function(xe){(0,k.isNaN)(xe[0])&&(xe[0]=Math.random()*x),(0,k.isNaN)(xe[1])&&(xe[1]=Math.random()*x)}),A.positions=kt}else A.positions=L.map(function(xe,we){return[(Math.random()-.5)*Nt[we][j],(Math.random()-.5)*Nt[we][j]]});A.positions.forEach(function(xe,we){L[we].x=xe[0]+V[0],L[we].y=xe[1]+V[1]}),A.positions.forEach(function(xe){xe[0]-=A.positions[j][0],xe[1]-=A.positions[j][1]}),A.run();var ee=A.preventOverlap,$t=A.nodeSize,ge,Pe=A.strictRadial;if(ee){var tr=A.nodeSpacing,Jt;(0,k.isNumber)(tr)?Jt=function(){return tr}:(0,k.isFunction)(tr)?Jt=tr:Jt=function(){return 0},$t?(0,k.isArray)($t)?ge=function(xe){var we=$t[0]>$t[1]?$t[0]:$t[1];return we+Jt(xe)}:ge=function(xe){return $t+Jt(xe)}:ge=function(xe){if(xe.size){if((0,k.isArray)(xe.size)){var we=xe.size[0]>xe.size[1]?xe.size[0]:xe.size[1];return we+Jt(xe)}if((0,k.isObject)(xe.size)){var we=xe.size.width>xe.size.height?xe.size.width:xe.size.height;return we+Jt(xe)}return xe.size+Jt(xe)}return 10+Jt(xe)};var ae={nodes:L,nodeSizeFunc:ge,adjMatrix:$,positions:A.positions,radii:Ft,height:ht,width:it,strictRadial:Pe,focusID:j,iterations:A.maxPreventOverlapIteration||200,k:A.positions.length/4.5},Se=new D.default(ae);A.positions=Se.layout()}return A.positions.forEach(function(xe,we){L[we].x=xe[0]+V[0],L[we].y=xe[1]+V[1]}),A.onLayoutEnd&&A.onLayoutEnd(),{nodes:L,edges:U}},I.prototype.run=function(){for(var A=this,L=A.maxIteration,U=A.positions||[],V=A.weights||[],x=A.eIdealDistances||[],d=A.radii||[],at=0;at<=L;at++){var W=at/L;A.oneIteration(W,U,d,x,V)}},I.prototype.oneIteration=function(A,L,U,V,x){var d=this,at=1-A,W=d.focusIndex;L.forEach(function(j,$){var q=M(j,[0,0]),et=q===0?0:1/q;if($!==W){var Q=0,it=0,ht=0;L.forEach(function(Ot,It){if($!==It){var Kt=M(j,Ot),Ft=Kt===0?0:1/Kt,Nt=V[It][$];ht+=x[$][It],Q+=x[$][It]*(Ot[0]+Nt*(j[0]-Ot[0])*Ft),it+=x[$][It]*(Ot[1]+Nt*(j[1]-Ot[1])*Ft)}});var dt=U[$]===0?0:1/U[$];ht*=at,ht+=A*dt*dt,Q*=at,Q+=A*dt*j[0]*et,j[0]=Q/ht,it*=at,it+=A*dt*j[1]*et,j[1]=it/ht}})},I.prototype.eIdealDisMatrix=function(){var A=this,L=A.nodes;if(!L)return[];var U=A.distances,V=A.linkDistance,x=A.radii||[],d=A.unitRadius||50,at=[];return U&&U.forEach(function(W,j){var $=[];W.forEach(function(q,et){if(j===et)$.push(0);else if(x[j]===x[et])if(A.sortBy==="data")$.push(q*(Math.abs(j-et)*A.sortStrength)/(x[j]/d));else if(A.sortBy){var Q=L[j][A.sortBy]||0,it=L[et][A.sortBy]||0;(0,k.isString)(Q)&&(Q=Q.charCodeAt(0)),(0,k.isString)(it)&&(it=it.charCodeAt(0)),$.push(q*(Math.abs(Q-it)*A.sortStrength)/(x[j]/d))}else $.push(q*V/(x[j]/d));else{var ht=(V+d)/2;$.push(q*ht)}}),at.push($)}),at},I.prototype.handleInfinity=function(A,L,U){for(var V=A.length,x=0;x<V;x++)if(A[L][x]===1/0){A[L][x]=U,A[x][L]=U;for(var d=0;d<V;d++)A[x][d]!==1/0&&A[L][d]===1/0&&(A[L][d]=U+A[x][d],A[d][L]=U+A[x][d])}for(var x=0;x<V;x++)if(x!==L){for(var d=0;d<V;d++)if(A[x][d]===1/0){var at=Math.abs(A[L][x]-A[L][d]);at=at===0?1:at,A[x][d]=at}}},I.prototype.maxToFocus=function(A,L){for(var U=0,V=0;V<A[L].length;V++)A[L][V]!==1/0&&(U=A[L][V]>U?A[L][V]:U);return U},I.prototype.getType=function(){return"radial"},I}(P.Base);R.RadialLayout=S},706290:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=800,B=function(){function Y(k){this.disp=[],this.positions=k.positions,this.adjMatrix=k.adjMatrix,this.focusID=k.focusID,this.radii=k.radii,this.iterations=k.iterations||10,this.height=k.height||10,this.width=k.width||10,this.speed=k.speed||100,this.gravity=k.gravity||10,this.nodeSizeFunc=k.nodeSizeFunc,this.k=k.k||5,this.strictRadial=k.strictRadial,this.nodes=k.nodes}return Y.prototype.layout=function(){var k=this,P=k.positions,N=[],D=k.iterations,E=k.width/10;k.maxDisplace=E,k.disp=N;for(var y=0;y<D;y++)P.forEach(function(M,S){N[S]={x:0,y:0}}),k.getRepulsion(),k.updatePositions();return P},Y.prototype.getRepulsion=function(){var k=this,P=k.positions,N=k.nodes,D=k.disp,E=k.k,y=k.radii||[];P.forEach(function(M,S){D[S]={x:0,y:0},P.forEach(function(m,I){if(S!==I&&y[S]===y[I]){var A=M[0]-m[0],L=M[1]-m[1],U=Math.sqrt(A*A+L*L);if(U===0){U=1;var V=S>I?1:-1;A=.01*V,L=.01*V}if(U<k.nodeSizeFunc(N[S])/2+k.nodeSizeFunc(N[I])/2){var x=E*E/U;D[S].x+=A/U*x,D[S].y+=L/U*x}}})})},Y.prototype.updatePositions=function(){var k=this,P=k.positions,N=k.disp,D=k.speed,E=k.strictRadial,y=k.focusID,M=k.maxDisplace||k.width/10;E&&N.forEach(function(m,I){var A=P[I][0]-P[y][0],L=P[I][1]-P[y][1],U=Math.sqrt(A*A+L*L),V=L/U,x=-A/U,d=Math.sqrt(m.x*m.x+m.y*m.y),at=Math.acos((V*m.x+x*m.y)/d);at>Math.PI/2&&(at-=Math.PI/2,V*=-1,x*=-1);var W=Math.cos(at)*d;m.x=V*W,m.y=x*W});var S=k.radii;P.forEach(function(m,I){if(I!==y){var A=Math.sqrt(N[I].x*N[I].x+N[I].y*N[I].y);if(A>0&&I!==y){var L=Math.min(M*(D/z),A);if(m[0]+=N[I].x/A*L,m[1]+=N[I].y/A*L,E){var U=m[0]-P[y][0],V=m[1]-P[y][1],x=Math.sqrt(U*U+V*V);U=U/x*S[I],V=V/x*S[I],m[0]=P[y][0]+U,m[1]=P[y][1]+V}}}})},Y}();R.default=B},539711:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var P=function(N,D){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,y){E.__proto__=y}||function(E,y){for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&(E[M]=y[M])},P(N,D)};return function(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");P(N,D);function E(){this.constructor=N}N.prototype=D===null?Object.create(D):(E.prototype=D.prototype,new E)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.RandomLayout=void 0;var Y=z(762329),k=function(P){B(N,P);function N(D){var E=P.call(this)||this;return E.center=[0,0],E.width=300,E.height=300,E.nodes=[],E.edges=[],E.onLayoutEnd=function(){},E.updateCfg(D),E}return N.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},N.prototype.execute=function(){var D=this,E=D.nodes,y=.9,M=D.center;return!D.width&&typeof window!="undefined"&&(D.width=window.innerWidth),!D.height&&typeof window!="undefined"&&(D.height=window.innerHeight),E&&E.forEach(function(S){S.x=(Math.random()-.5)*y*D.width+M[0],S.y=(Math.random()-.5)*y*D.height+M[1]}),D.onLayoutEnd&&D.onLayoutEnd(),{nodes:E,edges:this.edges}},N.prototype.getType=function(){return"random"},N}(Y.Base);R.RandomLayout=k},932867:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0})},695326:function(yr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,S){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,S)};return function(M,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");y(M,S);function m(){this.constructor=M}M.prototype=S===null?Object.create(S):(m.prototype=S.prototype,new m)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.getLayoutByName=R.unRegisterLayout=R.registerLayout=void 0;var Y=z(762329),k=z(449784),P=new Map,N=function(y,M){if(P.get(y)&&console.warn("The layout with the name ".concat(y," exists already, it will be overridden")),(0,k.isObject)(M)){var S=function(m){B(I,m);function I(A){var L=this,U;L=m.call(this)||this;var V=L,x={},d=Object.assign({},V.getDefaultCfg(),((U=M.getDefaultCfg)===null||U===void 0?void 0:U.call(M))||{});return Object.assign(x,d,M,A),Object.keys(x).forEach(function(at){var W=x[at];V[at]=W}),L}return I}(Y.Base);P.set(y,S)}else P.set(y,M);return P.get(y)};R.registerLayout=N;var D=function(y){P.has(y)&&P.delete(y)};R.unRegisterLayout=D;var E=function(y){return P.has(y)?P.get(y):null};R.getLayoutByName=E},185087:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.isArray=void 0,R.isArray=Array.isArray},578732:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getFuncByUnknownType=R.getFunc=R.isFunction=void 0;var B=z(449784),Y=z(330627),k=function(D){return typeof D=="function"};R.isFunction=k;var P=function(D,E,y){var M;return y?M=y:(0,Y.isNumber)(D)?M=function(){return D}:M=function(){return E},M};R.getFunc=P;var N=function(D,E,y){return y===void 0&&(y=!0),!E&&E!==0?function(M){return M.size?(0,B.isArray)(M.size)?M.size[0]>M.size[1]?M.size[0]:M.size[1]:(0,B.isObject)(M.size)?M.size.width>M.size.height?M.size.width:M.size.height:M.size:D}:(0,R.isFunction)(E)?E:(0,Y.isNumber)(E)?function(){return E}:(0,B.isArray)(E)?function(){if(y){var M=Math.max.apply(Math,E);return isNaN(M)?D:M}return E}:(0,B.isObject)(E)?function(){if(y){var M=Math.max(E.width,E.height);return isNaN(M)?D:M}return[E.width,E.height]}:function(){return D}};R.getFuncByUnknownType=N},248835:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.arrayToTextureData=R.attributesToTextureData=R.buildTextureDataWithTwoEdgeAttr=R.buildTextureData=R.proccessToFunc=void 0;var B=z(449784),Y=z(280628),k=function(y,M){var S;return y?(0,B.isNumber)(y)?S=function(){return y}:S=y:S=function(){return M||1},S};R.proccessToFunc=k;var P=function(y,M){var S=[],m=[],I={},A=0;for(A=0;A<y.length;A++){var L=y[A];I[L.id]=A,S.push(L.x),S.push(L.y),S.push(0),S.push(0),m.push([])}for(A=0;A<M.length;A++){var U=M[A],V=(0,Y.getEdgeTerminal)(U,"source"),x=(0,Y.getEdgeTerminal)(U,"target");!isNaN(I[V])&&!isNaN(I[x])&&(m[I[V]].push(I[x]),m[I[x]].push(I[V]))}var d=0;for(A=0;A<y.length;A++){var at=S.length,W=m[A],j=W.length;S[A*4+2]=at,S[A*4+3]=j,d=Math.max(d,j);for(var $=0;$<j;++$){var q=W[$];S.push(+q)}}for(;S.length%4!==0;)S.push(0);return{maxEdgePerVetex:d,array:new Float32Array(S)}};R.buildTextureData=P;var N=function(y,M,S,m){var I=[],A=[],L={},U=0;for(U=0;U<y.length;U++){var V=y[U];L[V.id]=U,I.push(V.x),I.push(V.y),I.push(0),I.push(0),A.push([])}for(U=0;U<M.length;U++){var x=M[U],d=(0,Y.getEdgeTerminal)(x,"source"),at=(0,Y.getEdgeTerminal)(x,"target");A[L[d]].push(L[at]),A[L[d]].push(S(x)),A[L[d]].push(m(x)),A[L[d]].push(0),A[L[at]].push(L[d]),A[L[at]].push(S(x)),A[L[at]].push(m(x)),A[L[at]].push(0)}var W=0;for(U=0;U<y.length;U++){var j=I.length,$=A[U],q=$.length;I[U*4+2]=j+1048576*q/4,I[U*4+3]=0,W=Math.max(W,q/4);for(var et=0;et<q;++et){var Q=$[et];I.push(+Q)}}for(;I.length%4!==0;)I.push(0);return{maxEdgePerVetex:W,array:new Float32Array(I)}};R.buildTextureDataWithTwoEdgeAttr=N;var D=function(y,M){var S=[],m=y.length,I={};return M.forEach(function(A){y.forEach(function(L,U){if(I[A[L]]===void 0&&(I[A[L]]=Object.keys(I).length),S.push(I[A[L]]),U===m-1)for(;S.length%4!==0;)S.push(0)})}),{array:new Float32Array(S),count:Object.keys(I).length}};R.attributesToTextureData=D;var E=function(y){for(var M=[],S=y.length,m=y[0].length,I=function(L){y.forEach(function(U,V){if(M.push(U[L]),V===S-1)for(;M.length%4!==0;)M.push(0)})},A=0;A<m;A++)I(A);return new Float32Array(M)};R.arrayToTextureData=E},449784:function(yr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(k,P,N,D){D===void 0&&(D=N);var E=Object.getOwnPropertyDescriptor(P,N);(!E||("get"in E?!P.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return P[N]}}),Object.defineProperty(k,D,E)}:function(k,P,N,D){D===void 0&&(D=N),k[D]=P[N]}),Y=this&&this.__exportStar||function(k,P){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(P,N)&&B(P,k,N)};Object.defineProperty(R,"__esModule",{value:!0}),Y(z(708055),R),Y(z(185087),R),Y(z(330627),R),Y(z(280628),R),Y(z(898130),R),Y(z(578732),R)},280628:function(yr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getCoreNodeAndRelativeLeafNodes=R.getAvgNodePosition=R.getLayoutBBox=R.traverseTreeUp=R.scaleMatrix=R.getAdjMatrix=R.floydWarshall=R.getDegreeMap=R.getDegree=R.getEdgeTerminal=void 0;var B=z(185087),Y=z(330627),k=z(898130),P=function(d,at){var W=d[at];return(0,k.isObject)(W)?W.cell:W};R.getEdgeTerminal=P;var N=function(d,at,W){for(var j=[],$=0;$<d;$++)j[$]={in:0,out:0,all:0};return W&&W.forEach(function(q){var et=(0,R.getEdgeTerminal)(q,"source"),Q=(0,R.getEdgeTerminal)(q,"target");et&&j[at[et]]&&(j[at[et]].out+=1,j[at[et]].all+=1),Q&&j[at[Q]]&&(j[at[Q]].in+=1,j[at[Q]].all+=1)}),j};R.getDegree=N;var D=function(d,at){var W={};return d.forEach(function(j){W[j.id]={in:0,out:0,all:0}}),at&&at.forEach(function(j){var $=(0,R.getEdgeTerminal)(j,"source"),q=(0,R.getEdgeTerminal)(j,"target");$&&(W[$].out+=1,W[$].all+=1),q&&(W[q].in+=1,W[q].all+=1)}),W};R.getDegreeMap=D;var E=function(d){for(var at=[],W=d.length,j=0;j<W;j+=1){at[j]=[];for(var $=0;$<W;$+=1)j===$?at[j][$]=0:d[j][$]===0||!d[j][$]?at[j][$]=1/0:at[j][$]=d[j][$]}for(var q=0;q<W;q+=1)for(var j=0;j<W;j+=1)for(var $=0;$<W;$+=1)at[j][$]>at[j][q]+at[q][$]&&(at[j][$]=at[j][q]+at[q][$]);return at};R.floydWarshall=E;var y=function(d,at){var W=d.nodes,j=d.edges,$=[],q={};if(!W)throw new Error("invalid nodes data!");return W&&W.forEach(function(et,Q){q[et.id]=Q;var it=[];$.push(it)}),j==null||j.forEach(function(et){var Q=(0,R.getEdgeTerminal)(et,"source"),it=(0,R.getEdgeTerminal)(et,"target"),ht=q[Q],dt=q[it];ht===void 0||dt===void 0||($[ht][dt]=1,at||($[dt][ht]=1))}),$};R.getAdjMatrix=y;var M=function(d,at){var W=[];return d.forEach(function(j){var $=[];j.forEach(function(q){$.push(q*at)}),W.push($)}),W};R.scaleMatrix=M;var S=function(d,at){if(d&&d.children){for(var W=d.children.length-1;W>=0;W--)if(!S(d.children[W],at))return}return!!at(d)},m=function(d,at){typeof at=="function"&&S(d,at)};R.traverseTreeUp=m;var I=function(d){var at=1/0,W=1/0,j=-1/0,$=-1/0;return d.forEach(function(q){var et=q.size;(0,B.isArray)(et)?et.length===1&&(et=[et[0],et[0]]):(0,Y.isNumber)(et)?et=[et,et]:(et===void 0||isNaN(et))&&(et=[30,30]);var Q=[et[0]/2,et[1]/2],it=q.x-Q[0],ht=q.x+Q[0],dt=q.y-Q[1],Ot=q.y+Q[1];at>it&&(at=it),W>dt&&(W=dt),j<ht&&(j=ht),$<Ot&&($=Ot)}),{minX:at,minY:W,maxX:j,maxY:$}};R.getLayoutBBox=I;var A=function(d){var at={x:0,y:0};d.forEach(function(j){at.x+=j.x||0,at.y+=j.y||0});var W=d.length||1;return{x:at.x/W,y:at.y/W}};R.getAvgNodePosition=A;var L=function(d,at,W){var j,$;return d==="source"?((j=W==null?void 0:W.find(function(q){return q.target===at.id}))===null||j===void 0?void 0:j.source)||{}:(($=W==null?void 0:W.find(function(q){return q.source===at.id}))===null||$===void 0?void 0:$.target)||{}},U=function(d,at,W){var j=[];switch(d){case"source":j=W==null?void 0:W.filter(function(q){return q.source===at.id}).map(function(q){return q.target});break;case"target":j=W==null?void 0:W.filter(function(q){return q.target===at.id}).map(function(q){return q.source});break;case"both":j=W==null?void 0:W.filter(function(q){return q.source===at.id}).map(function(q){return q.target}).concat(W==null?void 0:W.filter(function(q){return q.target===at.id}).map(function(q){return q.source}));break;default:break}var $=new Set(j);return Array.from($)},V=function(d,at,W,j,$){var q=W[at]||"",et=(j==null?void 0:j.filter(function(Q){return Q[at]===q}))||[];return d==="leaf"&&(et=et.filter(function(Q){var it,ht;return((it=$[Q.id])===null||it===void 0?void 0:it.in)===0||((ht=$[Q.id])===null||ht===void 0?void 0:ht.out)===0})),et},x=function(d,at,W,j,$,q){var et=$[at.id],Q=et.in,it=et.out,ht=at,dt=[];Q===0?(ht=L("source",at,W),dt=U("both",ht,W).map(function(It){return q[It]})):it===0&&(ht=L("target",at,W),dt=U("both",ht,W).map(function(It){return q[It]})),dt=dt.filter(function(It){return $[It.id]&&($[It.id].in===0||$[It.id].out===0)});var Ot=V(d,j,at,dt,$);return{coreNode:ht,relativeLeafNodes:dt,sameTypeLeafNodes:Ot}};R.getCoreNodeAndRelativeLeafNodes=x},330627:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.toNumber=R.isNaN=R.isNumber=void 0;var z=function(k){return typeof k=="number"};R.isNumber=z;var B=function(k){return Number.isNaN(Number(k))};R.isNaN=B;var Y=function(k){var P=parseFloat(k);return(0,R.isNaN)(P)?k:P};R.toNumber=Y},898130:function(yr,R){"use strict";var z=this&&this.__assign||function(){return z=Object.assign||function(k){for(var P,N=1,D=arguments.length;N<D;N++){P=arguments[N];for(var E in P)Object.prototype.hasOwnProperty.call(P,E)&&(k[E]=P[E])}return k},z.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.clone=R.isObject=void 0;var B=function(k){return k!==null&&typeof k=="object"};R.isObject=B;var Y=function(k){if(k===null)return k;if(k instanceof Date)return new Date(k.getTime());if(k instanceof Array){var P=[];return k.forEach(function(D){P.push(D)}),P.map(function(D){return(0,R.clone)(D)})}if(typeof k=="object"&&Object.keys(k).length){var N=z({},k);return Object.keys(N).forEach(function(D){N[D]=(0,R.clone)(N[D])}),N}return k};R.clone=Y},708055:function(yr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.camelize=R.isString=void 0;var z=function(k){return typeof k=="string"};R.isString=z;var B=function(k){var P=Object.create(null);return function(N){var D=P[N];return D||(P[N]=k(N))}},Y=/-(\w)/g;R.camelize=B(function(k){return k.replace(Y,function(P,N){return N?N.toUpperCase():""})})},772549:function(yr,R,z){"use strict";z.r(R),z.d(R,{Cache:function(){return sf},angleTo:function(){return dt},arcToCubic:function(){return Ct},assign:function(){return gr},augment:function(){return qr},clamp:function(){return Eo},clearAnimationFrame:function(){return pr},clone:function(){return _n},clonePath:function(){return Rr},contains:function(){return Pt},createDOM:function(){return Yu},debounce:function(){return wa},deepMix:function(){return Ci},difference:function(){return br},direction:function(){return ht},distanceSquareRoot:function(){return Nn},each:function(){return xa},endsWith:function(){return Lo},equalizeSegments:function(){return X},every:function(){return zo},extend:function(){return Ti},filter:function(){return ve},find:function(){return fe},findIndex:function(){return be},firstValue:function(){return or},fixedBase:function(){return co},flatten:function(){return Jr},flattenDeep:function(){return Bn},forIn:function(){return Tt},get:function(){return Ec},getDrawDirection:function(){return la},getPathArea:function(){return Cn},getPathBBox:function(){return jn},getPathBBoxTotalLength:function(){return oa},getPointAtLength:function(){return K},getRange:function(){return li},getRotatedCurve:function(){return Wn},getTotalLength:function(){return Hn},getType:function(){return Qs},getWrapBehavior:function(){return No},gradient:function(){return L},group:function(){return Do},groupBy:function(){return ei},groupToMap:function(){return fo},has:function(){return jt},hasKey:function(){return ze},hasValue:function(){return cn},head:function(){return Yn},identity:function(){return wn},includes:function(){return Pt},indexOf:function(){return Bi},isArguments:function(){return Is},isArray:function(){return Er},isArrayLike:function(){return At},isBoolean:function(){return cs},isDate:function(){return rf},isDecimal:function(){return no},isElement:function(){return Ce},isEmpty:function(){return ii},isEqual:function(){return ys},isEqualWith:function(){return ko},isError:function(){return Rf},isEven:function(){return Ki},isFinite:function(){return Os},isFunction:function(){return N},isInteger:function(){return wo},isMatch:function(){return Ga},isNegative:function(){return lo},isNil:function(){return mr},isNull:function(){return h},isNumber:function(){return ja},isNumberEqual:function(){return ou},isObject:function(){return on},isObjectLike:function(){return an},isOdd:function(){return ci},isPlainObject:function(){return me},isPointInPolygon:function(){return lu},isPointInStroke:function(){return O},isPolygonsIntersect:function(){return bi},isPositive:function(){return Wu},isPrototype:function(){return Et},isRegExp:function(){return Xt},isString:function(){return Ui},isType:function(){return hr},isUndefined:function(){return ue},keys:function(){return Rn},last:function(){return So},lowerCase:function(){return ai},lowerFirst:function(){return ao},map:function(){return Ff},mapValues:function(){return bc},max:function(){return Zn},maxBy:function(){return ho},memoize:function(){return D},min:function(){return ba},minBy:function(){return Bs},mix:function(){return gr},mod:function(){return Vo},modifyCSS:function(){return xs},noop:function(){return Sc},normalizePath:function(){return re},number2color:function(){return As},omit:function(){return nf},parseRadius:function(){return Xi},path2Absolute:function(){return ie},path2Curve:function(){return gn},path2String:function(){return Kt},pick:function(){return wc},pull:function(){return xi},pullAt:function(){return bo},reduce:function(){return Hi},remove:function(){return zi},requestAnimationFrame:function(){return Ye},reverseCurve:function(){return ln},rgb2arr:function(){return B},set:function(){return Gf},size:function(){return Tu},some:function(){return ps},sortBy:function(){return Ms},startsWith:function(){return Wi},substitute:function(){return Mu},throttle:function(){return af},toArray:function(){return _c},toCSSGradient:function(){return at},toDegree:function(){return jo},toInteger:function(){return us},toRGB:function(){return m},toRadian:function(){return fs},toString:function(){return mn},transform:function(){return Q},union:function(){return Io},uniq:function(){return Go},uniqueId:function(){return cu},upperCase:function(){return vo},upperFirst:function(){return Xu},values:function(){return Cr},valuesOfKey:function(){return $s},vertical:function(){return Ot},wrapBehavior:function(){return Xo}});function B(tt){return[parseInt(tt.substr(1,2),16),parseInt(tt.substr(3,2),16),parseInt(tt.substr(5,2),16)]}function Y(tt){var pt=Math.round(tt).toString(16);return pt.length===1?"0"+pt:pt}function k(tt){return"#"+Y(tt[0])+Y(tt[1])+Y(tt[2])}function P(tt){var pt,St,Ut,ne=tt||1;function Be(sr,Br){++pt>ne&&(Ut=St,Ue(1),++pt),St[sr]=Br}function Ue(sr){pt=0,St=Object.create(null),sr||(Ut=Object.create(null))}return Ue(),{clear:Ue,has:function(sr){return St[sr]!==void 0||Ut[sr]!==void 0},get:function(sr){var Br=St[sr];if(Br!==void 0)return Br;if((Br=Ut[sr])!==void 0)return Be(sr,Br),Br},set:function(sr,Br){St[sr]!==void 0?St[sr]=Br:Be(sr,Br)}}}var N=function(tt){return typeof tt=="function"},D=function(tt,pt,St){if(St===void 0&&(St=128),!N(tt))throw new TypeError("Expected a function");var Ut=function(){for(var ne=[],Be=0;Be<arguments.length;Be++)ne[Be]=arguments[Be];var Ue=pt?pt.apply(this,ne):ne[0],sr=Ut.cache;if(sr.has(Ue))return sr.get(Ue);var Br=tt.apply(this,ne);return sr.set(Ue,Br),Br};return Ut.cache=P(St),Ut},E=/rgba?\(([\s.,0-9]+)\)/;function y(){var tt=document.createElement("i");return tt.title="Web Colour Picker",tt.style.display="none",document.body.appendChild(tt),tt}var M;function S(tt){if(tt[0]==="#"&&tt.length===7)return tt;M||(M=y()),M.style.color=tt;var pt=document.defaultView.getComputedStyle(M,"").getPropertyValue("color"),St=E.exec(pt),Ut=St[1].split(/\s*,\s*/).map(function(ne){return Number(ne)});return pt=k(Ut),pt}var m=D(S,function(tt){return tt},256);function I(tt,pt,St,Ut){return tt[Ut]+(pt[Ut]-tt[Ut])*St}function A(tt,pt){var St=isNaN(Number(pt))||pt<0?0:pt>1?1:Number(pt),Ut=tt.length-1,ne=Math.floor(Ut*St),Be=Ut*St-ne,Ue=tt[ne],sr=ne===Ut?Ue:tt[ne+1];return k([I(Ue,sr,Be,0),I(Ue,sr,Be,1),I(Ue,sr,Be,2)])}function L(tt){var pt=typeof tt=="string"?tt.split("-"):tt,St=pt.map(function(Ut){return B(Ut.indexOf("#")===-1?m(Ut):Ut)});return function(Ut){return A(St,Ut)}}var U=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,V=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,x=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function d(tt){return/^[r,R,L,l]{1}[\s]*\(/.test(tt)}function at(tt){if(d(tt)){var pt,St=void 0;if(tt[0]==="l"){var Ut=U.exec(tt),ne=+Ut[1]+90;St=Ut[2],pt="linear-gradient("+ne+"deg, "}else if(tt[0]==="r"){pt="radial-gradient(";var Ut=V.exec(tt);St=Ut[4]}var Be=St.match(x);return Be.forEach(function(Ue,sr){var Br=Ue.split(":");pt+=Br[1]+" "+Number(Br[0])*100+"%",sr!==Be.length-1&&(pt+=", ")}),pt+=")",pt}return tt}var W=z(935600);function j(tt,pt,St){var Ut=[0,0,0,0,0,0,0,0,0];return W.fromTranslation(Ut,St),W.multiply(tt,Ut,pt)}function $(tt,pt,St){var Ut=[0,0,0,0,0,0,0,0,0];return W.fromRotation(Ut,St),W.multiply(tt,Ut,pt)}function q(tt,pt,St){var Ut=[0,0,0,0,0,0,0,0,0];return W.fromScaling(Ut,St),W.multiply(tt,Ut,pt)}function et(tt,pt,St){return W.multiply(tt,St,pt)}function Q(tt,pt){for(var St=tt?[].concat(tt):[1,0,0,0,1,0,0,0,1],Ut=0,ne=pt.length;Ut<ne;Ut++){var Be=pt[Ut];switch(Be[0]){case"t":j(St,St,[Be[1],Be[2]]);break;case"s":q(St,St,[Be[1],Be[2]]);break;case"r":$(St,St,Be[1]);break;case"m":et(St,St,Be[1]);break;default:break}}return St}var it=z(631437);function ht(tt,pt){return tt[0]*pt[1]-pt[0]*tt[1]}function dt(tt,pt,St){var Ut=it.angle(tt,pt),ne=ht(tt,pt)>=0;return St?ne?Math.PI*2-Ut:Ut:ne?Ut:Math.PI*2-Ut}function Ot(tt,pt,St){return St?(tt[0]=pt[1],tt[1]=-1*pt[0]):(tt[0]=-1*pt[1],tt[1]=pt[0]),tt}function It(tt,pt){if(pt==="off")return[].concat(tt);var St=typeof pt=="number"&&pt>=1?Math.pow(10,pt):1;return tt.map(function(Ut){var ne=Ut.slice(1).map(Number).map(function(Be){return pt?Math.round(Be*St)/St:Math.round(Be)});return[Ut[0]].concat(ne)})}function Kt(tt,pt){return pt===void 0&&(pt="off"),It(tt,pt).map(function(St){return St[0]+St.slice(1).join(" ")}).join("")}var Ft=z(197582),Nt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function st(tt,pt,St){if(tt[St].length>7){tt[St].shift();for(var Ut=tt[St],ne=St;Ut.length;)pt[St]="A",tt.splice(ne+=1,0,["C"].concat(Ut.splice(0,6)));tt.splice(St,1)}}var yt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function kt(tt){return Array.isArray(tt)&&tt.every(function(pt){var St=pt[0].toLowerCase();return yt[St]===pt.length-1&&"achlmqstvz".includes(St)})}function ee(tt){return kt(tt)&&tt.every(function(pt){var St=pt[0];return St===St.toUpperCase()})}function $t(tt){return ee(tt)&&tt.every(function(pt){var St=pt[0];return"ACLMQZ".includes(St)})}function ge(tt){for(var pt=tt.pathValue[tt.segmentStart],St=pt.toLowerCase(),Ut=tt.data;Ut.length>=yt[St]&&(St==="m"&&Ut.length>2?(tt.segments.push([pt].concat(Ut.splice(0,2))),St="l",pt=pt==="m"?"l":"L"):tt.segments.push([pt].concat(Ut.splice(0,yt[St]))),!!yt[St]););}function Pe(tt){var pt=tt.index,St=tt.pathValue,Ut=St.charCodeAt(pt);if(Ut===48){tt.param=0,tt.index+=1;return}if(Ut===49){tt.param=1,tt.index+=1;return}tt.err='[path-util]: invalid Arc flag "'+St[pt]+'", expecting 0 or 1 at index '+pt}function tr(tt){return tt>=48&&tt<=57||tt===43||tt===45||tt===46}function Jt(tt){return tt>=48&&tt<=57}function ae(tt){var pt=tt.max,St=tt.pathValue,Ut=tt.index,ne=Ut,Be=!1,Ue=!1,sr=!1,Br=!1,Hr;if(ne>=pt){tt.err="[path-util]: Invalid path value at index "+ne+', "pathValue" is missing param';return}if(Hr=St.charCodeAt(ne),(Hr===43||Hr===45)&&(ne+=1,Hr=St.charCodeAt(ne)),!Jt(Hr)&&Hr!==46){tt.err="[path-util]: Invalid path value at index "+ne+', "'+St[ne]+'" is not a number';return}if(Hr!==46){if(Be=Hr===48,ne+=1,Hr=St.charCodeAt(ne),Be&&ne<pt&&Hr&&Jt(Hr)){tt.err="[path-util]: Invalid path value at index "+Ut+', "'+St[Ut]+'" illegal number';return}for(;ne<pt&&Jt(St.charCodeAt(ne));)ne+=1,Ue=!0;Hr=St.charCodeAt(ne)}if(Hr===46){for(Br=!0,ne+=1;Jt(St.charCodeAt(ne));)ne+=1,sr=!0;Hr=St.charCodeAt(ne)}if(Hr===101||Hr===69){if(Br&&!Ue&&!sr){tt.err="[path-util]: Invalid path value at index "+ne+', "'+St[ne]+'" invalid float exponent';return}if(ne+=1,Hr=St.charCodeAt(ne),(Hr===43||Hr===45)&&(ne+=1),ne<pt&&Jt(St.charCodeAt(ne)))for(;ne<pt&&Jt(St.charCodeAt(ne));)ne+=1;else{tt.err="[path-util]: Invalid path value at index "+ne+', "'+St[ne]+'" invalid integer exponent';return}}tt.index=ne,tt.param=+tt.pathValue.slice(Ut,ne)}function Se(tt){var pt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return tt===10||tt===13||tt===8232||tt===8233||tt===32||tt===9||tt===11||tt===12||tt===160||tt>=5760&&pt.includes(tt)}function xe(tt){for(var pt=tt.pathValue,St=tt.max;tt.index<St&&Se(pt.charCodeAt(tt.index));)tt.index+=1}function we(tt){switch(tt|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function zt(tt){return(tt|32)===97}function Wt(tt){var pt=tt.max,St=tt.pathValue,Ut=tt.index,ne=St.charCodeAt(Ut),Be=yt[St[Ut].toLowerCase()];if(tt.segmentStart=Ut,!we(ne)){tt.err='[path-util]: Invalid path value "'+St[Ut]+'" is not a path command';return}if(tt.index+=1,xe(tt),tt.data=[],!Be){ge(tt);return}for(;;){for(var Ue=Be;Ue>0;Ue-=1){if(zt(ne)&&(Ue===3||Ue===4)?Pe(tt):ae(tt),tt.err.length)return;tt.data.push(tt.param),xe(tt),tt.index<pt&&St.charCodeAt(tt.index)===44&&(tt.index+=1,xe(tt))}if(tt.index>=tt.max||!tr(St.charCodeAt(tt.index)))break}ge(tt)}var Ie=function(){function tt(pt){this.pathValue=pt,this.segments=[],this.max=pt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return tt}();function Yt(tt){if(kt(tt))return[].concat(tt);var pt=new Ie(tt);for(xe(pt);pt.index<pt.max&&!pt.err.length;)Wt(pt);return pt.err?pt.err:pt.segments}function ie(tt){if(ee(tt))return[].concat(tt);var pt=Yt(tt),St=0,Ut=0,ne=0,Be=0;return pt.map(function(Ue){var sr=Ue.slice(1).map(Number),Br=Ue[0],Hr=Br.toUpperCase();if(Br==="M")return St=sr[0],Ut=sr[1],ne=St,Be=Ut,["M",St,Ut];var xn;if(Br!==Hr)switch(Hr){case"A":xn=[Hr,sr[0],sr[1],sr[2],sr[3],sr[4],sr[5]+St,sr[6]+Ut];break;case"V":xn=[Hr,sr[0]+Ut];break;case"H":xn=[Hr,sr[0]+St];break;default:{var Tn=sr.map(function(fa,da){return fa+(da%2?Ut:St)});xn=[Hr].concat(Tn)}}else xn=[Hr].concat(sr);var vn=xn.length;switch(Hr){case"Z":St=ne,Ut=Be;break;case"H":St=xn[1];break;case"V":Ut=xn[1];break;default:St=xn[vn-2],Ut=xn[vn-1],Hr==="M"&&(ne=St,Be=Ut)}return xn})}function Oe(tt,pt){var St=tt[0],Ut=pt.x1,ne=pt.y1,Be=pt.x2,Ue=pt.y2,sr=tt.slice(1).map(Number),Br=tt;if("TQ".includes(St)||(pt.qx=null,pt.qy=null),St==="H")Br=["L",tt[1],ne];else if(St==="V")Br=["L",Ut,tt[1]];else if(St==="S"){var Hr=Ut*2-Be,xn=ne*2-Ue;pt.x1=Hr,pt.y1=xn,Br=["C",Hr,xn].concat(sr)}else if(St==="T"){var Tn=Ut*2-pt.qx,vn=ne*2-pt.qy;pt.qx=Tn,pt.qy=vn,Br=["Q",Tn,vn].concat(sr)}else if(St==="Q"){var fa=sr[0],da=sr[1];pt.qx=fa,pt.qy=da}return Br}function re(tt){if($t(tt))return[].concat(tt);for(var pt=ie(tt),St=(0,Ft.__assign)({},Nt),Ut=0;Ut<pt.length;Ut+=1){pt[Ut]=Oe(pt[Ut],St);var ne=pt[Ut],Be=ne.length;St.x1=+ne[Be-2],St.y1=+ne[Be-1],St.x2=+ne[Be-4]||St.x1,St.y2=+ne[Be-3]||St.y1}return pt}function _e(tt){return $t(tt)&&tt.every(function(pt){var St=pt[0];return"MC".includes(St)})}function Ge(tt,pt,St){var Ut=tt*Math.cos(St)-pt*Math.sin(St),ne=tt*Math.sin(St)+pt*Math.cos(St);return{x:Ut,y:ne}}function Ct(tt,pt,St,Ut,ne,Be,Ue,sr,Br,Hr){var xn=tt,Tn=pt,vn=St,fa=Ut,da=sr,ya=Br,na=Math.PI*120/180,Da=Math.PI/180*(+ne||0),Fn=[],Ia,ia,Un,Ma,qa;if(Hr)ia=Hr[0],Un=Hr[1],Ma=Hr[2],qa=Hr[3];else{Ia=Ge(xn,Tn,-Da),xn=Ia.x,Tn=Ia.y,Ia=Ge(da,ya,-Da),da=Ia.x,ya=Ia.y;var ri=(xn-da)/2,Ba=(Tn-ya)/2,Fa=ri*ri/(vn*vn)+Ba*Ba/(fa*fa);Fa>1&&(Fa=Math.sqrt(Fa),vn*=Fa,fa*=Fa);var oi=vn*vn,Oi=fa*fa,Ei=(Be===Ue?-1:1)*Math.sqrt(Math.abs((oi*Oi-oi*Ba*Ba-Oi*ri*ri)/(oi*Ba*Ba+Oi*ri*ri)));Ma=Ei*vn*Ba/fa+(xn+da)/2,qa=Ei*-fa*ri/vn+(Tn+ya)/2,ia=Math.asin(((Tn-qa)/fa*Math.pow(10,9)>>0)/Math.pow(10,9)),Un=Math.asin(((ya-qa)/fa*Math.pow(10,9)>>0)/Math.pow(10,9)),ia=xn<Ma?Math.PI-ia:ia,Un=da<Ma?Math.PI-Un:Un,ia<0&&(ia=Math.PI*2+ia),Un<0&&(Un=Math.PI*2+Un),Ue&&ia>Un&&(ia-=Math.PI*2),!Ue&&Un>ia&&(Un-=Math.PI*2)}var bs=Un-ia;if(Math.abs(bs)>na){var uf=Un,tu=da,Ws=ya;Un=ia+na*(Ue&&Un>ia?1:-1),da=Ma+vn*Math.cos(Un),ya=qa+fa*Math.sin(Un),Fn=Ct(da,ya,vn,fa,ne,0,Ue,tu,Ws,[Un,uf,Ma,qa])}bs=Un-ia;var hu=Math.cos(ia),ff=Math.sin(ia),vu=Math.cos(Un),el=Math.sin(Un),Mc=Math.tan(bs/4),Vu=4/3*vn*Mc,cf=4/3*fa*Mc,lf=[xn,Tn],Es=[xn+Vu*ff,Tn-cf*hu],eu=[da+Vu*el,ya-cf*vu],Xs=[da,ya];if(Es[0]=2*lf[0]-Es[0],Es[1]=2*lf[1]-Es[1],Hr)return Es.concat(eu,Xs,Fn);Fn=Es.concat(eu,Xs,Fn);for(var ju=[],go=0,Ls=Fn.length;go<Ls;go+=1)ju[go]=go%2?Ge(Fn[go-1],Fn[go],Da).y:Ge(Fn[go],Fn[go+1],Da).x;return ju}function Nr(tt,pt,St,Ut,ne,Be){var Ue=.3333333333333333,sr=2/3;return[Ue*tt+sr*St,Ue*pt+sr*Ut,Ue*ne+sr*St,Ue*Be+sr*Ut,ne,Be]}function Or(tt,pt,St){var Ut=tt[0],ne=tt[1],Be=pt[0],Ue=pt[1];return[Ut+(Be-Ut)*St,ne+(Ue-ne)*St]}var Ur=function(tt,pt,St,Ut){var ne=.5,Be=Or([tt,pt],[St,Ut],ne);return(0,Ft.__spreadArray)((0,Ft.__spreadArray)([],Be,!0),[St,Ut,St,Ut],!1)};function Sr(tt,pt){var St=tt[0],Ut=tt.slice(1).map(Number),ne=Ut[0],Be=Ut[1],Ue,sr=pt.x1,Br=pt.y1,Hr=pt.x,xn=pt.y;switch("TQ".includes(St)||(pt.qx=null,pt.qy=null),St){case"M":return pt.x=ne,pt.y=Be,tt;case"A":return Ue=[sr,Br].concat(Ut),["C"].concat(Ct(Ue[0],Ue[1],Ue[2],Ue[3],Ue[4],Ue[5],Ue[6],Ue[7],Ue[8],Ue[9]));case"Q":return pt.qx=ne,pt.qy=Be,Ue=[sr,Br].concat(Ut),["C"].concat(Nr(Ue[0],Ue[1],Ue[2],Ue[3],Ue[4],Ue[5]));case"L":return["C"].concat(Ur(sr,Br,ne,Be));case"Z":return sr===Hr&&Br===xn?["C",sr,Br,Hr,xn,Hr,xn]:["C"].concat(Ur(sr,Br,Hr,xn));default:}return tt}function gn(tt,pt){if(pt===void 0&&(pt=!1),_e(tt)){var St=[].concat(tt);return pt?[St,[]]:St}for(var Ut=re(tt),ne=(0,Ft.__assign)({},Nt),Be=[],Ue="",sr=Ut.length,Br,Hr,xn=[],Tn=0;Tn<sr;Tn+=1){Ut[Tn]&&(Ue=Ut[Tn][0]),Be[Tn]=Ue;var vn=Sr(Ut[Tn],ne);Ut[Tn]=vn,st(Ut,Be,Tn),sr=Ut.length,Ue==="Z"&&xn.push(Tn),Br=Ut[Tn],Hr=Br.length,ne.x1=+Br[Hr-2],ne.y1=+Br[Hr-1],ne.x2=+Br[Hr-4]||ne.x1,ne.y2=+Br[Hr-3]||ne.y1}return pt?[Ut,xn]:Ut}function Rr(tt){return tt.map(function(pt){return Array.isArray(pt)?[].concat(pt):pt})}function ln(tt){var pt=tt.slice(1).map(function(St,Ut,ne){return Ut?ne[Ut-1].slice(-2).concat(St.slice(1)):tt[0].slice(1).concat(St.slice(1))}).map(function(St){return St.map(function(Ut,ne){return St[St.length-ne-2*(1-ne%2)]})}).reverse();return[["M"].concat(pt[0].slice(0,2))].concat(pt.map(function(St){return["C"].concat(St.slice(2))}))}function Nn(tt,pt){return Math.sqrt((tt[0]-pt[0])*(tt[0]-pt[0])+(tt[1]-pt[1])*(tt[1]-pt[1]))}function Ln(tt,pt,St,Ut,ne){var Be=Nn([tt,pt],[St,Ut]),Ue={x:0,y:0};if(typeof ne=="number")if(ne<=0)Ue={x:tt,y:pt};else if(ne>=Be)Ue={x:St,y:Ut};else{var sr=Or([tt,pt],[St,Ut],ne/Be),Br=sr[0],Hr=sr[1];Ue={x:Br,y:Hr}}return{length:Be,point:Ue,min:{x:Math.min(tt,St),y:Math.min(pt,Ut)},max:{x:Math.max(tt,St),y:Math.max(pt,Ut)}}}function fn(tt,pt){var St=tt.x,Ut=tt.y,ne=pt.x,Be=pt.y,Ue=St*ne+Ut*Be,sr=Math.sqrt((Math.pow(St,2)+Math.pow(Ut,2))*(Math.pow(ne,2)+Math.pow(Be,2))),Br=St*Be-Ut*ne<0?-1:1,Hr=Br*Math.acos(Ue/sr);return Hr}function qe(tt,pt,St,Ut,ne,Be,Ue,sr,Br,Hr){var xn=Math.abs,Tn=Math.sin,vn=Math.cos,fa=Math.sqrt,da=Math.PI,ya=xn(St),na=xn(Ut),Da=(ne%360+360)%360,Fn=Da*(da/180);if(tt===sr&&pt===Br)return{x:tt,y:pt};if(ya===0||na===0)return Ln(tt,pt,sr,Br,Hr).point;var Ia=(tt-sr)/2,ia=(pt-Br)/2,Un={x:vn(Fn)*Ia+Tn(Fn)*ia,y:-Tn(Fn)*Ia+vn(Fn)*ia},Ma=Math.pow(Un.x,2)/Math.pow(ya,2)+Math.pow(Un.y,2)/Math.pow(na,2);Ma>1&&(ya*=fa(Ma),na*=fa(Ma));var qa=Math.pow(ya,2)*Math.pow(na,2)-Math.pow(ya,2)*Math.pow(Un.y,2)-Math.pow(na,2)*Math.pow(Un.x,2),ri=Math.pow(ya,2)*Math.pow(Un.y,2)+Math.pow(na,2)*Math.pow(Un.x,2),Ba=qa/ri;Ba=Ba<0?0:Ba;var Fa=(Be!==Ue?1:-1)*fa(Ba),oi={x:Fa*(ya*Un.y/na),y:Fa*(-(na*Un.x)/ya)},Oi={x:vn(Fn)*oi.x-Tn(Fn)*oi.y+(tt+sr)/2,y:Tn(Fn)*oi.x+vn(Fn)*oi.y+(pt+Br)/2},Ei={x:(Un.x-oi.x)/ya,y:(Un.y-oi.y)/na},bs=fn({x:1,y:0},Ei),uf={x:(-Un.x-oi.x)/ya,y:(-Un.y-oi.y)/na},tu=fn(Ei,uf);!Ue&&tu>0?tu-=2*da:Ue&&tu<0&&(tu+=2*da),tu%=2*da;var Ws=bs+tu*Hr,hu=ya*vn(Ws),ff=na*Tn(Ws),vu={x:vn(Fn)*hu-Tn(Fn)*ff+Oi.x,y:Tn(Fn)*hu+vn(Fn)*ff+Oi.y};return vu}function rr(tt,pt,St,Ut,ne,Be,Ue,sr,Br,Hr,xn){var Tn,vn=xn.bbox,fa=vn===void 0?!0:vn,da=xn.length,ya=da===void 0?!0:da,na=xn.sampleSize,Da=na===void 0?30:na,Fn=typeof Hr=="number",Ia=tt,ia=pt,Un=0,Ma=[Ia,ia,Un],qa=[Ia,ia],ri=0,Ba={x:0,y:0},Fa=[{x:Ia,y:ia}];Fn&&Hr<=0&&(Ba={x:Ia,y:ia});for(var oi=0;oi<=Da;oi+=1){if(ri=oi/Da,Tn=qe(tt,pt,St,Ut,ne,Be,Ue,sr,Br,ri),Ia=Tn.x,ia=Tn.y,fa&&Fa.push({x:Ia,y:ia}),ya&&(Un+=Nn(qa,[Ia,ia])),qa=[Ia,ia],Fn&&Un>=Hr&&Hr>Ma[2]){var Oi=(Un-Hr)/(Un-Ma[2]);Ba={x:qa[0]*(1-Oi)+Ma[0]*Oi,y:qa[1]*(1-Oi)+Ma[1]*Oi}}Ma=[Ia,ia,Un]}return Fn&&Hr>=Un&&(Ba={x:sr,y:Br}),{length:Un,point:Ba,min:{x:Math.min.apply(null,Fa.map(function(Ei){return Ei.x})),y:Math.min.apply(null,Fa.map(function(Ei){return Ei.y}))},max:{x:Math.max.apply(null,Fa.map(function(Ei){return Ei.x})),y:Math.max.apply(null,Fa.map(function(Ei){return Ei.y}))}}}function vr(tt,pt,St,Ut,ne,Be,Ue,sr,Br){var Hr=1-Br;return{x:Math.pow(Hr,3)*tt+3*Math.pow(Hr,2)*Br*St+3*Hr*Math.pow(Br,2)*ne+Math.pow(Br,3)*Ue,y:Math.pow(Hr,3)*pt+3*Math.pow(Hr,2)*Br*Ut+3*Hr*Math.pow(Br,2)*Be+Math.pow(Br,3)*sr}}function Pr(tt,pt,St,Ut,ne,Be,Ue,sr,Br,Hr){var xn,Tn=Hr.bbox,vn=Tn===void 0?!0:Tn,fa=Hr.length,da=fa===void 0?!0:fa,ya=Hr.sampleSize,na=ya===void 0?10:ya,Da=typeof Br=="number",Fn=tt,Ia=pt,ia=0,Un=[Fn,Ia,ia],Ma=[Fn,Ia],qa=0,ri={x:0,y:0},Ba=[{x:Fn,y:Ia}];Da&&Br<=0&&(ri={x:Fn,y:Ia});for(var Fa=0;Fa<=na;Fa+=1){if(qa=Fa/na,xn=vr(tt,pt,St,Ut,ne,Be,Ue,sr,qa),Fn=xn.x,Ia=xn.y,vn&&Ba.push({x:Fn,y:Ia}),da&&(ia+=Nn(Ma,[Fn,Ia])),Ma=[Fn,Ia],Da&&ia>=Br&&Br>Un[2]){var oi=(ia-Br)/(ia-Un[2]);ri={x:Ma[0]*(1-oi)+Un[0]*oi,y:Ma[1]*(1-oi)+Un[1]*oi}}Un=[Fn,Ia,ia]}return Da&&Br>=ia&&(ri={x:Ue,y:sr}),{length:ia,point:ri,min:{x:Math.min.apply(null,Ba.map(function(Oi){return Oi.x})),y:Math.min.apply(null,Ba.map(function(Oi){return Oi.y}))},max:{x:Math.max.apply(null,Ba.map(function(Oi){return Oi.x})),y:Math.max.apply(null,Ba.map(function(Oi){return Oi.y}))}}}function en(tt,pt,St,Ut,ne,Be,Ue){var sr=1-Ue;return{x:Math.pow(sr,2)*tt+2*sr*Ue*St+Math.pow(Ue,2)*ne,y:Math.pow(sr,2)*pt+2*sr*Ue*Ut+Math.pow(Ue,2)*Be}}function pn(tt,pt,St,Ut,ne,Be,Ue,sr){var Br,Hr=sr.bbox,xn=Hr===void 0?!0:Hr,Tn=sr.length,vn=Tn===void 0?!0:Tn,fa=sr.sampleSize,da=fa===void 0?10:fa,ya=typeof Ue=="number",na=tt,Da=pt,Fn=0,Ia=[na,Da,Fn],ia=[na,Da],Un=0,Ma={x:0,y:0},qa=[{x:na,y:Da}];ya&&Ue<=0&&(Ma={x:na,y:Da});for(var ri=0;ri<=da;ri+=1){if(Un=ri/da,Br=en(tt,pt,St,Ut,ne,Be,Un),na=Br.x,Da=Br.y,xn&&qa.push({x:na,y:Da}),vn&&(Fn+=Nn(ia,[na,Da])),ia=[na,Da],ya&&Fn>=Ue&&Ue>Ia[2]){var Ba=(Fn-Ue)/(Fn-Ia[2]);Ma={x:ia[0]*(1-Ba)+Ia[0]*Ba,y:ia[1]*(1-Ba)+Ia[1]*Ba}}Ia=[na,Da,Fn]}return ya&&Ue>=Fn&&(Ma={x:ne,y:Be}),{length:Fn,point:Ma,min:{x:Math.min.apply(null,qa.map(function(Fa){return Fa.x})),y:Math.min.apply(null,qa.map(function(Fa){return Fa.y}))},max:{x:Math.max.apply(null,qa.map(function(Fa){return Fa.x})),y:Math.max.apply(null,qa.map(function(Fa){return Fa.y}))}}}function rn(tt,pt,St){for(var Ut,ne,Be,Ue,sr,Br,Hr=re(tt),xn=typeof pt=="number",Tn,vn=[],fa,da=0,ya=0,na=0,Da=0,Fn,Ia=[],ia=[],Un=0,Ma={x:0,y:0},qa=Ma,ri=Ma,Ba=Ma,Fa=0,oi=0,Oi=Hr.length;oi<Oi;oi+=1)Fn=Hr[oi],fa=Fn[0],Tn=fa==="M",vn=Tn?vn:[da,ya].concat(Fn.slice(1)),Tn?(na=Fn[1],Da=Fn[2],Ma={x:na,y:Da},qa=Ma,Un=0,xn&&pt<.001&&(Ba=Ma)):fa==="L"?(Ut=Ln(vn[0],vn[1],vn[2],vn[3],(pt||0)-Fa),Un=Ut.length,Ma=Ut.min,qa=Ut.max,ri=Ut.point):fa==="A"?(ne=rr(vn[0],vn[1],vn[2],vn[3],vn[4],vn[5],vn[6],vn[7],vn[8],(pt||0)-Fa,St||{}),Un=ne.length,Ma=ne.min,qa=ne.max,ri=ne.point):fa==="C"?(Be=Pr(vn[0],vn[1],vn[2],vn[3],vn[4],vn[5],vn[6],vn[7],(pt||0)-Fa,St||{}),Un=Be.length,Ma=Be.min,qa=Be.max,ri=Be.point):fa==="Q"?(Ue=pn(vn[0],vn[1],vn[2],vn[3],vn[4],vn[5],(pt||0)-Fa,St||{}),Un=Ue.length,Ma=Ue.min,qa=Ue.max,ri=Ue.point):fa==="Z"&&(vn=[da,ya,na,Da],sr=Ln(vn[0],vn[1],vn[2],vn[3],(pt||0)-Fa),Un=sr.length,Ma=sr.min,qa=sr.max,ri=sr.point),xn&&Fa<pt&&Fa+Un>=pt&&(Ba=ri),ia.push(qa),Ia.push(Ma),Fa+=Un,Br=fa!=="Z"?Fn.slice(-2):[na,Da],da=Br[0],ya=Br[1];return xn&&pt>=Fa&&(Ba={x:da,y:ya}),{length:Fa,point:Ba,min:{x:Math.min.apply(null,Ia.map(function(Ei){return Ei.x})),y:Math.min.apply(null,Ia.map(function(Ei){return Ei.y}))},max:{x:Math.max.apply(null,ia.map(function(Ei){return Ei.x})),y:Math.max.apply(null,ia.map(function(Ei){return Ei.y}))}}}function jn(tt,pt){if(!tt)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var St=rn(tt,void 0,(0,Ft.__assign)((0,Ft.__assign)({},pt),{length:!1})),Ut=St.min,ne=Ut.x,Be=Ut.y,Ue=St.max,sr=Ue.x,Br=Ue.y,Hr=sr-ne,xn=Br-Be;return{width:Hr,height:xn,x:ne,y:Be,x2:sr,y2:Br,cx:ne+Hr/2,cy:Be+xn/2,cz:Math.max(Hr,xn)+Math.min(Hr,xn)/2}}function Hn(tt,pt){return rn(tt,void 0,(0,Ft.__assign)((0,Ft.__assign)({},pt),{bbox:!1,length:!0})).length}function oa(tt,pt){if(!tt)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var St=rn(tt,void 0,(0,Ft.__assign)((0,Ft.__assign)({},pt),{bbox:!0,length:!0})),Ut=St.length,ne=St.min,Be=ne.x,Ue=ne.y,sr=St.max,Br=sr.x,Hr=sr.y,xn=Br-Be,Tn=Hr-Ue;return{length:Ut,width:xn,height:Tn,x:Be,y:Ue,x2:Br,y2:Hr,cx:Be+xn/2,cy:Ue+Tn/2,cz:Math.max(xn,Tn)+Math.min(xn,Tn)/2}}function dn(tt){var pt=tt.length,St=pt-1;return tt.map(function(Ut,ne){return tt.map(function(Be,Ue){var sr=ne+Ue,Br;return Ue===0||tt[sr]&&tt[sr][0]==="M"?(Br=tt[sr],["M"].concat(Br.slice(-2))):(sr>=pt&&(sr-=St),tt[sr])})})}function Wn(tt,pt){var St=tt.length-1,Ut=[],ne=0,Be=0,Ue=dn(tt);return Ue.forEach(function(sr,Br){tt.slice(1).forEach(function(Hr,xn){Be+=Nn(tt[(Br+xn)%St].slice(-2),pt[xn%St].slice(-2))}),Ut[Br]=Be,Be=0}),ne=Ut.indexOf(Math.min.apply(null,Ut)),Ue[ne]}function Dn(tt,pt,St,Ut,ne,Be,Ue,sr){return 3*((sr-pt)*(St+ne)-(Ue-tt)*(Ut+Be)+Ut*(tt-ne)-St*(pt-Be)+sr*(ne+tt/3)-Ue*(Be+pt/3))/20}function Cn(tt){var pt=0,St=0,Ut=0;return gn(tt).map(function(ne){var Be;switch(ne[0]){case"M":return pt=ne[1],St=ne[2],0;default:var Ue=ne.slice(1),sr=Ue[0],Br=Ue[1],Hr=Ue[2],xn=Ue[3],Tn=Ue[4],vn=Ue[5];return Ut=Dn(pt,St,sr,Br,Hr,xn,Tn,vn),Be=ne.slice(-2),pt=Be[0],St=Be[1],Ut}}).reduce(function(ne,Be){return ne+Be},0)}function la(tt){return Cn(tt)>=0}function K(tt,pt,St){return rn(tt,pt,(0,Ft.__assign)((0,Ft.__assign)({},St),{bbox:!1,length:!0})).point}function ft(tt,pt){var St=Yt(tt);if(typeof St=="string")throw TypeError(St);var Ut=St.slice(),ne=Hn(Ut),Be=Ut.length-1,Ue=0,sr=0,Br=St[0],Hr=Br.slice(-2),xn=Hr[0],Tn=Hr[1],vn={x:xn,y:Tn};if(Be<=0||!pt||!Number.isFinite(pt))return{segment:Br,index:0,length:sr,point:vn,lengthAtSegment:Ue};if(pt>=ne)return Ut=St.slice(0,-1),Ue=Hn(Ut),sr=ne-Ue,{segment:St[Be],index:Be,length:sr,lengthAtSegment:Ue};for(var fa=[];Be>0;)Br=Ut[Be],Ut=Ut.slice(0,-1),Ue=Hn(Ut),sr=ne-Ue,ne=Ue,fa.push({segment:Br,index:Be,length:sr,lengthAtSegment:Ue}),Be-=1;return fa.find(function(da){var ya=da.lengthAtSegment;return ya<=pt})}function rt(tt,pt){for(var St=Yt(tt),Ut=re(St),ne=Hn(St),Be=function(Un){var Ma=Un.x-pt.x,qa=Un.y-pt.y;return Ma*Ma+qa*qa},Ue=8,sr,Br=0,Hr,xn=0,Tn=1/0,vn=0;vn<=ne;vn+=Ue)sr=K(Ut,vn),Br=Be(sr),Br<Tn&&(Hr=sr,xn=vn,Tn=Br);Ue/=2;for(var fa,da,ya=0,na=0,Da=0,Fn=0;Ue>.5;)ya=xn-Ue,fa=K(Ut,ya),Da=Be(fa),na=xn+Ue,da=K(Ut,na),Fn=Be(da),ya>=0&&Da<Tn?(Hr=fa,xn=ya,Tn=Da):na<=ne&&Fn<Tn?(Hr=da,xn=na,Tn=Fn):Ue/=2;var Ia=ft(St,xn),ia=Math.sqrt(Tn);return{closest:Hr,distance:ia,segment:Ia}}function O(tt,pt){var St=rt(tt,pt).distance;return Math.abs(St)<.001}function b(tt,pt){pt===void 0&&(pt=.5);var St=tt.slice(0,2),Ut=tt.slice(2,4),ne=tt.slice(4,6),Be=tt.slice(6,8),Ue=Or(St,Ut,pt),sr=Or(Ut,ne,pt),Br=Or(ne,Be,pt),Hr=Or(Ue,sr,pt),xn=Or(sr,Br,pt),Tn=Or(Hr,xn,pt);return[["C"].concat(Ue,Hr,Tn),["C"].concat(xn,Br,Be)]}function w(tt){return tt.map(function(pt,St,Ut){var ne=St&&Ut[St-1].slice(-2).concat(pt.slice(1)),Be=St?Pr(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5],ne[6],ne[7],ne[8],{bbox:!1}).length:0,Ue;return St?Ue=Be?b(ne):[pt,pt]:Ue=[pt],{s:pt,ss:Ue,l:Be}})}function X(tt,pt,St){var Ut=w(tt),ne=w(pt),Be=Ut.length,Ue=ne.length,sr=Ut.filter(function(na){return na.l}).length,Br=ne.filter(function(na){return na.l}).length,Hr=Ut.filter(function(na){return na.l}).reduce(function(na,Da){var Fn=Da.l;return na+Fn},0)/sr||0,xn=ne.filter(function(na){return na.l}).reduce(function(na,Da){var Fn=Da.l;return na+Fn},0)/Br||0,Tn=St||Math.max(Be,Ue),vn=[Hr,xn],fa=[Tn-Be,Tn-Ue],da=0,ya=[Ut,ne].map(function(na,Da){return na.l===Tn?na.map(function(Fn){return Fn.s}):na.map(function(Fn,Ia){return da=Ia&&fa[Da]&&Fn.l>=vn[Da],fa[Da]-=da?1:0,da?Fn.ss:[Fn.s]}).flat()});return ya[0].length===ya[1].length?ya:X(ya[0],ya[1],Tn)}var xt=function(tt){return tt!==null&&typeof tt!="function"&&isFinite(tt.length)},At=xt,wt=function(tt,pt){return At(tt)?tt.indexOf(pt)>-1:!1},Pt=wt,Me=function(tt,pt){if(!At(tt))return tt;for(var St=[],Ut=0;Ut<tt.length;Ut++){var ne=tt[Ut];pt(ne,Ut)&&St.push(ne)}return St},ve=Me,He=function(tt,pt){return pt===void 0&&(pt=[]),ve(tt,function(St){return!Pt(pt,St)})},br=He,ar=function(tt){return tt==null},mr=ar,Mn={}.toString,Xe=function(tt,pt){return Mn.call(tt)==="[object "+pt+"]"},hr=Xe,Er=function(tt){return Array.isArray?Array.isArray(tt):hr(tt,"Array")},on=function(tt){var pt=typeof tt;return tt!==null&&pt==="object"||pt==="function"};function Wr(tt,pt){if(tt){var St;if(Er(tt))for(var Ut=0,ne=tt.length;Ut<ne&&(St=pt(tt[Ut],Ut),St!==!1);Ut++);else if(on(tt)){for(var Be in tt)if(tt.hasOwnProperty(Be)&&(St=pt(tt[Be],Be),St===!1))break}}}var xa=Wr,Ta=Object.keys?function(tt){return Object.keys(tt)}:function(tt){var pt=[];return xa(tt,function(St,Ut){N(tt)&&Ut==="prototype"||pt.push(Ut)}),pt},Rn=Ta;function Jn(tt,pt){var St=Rn(pt),Ut=St.length;if(mr(tt))return!Ut;for(var ne=0;ne<Ut;ne+=1){var Be=St[ne];if(pt[Be]!==tt[Be]||!(Be in tt))return!1}return!0}var Ga=Jn,Aa=function(tt){return typeof tt=="object"&&tt!==null},an=Aa,Vn=function(tt){if(!an(tt)||!hr(tt,"Object"))return!1;if(Object.getPrototypeOf(tt)===null)return!0;for(var pt=tt;Object.getPrototypeOf(pt)!==null;)pt=Object.getPrototypeOf(pt);return Object.getPrototypeOf(tt)===pt},me=Vn;function Dt(tt,pt){if(!Er(tt))return null;var St;if(N(pt)&&(St=pt),me(pt)&&(St=function(ne){return Ga(ne,pt)}),St){for(var Ut=0;Ut<tt.length;Ut+=1)if(St(tt[Ut]))return tt[Ut]}return null}var fe=Dt;function Ae(tt,pt,St){St===void 0&&(St=0);for(var Ut=St;Ut<tt.length;Ut++)if(pt(tt[Ut],Ut))return Ut;return-1}var be=Ae,De=function(tt,pt){for(var St=null,Ut=0;Ut<tt.length;Ut++){var ne=tt[Ut],Be=ne[pt];if(!mr(Be)){Er(Be)?St=Be[0]:St=Be;break}}return St},or=De,Fr=function(tt){if(!Er(tt))return[];for(var pt=[],St=0;St<tt.length;St++)pt=pt.concat(tt[St]);return pt},Jr=Fr,Pn=function(tt,pt){if(pt===void 0&&(pt=[]),!Er(tt))pt.push(tt);else for(var St=0;St<tt.length;St+=1)Pn(tt[St],pt);return pt},Bn=Pn,Zn=function(tt){if(Er(tt))return tt.reduce(function(pt,St){return Math.max(pt,St)},tt[0])},ba=function(tt){if(Er(tt))return tt.reduce(function(pt,St){return Math.min(pt,St)},tt[0])},Ca=function(tt){var pt=tt.filter(function(Ue){return!isNaN(Ue)});if(!pt.length)return{min:0,max:0};if(Er(tt[0])){for(var St=[],Ut=0;Ut<tt.length;Ut++)St=St.concat(tt[Ut]);pt=St}var ne=Zn(pt),Be=ba(pt);return{min:Be,max:ne}},li=Ca,ta=Array.prototype,fi=ta.splice,Co=ta.indexOf,La=function(tt){for(var pt=[],St=1;St<arguments.length;St++)pt[St-1]=arguments[St];for(var Ut=0;Ut<pt.length;Ut++)for(var ne=pt[Ut],Be=-1;(Be=Co.call(tt,ne))>-1;)fi.call(tt,Be,1);return tt},xi=La,so=Array.prototype.splice,To=function(pt,St){if(!At(pt))return[];for(var Ut=pt?St.length:0,ne=Ut-1;Ut--;){var Be=void 0,Ue=St[Ut];(Ut===ne||Ue!==Be)&&(Be=Ue,so.call(pt,Ue,1))}return pt},bo=To,uo=function(tt,pt,St){if(!Er(tt)&&!me(tt))return tt;var Ut=St;return xa(tt,function(ne,Be){Ut=pt(Ut,ne,Be)}),Ut},Hi=uo,ds=function(tt,pt){var St=[];if(!At(tt))return St;for(var Ut=-1,ne=[],Be=tt.length;++Ut<Be;){var Ue=tt[Ut];pt(Ue,Ut,tt)&&(St.push(Ue),ne.push(Ut))}return bo(tt,ne),St},zi=ds,Ui=function(tt){return hr(tt,"String")};function gs(tt,pt){var St;if(N(pt))St=function(ne,Be){return pt(ne)-pt(Be)};else{var Ut=[];Ui(pt)?Ut.push(pt):Er(pt)&&(Ut=pt),St=function(ne,Be){for(var Ue=0;Ue<Ut.length;Ue+=1){var sr=Ut[Ue];if(ne[sr]>Be[sr])return 1;if(ne[sr]<Be[sr])return-1}return 0}}return tt.sort(St),tt}var Ms=gs;function Go(tt,pt){pt===void 0&&(pt=new Map);var St=[];if(Array.isArray(tt))for(var Ut=0,ne=tt.length;Ut<ne;Ut++){var Be=tt[Ut];pt.has(Be)||(St.push(Be),pt.set(Be,!0))}return St}var _o=function(){for(var tt=[],pt=0;pt<arguments.length;pt++)tt[pt]=arguments[pt];return Go([].concat.apply([],tt))},Io=_o,$s=function(tt,pt){for(var St=[],Ut={},ne=0;ne<tt.length;ne++){var Be=tt[ne],Ue=Be[pt];if(!mr(Ue)){Er(Ue)||(Ue=[Ue]);for(var sr=0;sr<Ue.length;sr++){var Br=Ue[sr];Ut[Br]||(St.push(Br),Ut[Br]=!0)}}}return St};function Yn(tt){if(At(tt))return tt[0]}function So(tt){if(At(tt)){var pt=tt;return pt[pt.length-1]}}function Oo(tt,pt){return Er(tt)||Ui(tt)?tt[0]===pt:!1}var Wi=Oo;function zn(tt,pt){return Er(tt)||Ui(tt)?tt[tt.length-1]===pt:!1}var Lo=zn,Ai=function(tt,pt){for(var St=0;St<tt.length;St++)if(!pt(tt[St],St))return!1;return!0},zo=Ai,Uo=function(tt,pt){for(var St=0;St<tt.length;St++)if(pt(tt[St],St))return!0;return!1},ps=Uo,eo=Object.prototype.hasOwnProperty;function ro(tt,pt){if(!pt||!Er(tt))return{};for(var St={},Ut=N(pt)?pt:function(sr){return sr[pt]},ne,Be=0;Be<tt.length;Be++){var Ue=tt[Be];ne=Ut(Ue),eo.call(St,ne)?St[ne].push(Ue):St[ne]=[Ue]}return St}var ei=ro;function fo(tt,pt){if(!pt)return{0:tt};if(!N(pt)){var St=Er(pt)?pt:pt.replace(/\s+/g,"").split("*");pt=function(Ut){for(var ne="_",Be=0,Ue=St.length;Be<Ue;Be++)ne+=Ut[St[Be]]&&Ut[St[Be]].toString();return ne}}return ei(tt,pt)}var Do=function(tt,pt){if(!pt)return[tt];var St=fo(tt,pt),Ut=[];for(var ne in St)Ut.push(St[ne]);return Ut};function Wo(tt,pt){return tt["_wrap_"+pt]}var No=Wo;function is(tt,pt){if(tt["_wrap_"+pt])return tt["_wrap_"+pt];var St=function(Ut){tt[pt](Ut)};return tt["_wrap_"+pt]=St,St}var Xo=is,Jo={};function Xa(tt){var pt=Jo[tt];if(!pt){for(var St=tt.toString(16),Ut=St.length;Ut<6;Ut++)St="0"+St;pt="#"+St,Jo[tt]=pt}return pt}var As=Xa;function iu(tt){var pt=0,St=0,Ut=0,ne=0;return Er(tt)?tt.length===1?pt=St=Ut=ne=tt[0]:tt.length===2?(pt=Ut=tt[0],St=ne=tt[1]):tt.length===3?(pt=tt[0],St=ne=tt[1],Ut=tt[2]):(pt=tt[0],St=tt[1],Ut=tt[2],ne=tt[3]):pt=St=Ut=ne=tt,{r1:pt,r2:St,r3:Ut,r4:ne}}var Xi=iu,os=function(tt,pt,St){return tt<pt?pt:tt>St?St:tt},Eo=os,Yi=function(tt,pt){var St=pt.toString(),Ut=St.indexOf(".");if(Ut===-1)return Math.round(tt);var ne=St.substr(Ut+1).length;return ne>20&&(ne=20),parseFloat(tt.toFixed(ne))},co=Yi,pa=function(tt){return hr(tt,"Number")},ja=pa,yi=function(tt){return ja(tt)&&tt%1!==0},no=yi,ki=function(tt){return ja(tt)&&tt%2===0},Ki=ki,Yo=Number.isInteger?Number.isInteger:function(tt){return ja(tt)&&tt%1===0},wo=Yo,ts=function(tt){return ja(tt)&&tt<0},lo=ts,Rs=1e-5;function ou(tt,pt,St){return St===void 0&&(St=Rs),Math.abs(tt-pt)<St}var Cs=function(tt){return ja(tt)&&tt%2!==0},ci=Cs,Po=function(tt){return ja(tt)&&tt>0},Wu=Po,ho=function(tt,pt){if(Er(tt)){for(var St,Ut=-1/0,ne=0;ne<tt.length;ne++){var Be=tt[ne],Ue=N(pt)?pt(Be):Be[pt];Ue>Ut&&(St=Be,Ut=Ue)}return St}},Bs=function(tt,pt){if(Er(tt)){for(var St,Ut=1/0,ne=0;ne<tt.length;ne++){var Be=tt[ne],Ue=N(pt)?pt(Be):Be[pt];Ue<Ut&&(St=Be,Ut=Ue)}return St}},Ts=function(tt,pt){return(tt%pt+pt)%pt},Vo=Ts,Fs=180/Math.PI,ss=function(tt){return Fs*tt},jo=ss,us=parseInt,su=Math.PI/180,Gs=function(tt){return su*tt},fs=Gs,Tt=xa,jt=function(tt,pt){return tt.hasOwnProperty(pt)},ze=jt,Ke=Object.values?function(tt){return Object.values(tt)}:function(tt){var pt=[];return xa(tt,function(St,Ut){N(tt)&&Ut==="prototype"||pt.push(St)}),pt},Cr=Ke,cn=function(tt,pt){return Pt(Cr(tt),pt)},mn=function(tt){return mr(tt)?"":tt.toString()},aa=function(tt){return mn(tt).toLowerCase()},ai=aa,Zi=function(tt){var pt=mn(tt);return pt.charAt(0).toLowerCase()+pt.substring(1)},ao=Zi;function zs(tt,pt){return!tt||!pt?tt:tt.replace(/\\?\{([^{}]+)\}/g,function(St,Ut){return St.charAt(0)==="\\"?St.slice(1):pt[Ut]===void 0?"":pt[Ut]})}var Mu=zs,Ri=function(tt){return mn(tt).toUpperCase()},vo=Ri,qs=function(tt){var pt=mn(tt);return pt.charAt(0).toUpperCase()+pt.substring(1)},Xu=qs,Au={}.toString,uu=function(tt){return Au.call(tt).replace(/^\[object /,"").replace(/]$/,"")},Qs=uu,fu=function(tt){return hr(tt,"Arguments")},Is=fu,Js=function(tt){return hr(tt,"Boolean")},cs=Js,Mo=function(tt){return hr(tt,"Date")},rf=Mo,kf=function(tt){return hr(tt,"Error")},Rf=kf;function Os(tt){return ja(tt)&&isFinite(tt)}var Bf=function(tt){return tt===null},h=Bf,T=Object.prototype,vt=function(tt){var pt=tt&&tt.constructor,St=typeof pt=="function"&&pt.prototype||T;return tt===St},Et=vt,Lt=function(tt){return hr(tt,"RegExp")},Xt=Lt,Vt=function(tt){return tt===void 0},ue=Vt,he=function(tt){return tt instanceof Element||tt instanceof Document},Ce=he;function Ye(tt){var pt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(St){return setTimeout(St,16)};return pt(tt)}function pr(tt){var pt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;pt(tt)}function xr(tt,pt){for(var St in pt)pt.hasOwnProperty(St)&&St!=="constructor"&&pt[St]!==void 0&&(tt[St]=pt[St])}function gr(tt,pt,St,Ut){return pt&&xr(tt,pt),St&&xr(tt,St),Ut&&xr(tt,Ut),tt}var Zr=function(){for(var tt=[],pt=0;pt<arguments.length;pt++)tt[pt]=arguments[pt];for(var St=tt[0],Ut=1;Ut<tt.length;Ut++){var ne=tt[Ut];N(ne)&&(ne=ne.prototype),gr(St.prototype,ne)}},qr=Zr,Tr=function(tt){if(typeof tt!="object"||tt===null)return tt;var pt;if(Er(tt)){pt=[];for(var St=0,Ut=tt.length;St<Ut;St++)typeof tt[St]=="object"&&tt[St]!=null?pt[St]=Tr(tt[St]):pt[St]=tt[St]}else{pt={};for(var ne in tt)typeof tt[ne]=="object"&&tt[ne]!=null?pt[ne]=Tr(tt[ne]):pt[ne]=tt[ne]}return pt},_n=Tr;function Ea(tt,pt,St){var Ut;return function(){var ne=this,Be=arguments,Ue=function(){Ut=null,St||tt.apply(ne,Be)},sr=St&&!Ut;clearTimeout(Ut),Ut=setTimeout(Ue,pt),sr&&tt.apply(ne,Be)}}var wa=Ea,ha=5;function qn(tt,pt){if(Object.hasOwn)return Object.hasOwn(tt,pt);if(tt==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(tt),pt)}function sa(tt,pt,St,Ut){St=St||0,Ut=Ut||ha;for(var ne in pt)if(qn(pt,ne)){var Be=pt[ne];Be!==null&&me(Be)?(me(tt[ne])||(tt[ne]={}),St<Ut?sa(tt[ne],Be,St+1,Ut):tt[ne]=pt[ne]):Er(Be)?(tt[ne]=[],tt[ne]=tt[ne].concat(Be)):Be!==void 0&&(tt[ne]=Be)}}var Ni=function(tt){for(var pt=[],St=1;St<arguments.length;St++)pt[St-1]=arguments[St];for(var Ut=0;Ut<pt.length;Ut+=1)sa(tt,pt[Ut]);return tt},Ci=Ni,_i=function(tt,pt,St,Ut){N(pt)||(St=pt,pt=tt,tt=function(){});var ne=Object.create?function(Ue,sr){return Object.create(Ue,{constructor:{value:sr}})}:function(Ue,sr){function Br(){}Br.prototype=Ue;var Hr=new Br;return Hr.constructor=sr,Hr},Be=ne(pt.prototype,tt);return tt.prototype=gr(Be,tt.prototype),tt.superclass=ne(pt.prototype,pt),gr(Be,St),gr(tt,Ut),tt},Ti=_i,Ii=function(tt,pt){if(!At(tt))return-1;var St=Array.prototype.indexOf;if(St)return St.call(tt,pt);for(var Ut=-1,ne=0;ne<tt.length;ne++)if(tt[ne]===pt){Ut=ne;break}return Ut},Bi=Ii,$i=Object.prototype.hasOwnProperty;function za(tt){if(mr(tt))return!0;if(At(tt))return!tt.length;var pt=Qs(tt);if(pt==="Map"||pt==="Set")return!tt.size;if(Et(tt))return!Object.keys(tt).length;for(var St in tt)if($i.call(tt,St))return!1;return!0}var ii=za,ls=function(tt,pt){if(tt===pt)return!0;if(!tt||!pt||Ui(tt)||Ui(pt))return!1;if(At(tt)||At(pt)){if(tt.length!==pt.length)return!1;for(var St=!0,Ut=0;Ut<tt.length&&(St=ls(tt[Ut],pt[Ut]),!!St);Ut++);return St}if(an(tt)||an(pt)){var ne=Object.keys(tt),Be=Object.keys(pt);if(ne.length!==Be.length)return!1;for(var St=!0,Ut=0;Ut<ne.length&&(St=ls(tt[ne[Ut]],pt[ne[Ut]]),!!St);Ut++);return St}return!1},ys=ls,ko=function(tt,pt,St){return N(St)?!!St(tt,pt):ys(tt,pt)},Cu=function(tt,pt){if(!At(tt))return tt;for(var St=[],Ut=0;Ut<tt.length;Ut++){var ne=tt[Ut];St.push(pt(ne,Ut))}return St},Ff=Cu,xc=function(tt){return tt},bc=function(tt,pt){pt===void 0&&(pt=xc);var St={};return on(tt)&&!mr(tt)&&Object.keys(tt).forEach(function(Ut){St[Ut]=pt(tt[Ut],Ut)}),St},Ec=function(tt,pt,St){for(var Ut=0,ne=Ui(pt)?pt.split("."):pt;tt&&Ut<ne.length;)tt=tt[ne[Ut++]];return tt===void 0||Ut<ne.length?St:tt},Gf=function(tt,pt,St){var Ut=tt,ne=Ui(pt)?pt.split("."):pt;return ne.forEach(function(Be,Ue){Ue<ne.length-1?(on(Ut[Be])||(Ut[Be]=ja(ne[Ue+1])?[]:{}),Ut=Ut[Be]):Ut[Be]=St}),tt},zf=Object.prototype.hasOwnProperty,wc=function(tt,pt){if(tt===null||!me(tt))return{};var St={};return xa(pt,function(Ut){zf.call(tt,Ut)&&(St[Ut]=tt[Ut])}),St},nf=function(tt,pt){return Hi(tt,function(St,Ut,ne){return pt.includes(ne)||(St[ne]=Ut),St},{})},af=function(tt,pt,St){var Ut,ne,Be,Ue,sr=0;St||(St={});var Br=function(){sr=St.leading===!1?0:Date.now(),Ut=null,Ue=tt.apply(ne,Be),Ut||(ne=Be=null)},Hr=function(){var xn=Date.now();!sr&&St.leading===!1&&(sr=xn);var Tn=pt-(xn-sr);return ne=this,Be=arguments,Tn<=0||Tn>pt?(Ut&&(clearTimeout(Ut),Ut=null),sr=xn,Ue=tt.apply(ne,Be),Ut||(ne=Be=null)):!Ut&&St.trailing!==!1&&(Ut=setTimeout(Br,Tn)),Ue};return Hr.cancel=function(){clearTimeout(Ut),sr=0,Ut=ne=Be=null},Hr},_c=function(tt){return At(tt)?Array.prototype.slice.call(tt):[]},of={},cu=function(tt){return tt=tt||"g",of[tt]?of[tt]+=1:of[tt]=1,tt+of[tt]},Sc=function(){},wn=function(tt){return tt};function Tu(tt){return mr(tt)?0:At(tt)?tt.length:Object.keys(tt).length}var Ua=function(){function tt(){this.map={}}return tt.prototype.has=function(pt){return this.map[pt]!==void 0},tt.prototype.get=function(pt,St){var Ut=this.map[pt];return Ut===void 0?St:Ut},tt.prototype.set=function(pt,St){this.map[pt]=St},tt.prototype.clear=function(){this.map={}},tt.prototype.delete=function(pt){delete this.map[pt]},tt.prototype.size=function(){return Object.keys(this.map).length},tt}(),sf=Ua,Uf=1e-6;function Us(tt){return Math.abs(tt)<Uf?0:tt<0?-1:1}function Wf(tt,pt,St){return(St[0]-tt[0])*(pt[1]-tt[1])===(pt[0]-tt[0])*(St[1]-tt[1])&&Math.min(tt[0],pt[0])<=St[0]&&St[0]<=Math.max(tt[0],pt[0])&&Math.min(tt[1],pt[1])<=St[1]&&St[1]<=Math.max(tt[1],pt[1])}function lu(tt,pt,St){var Ut=!1,ne=tt.length;if(ne<=2)return!1;for(var Be=0;Be<ne;Be++){var Ue=tt[Be],sr=tt[(Be+1)%ne];if(Wf(Ue,sr,[pt,St]))return!0;Us(Ue[1]-St)>0!=Us(sr[1]-St)>0&&Us(pt-(St-Ue[1])*(Ue[0]-sr[0])/(Ue[1]-sr[1])-Ue[0])<0&&(Ut=!Ut)}return Ut}var Xf=function(tt,pt,St){return tt>=pt&&tt<=St};function Yf(tt,pt,St,Ut){var ne=.001,Be={x:St.x-tt.x,y:St.y-tt.y},Ue={x:pt.x-tt.x,y:pt.y-tt.y},sr={x:Ut.x-St.x,y:Ut.y-St.y},Br=Ue.x*sr.y-Ue.y*sr.x,Hr=Br*Br,xn=Ue.x*Ue.x+Ue.y*Ue.y,Tn=sr.x*sr.x+sr.y*sr.y,vn=null;if(Hr>ne*xn*Tn){var fa=(Be.x*sr.y-Be.y*sr.x)/Br,da=(Be.x*Ue.y-Be.y*Ue.x)/Br;Xf(fa,0,1)&&Xf(da,0,1)&&(vn={x:tt.x+fa*Ue.x,y:tt.y+fa*Ue.y})}return vn}function Vf(tt){for(var pt=[],St=tt.length,Ut=0;Ut<St-1;Ut++){var ne=tt[Ut],Be=tt[Ut+1];pt.push({from:{x:ne[0],y:ne[1]},to:{x:Be[0],y:Be[1]}})}if(pt.length>1){var Ue=tt[0],sr=tt[St-1];pt.push({from:{x:sr[0],y:sr[1]},to:{x:Ue[0],y:Ue[1]}})}return pt}function ms(tt,pt){var St=!1;return tt.forEach(function(Ut){if(Yf(Ut.from,Ut.to,pt.from,pt.to))return St=!0,!1}),St}function jf(tt){var pt=tt.map(function(Ut){return Ut[0]}),St=tt.map(function(Ut){return Ut[1]});return{minX:Math.min.apply(null,pt),maxX:Math.max.apply(null,pt),minY:Math.min.apply(null,St),maxY:Math.max.apply(null,St)}}function Hf(tt,pt){return!(pt.minX>tt.maxX||pt.maxX<tt.minX||pt.minY>tt.maxY||pt.maxY<tt.minY)}function bi(tt,pt){if(tt.length<2||pt.length<2)return!1;var St=jf(tt),Ut=jf(pt);if(!Hf(St,Ut))return!1;var ne=!1;if(pt.forEach(function(Br){if(lu(tt,Br[0],Br[1]))return ne=!0,!1}),ne||(tt.forEach(function(Br){if(lu(pt,Br[0],Br[1]))return ne=!0,!1}),ne))return!0;var Be=Vf(tt),Ue=Vf(pt),sr=!1;return Ue.forEach(function(Br){if(ms(Be,Br))return sr=!0,!1}),sr}function Yu(tt){var pt=document.createElement("div");pt.innerHTML=tt;var St=pt.childNodes[0];return St&&pt.contains(St)&&pt.removeChild(St),St}function xs(tt,pt){if(tt)return Object.keys(pt).forEach(function(St){tt.style[St]=pt[St]}),tt}},731278:function(yr,R,z){"use strict";var B;B={value:!0};var Y=z(858204);function k(m,I,A){var L=[0,0,0,0,0,0,0,0,0];return Y.mat3.fromTranslation(L,A),Y.mat3.multiply(m,L,I)}B=k;function P(m,I,A){var L=[0,0,0,0,0,0,0,0,0];return Y.mat3.fromRotation(L,A),Y.mat3.multiply(m,L,I)}B=P;function N(m,I,A){var L=[0,0,0,0,0,0,0,0,0];return Y.mat3.fromScaling(L,A),Y.mat3.multiply(m,L,I)}B=N;function D(m,I,A){return Y.mat3.multiply(m,A,I)}function E(m,I){for(var A=m?[].concat(m):[1,0,0,0,1,0,0,0,1],L=0,U=I.length;L<U;L++){var V=I[L];switch(V[0]){case"t":k(A,A,[V[1],V[2]]);break;case"s":N(A,A,[V[1],V[2]]);break;case"r":P(A,A,V[1]);break;case"m":D(A,A,V[1]);break;default:break}}return A}R.vs=E;function y(m,I){return m[0]*I[1]-I[0]*m[1]}B=y;function M(m,I,A){var L=Y.vec2.angle(m,I),U=y(m,I)>=0;return A?U?Math.PI*2-L:L:U?L:Math.PI*2-L}B=M;function S(m,I,A){return A?(m[0]=I[1],m[1]=-1*I[0]):(m[0]=-1*I[1],m[1]=I[0]),m}B=S},413810:function(yr,R,z){"use strict";z.r(R),z.d(R,{Cache:function(){return fs},assign:function(){return ro},augment:function(){return fo},clamp:function(){return O},clearAnimationFrame:function(){return ps},clone:function(){return Wo},contains:function(){return P},debounce:function(){return is},deepMix:function(){return iu},difference:function(){return y},each:function(){return d},endsWith:function(){return Ln},every:function(){return qe},extend:function(){return os},filter:function(){return D},find:function(){return dt},findIndex:function(){return It},firstValue:function(){return Ft},fixedBase:function(){return w},flatten:function(){return st},flattenDeep:function(){return kt},forIn:function(){return fe},get:function(){return lo},getEllipsisText:function(){return su},getRange:function(){return Pe},getType:function(){return To},getWrapBehavior:function(){return oa},group:function(){return jn},groupBy:function(){return pn},groupToMap:function(){return rn},has:function(){return Ae},hasKey:function(){return be},hasValue:function(){return Fr},head:function(){return Sr},identity:function(){return Vo},includes:function(){return P},indexOf:function(){return Yi},isArguments:function(){return uo},isArray:function(){return U},isArrayLike:function(){return Y},isBoolean:function(){return ds},isDate:function(){return Ui},isDecimal:function(){return wt},isElement:function(){return zo},isEmpty:function(){return ja},isEqual:function(){return no},isEqualWith:function(){return ki},isError:function(){return Ms},isEven:function(){return Me},isFinite:function(){return Go},isFunction:function(){return I},isInteger:function(){return He},isMatch:function(){return $},isNegative:function(){return ar},isNil:function(){return L},isNull:function(){return Io},isNumber:function(){return xt},isNumberEqual:function(){return Mn},isObject:function(){return V},isObjectLike:function(){return et},isOdd:function(){return hr},isPlainObject:function(){return it},isPositive:function(){return on},isPrototype:function(){return So},isRegExp:function(){return Wi},isString:function(){return re},isType:function(){return m},isUndefined:function(){return Lo},keys:function(){return W},last:function(){return gn},lowerCase:function(){return Bn},lowerFirst:function(){return ba},map:function(){return Yo},mapValues:function(){return ts},max:function(){return ee},maxBy:function(){return Wr},measureTextWidth:function(){return us},memoize:function(){return Xo},min:function(){return $t},minBy:function(){return xa},mix:function(){return ro},mod:function(){return Rn},noop:function(){return Ts},number2color:function(){return la},omit:function(){return ci},parseRadius:function(){return ft},pick:function(){return Cs},pull:function(){return xe},pullAt:function(){return Wt},reduce:function(){return Yt},remove:function(){return Oe},requestAnimationFrame:function(){return Uo},set:function(){return Rs},size:function(){return Fs},some:function(){return vr},sortBy:function(){return Ge},startsWith:function(){return ln},substitute:function(){return li},throttle:function(){return Po},toArray:function(){return Wu},toDegree:function(){return Aa},toInteger:function(){return an},toRadian:function(){return Dt},toString:function(){return Jr},union:function(){return Or},uniq:function(){return Ct},uniqueId:function(){return Bs},upperCase:function(){return fi},upperFirst:function(){return La},values:function(){return or},valuesOfKey:function(){return Ur},wrapBehavior:function(){return Wn}});var B=function(Tt){return Tt!==null&&typeof Tt!="function"&&isFinite(Tt.length)},Y=B,k=function(Tt,jt){return Y(Tt)?Tt.indexOf(jt)>-1:!1},P=k,N=function(Tt,jt){if(!Y(Tt))return Tt;for(var ze=[],Ke=0;Ke<Tt.length;Ke++){var Cr=Tt[Ke];jt(Cr,Ke)&&ze.push(Cr)}return ze},D=N,E=function(Tt,jt){return jt===void 0&&(jt=[]),D(Tt,function(ze){return!P(jt,ze)})},y=E,M={}.toString,S=function(Tt,jt){return M.call(Tt)==="[object "+jt+"]"},m=S,I=function(Tt){return m(Tt,"Function")},A=function(Tt){return Tt==null},L=A,U=function(Tt){return Array.isArray?Array.isArray(Tt):m(Tt,"Array")},V=function(Tt){var jt=typeof Tt;return Tt!==null&&jt==="object"||jt==="function"};function x(Tt,jt){if(Tt){var ze;if(U(Tt))for(var Ke=0,Cr=Tt.length;Ke<Cr&&(ze=jt(Tt[Ke],Ke),ze!==!1);Ke++);else if(V(Tt)){for(var cn in Tt)if(Tt.hasOwnProperty(cn)&&(ze=jt(Tt[cn],cn),ze===!1))break}}}var d=x,at=Object.keys?function(Tt){return Object.keys(Tt)}:function(Tt){var jt=[];return d(Tt,function(ze,Ke){I(Tt)&&Ke==="prototype"||jt.push(Ke)}),jt},W=at;function j(Tt,jt){var ze=W(jt),Ke=ze.length;if(L(Tt))return!Ke;for(var Cr=0;Cr<Ke;Cr+=1){var cn=ze[Cr];if(jt[cn]!==Tt[cn]||!(cn in Tt))return!1}return!0}var $=j,q=function(Tt){return typeof Tt=="object"&&Tt!==null},et=q,Q=function(Tt){if(!et(Tt)||!m(Tt,"Object"))return!1;if(Object.getPrototypeOf(Tt)===null)return!0;for(var jt=Tt;Object.getPrototypeOf(jt)!==null;)jt=Object.getPrototypeOf(jt);return Object.getPrototypeOf(Tt)===jt},it=Q;function ht(Tt,jt){if(!U(Tt))return null;var ze;if(I(jt)&&(ze=jt),it(jt)&&(ze=function(Cr){return $(Cr,jt)}),ze){for(var Ke=0;Ke<Tt.length;Ke+=1)if(ze(Tt[Ke]))return Tt[Ke]}return null}var dt=ht;function Ot(Tt,jt,ze){ze===void 0&&(ze=0);for(var Ke=ze;Ke<Tt.length;Ke++)if(jt(Tt[Ke],Ke))return Ke;return-1}var It=Ot,Kt=function(Tt,jt){for(var ze=null,Ke=0;Ke<Tt.length;Ke++){var Cr=Tt[Ke],cn=Cr[jt];if(!L(cn)){U(cn)?ze=cn[0]:ze=cn;break}}return ze},Ft=Kt,Nt=function(Tt){if(!U(Tt))return[];for(var jt=[],ze=0;ze<Tt.length;ze++)jt=jt.concat(Tt[ze]);return jt},st=Nt,yt=function(Tt,jt){if(jt===void 0&&(jt=[]),!U(Tt))jt.push(Tt);else for(var ze=0;ze<Tt.length;ze+=1)yt(Tt[ze],jt);return jt},kt=yt,ee=function(Tt){if(U(Tt))return Tt.reduce(function(jt,ze){return Math.max(jt,ze)},Tt[0])},$t=function(Tt){if(U(Tt))return Tt.reduce(function(jt,ze){return Math.min(jt,ze)},Tt[0])},ge=function(Tt){var jt=Tt.filter(function(mn){return!isNaN(mn)});if(!jt.length)return{min:0,max:0};if(U(Tt[0])){for(var ze=[],Ke=0;Ke<Tt.length;Ke++)ze=ze.concat(Tt[Ke]);jt=ze}var Cr=ee(jt),cn=$t(jt);return{min:cn,max:Cr}},Pe=ge,tr=Array.prototype,Jt=tr.splice,ae=tr.indexOf,Se=function(Tt){for(var jt=[],ze=1;ze<arguments.length;ze++)jt[ze-1]=arguments[ze];for(var Ke=0;Ke<jt.length;Ke++)for(var Cr=jt[Ke],cn=-1;(cn=ae.call(Tt,Cr))>-1;)Jt.call(Tt,cn,1);return Tt},xe=Se,we=Array.prototype.splice,zt=function(jt,ze){if(!Y(jt))return[];for(var Ke=jt?ze.length:0,Cr=Ke-1;Ke--;){var cn=void 0,mn=ze[Ke];(Ke===Cr||mn!==cn)&&(cn=mn,we.call(jt,mn,1))}return jt},Wt=zt,Ie=function(Tt,jt,ze){if(!U(Tt)&&!it(Tt))return Tt;var Ke=ze;return d(Tt,function(Cr,cn){Ke=jt(Ke,Cr,cn)}),Ke},Yt=Ie,ie=function(Tt,jt){var ze=[];if(!Y(Tt))return ze;for(var Ke=-1,Cr=[],cn=Tt.length;++Ke<cn;){var mn=Tt[Ke];jt(mn,Ke,Tt)&&(ze.push(mn),Cr.push(Ke))}return Wt(Tt,Cr),ze},Oe=ie,re=function(Tt){return m(Tt,"String")};function _e(Tt,jt){var ze;if(I(jt))ze=function(Cr,cn){return jt(Cr)-jt(cn)};else{var Ke=[];re(jt)?Ke.push(jt):U(jt)&&(Ke=jt),ze=function(Cr,cn){for(var mn=0;mn<Ke.length;mn+=1){var aa=Ke[mn];if(Cr[aa]>cn[aa])return 1;if(Cr[aa]<cn[aa])return-1}return 0}}return Tt.sort(ze),Tt}var Ge=_e;function Ct(Tt,jt){jt===void 0&&(jt=new Map);var ze=[];if(Array.isArray(Tt))for(var Ke=0,Cr=Tt.length;Ke<Cr;Ke++){var cn=Tt[Ke];jt.has(cn)||(ze.push(cn),jt.set(cn,!0))}return ze}var Nr=function(){for(var Tt=[],jt=0;jt<arguments.length;jt++)Tt[jt]=arguments[jt];return Ct([].concat.apply([],Tt))},Or=Nr,Ur=function(Tt,jt){for(var ze=[],Ke={},Cr=0;Cr<Tt.length;Cr++){var cn=Tt[Cr],mn=cn[jt];if(!L(mn)){U(mn)||(mn=[mn]);for(var aa=0;aa<mn.length;aa++){var ai=mn[aa];Ke[ai]||(ze.push(ai),Ke[ai]=!0)}}}return ze};function Sr(Tt){if(Y(Tt))return Tt[0]}function gn(Tt){if(Y(Tt)){var jt=Tt;return jt[jt.length-1]}}function Rr(Tt,jt){return U(Tt)||re(Tt)?Tt[0]===jt:!1}var ln=Rr;function Nn(Tt,jt){return U(Tt)||re(Tt)?Tt[Tt.length-1]===jt:!1}var Ln=Nn,fn=function(Tt,jt){for(var ze=0;ze<Tt.length;ze++)if(!jt(Tt[ze],ze))return!1;return!0},qe=fn,rr=function(Tt,jt){for(var ze=0;ze<Tt.length;ze++)if(jt(Tt[ze],ze))return!0;return!1},vr=rr,Pr=Object.prototype.hasOwnProperty;function en(Tt,jt){if(!jt||!U(Tt))return{};for(var ze={},Ke=I(jt)?jt:function(aa){return aa[jt]},Cr,cn=0;cn<Tt.length;cn++){var mn=Tt[cn];Cr=Ke(mn),Pr.call(ze,Cr)?ze[Cr].push(mn):ze[Cr]=[mn]}return ze}var pn=en;function rn(Tt,jt){if(!jt)return{0:Tt};if(!I(jt)){var ze=U(jt)?jt:jt.replace(/\s+/g,"").split("*");jt=function(Ke){for(var Cr="_",cn=0,mn=ze.length;cn<mn;cn++)Cr+=Ke[ze[cn]]&&Ke[ze[cn]].toString();return Cr}}return pn(Tt,jt)}var jn=function(Tt,jt){if(!jt)return[Tt];var ze=rn(Tt,jt),Ke=[];for(var Cr in ze)Ke.push(ze[Cr]);return Ke};function Hn(Tt,jt){return Tt["_wrap_"+jt]}var oa=Hn;function dn(Tt,jt){if(Tt["_wrap_"+jt])return Tt["_wrap_"+jt];var ze=function(Ke){Tt[jt](Ke)};return Tt["_wrap_"+jt]=ze,ze}var Wn=dn,Dn={};function Cn(Tt){var jt=Dn[Tt];if(!jt){for(var ze=Tt.toString(16),Ke=ze.length;Ke<6;Ke++)ze="0"+ze;jt="#"+ze,Dn[Tt]=jt}return jt}var la=Cn;function K(Tt){var jt=0,ze=0,Ke=0,Cr=0;return U(Tt)?Tt.length===1?jt=ze=Ke=Cr=Tt[0]:Tt.length===2?(jt=Ke=Tt[0],ze=Cr=Tt[1]):Tt.length===3?(jt=Tt[0],ze=Cr=Tt[1],Ke=Tt[2]):(jt=Tt[0],ze=Tt[1],Ke=Tt[2],Cr=Tt[3]):jt=ze=Ke=Cr=Tt,{r1:jt,r2:ze,r3:Ke,r4:Cr}}var ft=K,rt=function(Tt,jt,ze){return Tt<jt?jt:Tt>ze?ze:Tt},O=rt,b=function(Tt,jt){var ze=jt.toString(),Ke=ze.indexOf(".");if(Ke===-1)return Math.round(Tt);var Cr=ze.substr(Ke+1).length;return Cr>20&&(Cr=20),parseFloat(Tt.toFixed(Cr))},w=b,X=function(Tt){return m(Tt,"Number")},xt=X,At=function(Tt){return xt(Tt)&&Tt%1!==0},wt=At,Pt=function(Tt){return xt(Tt)&&Tt%2===0},Me=Pt,ve=Number.isInteger?Number.isInteger:function(Tt){return xt(Tt)&&Tt%1===0},He=ve,br=function(Tt){return xt(Tt)&&Tt<0},ar=br,mr=1e-5;function Mn(Tt,jt,ze){return ze===void 0&&(ze=mr),Math.abs(Tt-jt)<ze}var Xe=function(Tt){return xt(Tt)&&Tt%2!==0},hr=Xe,Er=function(Tt){return xt(Tt)&&Tt>0},on=Er,Wr=function(Tt,jt){if(U(Tt)){for(var ze,Ke=-1/0,Cr=0;Cr<Tt.length;Cr++){var cn=Tt[Cr],mn=I(jt)?jt(cn):cn[jt];mn>Ke&&(ze=cn,Ke=mn)}return ze}},xa=function(Tt,jt){if(U(Tt)){for(var ze,Ke=1/0,Cr=0;Cr<Tt.length;Cr++){var cn=Tt[Cr],mn=I(jt)?jt(cn):cn[jt];mn<Ke&&(ze=cn,Ke=mn)}return ze}},Ta=function(Tt,jt){return(Tt%jt+jt)%jt},Rn=Ta,Jn=180/Math.PI,Ga=function(Tt){return Jn*Tt},Aa=Ga,an=parseInt,Vn=Math.PI/180,me=function(Tt){return Vn*Tt},Dt=me,fe=d,Ae=function(Tt,jt){return Tt.hasOwnProperty(jt)},be=Ae,De=Object.values?function(Tt){return Object.values(Tt)}:function(Tt){var jt=[];return d(Tt,function(ze,Ke){I(Tt)&&Ke==="prototype"||jt.push(ze)}),jt},or=De,Fr=function(Tt,jt){return P(or(Tt),jt)},Jr=function(Tt){return L(Tt)?"":Tt.toString()},Pn=function(Tt){return Jr(Tt).toLowerCase()},Bn=Pn,Zn=function(Tt){var jt=Jr(Tt);return jt.charAt(0).toLowerCase()+jt.substring(1)},ba=Zn;function Ca(Tt,jt){return!Tt||!jt?Tt:Tt.replace(/\\?\{([^{}]+)\}/g,function(ze,Ke){return ze.charAt(0)==="\\"?ze.slice(1):jt[Ke]===void 0?"":jt[Ke]})}var li=Ca,ta=function(Tt){return Jr(Tt).toUpperCase()},fi=ta,Co=function(Tt){var jt=Jr(Tt);return jt.charAt(0).toUpperCase()+jt.substring(1)},La=Co,xi={}.toString,so=function(Tt){return xi.call(Tt).replace(/^\[object /,"").replace(/]$/,"")},To=so,bo=function(Tt){return m(Tt,"Arguments")},uo=bo,Hi=function(Tt){return m(Tt,"Boolean")},ds=Hi,zi=function(Tt){return m(Tt,"Date")},Ui=zi,gs=function(Tt){return m(Tt,"Error")},Ms=gs;function Go(Tt){return xt(Tt)&&isFinite(Tt)}var _o=function(Tt){return Tt===null},Io=_o,$s=Object.prototype,Yn=function(Tt){var jt=Tt&&Tt.constructor,ze=typeof jt=="function"&&jt.prototype||$s;return Tt===ze},So=Yn,Oo=function(Tt){return m(Tt,"RegExp")},Wi=Oo,zn=function(Tt){return Tt===void 0},Lo=zn,Ai=function(Tt){return Tt instanceof Element||Tt instanceof HTMLDocument},zo=Ai;function Uo(Tt){var jt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(ze){return setTimeout(ze,16)};return jt(Tt)}function ps(Tt){var jt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;jt(Tt)}function eo(Tt,jt){for(var ze in jt)jt.hasOwnProperty(ze)&&ze!=="constructor"&&jt[ze]!==void 0&&(Tt[ze]=jt[ze])}function ro(Tt,jt,ze,Ke){return jt&&eo(Tt,jt),ze&&eo(Tt,ze),Ke&&eo(Tt,Ke),Tt}var ei=function(){for(var Tt=[],jt=0;jt<arguments.length;jt++)Tt[jt]=arguments[jt];for(var ze=Tt[0],Ke=1;Ke<Tt.length;Ke++){var Cr=Tt[Ke];I(Cr)&&(Cr=Cr.prototype),ro(ze.prototype,Cr)}},fo=ei,Do=function(Tt){if(typeof Tt!="object"||Tt===null)return Tt;var jt;if(U(Tt)){jt=[];for(var ze=0,Ke=Tt.length;ze<Ke;ze++)typeof Tt[ze]=="object"&&Tt[ze]!=null?jt[ze]=Do(Tt[ze]):jt[ze]=Tt[ze]}else{jt={};for(var Cr in Tt)typeof Tt[Cr]=="object"&&Tt[Cr]!=null?jt[Cr]=Do(Tt[Cr]):jt[Cr]=Tt[Cr]}return jt},Wo=Do;function No(Tt,jt,ze){var Ke;return function(){var Cr=this,cn=arguments,mn=function(){Ke=null,ze||Tt.apply(Cr,cn)},aa=ze&&!Ke;clearTimeout(Ke),Ke=setTimeout(mn,jt),aa&&Tt.apply(Cr,cn)}}var is=No,Xo=function(Tt,jt){if(!I(Tt))throw new TypeError("Expected a function");var ze=function(){for(var Ke=[],Cr=0;Cr<arguments.length;Cr++)Ke[Cr]=arguments[Cr];var cn=jt?jt.apply(this,Ke):Ke[0],mn=ze.cache;if(mn.has(cn))return mn.get(cn);var aa=Tt.apply(this,Ke);return mn.set(cn,aa),aa};return ze.cache=new Map,ze},Jo=5;function Xa(Tt,jt,ze,Ke){ze=ze||0,Ke=Ke||Jo;for(var Cr in jt)if(jt.hasOwnProperty(Cr)){var cn=jt[Cr];cn!==null&&it(cn)?(it(Tt[Cr])||(Tt[Cr]={}),ze<Ke?Xa(Tt[Cr],cn,ze+1,Ke):Tt[Cr]=jt[Cr]):U(cn)?(Tt[Cr]=[],Tt[Cr]=Tt[Cr].concat(cn)):cn!==void 0&&(Tt[Cr]=cn)}}var As=function(Tt){for(var jt=[],ze=1;ze<arguments.length;ze++)jt[ze-1]=arguments[ze];for(var Ke=0;Ke<jt.length;Ke+=1)Xa(Tt,jt[Ke]);return Tt},iu=As,Xi=function(Tt,jt,ze,Ke){I(jt)||(ze=jt,jt=Tt,Tt=function(){});var Cr=Object.create?function(mn,aa){return Object.create(mn,{constructor:{value:aa}})}:function(mn,aa){function ai(){}ai.prototype=mn;var Zi=new ai;return Zi.constructor=aa,Zi},cn=Cr(jt.prototype,Tt);return Tt.prototype=ro(cn,Tt.prototype),Tt.superclass=Cr(jt.prototype,jt),ro(cn,ze),ro(Tt,Ke),Tt},os=Xi,Eo=function(Tt,jt){if(!Y(Tt))return-1;var ze=Array.prototype.indexOf;if(ze)return ze.call(Tt,jt);for(var Ke=-1,Cr=0;Cr<Tt.length;Cr++)if(Tt[Cr]===jt){Ke=Cr;break}return Ke},Yi=Eo,co=Object.prototype.hasOwnProperty;function pa(Tt){if(L(Tt))return!0;if(Y(Tt))return!Tt.length;var jt=To(Tt);if(jt==="Map"||jt==="Set")return!Tt.size;if(So(Tt))return!Object.keys(Tt).length;for(var ze in Tt)if(co.call(Tt,ze))return!1;return!0}var ja=pa,yi=function(Tt,jt){if(Tt===jt)return!0;if(!Tt||!jt||re(Tt)||re(jt))return!1;if(Y(Tt)||Y(jt)){if(Tt.length!==jt.length)return!1;for(var ze=!0,Ke=0;Ke<Tt.length&&(ze=yi(Tt[Ke],jt[Ke]),!!ze);Ke++);return ze}if(et(Tt)||et(jt)){var Cr=Object.keys(Tt),cn=Object.keys(jt);if(Cr.length!==cn.length)return!1;for(var ze=!0,Ke=0;Ke<Cr.length&&(ze=yi(Tt[Cr[Ke]],jt[Cr[Ke]]),!!ze);Ke++);return ze}return!1},no=yi,ki=function(Tt,jt,ze){return I(ze)?!!ze(Tt,jt):no(Tt,jt)},Ki=function(Tt,jt){if(!Y(Tt))return Tt;for(var ze=[],Ke=0;Ke<Tt.length;Ke++){var Cr=Tt[Ke];ze.push(jt(Cr,Ke))}return ze},Yo=Ki,wo=function(Tt){return Tt},ts=function(Tt,jt){jt===void 0&&(jt=wo);var ze={};return V(Tt)&&!L(Tt)&&Object.keys(Tt).forEach(function(Ke){ze[Ke]=jt(Tt[Ke],Ke)}),ze},lo=function(Tt,jt,ze){for(var Ke=0,Cr=re(jt)?jt.split("."):jt;Tt&&Ke<Cr.length;)Tt=Tt[Cr[Ke++]];return Tt===void 0||Ke<Cr.length?ze:Tt},Rs=function(Tt,jt,ze){var Ke=Tt,Cr=re(jt)?jt.split("."):jt;return Cr.forEach(function(cn,mn){mn<Cr.length-1?(V(Ke[cn])||(Ke[cn]=xt(Cr[mn+1])?[]:{}),Ke=Ke[cn]):Ke[cn]=ze}),Tt},ou=Object.prototype.hasOwnProperty,Cs=function(Tt,jt){if(Tt===null||!it(Tt))return{};var ze={};return d(jt,function(Ke){ou.call(Tt,Ke)&&(ze[Ke]=Tt[Ke])}),ze},ci=function(Tt,jt){return Yt(Tt,function(ze,Ke,Cr){return jt.includes(Cr)||(ze[Cr]=Ke),ze},{})},Po=function(Tt,jt,ze){var Ke,Cr,cn,mn,aa=0;ze||(ze={});var ai=function(){aa=ze.leading===!1?0:Date.now(),Ke=null,mn=Tt.apply(Cr,cn),Ke||(Cr=cn=null)},Zi=function(){var ao=Date.now();!aa&&ze.leading===!1&&(aa=ao);var zs=jt-(ao-aa);return Cr=this,cn=arguments,zs<=0||zs>jt?(Ke&&(clearTimeout(Ke),Ke=null),aa=ao,mn=Tt.apply(Cr,cn),Ke||(Cr=cn=null)):!Ke&&ze.trailing!==!1&&(Ke=setTimeout(ai,zs)),mn};return Zi.cancel=function(){clearTimeout(Ke),aa=0,Ke=Cr=cn=null},Zi},Wu=function(Tt){return Y(Tt)?Array.prototype.slice.call(Tt):[]},ho={},Bs=function(Tt){return Tt=Tt||"g",ho[Tt]?ho[Tt]+=1:ho[Tt]=1,Tt+ho[Tt]},Ts=function(){},Vo=function(Tt){return Tt};function Fs(Tt){return L(Tt)?0:Y(Tt)?Tt.length:Object.keys(Tt).length}var ss=z(197582),jo,us=Xo(function(Tt,jt){jt===void 0&&(jt={});var ze=jt.fontSize,Ke=jt.fontFamily,Cr=jt.fontWeight,cn=jt.fontStyle,mn=jt.fontVariant;return jo||(jo=document.createElement("canvas").getContext("2d")),jo.font=[cn,mn,Cr,ze+"px",Ke].join(" "),jo.measureText(re(Tt)?Tt:"").width},function(Tt,jt){return jt===void 0&&(jt={}),(0,ss.__spreadArrays)([Tt],or(jt)).join("")}),su=function(Tt,jt,ze,Ke){Ke===void 0&&(Ke="...");var Cr=16,cn=us(Ke,ze),mn=re(Tt)?Tt:Jr(Tt),aa=jt,ai=[],Zi,ao;if(us(Tt,ze)<=jt)return Tt;for(;Zi=mn.substr(0,Cr),ao=us(Zi,ze),!(ao+cn>aa&&ao>aa);)if(ai.push(Zi),aa-=ao,mn=mn.substr(Cr),!mn)return ai.join("");for(;Zi=mn.substr(0,1),ao=us(Zi,ze),!(ao+cn>aa);)if(ai.push(Zi),aa-=ao,mn=mn.substr(1),!mn)return ai.join("");return""+ai.join("")+Ke},Gs=function(){function Tt(){this.map={}}return Tt.prototype.has=function(jt){return this.map[jt]!==void 0},Tt.prototype.get=function(jt,ze){var Ke=this.map[jt];return Ke===void 0?ze:Ke},Tt.prototype.set=function(jt,ze){this.map[jt]=ze},Tt.prototype.clear=function(){this.map={}},Tt.prototype.delete=function(jt){delete this.map[jt]},Tt.prototype.size=function(){return Object.keys(this.map).length},Tt}(),fs=Gs},774948:function(yr,R,z){"use strict";z.r(R),z.d(R,{forceCenter:function(){return B},forceCollide:function(){return E},forceLink:function(){return I},forceManyBody:function(){return Ie},forceRadial:function(){return Yt},forceSimulation:function(){return Wt},forceX:function(){return ie},forceY:function(){return Oe}});function B(re,_e){var Ge,Ct=1;re==null&&(re=0),_e==null&&(_e=0);function Nr(){var Or,Ur=Ge.length,Sr,gn=0,Rr=0;for(Or=0;Or<Ur;++Or)Sr=Ge[Or],gn+=Sr.x,Rr+=Sr.y;for(gn=(gn/Ur-re)*Ct,Rr=(Rr/Ur-_e)*Ct,Or=0;Or<Ur;++Or)Sr=Ge[Or],Sr.x-=gn,Sr.y-=Rr}return Nr.initialize=function(Or){Ge=Or},Nr.x=function(Or){return arguments.length?(re=+Or,Nr):re},Nr.y=function(Or){return arguments.length?(_e=+Or,Nr):_e},Nr.strength=function(Or){return arguments.length?(Ct=+Or,Nr):Ct},Nr}var Y=z(547148);function k(re){return function(){return re}}function P(re){return(re()-.5)*1e-6}function N(re){return re.x+re.vx}function D(re){return re.y+re.vy}function E(re){var _e,Ge,Ct,Nr=1,Or=1;typeof re!="function"&&(re=k(re==null?1:+re));function Ur(){for(var Rr,ln=_e.length,Nn,Ln,fn,qe,rr,vr,Pr=0;Pr<Or;++Pr)for(Nn=(0,Y.Z)(_e,N,D).visitAfter(Sr),Rr=0;Rr<ln;++Rr)Ln=_e[Rr],rr=Ge[Ln.index],vr=rr*rr,fn=Ln.x+Ln.vx,qe=Ln.y+Ln.vy,Nn.visit(en);function en(pn,rn,jn,Hn,oa){var dn=pn.data,Wn=pn.r,Dn=rr+Wn;if(dn){if(dn.index>Ln.index){var Cn=fn-dn.x-dn.vx,la=qe-dn.y-dn.vy,K=Cn*Cn+la*la;K<Dn*Dn&&(Cn===0&&(Cn=P(Ct),K+=Cn*Cn),la===0&&(la=P(Ct),K+=la*la),K=(Dn-(K=Math.sqrt(K)))/K*Nr,Ln.vx+=(Cn*=K)*(Dn=(Wn*=Wn)/(vr+Wn)),Ln.vy+=(la*=K)*Dn,dn.vx-=Cn*(Dn=1-Dn),dn.vy-=la*Dn)}return}return rn>fn+Dn||Hn<fn-Dn||jn>qe+Dn||oa<qe-Dn}}function Sr(Rr){if(Rr.data)return Rr.r=Ge[Rr.data.index];for(var ln=Rr.r=0;ln<4;++ln)Rr[ln]&&Rr[ln].r>Rr.r&&(Rr.r=Rr[ln].r)}function gn(){if(_e){var Rr,ln=_e.length,Nn;for(Ge=new Array(ln),Rr=0;Rr<ln;++Rr)Nn=_e[Rr],Ge[Nn.index]=+re(Nn,Rr,_e)}}return Ur.initialize=function(Rr,ln){_e=Rr,Ct=ln,gn()},Ur.iterations=function(Rr){return arguments.length?(Or=+Rr,Ur):Or},Ur.strength=function(Rr){return arguments.length?(Nr=+Rr,Ur):Nr},Ur.radius=function(Rr){return arguments.length?(re=typeof Rr=="function"?Rr:k(+Rr),gn(),Ur):re},Ur}var y=z(918698),M=z.n(y);function S(re){return re.index}function m(re,_e){var Ge=re.get(_e);if(!Ge)throw new Error("node not found: "+_e);return Ge}function I(re){var _e=S,Ge=Nn,Ct,Nr=k(30),Or,Ur,Sr,gn,Rr,ln=1;re==null&&(re=[]);function Nn(vr){return 1/Math.min(Sr[vr.source.index],Sr[vr.target.index])}function Ln(vr){for(var Pr=0,en=re.length;Pr<ln;++Pr)for(var pn=0,rn,jn,Hn,oa,dn,Wn,Dn;pn<en;++pn)rn=re[pn],jn=rn.source,Hn=rn.target,oa=Hn.x+Hn.vx-jn.x-jn.vx||P(Rr),dn=Hn.y+Hn.vy-jn.y-jn.vy||P(Rr),Wn=Math.sqrt(oa*oa+dn*dn),Wn=(Wn-Or[pn])/Wn*vr*Ct[pn],oa*=Wn,dn*=Wn,Hn.vx-=oa*(Dn=gn[pn]),Hn.vy-=dn*Dn,jn.vx+=oa*(Dn=1-Dn),jn.vy+=dn*Dn}function fn(){if(Ur){var vr,Pr=Ur.length,en=re.length,pn=new Map(Ur.map(function(jn,Hn){return[_e(jn,Hn,Ur),jn]})),rn;for(vr=0,Sr=new Array(Pr);vr<en;++vr)rn=re[vr],rn.index=vr,M()(rn.source)!=="object"&&(rn.source=m(pn,rn.source)),M()(rn.target)!=="object"&&(rn.target=m(pn,rn.target)),Sr[rn.source.index]=(Sr[rn.source.index]||0)+1,Sr[rn.target.index]=(Sr[rn.target.index]||0)+1;for(vr=0,gn=new Array(en);vr<en;++vr)rn=re[vr],gn[vr]=Sr[rn.source.index]/(Sr[rn.source.index]+Sr[rn.target.index]);Ct=new Array(en),qe(),Or=new Array(en),rr()}}function qe(){if(Ur)for(var vr=0,Pr=re.length;vr<Pr;++vr)Ct[vr]=+Ge(re[vr],vr,re)}function rr(){if(Ur)for(var vr=0,Pr=re.length;vr<Pr;++vr)Or[vr]=+Nr(re[vr],vr,re)}return Ln.initialize=function(vr,Pr){Ur=vr,Rr=Pr,fn()},Ln.links=function(vr){return arguments.length?(re=vr,fn(),Ln):re},Ln.id=function(vr){return arguments.length?(_e=vr,Ln):_e},Ln.iterations=function(vr){return arguments.length?(ln=+vr,Ln):ln},Ln.strength=function(vr){return arguments.length?(Ge=typeof vr=="function"?vr:k(+vr),qe(),Ln):Ge},Ln.distance=function(vr){return arguments.length?(Nr=typeof vr=="function"?vr:k(+vr),rr(),Ln):Nr},Ln}var A={value:function(){}};function L(){for(var re=0,_e=arguments.length,Ge={},Ct;re<_e;++re){if(!(Ct=arguments[re]+"")||Ct in Ge||/[\s.]/.test(Ct))throw new Error("illegal type: "+Ct);Ge[Ct]=[]}return new U(Ge)}function U(re){this._=re}function V(re,_e){return re.trim().split(/^|\s+/).map(function(Ge){var Ct="",Nr=Ge.indexOf(".");if(Nr>=0&&(Ct=Ge.slice(Nr+1),Ge=Ge.slice(0,Nr)),Ge&&!_e.hasOwnProperty(Ge))throw new Error("unknown type: "+Ge);return{type:Ge,name:Ct}})}U.prototype=L.prototype={constructor:U,on:function(_e,Ge){var Ct=this._,Nr=V(_e+"",Ct),Or,Ur=-1,Sr=Nr.length;if(arguments.length<2){for(;++Ur<Sr;)if((Or=(_e=Nr[Ur]).type)&&(Or=x(Ct[Or],_e.name)))return Or;return}if(Ge!=null&&typeof Ge!="function")throw new Error("invalid callback: "+Ge);for(;++Ur<Sr;)if(Or=(_e=Nr[Ur]).type)Ct[Or]=d(Ct[Or],_e.name,Ge);else if(Ge==null)for(Or in Ct)Ct[Or]=d(Ct[Or],_e.name,null);return this},copy:function(){var _e={},Ge=this._;for(var Ct in Ge)_e[Ct]=Ge[Ct].slice();return new U(_e)},call:function(_e,Ge){if((Or=arguments.length-2)>0)for(var Ct=new Array(Or),Nr=0,Or,Ur;Nr<Or;++Nr)Ct[Nr]=arguments[Nr+2];if(!this._.hasOwnProperty(_e))throw new Error("unknown type: "+_e);for(Ur=this._[_e],Nr=0,Or=Ur.length;Nr<Or;++Nr)Ur[Nr].value.apply(Ge,Ct)},apply:function(_e,Ge,Ct){if(!this._.hasOwnProperty(_e))throw new Error("unknown type: "+_e);for(var Nr=this._[_e],Or=0,Ur=Nr.length;Or<Ur;++Or)Nr[Or].value.apply(Ge,Ct)}};function x(re,_e){for(var Ge=0,Ct=re.length,Nr;Ge<Ct;++Ge)if((Nr=re[Ge]).name===_e)return Nr.value}function d(re,_e,Ge){for(var Ct=0,Nr=re.length;Ct<Nr;++Ct)if(re[Ct].name===_e){re[Ct]=A,re=re.slice(0,Ct).concat(re.slice(Ct+1));break}return Ge!=null&&re.push({name:_e,value:Ge}),re}var at=L,W=0,j=0,$=0,q=1e3,et,Q,it=0,ht=0,dt=0,Ot=typeof performance=="object"&&performance.now?performance:Date,It=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(re){setTimeout(re,17)};function Kt(){return ht||(It(Ft),ht=Ot.now()+dt)}function Ft(){ht=0}function Nt(){this._call=this._time=this._next=null}Nt.prototype=st.prototype={constructor:Nt,restart:function(re,_e,Ge){if(typeof re!="function")throw new TypeError("callback is not a function");Ge=(Ge==null?Kt():+Ge)+(_e==null?0:+_e),!this._next&&Q!==this&&(Q?Q._next=this:et=this,Q=this),this._call=re,this._time=Ge,ge()},stop:function(){this._call&&(this._call=null,this._time=1/0,ge())}};function st(re,_e,Ge){var Ct=new Nt;return Ct.restart(re,_e,Ge),Ct}function yt(){Kt(),++W;for(var re=et,_e;re;)(_e=ht-re._time)>=0&&re._call.call(null,_e),re=re._next;--W}function kt(){ht=(it=Ot.now())+dt,W=j=0;try{yt()}finally{W=0,$t(),ht=0}}function ee(){var re=Ot.now(),_e=re-it;_e>q&&(dt-=_e,it=re)}function $t(){for(var re,_e=et,Ge,Ct=1/0;_e;)_e._call?(Ct>_e._time&&(Ct=_e._time),re=_e,_e=_e._next):(Ge=_e._next,_e._next=null,_e=re?re._next=Ge:et=Ge);Q=re,ge(Ct)}function ge(re){if(!W){j&&(j=clearTimeout(j));var _e=re-ht;_e>24?(re<1/0&&(j=setTimeout(kt,re-Ot.now()-dt)),$&&($=clearInterval($))):($||(it=Ot.now(),$=setInterval(ee,q)),W=1,It(kt))}}var Pe=1664525,tr=1013904223,Jt=4294967296;function ae(){var re=1;return function(){return(re=(Pe*re+tr)%Jt)/Jt}}function Se(re){return re.x}function xe(re){return re.y}var we=10,zt=Math.PI*(3-Math.sqrt(5));function Wt(re){var _e,Ge=1,Ct=.001,Nr=1-Math.pow(Ct,1/300),Or=0,Ur=.6,Sr=new Map,gn=st(Nn),Rr=at("tick","end"),ln=ae();re==null&&(re=[]);function Nn(){Ln(),Rr.call("tick",_e),Ge<Ct&&(gn.stop(),Rr.call("end",_e))}function Ln(rr){var vr,Pr=re.length,en;rr===void 0&&(rr=1);for(var pn=0;pn<rr;++pn)for(Ge+=(Or-Ge)*Nr,Sr.forEach(function(rn){rn(Ge)}),vr=0;vr<Pr;++vr)en=re[vr],en.fx==null?en.x+=en.vx*=Ur:(en.x=en.fx,en.vx=0),en.fy==null?en.y+=en.vy*=Ur:(en.y=en.fy,en.vy=0);return _e}function fn(){for(var rr=0,vr=re.length,Pr;rr<vr;++rr){if(Pr=re[rr],Pr.index=rr,Pr.fx!=null&&(Pr.x=Pr.fx),Pr.fy!=null&&(Pr.y=Pr.fy),isNaN(Pr.x)||isNaN(Pr.y)){var en=we*Math.sqrt(.5+rr),pn=rr*zt;Pr.x=en*Math.cos(pn),Pr.y=en*Math.sin(pn)}(isNaN(Pr.vx)||isNaN(Pr.vy))&&(Pr.vx=Pr.vy=0)}}function qe(rr){return rr.initialize&&rr.initialize(re,ln),rr}return fn(),_e={tick:Ln,restart:function(){return gn.restart(Nn),_e},stop:function(){return gn.stop(),_e},nodes:function(vr){return arguments.length?(re=vr,fn(),Sr.forEach(qe),_e):re},alpha:function(vr){return arguments.length?(Ge=+vr,_e):Ge},alphaMin:function(vr){return arguments.length?(Ct=+vr,_e):Ct},alphaDecay:function(vr){return arguments.length?(Nr=+vr,_e):+Nr},alphaTarget:function(vr){return arguments.length?(Or=+vr,_e):Or},velocityDecay:function(vr){return arguments.length?(Ur=1-vr,_e):1-Ur},randomSource:function(vr){return arguments.length?(ln=vr,Sr.forEach(qe),_e):ln},force:function(vr,Pr){return arguments.length>1?(Pr==null?Sr.delete(vr):Sr.set(vr,qe(Pr)),_e):Sr.get(vr)},find:function(vr,Pr,en){var pn=0,rn=re.length,jn,Hn,oa,dn,Wn;for(en==null?en=1/0:en*=en,pn=0;pn<rn;++pn)dn=re[pn],jn=vr-dn.x,Hn=Pr-dn.y,oa=jn*jn+Hn*Hn,oa<en&&(Wn=dn,en=oa);return Wn},on:function(vr,Pr){return arguments.length>1?(Rr.on(vr,Pr),_e):Rr.on(vr)}}}function Ie(){var re,_e,Ge,Ct,Nr=k(-30),Or,Ur=1,Sr=1/0,gn=.81;function Rr(fn){var qe,rr=re.length,vr=(0,Y.Z)(re,Se,xe).visitAfter(Nn);for(Ct=fn,qe=0;qe<rr;++qe)_e=re[qe],vr.visit(Ln)}function ln(){if(re){var fn,qe=re.length,rr;for(Or=new Array(qe),fn=0;fn<qe;++fn)rr=re[fn],Or[rr.index]=+Nr(rr,fn,re)}}function Nn(fn){var qe=0,rr,vr,Pr=0,en,pn,rn;if(fn.length){for(en=pn=rn=0;rn<4;++rn)(rr=fn[rn])&&(vr=Math.abs(rr.value))&&(qe+=rr.value,Pr+=vr,en+=vr*rr.x,pn+=vr*rr.y);fn.x=en/Pr,fn.y=pn/Pr}else{rr=fn,rr.x=rr.data.x,rr.y=rr.data.y;do qe+=Or[rr.data.index];while(rr=rr.next)}fn.value=qe}function Ln(fn,qe,rr,vr){if(!fn.value)return!0;var Pr=fn.x-_e.x,en=fn.y-_e.y,pn=vr-qe,rn=Pr*Pr+en*en;if(pn*pn/gn<rn)return rn<Sr&&(Pr===0&&(Pr=P(Ge),rn+=Pr*Pr),en===0&&(en=P(Ge),rn+=en*en),rn<Ur&&(rn=Math.sqrt(Ur*rn)),_e.vx+=Pr*fn.value*Ct/rn,_e.vy+=en*fn.value*Ct/rn),!0;if(fn.length||rn>=Sr)return;(fn.data!==_e||fn.next)&&(Pr===0&&(Pr=P(Ge),rn+=Pr*Pr),en===0&&(en=P(Ge),rn+=en*en),rn<Ur&&(rn=Math.sqrt(Ur*rn)));do fn.data!==_e&&(pn=Or[fn.data.index]*Ct/rn,_e.vx+=Pr*pn,_e.vy+=en*pn);while(fn=fn.next)}return Rr.initialize=function(fn,qe){re=fn,Ge=qe,ln()},Rr.strength=function(fn){return arguments.length?(Nr=typeof fn=="function"?fn:k(+fn),ln(),Rr):Nr},Rr.distanceMin=function(fn){return arguments.length?(Ur=fn*fn,Rr):Math.sqrt(Ur)},Rr.distanceMax=function(fn){return arguments.length?(Sr=fn*fn,Rr):Math.sqrt(Sr)},Rr.theta=function(fn){return arguments.length?(gn=fn*fn,Rr):Math.sqrt(gn)},Rr}function Yt(re,_e,Ge){var Ct,Nr=k(.1),Or,Ur;typeof re!="function"&&(re=k(+re)),_e==null&&(_e=0),Ge==null&&(Ge=0);function Sr(Rr){for(var ln=0,Nn=Ct.length;ln<Nn;++ln){var Ln=Ct[ln],fn=Ln.x-_e||1e-6,qe=Ln.y-Ge||1e-6,rr=Math.sqrt(fn*fn+qe*qe),vr=(Ur[ln]-rr)*Or[ln]*Rr/rr;Ln.vx+=fn*vr,Ln.vy+=qe*vr}}function gn(){if(Ct){var Rr,ln=Ct.length;for(Or=new Array(ln),Ur=new Array(ln),Rr=0;Rr<ln;++Rr)Ur[Rr]=+re(Ct[Rr],Rr,Ct),Or[Rr]=isNaN(Ur[Rr])?0:+Nr(Ct[Rr],Rr,Ct)}}return Sr.initialize=function(Rr){Ct=Rr,gn()},Sr.strength=function(Rr){return arguments.length?(Nr=typeof Rr=="function"?Rr:k(+Rr),gn(),Sr):Nr},Sr.radius=function(Rr){return arguments.length?(re=typeof Rr=="function"?Rr:k(+Rr),gn(),Sr):re},Sr.x=function(Rr){return arguments.length?(_e=+Rr,Sr):_e},Sr.y=function(Rr){return arguments.length?(Ge=+Rr,Sr):Ge},Sr}function ie(re){var _e=k(.1),Ge,Ct,Nr;typeof re!="function"&&(re=k(re==null?0:+re));function Or(Sr){for(var gn=0,Rr=Ge.length,ln;gn<Rr;++gn)ln=Ge[gn],ln.vx+=(Nr[gn]-ln.x)*Ct[gn]*Sr}function Ur(){if(Ge){var Sr,gn=Ge.length;for(Ct=new Array(gn),Nr=new Array(gn),Sr=0;Sr<gn;++Sr)Ct[Sr]=isNaN(Nr[Sr]=+re(Ge[Sr],Sr,Ge))?0:+_e(Ge[Sr],Sr,Ge)}}return Or.initialize=function(Sr){Ge=Sr,Ur()},Or.strength=function(Sr){return arguments.length?(_e=typeof Sr=="function"?Sr:k(+Sr),Ur(),Or):_e},Or.x=function(Sr){return arguments.length?(re=typeof Sr=="function"?Sr:k(+Sr),Ur(),Or):re},Or}function Oe(re){var _e=k(.1),Ge,Ct,Nr;typeof re!="function"&&(re=k(re==null?0:+re));function Or(Sr){for(var gn=0,Rr=Ge.length,ln;gn<Rr;++gn)ln=Ge[gn],ln.vy+=(Nr[gn]-ln.y)*Ct[gn]*Sr}function Ur(){if(Ge){var Sr,gn=Ge.length;for(Ct=new Array(gn),Nr=new Array(gn),Sr=0;Sr<gn;++Sr)Ct[Sr]=isNaN(Nr[Sr]=+re(Ge[Sr],Sr,Ge))?0:+_e(Ge[Sr],Sr,Ge)}}return Or.initialize=function(Sr){Ge=Sr,Ur()},Or.strength=function(Sr){return arguments.length?(_e=typeof Sr=="function"?Sr:k(+Sr),Ur(),Or):_e},Or.y=function(Sr){return arguments.length?(re=typeof Sr=="function"?Sr:k(+Sr),Ur(),Or):re},Or}},249612:function(yr,R,z){"use strict";var B=z(994993).default,Y=z(861655).default,k=z(226389).default,P=z(918698).default,N=z(856690).default,D=z(689728).default;Object.defineProperty(R,"__esModule",{value:!0});var E=z(744091),y=z(975823),M=" ".repeat(2),S=" ".repeat(4);function m(){return I(this)}function I(ft){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=rt.maxRows,b=O===void 0?15:O,w=rt.maxColumns,X=w===void 0?10:w,xt=rt.maxNumSize,At=xt===void 0?8:xt,wt=rt.padMinus,Pt=wt===void 0?"auto":wt;return"".concat(ft.constructor.name,` {
`).concat(M,`[
`).concat(S).concat(A(ft,b,X,At,Pt),`
`).concat(M,`]
`).concat(M,"rows: ").concat(ft.rows,`
`).concat(M,"columns: ").concat(ft.columns,`
}`)}function A(ft,rt,O,b,w){var X=ft.rows,xt=ft.columns,At=Math.min(X,rt),wt=Math.min(xt,O),Pt=[];if(w==="auto"){w=!1;t:for(var Me=0;Me<At;Me++)for(var ve=0;ve<wt;ve++)if(ft.get(Me,ve)<0){w=!0;break t}}for(var He=0;He<At;He++){for(var br=[],ar=0;ar<wt;ar++)br.push(L(ft.get(He,ar),b,w));Pt.push("".concat(br.join(" ")))}return wt!==xt&&(Pt[Pt.length-1]+=" ... ".concat(xt-O," more columns")),At!==X&&Pt.push("... ".concat(X-rt," more rows")),Pt.join(`
`.concat(S))}function L(ft,rt,O){return(ft>=0&&O?" ".concat(U(ft,rt-1)):U(ft,rt)).padEnd(rt)}function U(ft,rt){var O=ft.toString();if(O.length<=rt)return O;var b=ft.toFixed(rt);if(b.length>rt&&(b=ft.toFixed(Math.max(0,rt-(b.length-rt)))),b.length<=rt&&!b.startsWith("0.000")&&!b.startsWith("-0.000"))return b;var w=ft.toExponential(rt);return w.length>rt&&(w=ft.toExponential(Math.max(0,rt-(w.length-rt)))),w.slice(0)}function V(ft,rt){ft.prototype.add=function(b){return typeof b=="number"?this.addS(b):this.addM(b)},ft.prototype.addS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)+b);return this},ft.prototype.addM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)+b.get(w,X));return this},ft.add=function(b,w){var X=new rt(b);return X.add(w)},ft.prototype.sub=function(b){return typeof b=="number"?this.subS(b):this.subM(b)},ft.prototype.subS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)-b);return this},ft.prototype.subM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)-b.get(w,X));return this},ft.sub=function(b,w){var X=new rt(b);return X.sub(w)},ft.prototype.subtract=ft.prototype.sub,ft.prototype.subtractS=ft.prototype.subS,ft.prototype.subtractM=ft.prototype.subM,ft.subtract=ft.sub,ft.prototype.mul=function(b){return typeof b=="number"?this.mulS(b):this.mulM(b)},ft.prototype.mulS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)*b);return this},ft.prototype.mulM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)*b.get(w,X));return this},ft.mul=function(b,w){var X=new rt(b);return X.mul(w)},ft.prototype.multiply=ft.prototype.mul,ft.prototype.multiplyS=ft.prototype.mulS,ft.prototype.multiplyM=ft.prototype.mulM,ft.multiply=ft.mul,ft.prototype.div=function(b){return typeof b=="number"?this.divS(b):this.divM(b)},ft.prototype.divS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)/b);return this},ft.prototype.divM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)/b.get(w,X));return this},ft.div=function(b,w){var X=new rt(b);return X.div(w)},ft.prototype.divide=ft.prototype.div,ft.prototype.divideS=ft.prototype.divS,ft.prototype.divideM=ft.prototype.divM,ft.divide=ft.div,ft.prototype.mod=function(b){return typeof b=="number"?this.modS(b):this.modM(b)},ft.prototype.modS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)%b);return this},ft.prototype.modM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)%b.get(w,X));return this},ft.mod=function(b,w){var X=new rt(b);return X.mod(w)},ft.prototype.modulus=ft.prototype.mod,ft.prototype.modulusS=ft.prototype.modS,ft.prototype.modulusM=ft.prototype.modM,ft.modulus=ft.mod,ft.prototype.and=function(b){return typeof b=="number"?this.andS(b):this.andM(b)},ft.prototype.andS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)&b);return this},ft.prototype.andM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)&b.get(w,X));return this},ft.and=function(b,w){var X=new rt(b);return X.and(w)},ft.prototype.or=function(b){return typeof b=="number"?this.orS(b):this.orM(b)},ft.prototype.orS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)|b);return this},ft.prototype.orM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)|b.get(w,X));return this},ft.or=function(b,w){var X=new rt(b);return X.or(w)},ft.prototype.xor=function(b){return typeof b=="number"?this.xorS(b):this.xorM(b)},ft.prototype.xorS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)^b);return this},ft.prototype.xorM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)^b.get(w,X));return this},ft.xor=function(b,w){var X=new rt(b);return X.xor(w)},ft.prototype.leftShift=function(b){return typeof b=="number"?this.leftShiftS(b):this.leftShiftM(b)},ft.prototype.leftShiftS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)<<b);return this},ft.prototype.leftShiftM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)<<b.get(w,X));return this},ft.leftShift=function(b,w){var X=new rt(b);return X.leftShift(w)},ft.prototype.signPropagatingRightShift=function(b){return typeof b=="number"?this.signPropagatingRightShiftS(b):this.signPropagatingRightShiftM(b)},ft.prototype.signPropagatingRightShiftS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)>>b);return this},ft.prototype.signPropagatingRightShiftM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)>>b.get(w,X));return this},ft.signPropagatingRightShift=function(b,w){var X=new rt(b);return X.signPropagatingRightShift(w)},ft.prototype.rightShift=function(b){return typeof b=="number"?this.rightShiftS(b):this.rightShiftM(b)},ft.prototype.rightShiftS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)>>>b);return this},ft.prototype.rightShiftM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,this.get(w,X)>>>b.get(w,X));return this},ft.rightShift=function(b,w){var X=new rt(b);return X.rightShift(w)},ft.prototype.zeroFillRightShift=ft.prototype.rightShift,ft.prototype.zeroFillRightShiftS=ft.prototype.rightShiftS,ft.prototype.zeroFillRightShiftM=ft.prototype.rightShiftM,ft.zeroFillRightShift=ft.rightShift,ft.prototype.not=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,~this.get(b,w));return this},ft.not=function(b){var w=new rt(b);return w.not()},ft.prototype.abs=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.abs(this.get(b,w)));return this},ft.abs=function(b){var w=new rt(b);return w.abs()},ft.prototype.acos=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.acos(this.get(b,w)));return this},ft.acos=function(b){var w=new rt(b);return w.acos()},ft.prototype.acosh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.acosh(this.get(b,w)));return this},ft.acosh=function(b){var w=new rt(b);return w.acosh()},ft.prototype.asin=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.asin(this.get(b,w)));return this},ft.asin=function(b){var w=new rt(b);return w.asin()},ft.prototype.asinh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.asinh(this.get(b,w)));return this},ft.asinh=function(b){var w=new rt(b);return w.asinh()},ft.prototype.atan=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.atan(this.get(b,w)));return this},ft.atan=function(b){var w=new rt(b);return w.atan()},ft.prototype.atanh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.atanh(this.get(b,w)));return this},ft.atanh=function(b){var w=new rt(b);return w.atanh()},ft.prototype.cbrt=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.cbrt(this.get(b,w)));return this},ft.cbrt=function(b){var w=new rt(b);return w.cbrt()},ft.prototype.ceil=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.ceil(this.get(b,w)));return this},ft.ceil=function(b){var w=new rt(b);return w.ceil()},ft.prototype.clz32=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.clz32(this.get(b,w)));return this},ft.clz32=function(b){var w=new rt(b);return w.clz32()},ft.prototype.cos=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.cos(this.get(b,w)));return this},ft.cos=function(b){var w=new rt(b);return w.cos()},ft.prototype.cosh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.cosh(this.get(b,w)));return this},ft.cosh=function(b){var w=new rt(b);return w.cosh()},ft.prototype.exp=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.exp(this.get(b,w)));return this},ft.exp=function(b){var w=new rt(b);return w.exp()},ft.prototype.expm1=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.expm1(this.get(b,w)));return this},ft.expm1=function(b){var w=new rt(b);return w.expm1()},ft.prototype.floor=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.floor(this.get(b,w)));return this},ft.floor=function(b){var w=new rt(b);return w.floor()},ft.prototype.fround=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.fround(this.get(b,w)));return this},ft.fround=function(b){var w=new rt(b);return w.fround()},ft.prototype.log=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.log(this.get(b,w)));return this},ft.log=function(b){var w=new rt(b);return w.log()},ft.prototype.log1p=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.log1p(this.get(b,w)));return this},ft.log1p=function(b){var w=new rt(b);return w.log1p()},ft.prototype.log10=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.log10(this.get(b,w)));return this},ft.log10=function(b){var w=new rt(b);return w.log10()},ft.prototype.log2=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.log2(this.get(b,w)));return this},ft.log2=function(b){var w=new rt(b);return w.log2()},ft.prototype.round=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.round(this.get(b,w)));return this},ft.round=function(b){var w=new rt(b);return w.round()},ft.prototype.sign=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.sign(this.get(b,w)));return this},ft.sign=function(b){var w=new rt(b);return w.sign()},ft.prototype.sin=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.sin(this.get(b,w)));return this},ft.sin=function(b){var w=new rt(b);return w.sin()},ft.prototype.sinh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.sinh(this.get(b,w)));return this},ft.sinh=function(b){var w=new rt(b);return w.sinh()},ft.prototype.sqrt=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.sqrt(this.get(b,w)));return this},ft.sqrt=function(b){var w=new rt(b);return w.sqrt()},ft.prototype.tan=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.tan(this.get(b,w)));return this},ft.tan=function(b){var w=new rt(b);return w.tan()},ft.prototype.tanh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.tanh(this.get(b,w)));return this},ft.tanh=function(b){var w=new rt(b);return w.tanh()},ft.prototype.trunc=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.trunc(this.get(b,w)));return this},ft.trunc=function(b){var w=new rt(b);return w.trunc()},ft.pow=function(b,w){var X=new rt(b);return X.pow(w)},ft.prototype.pow=function(b){return typeof b=="number"?this.powS(b):this.powM(b)},ft.prototype.powS=function(b){for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,Math.pow(this.get(w,X),b));return this},ft.prototype.powM=function(b){if(b=rt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.set(w,X,Math.pow(this.get(w,X),b.get(w,X)));return this}}function x(ft,rt,O){var b=O?ft.rows:ft.rows-1;if(rt<0||rt>b)throw new RangeError("Row index out of range")}function d(ft,rt,O){var b=O?ft.columns:ft.columns-1;if(rt<0||rt>b)throw new RangeError("Column index out of range")}function at(ft,rt){if(rt.to1DArray&&(rt=rt.to1DArray()),rt.length!==ft.columns)throw new RangeError("vector size must be the same as the number of columns");return rt}function W(ft,rt){if(rt.to1DArray&&(rt=rt.to1DArray()),rt.length!==ft.rows)throw new RangeError("vector size must be the same as the number of rows");return rt}function j(ft,rt){if(!E.isAnyArray(rt))throw new TypeError("row indices must be an array");for(var O=0;O<rt.length;O++)if(rt[O]<0||rt[O]>=ft.rows)throw new RangeError("row indices are out of range")}function $(ft,rt){if(!E.isAnyArray(rt))throw new TypeError("column indices must be an array");for(var O=0;O<rt.length;O++)if(rt[O]<0||rt[O]>=ft.columns)throw new RangeError("column indices are out of range")}function q(ft,rt,O,b,w){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Q("startRow",rt),Q("endRow",O),Q("startColumn",b),Q("endColumn",w),rt>O||b>w||rt<0||rt>=ft.rows||O<0||O>=ft.rows||b<0||b>=ft.columns||w<0||w>=ft.columns)throw new RangeError("Submatrix indices are out of range")}function et(ft){for(var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=[],b=0;b<ft;b++)O.push(rt);return O}function Q(ft,rt){if(typeof rt!="number")throw new TypeError("".concat(ft," must be a number"))}function it(ft){if(ft.isEmpty())throw new Error("Empty matrix has no elements to index")}function ht(ft){for(var rt=et(ft.rows),O=0;O<ft.rows;++O)for(var b=0;b<ft.columns;++b)rt[O]+=ft.get(O,b);return rt}function dt(ft){for(var rt=et(ft.columns),O=0;O<ft.rows;++O)for(var b=0;b<ft.columns;++b)rt[b]+=ft.get(O,b);return rt}function Ot(ft){for(var rt=0,O=0;O<ft.rows;O++)for(var b=0;b<ft.columns;b++)rt+=ft.get(O,b);return rt}function It(ft){for(var rt=et(ft.rows,1),O=0;O<ft.rows;++O)for(var b=0;b<ft.columns;++b)rt[O]*=ft.get(O,b);return rt}function Kt(ft){for(var rt=et(ft.columns,1),O=0;O<ft.rows;++O)for(var b=0;b<ft.columns;++b)rt[b]*=ft.get(O,b);return rt}function Ft(ft){for(var rt=1,O=0;O<ft.rows;O++)for(var b=0;b<ft.columns;b++)rt*=ft.get(O,b);return rt}function Nt(ft,rt,O){for(var b=ft.rows,w=ft.columns,X=[],xt=0;xt<b;xt++){for(var At=0,wt=0,Pt=0,Me=0;Me<w;Me++)Pt=ft.get(xt,Me)-O[xt],At+=Pt,wt+=Pt*Pt;rt?X.push((wt-At*At/w)/(w-1)):X.push((wt-At*At/w)/w)}return X}function st(ft,rt,O){for(var b=ft.rows,w=ft.columns,X=[],xt=0;xt<w;xt++){for(var At=0,wt=0,Pt=0,Me=0;Me<b;Me++)Pt=ft.get(Me,xt)-O[xt],At+=Pt,wt+=Pt*Pt;rt?X.push((wt-At*At/b)/(b-1)):X.push((wt-At*At/b)/b)}return X}function yt(ft,rt,O){for(var b=ft.rows,w=ft.columns,X=b*w,xt=0,At=0,wt=0,Pt=0;Pt<b;Pt++)for(var Me=0;Me<w;Me++)wt=ft.get(Pt,Me)-O,xt+=wt,At+=wt*wt;return rt?(At-xt*xt/X)/(X-1):(At-xt*xt/X)/X}function kt(ft,rt){for(var O=0;O<ft.rows;O++)for(var b=0;b<ft.columns;b++)ft.set(O,b,ft.get(O,b)-rt[O])}function ee(ft,rt){for(var O=0;O<ft.rows;O++)for(var b=0;b<ft.columns;b++)ft.set(O,b,ft.get(O,b)-rt[b])}function $t(ft,rt){for(var O=0;O<ft.rows;O++)for(var b=0;b<ft.columns;b++)ft.set(O,b,ft.get(O,b)-rt)}function ge(ft){for(var rt=[],O=0;O<ft.rows;O++){for(var b=0,w=0;w<ft.columns;w++)b+=Math.pow(ft.get(O,w),2)/(ft.columns-1);rt.push(Math.sqrt(b))}return rt}function Pe(ft,rt){for(var O=0;O<ft.rows;O++)for(var b=0;b<ft.columns;b++)ft.set(O,b,ft.get(O,b)/rt[O])}function tr(ft){for(var rt=[],O=0;O<ft.columns;O++){for(var b=0,w=0;w<ft.rows;w++)b+=Math.pow(ft.get(w,O),2)/(ft.rows-1);rt.push(Math.sqrt(b))}return rt}function Jt(ft,rt){for(var O=0;O<ft.rows;O++)for(var b=0;b<ft.columns;b++)ft.set(O,b,ft.get(O,b)/rt[b])}function ae(ft){for(var rt=ft.size-1,O=0,b=0;b<ft.columns;b++)for(var w=0;w<ft.rows;w++)O+=Math.pow(ft.get(w,b),2)/rt;return Math.sqrt(O)}function Se(ft,rt){for(var O=0;O<ft.rows;O++)for(var b=0;b<ft.columns;b++)ft.set(O,b,ft.get(O,b)/rt)}var xe=function(){function ft(){N(this,ft)}return D(ft,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(O){if(typeof O!="function")throw new TypeError("callback must be a function");for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)O.call(this,b,w);return this}},{key:"to1DArray",value:function(){for(var O=[],b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)O.push(this.get(b,w));return O}},{key:"to2DArray",value:function(){for(var O=[],b=0;b<this.rows;b++){O.push([]);for(var w=0;w<this.columns;w++)O[b].push(this.get(b,w))}return O}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var O=0;O<this.rows;O++)for(var b=0;b<=O;b++)if(this.get(O,b)!==this.get(b,O))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var O=0,b=0,w=-1,X=!0,xt=!1;O<this.rows&&X;){for(b=0,xt=!1;b<this.columns&&xt===!1;)this.get(O,b)===0?b++:this.get(O,b)===1&&b>w?(xt=!0,w=b):(X=!1,xt=!0);O++}return X}},{key:"isReducedEchelonForm",value:function(){for(var O=0,b=0,w=-1,X=!0,xt=!1;O<this.rows&&X;){for(b=0,xt=!1;b<this.columns&&xt===!1;)this.get(O,b)===0?b++:this.get(O,b)===1&&b>w?(xt=!0,w=b):(X=!1,xt=!0);for(var At=b+1;At<this.rows;At++)this.get(O,At)!==0&&(X=!1);O++}return X}},{key:"echelonForm",value:function(){for(var O=this.clone(),b=0,w=0;b<O.rows&&w<O.columns;){for(var X=b,xt=b;xt<O.rows;xt++)O.get(xt,w)>O.get(X,w)&&(X=xt);if(O.get(X,w)===0)w++;else{O.swapRows(b,X);for(var At=O.get(b,w),wt=w;wt<O.columns;wt++)O.set(b,wt,O.get(b,wt)/At);for(var Pt=b+1;Pt<O.rows;Pt++){var Me=O.get(Pt,w)/O.get(b,w);O.set(Pt,w,0);for(var ve=w+1;ve<O.columns;ve++)O.set(Pt,ve,O.get(Pt,ve)-O.get(b,ve)*Me)}b++,w++}}return O}},{key:"reducedEchelonForm",value:function(){for(var O=this.echelonForm(),b=O.columns,w=O.rows,X=w-1;X>=0;)if(O.maxRow(X)===0)X--;else{for(var xt=0,At=!1;xt<w&&At===!1;)O.get(X,xt)===1?At=!0:xt++;for(var wt=0;wt<X;wt++)for(var Pt=O.get(wt,xt),Me=xt;Me<b;Me++){var ve=O.get(wt,Me)-Pt*O.get(X,Me);O.set(wt,Me,ve)}X--}return O}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(P(O)!=="object")throw new TypeError("options must be an object");var b=O.rows,w=b===void 0?1:b,X=O.columns,xt=X===void 0?1:X;if(!Number.isInteger(w)||w<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(xt)||xt<=0)throw new TypeError("columns must be a positive integer");for(var At=new Wt(this.rows*w,this.columns*xt),wt=0;wt<w;wt++)for(var Pt=0;Pt<xt;Pt++)At.setSubMatrix(this,this.rows*wt,this.columns*Pt);return At}},{key:"fill",value:function(O){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,O);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(O){x(this,O);for(var b=[],w=0;w<this.columns;w++)b.push(this.get(O,w));return b}},{key:"getRowVector",value:function(O){return Wt.rowVector(this.getRow(O))}},{key:"setRow",value:function(O,b){x(this,O),b=at(this,b);for(var w=0;w<this.columns;w++)this.set(O,w,b[w]);return this}},{key:"swapRows",value:function(O,b){x(this,O),x(this,b);for(var w=0;w<this.columns;w++){var X=this.get(O,w);this.set(O,w,this.get(b,w)),this.set(b,w,X)}return this}},{key:"getColumn",value:function(O){d(this,O);for(var b=[],w=0;w<this.rows;w++)b.push(this.get(w,O));return b}},{key:"getColumnVector",value:function(O){return Wt.columnVector(this.getColumn(O))}},{key:"setColumn",value:function(O,b){d(this,O),b=W(this,b);for(var w=0;w<this.rows;w++)this.set(w,O,b[w]);return this}},{key:"swapColumns",value:function(O,b){d(this,O),d(this,b);for(var w=0;w<this.rows;w++){var X=this.get(w,O);this.set(w,O,this.get(w,b)),this.set(w,b,X)}return this}},{key:"addRowVector",value:function(O){O=at(this,O);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)+O[w]);return this}},{key:"subRowVector",value:function(O){O=at(this,O);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)-O[w]);return this}},{key:"mulRowVector",value:function(O){O=at(this,O);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)*O[w]);return this}},{key:"divRowVector",value:function(O){O=at(this,O);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)/O[w]);return this}},{key:"addColumnVector",value:function(O){O=W(this,O);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)+O[b]);return this}},{key:"subColumnVector",value:function(O){O=W(this,O);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)-O[b]);return this}},{key:"mulColumnVector",value:function(O){O=W(this,O);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)*O[b]);return this}},{key:"divColumnVector",value:function(O){O=W(this,O);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)/O[b]);return this}},{key:"mulRow",value:function(O,b){x(this,O);for(var w=0;w<this.columns;w++)this.set(O,w,this.get(O,w)*b);return this}},{key:"mulColumn",value:function(O,b){d(this,O);for(var w=0;w<this.rows;w++)this.set(w,O,this.get(w,O)*b);return this}},{key:"max",value:function(O){if(this.isEmpty())return NaN;switch(O){case"row":{for(var b=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.get(w,X)>b[w]&&(b[w]=this.get(w,X));return b}case"column":{for(var xt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),At=0;At<this.rows;At++)for(var wt=0;wt<this.columns;wt++)this.get(At,wt)>xt[wt]&&(xt[wt]=this.get(At,wt));return xt}case void 0:{for(var Pt=this.get(0,0),Me=0;Me<this.rows;Me++)for(var ve=0;ve<this.columns;ve++)this.get(Me,ve)>Pt&&(Pt=this.get(Me,ve));return Pt}default:throw new Error("invalid option: ".concat(O))}}},{key:"maxIndex",value:function(){it(this);for(var O=this.get(0,0),b=[0,0],w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.get(w,X)>O&&(O=this.get(w,X),b[0]=w,b[1]=X);return b}},{key:"min",value:function(O){if(this.isEmpty())return NaN;switch(O){case"row":{for(var b=new Array(this.rows).fill(Number.POSITIVE_INFINITY),w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.get(w,X)<b[w]&&(b[w]=this.get(w,X));return b}case"column":{for(var xt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),At=0;At<this.rows;At++)for(var wt=0;wt<this.columns;wt++)this.get(At,wt)<xt[wt]&&(xt[wt]=this.get(At,wt));return xt}case void 0:{for(var Pt=this.get(0,0),Me=0;Me<this.rows;Me++)for(var ve=0;ve<this.columns;ve++)this.get(Me,ve)<Pt&&(Pt=this.get(Me,ve));return Pt}default:throw new Error("invalid option: ".concat(O))}}},{key:"minIndex",value:function(){it(this);for(var O=this.get(0,0),b=[0,0],w=0;w<this.rows;w++)for(var X=0;X<this.columns;X++)this.get(w,X)<O&&(O=this.get(w,X),b[0]=w,b[1]=X);return b}},{key:"maxRow",value:function(O){if(x(this,O),this.isEmpty())return NaN;for(var b=this.get(O,0),w=1;w<this.columns;w++)this.get(O,w)>b&&(b=this.get(O,w));return b}},{key:"maxRowIndex",value:function(O){x(this,O),it(this);for(var b=this.get(O,0),w=[O,0],X=1;X<this.columns;X++)this.get(O,X)>b&&(b=this.get(O,X),w[1]=X);return w}},{key:"minRow",value:function(O){if(x(this,O),this.isEmpty())return NaN;for(var b=this.get(O,0),w=1;w<this.columns;w++)this.get(O,w)<b&&(b=this.get(O,w));return b}},{key:"minRowIndex",value:function(O){x(this,O),it(this);for(var b=this.get(O,0),w=[O,0],X=1;X<this.columns;X++)this.get(O,X)<b&&(b=this.get(O,X),w[1]=X);return w}},{key:"maxColumn",value:function(O){if(d(this,O),this.isEmpty())return NaN;for(var b=this.get(0,O),w=1;w<this.rows;w++)this.get(w,O)>b&&(b=this.get(w,O));return b}},{key:"maxColumnIndex",value:function(O){d(this,O),it(this);for(var b=this.get(0,O),w=[0,O],X=1;X<this.rows;X++)this.get(X,O)>b&&(b=this.get(X,O),w[0]=X);return w}},{key:"minColumn",value:function(O){if(d(this,O),this.isEmpty())return NaN;for(var b=this.get(0,O),w=1;w<this.rows;w++)this.get(w,O)<b&&(b=this.get(w,O));return b}},{key:"minColumnIndex",value:function(O){d(this,O),it(this);for(var b=this.get(0,O),w=[0,O],X=1;X<this.rows;X++)this.get(X,O)<b&&(b=this.get(X,O),w[0]=X);return w}},{key:"diag",value:function(){for(var O=Math.min(this.rows,this.columns),b=[],w=0;w<O;w++)b.push(this.get(w,w));return b}},{key:"norm",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius";switch(O){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(O))}}},{key:"cumulativeSum",value:function(){for(var O=0,b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)O+=this.get(b,w),this.set(b,w,O);return this}},{key:"dot",value:function(O){ft.isMatrix(O)&&(O=O.to1DArray());var b=this.to1DArray();if(b.length!==O.length)throw new RangeError("vectors do not have the same size");for(var w=0,X=0;X<b.length;X++)w+=b[X]*O[X];return w}},{key:"mmul",value:function(O){O=Wt.checkMatrix(O);for(var b=this.rows,w=this.columns,X=O.columns,xt=new Wt(b,X),At=new Float64Array(w),wt=0;wt<X;wt++){for(var Pt=0;Pt<w;Pt++)At[Pt]=O.get(Pt,wt);for(var Me=0;Me<b;Me++){for(var ve=0,He=0;He<w;He++)ve+=this.get(Me,He)*At[He];xt.set(Me,wt,ve)}}return xt}},{key:"strassen2x2",value:function(O){O=Wt.checkMatrix(O);var b=new Wt(2,2),w=this.get(0,0),X=O.get(0,0),xt=this.get(0,1),At=O.get(0,1),wt=this.get(1,0),Pt=O.get(1,0),Me=this.get(1,1),ve=O.get(1,1),He=(w+Me)*(X+ve),br=(wt+Me)*X,ar=w*(At-ve),mr=Me*(Pt-X),Mn=(w+xt)*ve,Xe=(wt-w)*(X+At),hr=(xt-Me)*(Pt+ve),Er=He+mr-Mn+hr,on=ar+Mn,Wr=br+mr,xa=He-br+ar+Xe;return b.set(0,0,Er),b.set(0,1,on),b.set(1,0,Wr),b.set(1,1,xa),b}},{key:"strassen3x3",value:function(O){O=Wt.checkMatrix(O);var b=new Wt(3,3),w=this.get(0,0),X=this.get(0,1),xt=this.get(0,2),At=this.get(1,0),wt=this.get(1,1),Pt=this.get(1,2),Me=this.get(2,0),ve=this.get(2,1),He=this.get(2,2),br=O.get(0,0),ar=O.get(0,1),mr=O.get(0,2),Mn=O.get(1,0),Xe=O.get(1,1),hr=O.get(1,2),Er=O.get(2,0),on=O.get(2,1),Wr=O.get(2,2),xa=(w+X+xt-At-wt-ve-He)*Xe,Ta=(w-At)*(-ar+Xe),Rn=wt*(-br+ar+Mn-Xe-hr-Er+Wr),Jn=(-w+At+wt)*(br-ar+Xe),Ga=(At+wt)*(-br+ar),Aa=w*br,an=(-w+Me+ve)*(br-mr+hr),Vn=(-w+Me)*(mr-hr),me=(Me+ve)*(-br+mr),Dt=(w+X+xt-wt-Pt-Me-ve)*hr,fe=ve*(-br+mr+Mn-Xe-hr-Er+on),Ae=(-xt+ve+He)*(Xe+Er-on),be=(xt-He)*(Xe-on),De=xt*Er,or=(ve+He)*(-Er+on),Fr=(-xt+wt+Pt)*(hr+Er-Wr),Jr=(xt-Pt)*(hr-Wr),Pn=(wt+Pt)*(-Er+Wr),Bn=X*Mn,Zn=Pt*on,ba=At*mr,Ca=Me*ar,li=He*Wr,ta=Aa+De+Bn,fi=xa+Jn+Ga+Aa+Ae+De+or,Co=Aa+an+me+Dt+De+Fr+Pn,La=Ta+Rn+Jn+Aa+De+Fr+Jr,xi=Ta+Jn+Ga+Aa+Zn,so=De+Fr+Jr+Pn+ba,To=Aa+an+Vn+fe+Ae+be+De,bo=Ae+be+De+or+Ca,uo=Aa+an+Vn+me+li;return b.set(0,0,ta),b.set(0,1,fi),b.set(0,2,Co),b.set(1,0,La),b.set(1,1,xi),b.set(1,2,so),b.set(2,0,To),b.set(2,1,bo),b.set(2,2,uo),b}},{key:"mmulStrassen",value:function(O){O=Wt.checkMatrix(O);var b=this.clone(),w=b.rows,X=b.columns,xt=O.rows,At=O.columns;X!==xt&&console.warn("Multiplying ".concat(w," x ").concat(X," and ").concat(xt," x ").concat(At," matrix: dimensions do not match."));function wt(He,br,ar){var mr=He.rows,Mn=He.columns;if(mr===br&&Mn===ar)return He;var Xe=ft.zeros(br,ar);return Xe=Xe.setSubMatrix(He,0,0),Xe}var Pt=Math.max(w,xt),Me=Math.max(X,At);b=wt(b,Pt,Me),O=wt(O,Pt,Me);function ve(He,br,ar,mr){if(ar<=512||mr<=512)return He.mmul(br);ar%2===1&&mr%2===1?(He=wt(He,ar+1,mr+1),br=wt(br,ar+1,mr+1)):ar%2===1?(He=wt(He,ar+1,mr),br=wt(br,ar+1,mr)):mr%2===1&&(He=wt(He,ar,mr+1),br=wt(br,ar,mr+1));var Mn=parseInt(He.rows/2,10),Xe=parseInt(He.columns/2,10),hr=He.subMatrix(0,Mn-1,0,Xe-1),Er=br.subMatrix(0,Mn-1,0,Xe-1),on=He.subMatrix(0,Mn-1,Xe,He.columns-1),Wr=br.subMatrix(0,Mn-1,Xe,br.columns-1),xa=He.subMatrix(Mn,He.rows-1,0,Xe-1),Ta=br.subMatrix(Mn,br.rows-1,0,Xe-1),Rn=He.subMatrix(Mn,He.rows-1,Xe,He.columns-1),Jn=br.subMatrix(Mn,br.rows-1,Xe,br.columns-1),Ga=ve(ft.add(hr,Rn),ft.add(Er,Jn),Mn,Xe),Aa=ve(ft.add(xa,Rn),Er,Mn,Xe),an=ve(hr,ft.sub(Wr,Jn),Mn,Xe),Vn=ve(Rn,ft.sub(Ta,Er),Mn,Xe),me=ve(ft.add(hr,on),Jn,Mn,Xe),Dt=ve(ft.sub(xa,hr),ft.add(Er,Wr),Mn,Xe),fe=ve(ft.sub(on,Rn),ft.add(Ta,Jn),Mn,Xe),Ae=ft.add(Ga,Vn);Ae.sub(me),Ae.add(fe);var be=ft.add(an,me),De=ft.add(Aa,Vn),or=ft.sub(Ga,Aa);or.add(an),or.add(Dt);var Fr=ft.zeros(2*Ae.rows,2*Ae.columns);return Fr=Fr.setSubMatrix(Ae,0,0),Fr=Fr.setSubMatrix(be,Ae.rows,0),Fr=Fr.setSubMatrix(De,0,Ae.columns),Fr=Fr.setSubMatrix(or,Ae.rows,Ae.columns),Fr.subMatrix(0,ar-1,0,mr-1)}return ve(b,O,Pt,Me)}},{key:"scaleRows",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(P(O)!=="object")throw new TypeError("options must be an object");var b=O.min,w=b===void 0?0:b,X=O.max,xt=X===void 0?1:X;if(!Number.isFinite(w))throw new TypeError("min must be a number");if(!Number.isFinite(xt))throw new TypeError("max must be a number");if(w>=xt)throw new RangeError("min must be smaller than max");for(var At=new Wt(this.rows,this.columns),wt=0;wt<this.rows;wt++){var Pt=this.getRow(wt);Pt.length>0&&y(Pt,{min:w,max:xt,output:Pt}),At.setRow(wt,Pt)}return At}},{key:"scaleColumns",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(P(O)!=="object")throw new TypeError("options must be an object");var b=O.min,w=b===void 0?0:b,X=O.max,xt=X===void 0?1:X;if(!Number.isFinite(w))throw new TypeError("min must be a number");if(!Number.isFinite(xt))throw new TypeError("max must be a number");if(w>=xt)throw new RangeError("min must be smaller than max");for(var At=new Wt(this.rows,this.columns),wt=0;wt<this.columns;wt++){var Pt=this.getColumn(wt);Pt.length&&y(Pt,{min:w,max:xt,output:Pt}),At.setColumn(wt,Pt)}return At}},{key:"flipRows",value:function(){for(var O=Math.ceil(this.columns/2),b=0;b<this.rows;b++)for(var w=0;w<O;w++){var X=this.get(b,w),xt=this.get(b,this.columns-1-w);this.set(b,w,xt),this.set(b,this.columns-1-w,X)}return this}},{key:"flipColumns",value:function(){for(var O=Math.ceil(this.rows/2),b=0;b<this.columns;b++)for(var w=0;w<O;w++){var X=this.get(w,b),xt=this.get(this.rows-1-w,b);this.set(w,b,xt),this.set(this.rows-1-w,b,X)}return this}},{key:"kroneckerProduct",value:function(O){O=Wt.checkMatrix(O);for(var b=this.rows,w=this.columns,X=O.rows,xt=O.columns,At=new Wt(b*X,w*xt),wt=0;wt<b;wt++)for(var Pt=0;Pt<w;Pt++)for(var Me=0;Me<X;Me++)for(var ve=0;ve<xt;ve++)At.set(X*wt+Me,xt*Pt+ve,this.get(wt,Pt)*O.get(Me,ve));return At}},{key:"kroneckerSum",value:function(O){if(O=Wt.checkMatrix(O),!this.isSquare()||!O.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var b=this.rows,w=O.rows,X=this.kroneckerProduct(Wt.eye(w,w)),xt=Wt.eye(b,b).kroneckerProduct(O);return X.add(xt)}},{key:"transpose",value:function(){for(var O=new Wt(this.columns,this.rows),b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)O.set(w,b,this.get(b,w));return O}},{key:"sortRows",value:function(){for(var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we,b=0;b<this.rows;b++)this.setRow(b,this.getRow(b).sort(O));return this}},{key:"sortColumns",value:function(){for(var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we,b=0;b<this.columns;b++)this.setColumn(b,this.getColumn(b).sort(O));return this}},{key:"subMatrix",value:function(O,b,w,X){q(this,O,b,w,X);for(var xt=new Wt(b-O+1,X-w+1),At=O;At<=b;At++)for(var wt=w;wt<=X;wt++)xt.set(At-O,wt-w,this.get(At,wt));return xt}},{key:"subMatrixRow",value:function(O,b,w){if(b===void 0&&(b=0),w===void 0&&(w=this.columns-1),b>w||b<0||b>=this.columns||w<0||w>=this.columns)throw new RangeError("Argument out of range");for(var X=new Wt(O.length,w-b+1),xt=0;xt<O.length;xt++)for(var At=b;At<=w;At++){if(O[xt]<0||O[xt]>=this.rows)throw new RangeError("Row index out of range: ".concat(O[xt]));X.set(xt,At-b,this.get(O[xt],At))}return X}},{key:"subMatrixColumn",value:function(O,b,w){if(b===void 0&&(b=0),w===void 0&&(w=this.rows-1),b>w||b<0||b>=this.rows||w<0||w>=this.rows)throw new RangeError("Argument out of range");for(var X=new Wt(w-b+1,O.length),xt=0;xt<O.length;xt++)for(var At=b;At<=w;At++){if(O[xt]<0||O[xt]>=this.columns)throw new RangeError("Column index out of range: ".concat(O[xt]));X.set(At-b,xt,this.get(At,O[xt]))}return X}},{key:"setSubMatrix",value:function(O,b,w){if(O=Wt.checkMatrix(O),O.isEmpty())return this;var X=b+O.rows-1,xt=w+O.columns-1;q(this,b,X,w,xt);for(var At=0;At<O.rows;At++)for(var wt=0;wt<O.columns;wt++)this.set(b+At,w+wt,O.get(At,wt));return this}},{key:"selection",value:function(O,b){j(this,O),$(this,b);for(var w=new Wt(O.length,b.length),X=0;X<O.length;X++)for(var xt=O[X],At=0;At<b.length;At++){var wt=b[At];w.set(X,At,this.get(xt,wt))}return w}},{key:"trace",value:function(){for(var O=Math.min(this.rows,this.columns),b=0,w=0;w<O;w++)b+=this.get(w,w);return b}},{key:"clone",value:function(){for(var O=new Wt(this.rows,this.columns),b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)O.set(b,w,this.get(b,w));return O}},{key:"sum",value:function(O){switch(O){case"row":return ht(this);case"column":return dt(this);case void 0:return Ot(this);default:throw new Error("invalid option: ".concat(O))}}},{key:"product",value:function(O){switch(O){case"row":return It(this);case"column":return Kt(this);case void 0:return Ft(this);default:throw new Error("invalid option: ".concat(O))}}},{key:"mean",value:function(O){var b=this.sum(O);switch(O){case"row":{for(var w=0;w<this.rows;w++)b[w]/=this.columns;return b}case"column":{for(var X=0;X<this.columns;X++)b[X]/=this.rows;return b}case void 0:return b/this.size;default:throw new Error("invalid option: ".concat(O))}}},{key:"variance",value:function(O){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(O)==="object"&&(b=O,O=void 0),P(b)!=="object")throw new TypeError("options must be an object");var w=b,X=w.unbiased,xt=X===void 0?!0:X,At=w.mean,wt=At===void 0?this.mean(O):At;if(typeof xt!="boolean")throw new TypeError("unbiased must be a boolean");switch(O){case"row":{if(!E.isAnyArray(wt))throw new TypeError("mean must be an array");return Nt(this,xt,wt)}case"column":{if(!E.isAnyArray(wt))throw new TypeError("mean must be an array");return st(this,xt,wt)}case void 0:{if(typeof wt!="number")throw new TypeError("mean must be a number");return yt(this,xt,wt)}default:throw new Error("invalid option: ".concat(O))}}},{key:"standardDeviation",value:function(O,b){P(O)==="object"&&(b=O,O=void 0);var w=this.variance(O,b);if(O===void 0)return Math.sqrt(w);for(var X=0;X<w.length;X++)w[X]=Math.sqrt(w[X]);return w}},{key:"center",value:function(O){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(O)==="object"&&(b=O,O=void 0),P(b)!=="object")throw new TypeError("options must be an object");var w=b,X=w.center,xt=X===void 0?this.mean(O):X;switch(O){case"row":{if(!E.isAnyArray(xt))throw new TypeError("center must be an array");return kt(this,xt),this}case"column":{if(!E.isAnyArray(xt))throw new TypeError("center must be an array");return ee(this,xt),this}case void 0:{if(typeof xt!="number")throw new TypeError("center must be a number");return $t(this,xt),this}default:throw new Error("invalid option: ".concat(O))}}},{key:"scale",value:function(O){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(O)==="object"&&(b=O,O=void 0),P(b)!=="object")throw new TypeError("options must be an object");var w=b.scale;switch(O){case"row":{if(w===void 0)w=ge(this);else if(!E.isAnyArray(w))throw new TypeError("scale must be an array");return Pe(this,w),this}case"column":{if(w===void 0)w=tr(this);else if(!E.isAnyArray(w))throw new TypeError("scale must be an array");return Jt(this,w),this}case void 0:{if(w===void 0)w=ae(this);else if(typeof w!="number")throw new TypeError("scale must be a number");return Se(this,w),this}default:throw new Error("invalid option: ".concat(O))}}},{key:"toString",value:function(O){return I(this,O)}}],[{key:"from1DArray",value:function(O,b,w){var X=O*b;if(X!==w.length)throw new RangeError("data length does not match given dimensions");for(var xt=new Wt(O,b),At=0;At<O;At++)for(var wt=0;wt<b;wt++)xt.set(At,wt,w[At*b+wt]);return xt}},{key:"rowVector",value:function(O){for(var b=new Wt(1,O.length),w=0;w<O.length;w++)b.set(0,w,O[w]);return b}},{key:"columnVector",value:function(O){for(var b=new Wt(O.length,1),w=0;w<O.length;w++)b.set(w,0,O[w]);return b}},{key:"zeros",value:function(O,b){return new Wt(O,b)}},{key:"ones",value:function(O,b){return new Wt(O,b).fill(1)}},{key:"rand",value:function(O,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(P(w)!=="object")throw new TypeError("options must be an object");for(var X=w.random,xt=X===void 0?Math.random:X,At=new Wt(O,b),wt=0;wt<O;wt++)for(var Pt=0;Pt<b;Pt++)At.set(wt,Pt,xt());return At}},{key:"randInt",value:function(O,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(P(w)!=="object")throw new TypeError("options must be an object");var X=w.min,xt=X===void 0?0:X,At=w.max,wt=At===void 0?1e3:At,Pt=w.random,Me=Pt===void 0?Math.random:Pt;if(!Number.isInteger(xt))throw new TypeError("min must be an integer");if(!Number.isInteger(wt))throw new TypeError("max must be an integer");if(xt>=wt)throw new RangeError("min must be smaller than max");for(var ve=wt-xt,He=new Wt(O,b),br=0;br<O;br++)for(var ar=0;ar<b;ar++){var mr=xt+Math.round(Me()*ve);He.set(br,ar,mr)}return He}},{key:"eye",value:function(O,b,w){b===void 0&&(b=O),w===void 0&&(w=1);for(var X=Math.min(O,b),xt=this.zeros(O,b),At=0;At<X;At++)xt.set(At,At,w);return xt}},{key:"diag",value:function(O,b,w){var X=O.length;b===void 0&&(b=X),w===void 0&&(w=b);for(var xt=Math.min(X,b,w),At=this.zeros(b,w),wt=0;wt<xt;wt++)At.set(wt,wt,O[wt]);return At}},{key:"min",value:function(O,b){O=this.checkMatrix(O),b=this.checkMatrix(b);for(var w=O.rows,X=O.columns,xt=new Wt(w,X),At=0;At<w;At++)for(var wt=0;wt<X;wt++)xt.set(At,wt,Math.min(O.get(At,wt),b.get(At,wt)));return xt}},{key:"max",value:function(O,b){O=this.checkMatrix(O),b=this.checkMatrix(b);for(var w=O.rows,X=O.columns,xt=new this(w,X),At=0;At<w;At++)for(var wt=0;wt<X;wt++)xt.set(At,wt,Math.max(O.get(At,wt),b.get(At,wt)));return xt}},{key:"checkMatrix",value:function(O){return ft.isMatrix(O)?O:new Wt(O)}},{key:"isMatrix",value:function(O){return O!=null&&O.klass==="Matrix"}}]),ft}();xe.prototype.klass="Matrix",typeof Symbol!="undefined"&&(xe.prototype[Symbol.for("nodejs.util.inspect.custom")]=m);function we(ft,rt){return ft-rt}function zt(ft){return ft.every(function(rt){return typeof rt=="number"})}xe.random=xe.rand,xe.randomInt=xe.randInt,xe.diagonal=xe.diag,xe.prototype.diagonal=xe.prototype.diag,xe.identity=xe.eye,xe.prototype.negate=xe.prototype.neg,xe.prototype.tensorProduct=xe.prototype.kroneckerProduct;var Wt=function(ft){Y(O,ft);var rt=k(O);function O(b,w){var X;if(N(this,O),X=rt.call(this),O.isMatrix(b))return B(X,b.clone());if(Number.isInteger(b)&&b>=0)if(X.data=[],Number.isInteger(w)&&w>=0)for(var xt=0;xt<b;xt++)X.data.push(new Float64Array(w));else throw new TypeError("nColumns must be a positive integer");else if(E.isAnyArray(b)){var At=b;if(b=At.length,w=b?At[0].length:0,typeof w!="number")throw new TypeError("Data must be a 2D array with at least one element");X.data=[];for(var wt=0;wt<b;wt++){if(At[wt].length!==w)throw new RangeError("Inconsistent array dimensions");if(!zt(At[wt]))throw new TypeError("Input data contains non-numeric values");X.data.push(Float64Array.from(At[wt]))}}else throw new TypeError("First argument must be a positive number or an array");return X.rows=b,X.columns=w,X}return D(O,[{key:"set",value:function(w,X,xt){return this.data[w][X]=xt,this}},{key:"get",value:function(w,X){return this.data[w][X]}},{key:"removeRow",value:function(w){return x(this,w),this.data.splice(w,1),this.rows-=1,this}},{key:"addRow",value:function(w,X){return X===void 0&&(X=w,w=this.rows),x(this,w,!0),X=Float64Array.from(at(this,X)),this.data.splice(w,0,X),this.rows+=1,this}},{key:"removeColumn",value:function(w){d(this,w);for(var X=0;X<this.rows;X++){for(var xt=new Float64Array(this.columns-1),At=0;At<w;At++)xt[At]=this.data[X][At];for(var wt=w+1;wt<this.columns;wt++)xt[wt-1]=this.data[X][wt];this.data[X]=xt}return this.columns-=1,this}},{key:"addColumn",value:function(w,X){typeof X=="undefined"&&(X=w,w=this.columns),d(this,w,!0),X=W(this,X);for(var xt=0;xt<this.rows;xt++){for(var At=new Float64Array(this.columns+1),wt=0;wt<w;wt++)At[wt]=this.data[xt][wt];for(At[wt++]=X[xt];wt<this.columns+1;wt++)At[wt]=this.data[xt][wt-1];this.data[xt]=At}return this.columns+=1,this}}]),O}(xe);V(xe,Wt);var Ie=function(ft){Y(O,ft);var rt=k(O);function O(b,w,X){var xt;return N(this,O),xt=rt.call(this),xt.matrix=b,xt.rows=w,xt.columns=X,xt}return D(O)}(xe),Yt=function(ft){Y(O,ft);var rt=k(O);function O(b,w){var X;return N(this,O),d(b,w),X=rt.call(this,b,b.rows,1),X.column=w,X}return D(O,[{key:"set",value:function(w,X,xt){return this.matrix.set(w,this.column,xt),this}},{key:"get",value:function(w){return this.matrix.get(w,this.column)}}]),O}(Ie),ie=function(ft){Y(O,ft);var rt=k(O);function O(b,w){var X;return N(this,O),$(b,w),X=rt.call(this,b,b.rows,w.length),X.columnIndices=w,X}return D(O,[{key:"set",value:function(w,X,xt){return this.matrix.set(w,this.columnIndices[X],xt),this}},{key:"get",value:function(w,X){return this.matrix.get(w,this.columnIndices[X])}}]),O}(Ie),Oe=function(ft){Y(O,ft);var rt=k(O);function O(b){return N(this,O),rt.call(this,b,b.rows,b.columns)}return D(O,[{key:"set",value:function(w,X,xt){return this.matrix.set(w,this.columns-X-1,xt),this}},{key:"get",value:function(w,X){return this.matrix.get(w,this.columns-X-1)}}]),O}(Ie),re=function(ft){Y(O,ft);var rt=k(O);function O(b){return N(this,O),rt.call(this,b,b.rows,b.columns)}return D(O,[{key:"set",value:function(w,X,xt){return this.matrix.set(this.rows-w-1,X,xt),this}},{key:"get",value:function(w,X){return this.matrix.get(this.rows-w-1,X)}}]),O}(Ie),_e=function(ft){Y(O,ft);var rt=k(O);function O(b,w){var X;return N(this,O),x(b,w),X=rt.call(this,b,1,b.columns),X.row=w,X}return D(O,[{key:"set",value:function(w,X,xt){return this.matrix.set(this.row,X,xt),this}},{key:"get",value:function(w,X){return this.matrix.get(this.row,X)}}]),O}(Ie),Ge=function(ft){Y(O,ft);var rt=k(O);function O(b,w){var X;return N(this,O),j(b,w),X=rt.call(this,b,w.length,b.columns),X.rowIndices=w,X}return D(O,[{key:"set",value:function(w,X,xt){return this.matrix.set(this.rowIndices[w],X,xt),this}},{key:"get",value:function(w,X){return this.matrix.get(this.rowIndices[w],X)}}]),O}(Ie),Ct=function(ft){Y(O,ft);var rt=k(O);function O(b,w,X){var xt;return N(this,O),j(b,w),$(b,X),xt=rt.call(this,b,w.length,X.length),xt.rowIndices=w,xt.columnIndices=X,xt}return D(O,[{key:"set",value:function(w,X,xt){return this.matrix.set(this.rowIndices[w],this.columnIndices[X],xt),this}},{key:"get",value:function(w,X){return this.matrix.get(this.rowIndices[w],this.columnIndices[X])}}]),O}(Ie),Nr=function(ft){Y(O,ft);var rt=k(O);function O(b,w,X,xt,At){var wt;return N(this,O),q(b,w,X,xt,At),wt=rt.call(this,b,X-w+1,At-xt+1),wt.startRow=w,wt.startColumn=xt,wt}return D(O,[{key:"set",value:function(w,X,xt){return this.matrix.set(this.startRow+w,this.startColumn+X,xt),this}},{key:"get",value:function(w,X){return this.matrix.get(this.startRow+w,this.startColumn+X)}}]),O}(Ie),Or=function(ft){Y(O,ft);var rt=k(O);function O(b){return N(this,O),rt.call(this,b,b.columns,b.rows)}return D(O,[{key:"set",value:function(w,X,xt){return this.matrix.set(X,w,xt),this}},{key:"get",value:function(w,X){return this.matrix.get(X,w)}}]),O}(Ie),Ur=function(ft){Y(O,ft);var rt=k(O);function O(b){var w,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N(this,O);var xt=X.rows,At=xt===void 0?1:xt;if(b.length%At!==0)throw new Error("the data length is not divisible by the number of rows");return w=rt.call(this),w.rows=At,w.columns=b.length/At,w.data=b,w}return D(O,[{key:"set",value:function(w,X,xt){var At=this._calculateIndex(w,X);return this.data[At]=xt,this}},{key:"get",value:function(w,X){var xt=this._calculateIndex(w,X);return this.data[xt]}},{key:"_calculateIndex",value:function(w,X){return w*this.columns+X}}]),O}(xe),Sr=function(ft){Y(O,ft);var rt=k(O);function O(b){var w;return N(this,O),w=rt.call(this),w.data=b,w.rows=b.length,w.columns=b[0].length,w}return D(O,[{key:"set",value:function(w,X,xt){return this.data[w][X]=xt,this}},{key:"get",value:function(w,X){return this.data[w][X]}}]),O}(xe);function gn(ft,rt){if(E.isAnyArray(ft))return ft[0]&&E.isAnyArray(ft[0])?new Sr(ft):new Ur(ft,rt);throw new Error("the argument is not an array")}var Rr=function(){function ft(rt){N(this,ft),rt=Sr.checkMatrix(rt);var O=rt.clone(),b=O.rows,w=O.columns,X=new Float64Array(b),xt=1,At,wt,Pt,Me,ve,He,br,ar,mr;for(At=0;At<b;At++)X[At]=At;for(ar=new Float64Array(b),wt=0;wt<w;wt++){for(At=0;At<b;At++)ar[At]=O.get(At,wt);for(At=0;At<b;At++){for(mr=Math.min(At,wt),ve=0,Pt=0;Pt<mr;Pt++)ve+=O.get(At,Pt)*ar[Pt];ar[At]-=ve,O.set(At,wt,ar[At])}for(Me=wt,At=wt+1;At<b;At++)Math.abs(ar[At])>Math.abs(ar[Me])&&(Me=At);if(Me!==wt){for(Pt=0;Pt<w;Pt++)He=O.get(Me,Pt),O.set(Me,Pt,O.get(wt,Pt)),O.set(wt,Pt,He);br=X[Me],X[Me]=X[wt],X[wt]=br,xt=-xt}if(wt<b&&O.get(wt,wt)!==0)for(At=wt+1;At<b;At++)O.set(At,wt,O.get(At,wt)/O.get(wt,wt))}this.LU=O,this.pivotVector=X,this.pivotSign=xt}return D(ft,[{key:"isSingular",value:function(){for(var O=this.LU,b=O.columns,w=0;w<b;w++)if(O.get(w,w)===0)return!0;return!1}},{key:"solve",value:function(O){O=Wt.checkMatrix(O);var b=this.LU,w=b.rows;if(w!==O.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var X=O.columns,xt=O.subMatrixRow(this.pivotVector,0,X-1),At=b.columns,wt,Pt,Me;for(Me=0;Me<At;Me++)for(wt=Me+1;wt<At;wt++)for(Pt=0;Pt<X;Pt++)xt.set(wt,Pt,xt.get(wt,Pt)-xt.get(Me,Pt)*b.get(wt,Me));for(Me=At-1;Me>=0;Me--){for(Pt=0;Pt<X;Pt++)xt.set(Me,Pt,xt.get(Me,Pt)/b.get(Me,Me));for(wt=0;wt<Me;wt++)for(Pt=0;Pt<X;Pt++)xt.set(wt,Pt,xt.get(wt,Pt)-xt.get(Me,Pt)*b.get(wt,Me))}return xt}},{key:"determinant",get:function(){var O=this.LU;if(!O.isSquare())throw new Error("Matrix must be square");for(var b=this.pivotSign,w=O.columns,X=0;X<w;X++)b*=O.get(X,X);return b}},{key:"lowerTriangularMatrix",get:function(){for(var O=this.LU,b=O.rows,w=O.columns,X=new Wt(b,w),xt=0;xt<b;xt++)for(var At=0;At<w;At++)xt>At?X.set(xt,At,O.get(xt,At)):xt===At?X.set(xt,At,1):X.set(xt,At,0);return X}},{key:"upperTriangularMatrix",get:function(){for(var O=this.LU,b=O.rows,w=O.columns,X=new Wt(b,w),xt=0;xt<b;xt++)for(var At=0;At<w;At++)xt<=At?X.set(xt,At,O.get(xt,At)):X.set(xt,At,0);return X}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),ft}();function ln(ft,rt){var O=0;return Math.abs(ft)>Math.abs(rt)?(O=rt/ft,Math.abs(ft)*Math.sqrt(1+O*O)):rt!==0?(O=ft/rt,Math.abs(rt)*Math.sqrt(1+O*O)):0}var Nn=function(){function ft(rt){N(this,ft),rt=Sr.checkMatrix(rt);var O=rt.clone(),b=rt.rows,w=rt.columns,X=new Float64Array(w),xt,At,wt,Pt;for(wt=0;wt<w;wt++){var Me=0;for(xt=wt;xt<b;xt++)Me=ln(Me,O.get(xt,wt));if(Me!==0){for(O.get(wt,wt)<0&&(Me=-Me),xt=wt;xt<b;xt++)O.set(xt,wt,O.get(xt,wt)/Me);for(O.set(wt,wt,O.get(wt,wt)+1),At=wt+1;At<w;At++){for(Pt=0,xt=wt;xt<b;xt++)Pt+=O.get(xt,wt)*O.get(xt,At);for(Pt=-Pt/O.get(wt,wt),xt=wt;xt<b;xt++)O.set(xt,At,O.get(xt,At)+Pt*O.get(xt,wt))}}X[wt]=-Me}this.QR=O,this.Rdiag=X}return D(ft,[{key:"solve",value:function(O){O=Wt.checkMatrix(O);var b=this.QR,w=b.rows;if(O.rows!==w)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var X=O.columns,xt=O.clone(),At=b.columns,wt,Pt,Me,ve;for(Me=0;Me<At;Me++)for(Pt=0;Pt<X;Pt++){for(ve=0,wt=Me;wt<w;wt++)ve+=b.get(wt,Me)*xt.get(wt,Pt);for(ve=-ve/b.get(Me,Me),wt=Me;wt<w;wt++)xt.set(wt,Pt,xt.get(wt,Pt)+ve*b.get(wt,Me))}for(Me=At-1;Me>=0;Me--){for(Pt=0;Pt<X;Pt++)xt.set(Me,Pt,xt.get(Me,Pt)/this.Rdiag[Me]);for(wt=0;wt<Me;wt++)for(Pt=0;Pt<X;Pt++)xt.set(wt,Pt,xt.get(wt,Pt)-xt.get(Me,Pt)*b.get(wt,Me))}return xt.subMatrix(0,At-1,0,X-1)}},{key:"isFullRank",value:function(){for(var O=this.QR.columns,b=0;b<O;b++)if(this.Rdiag[b]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var O=this.QR,b=O.columns,w=new Wt(b,b),X,xt;for(X=0;X<b;X++)for(xt=0;xt<b;xt++)X<xt?w.set(X,xt,O.get(X,xt)):X===xt?w.set(X,xt,this.Rdiag[X]):w.set(X,xt,0);return w}},{key:"orthogonalMatrix",get:function(){var O=this.QR,b=O.rows,w=O.columns,X=new Wt(b,w),xt,At,wt,Pt;for(wt=w-1;wt>=0;wt--){for(xt=0;xt<b;xt++)X.set(xt,wt,0);for(X.set(wt,wt,1),At=wt;At<w;At++)if(O.get(wt,wt)!==0){for(Pt=0,xt=wt;xt<b;xt++)Pt+=O.get(xt,wt)*X.get(xt,At);for(Pt=-Pt/O.get(wt,wt),xt=wt;xt<b;xt++)X.set(xt,At,X.get(xt,At)+Pt*O.get(xt,wt))}}return X}}]),ft}(),Ln=function(){function ft(rt){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(N(this,ft),rt=Sr.checkMatrix(rt),rt.isEmpty())throw new Error("Matrix must be non-empty");var b=rt.rows,w=rt.columns,X=O.computeLeftSingularVectors,xt=X===void 0?!0:X,At=O.computeRightSingularVectors,wt=At===void 0?!0:At,Pt=O.autoTranspose,Me=Pt===void 0?!1:Pt,ve=!!xt,He=!!wt,br=!1,ar;if(b<w)if(!Me)ar=rt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{ar=rt.transpose(),b=ar.rows,w=ar.columns,br=!0;var mr=ve;ve=He,He=mr}else ar=rt.clone();for(var Mn=Math.min(b,w),Xe=Math.min(b+1,w),hr=new Float64Array(Xe),Er=new Wt(b,Mn),on=new Wt(w,w),Wr=new Float64Array(w),xa=new Float64Array(b),Ta=new Float64Array(Xe),Rn=0;Rn<Xe;Rn++)Ta[Rn]=Rn;for(var Jn=Math.min(b-1,w),Ga=Math.max(0,Math.min(w-2,b)),Aa=Math.max(Jn,Ga),an=0;an<Aa;an++){if(an<Jn){hr[an]=0;for(var Vn=an;Vn<b;Vn++)hr[an]=ln(hr[an],ar.get(Vn,an));if(hr[an]!==0){ar.get(an,an)<0&&(hr[an]=-hr[an]);for(var me=an;me<b;me++)ar.set(me,an,ar.get(me,an)/hr[an]);ar.set(an,an,ar.get(an,an)+1)}hr[an]=-hr[an]}for(var Dt=an+1;Dt<w;Dt++){if(an<Jn&&hr[an]!==0){for(var fe=0,Ae=an;Ae<b;Ae++)fe+=ar.get(Ae,an)*ar.get(Ae,Dt);fe=-fe/ar.get(an,an);for(var be=an;be<b;be++)ar.set(be,Dt,ar.get(be,Dt)+fe*ar.get(be,an))}Wr[Dt]=ar.get(an,Dt)}if(ve&&an<Jn)for(var De=an;De<b;De++)Er.set(De,an,ar.get(De,an));if(an<Ga){Wr[an]=0;for(var or=an+1;or<w;or++)Wr[an]=ln(Wr[an],Wr[or]);if(Wr[an]!==0){Wr[an+1]<0&&(Wr[an]=0-Wr[an]);for(var Fr=an+1;Fr<w;Fr++)Wr[Fr]/=Wr[an];Wr[an+1]+=1}if(Wr[an]=-Wr[an],an+1<b&&Wr[an]!==0){for(var Jr=an+1;Jr<b;Jr++)xa[Jr]=0;for(var Pn=an+1;Pn<b;Pn++)for(var Bn=an+1;Bn<w;Bn++)xa[Pn]+=Wr[Bn]*ar.get(Pn,Bn);for(var Zn=an+1;Zn<w;Zn++)for(var ba=-Wr[Zn]/Wr[an+1],Ca=an+1;Ca<b;Ca++)ar.set(Ca,Zn,ar.get(Ca,Zn)+ba*xa[Ca])}if(He)for(var li=an+1;li<w;li++)on.set(li,an,Wr[li])}}var ta=Math.min(w,b+1);if(Jn<w&&(hr[Jn]=ar.get(Jn,Jn)),b<ta&&(hr[ta-1]=0),Ga+1<ta&&(Wr[Ga]=ar.get(Ga,ta-1)),Wr[ta-1]=0,ve){for(var fi=Jn;fi<Mn;fi++){for(var Co=0;Co<b;Co++)Er.set(Co,fi,0);Er.set(fi,fi,1)}for(var La=Jn-1;La>=0;La--)if(hr[La]!==0){for(var xi=La+1;xi<Mn;xi++){for(var so=0,To=La;To<b;To++)so+=Er.get(To,La)*Er.get(To,xi);so=-so/Er.get(La,La);for(var bo=La;bo<b;bo++)Er.set(bo,xi,Er.get(bo,xi)+so*Er.get(bo,La))}for(var uo=La;uo<b;uo++)Er.set(uo,La,-Er.get(uo,La));Er.set(La,La,1+Er.get(La,La));for(var Hi=0;Hi<La-1;Hi++)Er.set(Hi,La,0)}else{for(var ds=0;ds<b;ds++)Er.set(ds,La,0);Er.set(La,La,1)}}if(He)for(var zi=w-1;zi>=0;zi--){if(zi<Ga&&Wr[zi]!==0)for(var Ui=zi+1;Ui<w;Ui++){for(var gs=0,Ms=zi+1;Ms<w;Ms++)gs+=on.get(Ms,zi)*on.get(Ms,Ui);gs=-gs/on.get(zi+1,zi);for(var Go=zi+1;Go<w;Go++)on.set(Go,Ui,on.get(Go,Ui)+gs*on.get(Go,zi))}for(var _o=0;_o<w;_o++)on.set(_o,zi,0);on.set(zi,zi,1)}for(var Io=ta-1,$s=Number.EPSILON;ta>0;){var Yn=void 0,So=void 0;for(Yn=ta-2;Yn>=-1&&Yn!==-1;Yn--){var Oo=Number.MIN_VALUE+$s*Math.abs(hr[Yn]+Math.abs(hr[Yn+1]));if(Math.abs(Wr[Yn])<=Oo||Number.isNaN(Wr[Yn])){Wr[Yn]=0;break}}if(Yn===ta-2)So=4;else{var Wi=void 0;for(Wi=ta-1;Wi>=Yn&&Wi!==Yn;Wi--){var zn=(Wi!==ta?Math.abs(Wr[Wi]):0)+(Wi!==Yn+1?Math.abs(Wr[Wi-1]):0);if(Math.abs(hr[Wi])<=$s*zn){hr[Wi]=0;break}}Wi===Yn?So=3:Wi===ta-1?So=1:(So=2,Yn=Wi)}switch(Yn++,So){case 1:{var Lo=Wr[ta-2];Wr[ta-2]=0;for(var Ai=ta-2;Ai>=Yn;Ai--){var zo=ln(hr[Ai],Lo),Uo=hr[Ai]/zo,ps=Lo/zo;if(hr[Ai]=zo,Ai!==Yn&&(Lo=-ps*Wr[Ai-1],Wr[Ai-1]=Uo*Wr[Ai-1]),He)for(var eo=0;eo<w;eo++)zo=Uo*on.get(eo,Ai)+ps*on.get(eo,ta-1),on.set(eo,ta-1,-ps*on.get(eo,Ai)+Uo*on.get(eo,ta-1)),on.set(eo,Ai,zo)}break}case 2:{var ro=Wr[Yn-1];Wr[Yn-1]=0;for(var ei=Yn;ei<ta;ei++){var fo=ln(hr[ei],ro),Do=hr[ei]/fo,Wo=ro/fo;if(hr[ei]=fo,ro=-Wo*Wr[ei],Wr[ei]=Do*Wr[ei],ve)for(var No=0;No<b;No++)fo=Do*Er.get(No,ei)+Wo*Er.get(No,Yn-1),Er.set(No,Yn-1,-Wo*Er.get(No,ei)+Do*Er.get(No,Yn-1)),Er.set(No,ei,fo)}break}case 3:{var is=Math.max(Math.abs(hr[ta-1]),Math.abs(hr[ta-2]),Math.abs(Wr[ta-2]),Math.abs(hr[Yn]),Math.abs(Wr[Yn])),Xo=hr[ta-1]/is,Jo=hr[ta-2]/is,Xa=Wr[ta-2]/is,As=hr[Yn]/is,iu=Wr[Yn]/is,Xi=((Jo+Xo)*(Jo-Xo)+Xa*Xa)/2,os=Xo*Xa*(Xo*Xa),Eo=0;(Xi!==0||os!==0)&&(Xi<0?Eo=0-Math.sqrt(Xi*Xi+os):Eo=Math.sqrt(Xi*Xi+os),Eo=os/(Xi+Eo));for(var Yi=(As+Xo)*(As-Xo)+Eo,co=As*iu,pa=Yn;pa<ta-1;pa++){var ja=ln(Yi,co);ja===0&&(ja=Number.MIN_VALUE);var yi=Yi/ja,no=co/ja;if(pa!==Yn&&(Wr[pa-1]=ja),Yi=yi*hr[pa]+no*Wr[pa],Wr[pa]=yi*Wr[pa]-no*hr[pa],co=no*hr[pa+1],hr[pa+1]=yi*hr[pa+1],He)for(var ki=0;ki<w;ki++)ja=yi*on.get(ki,pa)+no*on.get(ki,pa+1),on.set(ki,pa+1,-no*on.get(ki,pa)+yi*on.get(ki,pa+1)),on.set(ki,pa,ja);if(ja=ln(Yi,co),ja===0&&(ja=Number.MIN_VALUE),yi=Yi/ja,no=co/ja,hr[pa]=ja,Yi=yi*Wr[pa]+no*hr[pa+1],hr[pa+1]=-no*Wr[pa]+yi*hr[pa+1],co=no*Wr[pa+1],Wr[pa+1]=yi*Wr[pa+1],ve&&pa<b-1)for(var Ki=0;Ki<b;Ki++)ja=yi*Er.get(Ki,pa)+no*Er.get(Ki,pa+1),Er.set(Ki,pa+1,-no*Er.get(Ki,pa)+yi*Er.get(Ki,pa+1)),Er.set(Ki,pa,ja)}Wr[ta-2]=Yi;break}case 4:{if(hr[Yn]<=0&&(hr[Yn]=hr[Yn]<0?-hr[Yn]:0,He))for(var Yo=0;Yo<=Io;Yo++)on.set(Yo,Yn,-on.get(Yo,Yn));for(;Yn<Io&&!(hr[Yn]>=hr[Yn+1]);){var wo=hr[Yn];if(hr[Yn]=hr[Yn+1],hr[Yn+1]=wo,He&&Yn<w-1)for(var ts=0;ts<w;ts++)wo=on.get(ts,Yn+1),on.set(ts,Yn+1,on.get(ts,Yn)),on.set(ts,Yn,wo);if(ve&&Yn<b-1)for(var lo=0;lo<b;lo++)wo=Er.get(lo,Yn+1),Er.set(lo,Yn+1,Er.get(lo,Yn)),Er.set(lo,Yn,wo);Yn++}ta--;break}}}if(br){var Rs=on;on=Er,Er=Rs}this.m=b,this.n=w,this.s=hr,this.U=Er,this.V=on}return D(ft,[{key:"solve",value:function(O){for(var b=O,w=this.threshold,X=this.s.length,xt=Wt.zeros(X,X),At=0;At<X;At++)Math.abs(this.s[At])<=w?xt.set(At,At,0):xt.set(At,At,1/this.s[At]);for(var wt=this.U,Pt=this.rightSingularVectors,Me=Pt.mmul(xt),ve=Pt.rows,He=wt.rows,br=Wt.zeros(ve,He),ar=0;ar<ve;ar++)for(var mr=0;mr<He;mr++){for(var Mn=0,Xe=0;Xe<X;Xe++)Mn+=Me.get(ar,Xe)*wt.get(mr,Xe);br.set(ar,mr,Mn)}return br.mmul(b)}},{key:"solveForDiagonal",value:function(O){return this.solve(Wt.diag(O))}},{key:"inverse",value:function(){for(var O=this.V,b=this.threshold,w=O.rows,X=O.columns,xt=new Wt(w,this.s.length),At=0;At<w;At++)for(var wt=0;wt<X;wt++)Math.abs(this.s[wt])>b&&xt.set(At,wt,O.get(At,wt)/this.s[wt]);for(var Pt=this.U,Me=Pt.rows,ve=Pt.columns,He=new Wt(w,Me),br=0;br<w;br++)for(var ar=0;ar<Me;ar++){for(var mr=0,Mn=0;Mn<ve;Mn++)mr+=xt.get(br,Mn)*Pt.get(ar,Mn);He.set(br,ar,mr)}return He}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var O=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,b=0,w=this.s,X=0,xt=w.length;X<xt;X++)w[X]>O&&b++;return b}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Wt.diag(this.s)}}]),ft}();function fn(ft){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ft=Sr.checkMatrix(ft),rt?new Ln(ft).inverse():qe(ft,Wt.eye(ft.rows))}function qe(ft,rt){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return ft=Sr.checkMatrix(ft),rt=Sr.checkMatrix(rt),O?new Ln(ft).solve(rt):ft.isSquare()?new Rr(ft).solve(rt):new Nn(ft).solve(rt)}function rr(ft){if(ft=Wt.checkMatrix(ft),ft.isSquare()){if(ft.columns===0)return 1;var rt,O,b,w;if(ft.columns===2)return rt=ft.get(0,0),O=ft.get(0,1),b=ft.get(1,0),w=ft.get(1,1),rt*w-O*b;if(ft.columns===3){var X,xt,At;return X=new Ct(ft,[1,2],[1,2]),xt=new Ct(ft,[1,2],[0,2]),At=new Ct(ft,[1,2],[0,1]),rt=ft.get(0,0),O=ft.get(0,1),b=ft.get(0,2),rt*rr(X)-O*rr(xt)+b*rr(At)}else return new Rr(ft).determinant}else throw Error("determinant can only be calculated for a square matrix")}function vr(ft,rt){for(var O=[],b=0;b<ft;b++)b!==rt&&O.push(b);return O}function Pr(ft,rt,O){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(ft>w)return new Array(rt.rows+1).fill(0);for(var X=rt.addRow(O,[0]),xt=0;xt<X.rows;xt++)Math.abs(X.get(xt,0))<b&&X.set(xt,0,0);return X.to1DArray()}function en(ft){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=rt.thresholdValue,b=O===void 0?1e-9:O,w=rt.thresholdError,X=w===void 0?1e-9:w;ft=Wt.checkMatrix(ft);for(var xt=ft.rows,At=new Wt(xt,xt),wt=0;wt<xt;wt++){var Pt=Wt.columnVector(ft.getRow(wt)),Me=ft.subMatrixRow(vr(xt,wt)).transpose(),ve=new Ln(Me),He=ve.solve(Pt),br=Wt.sub(Pt,Me.mmul(He)).abs().max();At.setRow(wt,Pr(br,He,wt,b,X))}return At}function pn(ft){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(ft=Wt.checkMatrix(ft),ft.isEmpty())return ft.transpose();for(var O=new Ln(ft,{autoTranspose:!0}),b=O.leftSingularVectors,w=O.rightSingularVectors,X=O.diagonal,xt=0;xt<X.length;xt++)Math.abs(X[xt])>rt?X[xt]=1/X[xt]:X[xt]=0;return w.mmul(Wt.diag(X).mmul(b.transpose()))}function rn(ft){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ft,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ft=new Wt(ft);var b=!1;if(P(rt)==="object"&&!Wt.isMatrix(rt)&&!E.isAnyArray(rt)?(O=rt,rt=ft,b=!0):rt=new Wt(rt),ft.rows!==rt.rows)throw new TypeError("Both matrices must have the same number of rows");var w=O,X=w.center,xt=X===void 0?!0:X;xt&&(ft=ft.center("column"),b||(rt=rt.center("column")));for(var At=ft.transpose().mmul(rt),wt=0;wt<At.rows;wt++)for(var Pt=0;Pt<At.columns;Pt++)At.set(wt,Pt,At.get(wt,Pt)*(1/(ft.rows-1)));return At}function jn(ft){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ft,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ft=new Wt(ft);var b=!1;if(P(rt)==="object"&&!Wt.isMatrix(rt)&&!E.isAnyArray(rt)?(O=rt,rt=ft,b=!0):rt=new Wt(rt),ft.rows!==rt.rows)throw new TypeError("Both matrices must have the same number of rows");var w=O,X=w.center,xt=X===void 0?!0:X,At=w.scale,wt=At===void 0?!0:At;xt&&(ft.center("column"),b||rt.center("column")),wt&&(ft.scale("column"),b||rt.scale("column"));for(var Pt=ft.standardDeviation("column",{unbiased:!0}),Me=b?Pt:rt.standardDeviation("column",{unbiased:!0}),ve=ft.transpose().mmul(rt),He=0;He<ve.rows;He++)for(var br=0;br<ve.columns;br++)ve.set(He,br,ve.get(He,br)*(1/(Pt[He]*Me[br]))*(1/(ft.rows-1)));return ve}var Hn=function(){function ft(rt){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N(this,ft);var b=O.assumeSymmetric,w=b===void 0?!1:b;if(rt=Sr.checkMatrix(rt),!rt.isSquare())throw new Error("Matrix is not a square matrix");if(rt.isEmpty())throw new Error("Matrix must be non-empty");var X=rt.columns,xt=new Wt(X,X),At=new Float64Array(X),wt=new Float64Array(X),Pt=rt,Me,ve,He=!1;if(w?He=!0:He=rt.isSymmetric(),He){for(Me=0;Me<X;Me++)for(ve=0;ve<X;ve++)xt.set(Me,ve,Pt.get(Me,ve));oa(X,wt,At,xt),dn(X,wt,At,xt)}else{var br=new Wt(X,X),ar=new Float64Array(X);for(ve=0;ve<X;ve++)for(Me=0;Me<X;Me++)br.set(Me,ve,Pt.get(Me,ve));Wn(X,br,ar,xt),Dn(X,wt,At,xt,br)}this.n=X,this.e=wt,this.d=At,this.V=xt}return D(ft,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var O=this.n,b=this.e,w=this.d,X=new Wt(O,O),xt,At;for(xt=0;xt<O;xt++){for(At=0;At<O;At++)X.set(xt,At,0);X.set(xt,xt,w[xt]),b[xt]>0?X.set(xt,xt+1,b[xt]):b[xt]<0&&X.set(xt,xt-1,b[xt])}return X}}]),ft}();function oa(ft,rt,O,b){var w,X,xt,At,wt,Pt,Me,ve;for(wt=0;wt<ft;wt++)O[wt]=b.get(ft-1,wt);for(At=ft-1;At>0;At--){for(ve=0,xt=0,Pt=0;Pt<At;Pt++)ve=ve+Math.abs(O[Pt]);if(ve===0)for(rt[At]=O[At-1],wt=0;wt<At;wt++)O[wt]=b.get(At-1,wt),b.set(At,wt,0),b.set(wt,At,0);else{for(Pt=0;Pt<At;Pt++)O[Pt]/=ve,xt+=O[Pt]*O[Pt];for(w=O[At-1],X=Math.sqrt(xt),w>0&&(X=-X),rt[At]=ve*X,xt=xt-w*X,O[At-1]=w-X,wt=0;wt<At;wt++)rt[wt]=0;for(wt=0;wt<At;wt++){for(w=O[wt],b.set(wt,At,w),X=rt[wt]+b.get(wt,wt)*w,Pt=wt+1;Pt<=At-1;Pt++)X+=b.get(Pt,wt)*O[Pt],rt[Pt]+=b.get(Pt,wt)*w;rt[wt]=X}for(w=0,wt=0;wt<At;wt++)rt[wt]/=xt,w+=rt[wt]*O[wt];for(Me=w/(xt+xt),wt=0;wt<At;wt++)rt[wt]-=Me*O[wt];for(wt=0;wt<At;wt++){for(w=O[wt],X=rt[wt],Pt=wt;Pt<=At-1;Pt++)b.set(Pt,wt,b.get(Pt,wt)-(w*rt[Pt]+X*O[Pt]));O[wt]=b.get(At-1,wt),b.set(At,wt,0)}}O[At]=xt}for(At=0;At<ft-1;At++){if(b.set(ft-1,At,b.get(At,At)),b.set(At,At,1),xt=O[At+1],xt!==0){for(Pt=0;Pt<=At;Pt++)O[Pt]=b.get(Pt,At+1)/xt;for(wt=0;wt<=At;wt++){for(X=0,Pt=0;Pt<=At;Pt++)X+=b.get(Pt,At+1)*b.get(Pt,wt);for(Pt=0;Pt<=At;Pt++)b.set(Pt,wt,b.get(Pt,wt)-X*O[Pt])}}for(Pt=0;Pt<=At;Pt++)b.set(Pt,At+1,0)}for(wt=0;wt<ft;wt++)O[wt]=b.get(ft-1,wt),b.set(ft-1,wt,0);b.set(ft-1,ft-1,1),rt[0]=0}function dn(ft,rt,O,b){var w,X,xt,At,wt,Pt,Me,ve,He,br,ar,mr,Mn,Xe,hr,Er;for(xt=1;xt<ft;xt++)rt[xt-1]=rt[xt];rt[ft-1]=0;var on=0,Wr=0,xa=Number.EPSILON;for(Pt=0;Pt<ft;Pt++){for(Wr=Math.max(Wr,Math.abs(O[Pt])+Math.abs(rt[Pt])),Me=Pt;Me<ft&&!(Math.abs(rt[Me])<=xa*Wr);)Me++;if(Me>Pt)do{for(w=O[Pt],ve=(O[Pt+1]-w)/(2*rt[Pt]),He=ln(ve,1),ve<0&&(He=-He),O[Pt]=rt[Pt]/(ve+He),O[Pt+1]=rt[Pt]*(ve+He),br=O[Pt+1],X=w-O[Pt],xt=Pt+2;xt<ft;xt++)O[xt]-=X;for(on=on+X,ve=O[Me],ar=1,mr=ar,Mn=ar,Xe=rt[Pt+1],hr=0,Er=0,xt=Me-1;xt>=Pt;xt--)for(Mn=mr,mr=ar,Er=hr,w=ar*rt[xt],X=ar*ve,He=ln(ve,rt[xt]),rt[xt+1]=hr*He,hr=rt[xt]/He,ar=ve/He,ve=ar*O[xt]-hr*w,O[xt+1]=X+hr*(ar*w+hr*O[xt]),wt=0;wt<ft;wt++)X=b.get(wt,xt+1),b.set(wt,xt+1,hr*b.get(wt,xt)+ar*X),b.set(wt,xt,ar*b.get(wt,xt)-hr*X);ve=-hr*Er*Mn*Xe*rt[Pt]/br,rt[Pt]=hr*ve,O[Pt]=ar*ve}while(Math.abs(rt[Pt])>xa*Wr);O[Pt]=O[Pt]+on,rt[Pt]=0}for(xt=0;xt<ft-1;xt++){for(wt=xt,ve=O[xt],At=xt+1;At<ft;At++)O[At]<ve&&(wt=At,ve=O[At]);if(wt!==xt)for(O[wt]=O[xt],O[xt]=ve,At=0;At<ft;At++)ve=b.get(At,xt),b.set(At,xt,b.get(At,wt)),b.set(At,wt,ve)}}function Wn(ft,rt,O,b){var w=0,X=ft-1,xt,At,wt,Pt,Me,ve,He;for(ve=w+1;ve<=X-1;ve++){for(He=0,Pt=ve;Pt<=X;Pt++)He=He+Math.abs(rt.get(Pt,ve-1));if(He!==0){for(wt=0,Pt=X;Pt>=ve;Pt--)O[Pt]=rt.get(Pt,ve-1)/He,wt+=O[Pt]*O[Pt];for(At=Math.sqrt(wt),O[ve]>0&&(At=-At),wt=wt-O[ve]*At,O[ve]=O[ve]-At,Me=ve;Me<ft;Me++){for(xt=0,Pt=X;Pt>=ve;Pt--)xt+=O[Pt]*rt.get(Pt,Me);for(xt=xt/wt,Pt=ve;Pt<=X;Pt++)rt.set(Pt,Me,rt.get(Pt,Me)-xt*O[Pt])}for(Pt=0;Pt<=X;Pt++){for(xt=0,Me=X;Me>=ve;Me--)xt+=O[Me]*rt.get(Pt,Me);for(xt=xt/wt,Me=ve;Me<=X;Me++)rt.set(Pt,Me,rt.get(Pt,Me)-xt*O[Me])}O[ve]=He*O[ve],rt.set(ve,ve-1,He*At)}}for(Pt=0;Pt<ft;Pt++)for(Me=0;Me<ft;Me++)b.set(Pt,Me,Pt===Me?1:0);for(ve=X-1;ve>=w+1;ve--)if(rt.get(ve,ve-1)!==0){for(Pt=ve+1;Pt<=X;Pt++)O[Pt]=rt.get(Pt,ve-1);for(Me=ve;Me<=X;Me++){for(At=0,Pt=ve;Pt<=X;Pt++)At+=O[Pt]*b.get(Pt,Me);for(At=At/O[ve]/rt.get(ve,ve-1),Pt=ve;Pt<=X;Pt++)b.set(Pt,Me,b.get(Pt,Me)+At*O[Pt])}}}function Dn(ft,rt,O,b,w){var X=ft-1,xt=0,At=ft-1,wt=Number.EPSILON,Pt=0,Me=0,ve=0,He=0,br=0,ar=0,mr=0,Mn=0,Xe,hr,Er,on,Wr,xa,Ta,Rn,Jn,Ga,Aa,an,Vn,me,Dt;for(Xe=0;Xe<ft;Xe++)for((Xe<xt||Xe>At)&&(O[Xe]=w.get(Xe,Xe),rt[Xe]=0),hr=Math.max(Xe-1,0);hr<ft;hr++)Me=Me+Math.abs(w.get(Xe,hr));for(;X>=xt;){for(on=X;on>xt&&(ar=Math.abs(w.get(on-1,on-1))+Math.abs(w.get(on,on)),ar===0&&(ar=Me),!(Math.abs(w.get(on,on-1))<wt*ar));)on--;if(on===X)w.set(X,X,w.get(X,X)+Pt),O[X]=w.get(X,X),rt[X]=0,X--,Mn=0;else if(on===X-1){if(Ta=w.get(X,X-1)*w.get(X-1,X),ve=(w.get(X-1,X-1)-w.get(X,X))/2,He=ve*ve+Ta,mr=Math.sqrt(Math.abs(He)),w.set(X,X,w.get(X,X)+Pt),w.set(X-1,X-1,w.get(X-1,X-1)+Pt),Rn=w.get(X,X),He>=0){for(mr=ve>=0?ve+mr:ve-mr,O[X-1]=Rn+mr,O[X]=O[X-1],mr!==0&&(O[X]=Rn-Ta/mr),rt[X-1]=0,rt[X]=0,Rn=w.get(X,X-1),ar=Math.abs(Rn)+Math.abs(mr),ve=Rn/ar,He=mr/ar,br=Math.sqrt(ve*ve+He*He),ve=ve/br,He=He/br,hr=X-1;hr<ft;hr++)mr=w.get(X-1,hr),w.set(X-1,hr,He*mr+ve*w.get(X,hr)),w.set(X,hr,He*w.get(X,hr)-ve*mr);for(Xe=0;Xe<=X;Xe++)mr=w.get(Xe,X-1),w.set(Xe,X-1,He*mr+ve*w.get(Xe,X)),w.set(Xe,X,He*w.get(Xe,X)-ve*mr);for(Xe=xt;Xe<=At;Xe++)mr=b.get(Xe,X-1),b.set(Xe,X-1,He*mr+ve*b.get(Xe,X)),b.set(Xe,X,He*b.get(Xe,X)-ve*mr)}else O[X-1]=Rn+ve,O[X]=Rn+ve,rt[X-1]=mr,rt[X]=-mr;X=X-2,Mn=0}else{if(Rn=w.get(X,X),Jn=0,Ta=0,on<X&&(Jn=w.get(X-1,X-1),Ta=w.get(X,X-1)*w.get(X-1,X)),Mn===10){for(Pt+=Rn,Xe=xt;Xe<=X;Xe++)w.set(Xe,Xe,w.get(Xe,Xe)-Rn);ar=Math.abs(w.get(X,X-1))+Math.abs(w.get(X-1,X-2)),Rn=Jn=.75*ar,Ta=-.4375*ar*ar}if(Mn===30&&(ar=(Jn-Rn)/2,ar=ar*ar+Ta,ar>0)){for(ar=Math.sqrt(ar),Jn<Rn&&(ar=-ar),ar=Rn-Ta/((Jn-Rn)/2+ar),Xe=xt;Xe<=X;Xe++)w.set(Xe,Xe,w.get(Xe,Xe)-ar);Pt+=ar,Rn=Jn=Ta=.964}for(Mn=Mn+1,Wr=X-2;Wr>=on&&(mr=w.get(Wr,Wr),br=Rn-mr,ar=Jn-mr,ve=(br*ar-Ta)/w.get(Wr+1,Wr)+w.get(Wr,Wr+1),He=w.get(Wr+1,Wr+1)-mr-br-ar,br=w.get(Wr+2,Wr+1),ar=Math.abs(ve)+Math.abs(He)+Math.abs(br),ve=ve/ar,He=He/ar,br=br/ar,!(Wr===on||Math.abs(w.get(Wr,Wr-1))*(Math.abs(He)+Math.abs(br))<wt*(Math.abs(ve)*(Math.abs(w.get(Wr-1,Wr-1))+Math.abs(mr)+Math.abs(w.get(Wr+1,Wr+1))))));)Wr--;for(Xe=Wr+2;Xe<=X;Xe++)w.set(Xe,Xe-2,0),Xe>Wr+2&&w.set(Xe,Xe-3,0);for(Er=Wr;Er<=X-1&&(me=Er!==X-1,Er!==Wr&&(ve=w.get(Er,Er-1),He=w.get(Er+1,Er-1),br=me?w.get(Er+2,Er-1):0,Rn=Math.abs(ve)+Math.abs(He)+Math.abs(br),Rn!==0&&(ve=ve/Rn,He=He/Rn,br=br/Rn)),Rn!==0);Er++)if(ar=Math.sqrt(ve*ve+He*He+br*br),ve<0&&(ar=-ar),ar!==0){for(Er!==Wr?w.set(Er,Er-1,-ar*Rn):on!==Wr&&w.set(Er,Er-1,-w.get(Er,Er-1)),ve=ve+ar,Rn=ve/ar,Jn=He/ar,mr=br/ar,He=He/ve,br=br/ve,hr=Er;hr<ft;hr++)ve=w.get(Er,hr)+He*w.get(Er+1,hr),me&&(ve=ve+br*w.get(Er+2,hr),w.set(Er+2,hr,w.get(Er+2,hr)-ve*mr)),w.set(Er,hr,w.get(Er,hr)-ve*Rn),w.set(Er+1,hr,w.get(Er+1,hr)-ve*Jn);for(Xe=0;Xe<=Math.min(X,Er+3);Xe++)ve=Rn*w.get(Xe,Er)+Jn*w.get(Xe,Er+1),me&&(ve=ve+mr*w.get(Xe,Er+2),w.set(Xe,Er+2,w.get(Xe,Er+2)-ve*br)),w.set(Xe,Er,w.get(Xe,Er)-ve),w.set(Xe,Er+1,w.get(Xe,Er+1)-ve*He);for(Xe=xt;Xe<=At;Xe++)ve=Rn*b.get(Xe,Er)+Jn*b.get(Xe,Er+1),me&&(ve=ve+mr*b.get(Xe,Er+2),b.set(Xe,Er+2,b.get(Xe,Er+2)-ve*br)),b.set(Xe,Er,b.get(Xe,Er)-ve),b.set(Xe,Er+1,b.get(Xe,Er+1)-ve*He)}}}if(Me!==0){for(X=ft-1;X>=0;X--)if(ve=O[X],He=rt[X],He===0)for(on=X,w.set(X,X,1),Xe=X-1;Xe>=0;Xe--){for(Ta=w.get(Xe,Xe)-ve,br=0,hr=on;hr<=X;hr++)br=br+w.get(Xe,hr)*w.get(hr,X);if(rt[Xe]<0)mr=Ta,ar=br;else if(on=Xe,rt[Xe]===0?w.set(Xe,X,Ta!==0?-br/Ta:-br/(wt*Me)):(Rn=w.get(Xe,Xe+1),Jn=w.get(Xe+1,Xe),He=(O[Xe]-ve)*(O[Xe]-ve)+rt[Xe]*rt[Xe],xa=(Rn*ar-mr*br)/He,w.set(Xe,X,xa),w.set(Xe+1,X,Math.abs(Rn)>Math.abs(mr)?(-br-Ta*xa)/Rn:(-ar-Jn*xa)/mr)),xa=Math.abs(w.get(Xe,X)),wt*xa*xa>1)for(hr=Xe;hr<=X;hr++)w.set(hr,X,w.get(hr,X)/xa)}else if(He<0)for(on=X-1,Math.abs(w.get(X,X-1))>Math.abs(w.get(X-1,X))?(w.set(X-1,X-1,He/w.get(X,X-1)),w.set(X-1,X,-(w.get(X,X)-ve)/w.get(X,X-1))):(Dt=Cn(0,-w.get(X-1,X),w.get(X-1,X-1)-ve,He),w.set(X-1,X-1,Dt[0]),w.set(X-1,X,Dt[1])),w.set(X,X-1,0),w.set(X,X,1),Xe=X-2;Xe>=0;Xe--){for(Ga=0,Aa=0,hr=on;hr<=X;hr++)Ga=Ga+w.get(Xe,hr)*w.get(hr,X-1),Aa=Aa+w.get(Xe,hr)*w.get(hr,X);if(Ta=w.get(Xe,Xe)-ve,rt[Xe]<0)mr=Ta,br=Ga,ar=Aa;else if(on=Xe,rt[Xe]===0?(Dt=Cn(-Ga,-Aa,Ta,He),w.set(Xe,X-1,Dt[0]),w.set(Xe,X,Dt[1])):(Rn=w.get(Xe,Xe+1),Jn=w.get(Xe+1,Xe),an=(O[Xe]-ve)*(O[Xe]-ve)+rt[Xe]*rt[Xe]-He*He,Vn=(O[Xe]-ve)*2*He,an===0&&Vn===0&&(an=wt*Me*(Math.abs(Ta)+Math.abs(He)+Math.abs(Rn)+Math.abs(Jn)+Math.abs(mr))),Dt=Cn(Rn*br-mr*Ga+He*Aa,Rn*ar-mr*Aa-He*Ga,an,Vn),w.set(Xe,X-1,Dt[0]),w.set(Xe,X,Dt[1]),Math.abs(Rn)>Math.abs(mr)+Math.abs(He)?(w.set(Xe+1,X-1,(-Ga-Ta*w.get(Xe,X-1)+He*w.get(Xe,X))/Rn),w.set(Xe+1,X,(-Aa-Ta*w.get(Xe,X)-He*w.get(Xe,X-1))/Rn)):(Dt=Cn(-br-Jn*w.get(Xe,X-1),-ar-Jn*w.get(Xe,X),mr,He),w.set(Xe+1,X-1,Dt[0]),w.set(Xe+1,X,Dt[1]))),xa=Math.max(Math.abs(w.get(Xe,X-1)),Math.abs(w.get(Xe,X))),wt*xa*xa>1)for(hr=Xe;hr<=X;hr++)w.set(hr,X-1,w.get(hr,X-1)/xa),w.set(hr,X,w.get(hr,X)/xa)}for(Xe=0;Xe<ft;Xe++)if(Xe<xt||Xe>At)for(hr=Xe;hr<ft;hr++)b.set(Xe,hr,w.get(Xe,hr));for(hr=ft-1;hr>=xt;hr--)for(Xe=xt;Xe<=At;Xe++){for(mr=0,Er=xt;Er<=Math.min(hr,At);Er++)mr=mr+b.get(Xe,Er)*w.get(Er,hr);b.set(Xe,hr,mr)}}}function Cn(ft,rt,O,b){var w,X;return Math.abs(O)>Math.abs(b)?(w=b/O,X=O+w*b,[(ft+w*rt)/X,(rt-w*ft)/X]):(w=O/b,X=b+w*O,[(w*ft+rt)/X,(w*rt-ft)/X])}var la=function(){function ft(rt){if(N(this,ft),rt=Sr.checkMatrix(rt),!rt.isSymmetric())throw new Error("Matrix is not symmetric");var O=rt,b=O.rows,w=new Wt(b,b),X=!0,xt,At,wt;for(At=0;At<b;At++){var Pt=0;for(wt=0;wt<At;wt++){var Me=0;for(xt=0;xt<wt;xt++)Me+=w.get(wt,xt)*w.get(At,xt);Me=(O.get(At,wt)-Me)/w.get(wt,wt),w.set(At,wt,Me),Pt=Pt+Me*Me}for(Pt=O.get(At,At)-Pt,X&=Pt>0,w.set(At,At,Math.sqrt(Math.max(Pt,0))),wt=At+1;wt<b;wt++)w.set(At,wt,0)}this.L=w,this.positiveDefinite=!!X}return D(ft,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(O){O=Sr.checkMatrix(O);var b=this.L,w=b.rows;if(O.rows!==w)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var X=O.columns,xt=O.clone(),At,wt,Pt;for(Pt=0;Pt<w;Pt++)for(wt=0;wt<X;wt++){for(At=0;At<Pt;At++)xt.set(Pt,wt,xt.get(Pt,wt)-xt.get(At,wt)*b.get(Pt,At));xt.set(Pt,wt,xt.get(Pt,wt)/b.get(Pt,Pt))}for(Pt=w-1;Pt>=0;Pt--)for(wt=0;wt<X;wt++){for(At=Pt+1;At<w;At++)xt.set(Pt,wt,xt.get(Pt,wt)-xt.get(At,wt)*b.get(At,Pt));xt.set(Pt,wt,xt.get(Pt,wt)/b.get(Pt,Pt))}return xt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),ft}(),K=D(function ft(rt){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N(this,ft),rt=Sr.checkMatrix(rt);var b=O.Y,w=O.scaleScores,X=w===void 0?!1:w,xt=O.maxIterations,At=xt===void 0?1e3:xt,wt=O.terminationCriteria,Pt=wt===void 0?1e-10:wt,Me;if(b){if(E.isAnyArray(b)&&typeof b[0]=="number"?b=Wt.columnVector(b):b=Sr.checkMatrix(b),b.rows!==rt.rows)throw new Error("Y should have the same number of rows as X");Me=b.getColumnVector(0)}else Me=rt.getColumnVector(0);for(var ve=1,He,br,ar,mr,Mn=0;Mn<At&&ve>Pt;Mn++)ar=rt.transpose().mmul(Me).div(Me.transpose().mmul(Me).get(0,0)),ar=ar.div(ar.norm()),He=rt.mmul(ar).div(ar.transpose().mmul(ar).get(0,0)),Mn>0&&(ve=He.clone().sub(mr).pow(2).sum()),mr=He.clone(),b?(br=b.transpose().mmul(He).div(He.transpose().mmul(He).get(0,0)),br=br.div(br.norm()),Me=b.mmul(br).div(br.transpose().mmul(br).get(0,0))):Me=He;if(b){var Xe=rt.transpose().mmul(He).div(He.transpose().mmul(He).get(0,0));Xe=Xe.div(Xe.norm());var hr=rt.clone().sub(He.clone().mmul(Xe.transpose())),Er=Me.transpose().mmul(He).div(He.transpose().mmul(He).get(0,0)),on=b.clone().sub(He.clone().mulS(Er.get(0,0)).mmul(br.transpose()));this.t=He,this.p=Xe.transpose(),this.w=ar.transpose(),this.q=br,this.u=Me,this.s=He.transpose().mmul(He),this.xResidual=hr,this.yResidual=on,this.betas=Er}else this.w=ar.transpose(),this.s=He.transpose().mmul(He).sqrt(),X?this.t=He.clone().div(this.s.get(0,0)):this.t=He,this.xResidual=rt.sub(He.mmul(ar.transpose()))});R.AbstractMatrix=xe,R.CHO=la,R.CholeskyDecomposition=la,R.EVD=Hn,R.EigenvalueDecomposition=Hn,R.LU=Rr,R.LuDecomposition=Rr,R.Matrix=Wt,R.MatrixColumnSelectionView=ie,R.MatrixColumnView=Yt,R.MatrixFlipColumnView=Oe,R.MatrixFlipRowView=re,R.MatrixRowSelectionView=Ge,R.MatrixRowView=_e,R.MatrixSelectionView=Ct,R.MatrixSubView=Nr,R.MatrixTransposeView=Or,R.NIPALS=K,R.Nipals=K,R.QR=Nn,R.QrDecomposition=Nn,R.SVD=Ln,R.SingularValueDecomposition=Ln,R.WrapperMatrix1D=Ur,R.WrapperMatrix2D=Sr,R.correlation=jn,R.covariance=rn,R.default=Wt,R.determinant=rr,R.inverse=fn,R.linearDependencies=en,R.pseudoInverse=pn,R.solve=qe,R.wrap=gn},971829:function(yr,R,z){"use strict";z.r(R),z.d(R,{quadtree:function(){return B.Z}});var B=z(547148)},547148:function(yr,R,z){"use strict";z.d(R,{Z:function(){return at}});function B(q){const et=+this._x.call(null,q),Q=+this._y.call(null,q);return Y(this.cover(et,Q),et,Q,q)}function Y(q,et,Q,it){if(isNaN(et)||isNaN(Q))return q;var ht,dt=q._root,Ot={data:it},It=q._x0,Kt=q._y0,Ft=q._x1,Nt=q._y1,st,yt,kt,ee,$t,ge,Pe,tr;if(!dt)return q._root=Ot,q;for(;dt.length;)if(($t=et>=(st=(It+Ft)/2))?It=st:Ft=st,(ge=Q>=(yt=(Kt+Nt)/2))?Kt=yt:Nt=yt,ht=dt,!(dt=dt[Pe=ge<<1|$t]))return ht[Pe]=Ot,q;if(kt=+q._x.call(null,dt.data),ee=+q._y.call(null,dt.data),et===kt&&Q===ee)return Ot.next=dt,ht?ht[Pe]=Ot:q._root=Ot,q;do ht=ht?ht[Pe]=new Array(4):q._root=new Array(4),($t=et>=(st=(It+Ft)/2))?It=st:Ft=st,(ge=Q>=(yt=(Kt+Nt)/2))?Kt=yt:Nt=yt;while((Pe=ge<<1|$t)===(tr=(ee>=yt)<<1|kt>=st));return ht[tr]=dt,ht[Pe]=Ot,q}function k(q){var et,Q,it=q.length,ht,dt,Ot=new Array(it),It=new Array(it),Kt=1/0,Ft=1/0,Nt=-1/0,st=-1/0;for(Q=0;Q<it;++Q)isNaN(ht=+this._x.call(null,et=q[Q]))||isNaN(dt=+this._y.call(null,et))||(Ot[Q]=ht,It[Q]=dt,ht<Kt&&(Kt=ht),ht>Nt&&(Nt=ht),dt<Ft&&(Ft=dt),dt>st&&(st=dt));if(Kt>Nt||Ft>st)return this;for(this.cover(Kt,Ft).cover(Nt,st),Q=0;Q<it;++Q)Y(this,Ot[Q],It[Q],q[Q]);return this}function P(q,et){if(isNaN(q=+q)||isNaN(et=+et))return this;var Q=this._x0,it=this._y0,ht=this._x1,dt=this._y1;if(isNaN(Q))ht=(Q=Math.floor(q))+1,dt=(it=Math.floor(et))+1;else{for(var Ot=ht-Q||1,It=this._root,Kt,Ft;Q>q||q>=ht||it>et||et>=dt;)switch(Ft=(et<it)<<1|q<Q,Kt=new Array(4),Kt[Ft]=It,It=Kt,Ot*=2,Ft){case 0:ht=Q+Ot,dt=it+Ot;break;case 1:Q=ht-Ot,dt=it+Ot;break;case 2:ht=Q+Ot,it=dt-Ot;break;case 3:Q=ht-Ot,it=dt-Ot;break}this._root&&this._root.length&&(this._root=It)}return this._x0=Q,this._y0=it,this._x1=ht,this._y1=dt,this}function N(){var q=[];return this.visit(function(et){if(!et.length)do q.push(et.data);while(et=et.next)}),q}function D(q){return arguments.length?this.cover(+q[0][0],+q[0][1]).cover(+q[1][0],+q[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function E(q,et,Q,it,ht){this.node=q,this.x0=et,this.y0=Q,this.x1=it,this.y1=ht}function y(q,et,Q){var it,ht=this._x0,dt=this._y0,Ot,It,Kt,Ft,Nt=this._x1,st=this._y1,yt=[],kt=this._root,ee,$t;for(kt&&yt.push(new E(kt,ht,dt,Nt,st)),Q==null?Q=1/0:(ht=q-Q,dt=et-Q,Nt=q+Q,st=et+Q,Q*=Q);ee=yt.pop();)if(!(!(kt=ee.node)||(Ot=ee.x0)>Nt||(It=ee.y0)>st||(Kt=ee.x1)<ht||(Ft=ee.y1)<dt))if(kt.length){var ge=(Ot+Kt)/2,Pe=(It+Ft)/2;yt.push(new E(kt[3],ge,Pe,Kt,Ft),new E(kt[2],Ot,Pe,ge,Ft),new E(kt[1],ge,It,Kt,Pe),new E(kt[0],Ot,It,ge,Pe)),($t=(et>=Pe)<<1|q>=ge)&&(ee=yt[yt.length-1],yt[yt.length-1]=yt[yt.length-1-$t],yt[yt.length-1-$t]=ee)}else{var tr=q-+this._x.call(null,kt.data),Jt=et-+this._y.call(null,kt.data),ae=tr*tr+Jt*Jt;if(ae<Q){var Se=Math.sqrt(Q=ae);ht=q-Se,dt=et-Se,Nt=q+Se,st=et+Se,it=kt.data}}return it}function M(q){if(isNaN(Nt=+this._x.call(null,q))||isNaN(st=+this._y.call(null,q)))return this;var et,Q=this._root,it,ht,dt,Ot=this._x0,It=this._y0,Kt=this._x1,Ft=this._y1,Nt,st,yt,kt,ee,$t,ge,Pe;if(!Q)return this;if(Q.length)for(;;){if((ee=Nt>=(yt=(Ot+Kt)/2))?Ot=yt:Kt=yt,($t=st>=(kt=(It+Ft)/2))?It=kt:Ft=kt,et=Q,!(Q=Q[ge=$t<<1|ee]))return this;if(!Q.length)break;(et[ge+1&3]||et[ge+2&3]||et[ge+3&3])&&(it=et,Pe=ge)}for(;Q.data!==q;)if(ht=Q,!(Q=Q.next))return this;return(dt=Q.next)&&delete Q.next,ht?(dt?ht.next=dt:delete ht.next,this):et?(dt?et[ge]=dt:delete et[ge],(Q=et[0]||et[1]||et[2]||et[3])&&Q===(et[3]||et[2]||et[1]||et[0])&&!Q.length&&(it?it[Pe]=Q:this._root=Q),this):(this._root=dt,this)}function S(q){for(var et=0,Q=q.length;et<Q;++et)this.remove(q[et]);return this}function m(){return this._root}function I(){var q=0;return this.visit(function(et){if(!et.length)do++q;while(et=et.next)}),q}function A(q){var et=[],Q,it=this._root,ht,dt,Ot,It,Kt;for(it&&et.push(new E(it,this._x0,this._y0,this._x1,this._y1));Q=et.pop();)if(!q(it=Q.node,dt=Q.x0,Ot=Q.y0,It=Q.x1,Kt=Q.y1)&&it.length){var Ft=(dt+It)/2,Nt=(Ot+Kt)/2;(ht=it[3])&&et.push(new E(ht,Ft,Nt,It,Kt)),(ht=it[2])&&et.push(new E(ht,dt,Nt,Ft,Kt)),(ht=it[1])&&et.push(new E(ht,Ft,Ot,It,Nt)),(ht=it[0])&&et.push(new E(ht,dt,Ot,Ft,Nt))}return this}function L(q){var et=[],Q=[],it;for(this._root&&et.push(new E(this._root,this._x0,this._y0,this._x1,this._y1));it=et.pop();){var ht=it.node;if(ht.length){var dt,Ot=it.x0,It=it.y0,Kt=it.x1,Ft=it.y1,Nt=(Ot+Kt)/2,st=(It+Ft)/2;(dt=ht[0])&&et.push(new E(dt,Ot,It,Nt,st)),(dt=ht[1])&&et.push(new E(dt,Nt,It,Kt,st)),(dt=ht[2])&&et.push(new E(dt,Ot,st,Nt,Ft)),(dt=ht[3])&&et.push(new E(dt,Nt,st,Kt,Ft))}Q.push(it)}for(;it=Q.pop();)q(it.node,it.x0,it.y0,it.x1,it.y1);return this}function U(q){return q[0]}function V(q){return arguments.length?(this._x=q,this):this._x}function x(q){return q[1]}function d(q){return arguments.length?(this._y=q,this):this._y}function at(q,et,Q){var it=new W(et==null?U:et,Q==null?x:Q,NaN,NaN,NaN,NaN);return q==null?it:it.addAll(q)}function W(q,et,Q,it,ht,dt){this._x=q,this._y=et,this._x0=Q,this._y0=it,this._x1=ht,this._y1=dt,this._root=void 0}function j(q){for(var et={data:q.data},Q=et;q=q.next;)Q=Q.next={data:q.data};return et}var $=at.prototype=W.prototype;$.copy=function(){var q=new W(this._x,this._y,this._x0,this._y0,this._x1,this._y1),et=this._root,Q,it;if(!et)return q;if(!et.length)return q._root=j(et),q;for(Q=[{source:et,target:q._root=new Array(4)}];et=Q.pop();)for(var ht=0;ht<4;++ht)(it=et.source[ht])&&(it.length?Q.push({source:it,target:et.target[ht]=new Array(4)}):et.target[ht]=j(it));return q},$.add=B,$.addAll=k,$.cover=P,$.data=N,$.extent=D,$.find=y,$.remove=M,$.removeAll=S,$.root=m,$.size=I,$.visit=A,$.visitAfter=L,$.x=V,$.y=d},631969:function(yr,R,z){"use strict";z.r(R),z.d(R,{BRIDGE_GRAPH_NAME:function(){return N},GraphType:function(){return y},HierarchyNodeType:function(){return M},InclusionType:function(){return E},LAYOUT_CONFIG:function(){return B},NodeType:function(){return D},ROOT_NAME:function(){return P},buildGraph:function(){return lr},flatGraph:function(){return Yr},getEdges:function(){return Vr},mergeConfig:function(){return Y}});const B={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function Y(v={},_=B){var F,Z,ot,ct;const gt=JSON.parse(JSON.stringify(_)),bt=((F=v==null?void 0:v.graph)===null||F===void 0?void 0:F.meta)||{},Mt=((Z=v==null?void 0:v.subScene)===null||Z===void 0?void 0:Z.meta)||{},Gt=((ot=v==null?void 0:v.nodeSize)===null||ot===void 0?void 0:ot.meta)||{},te=((ct=v==null?void 0:v.nodeSize)===null||ct===void 0?void 0:ct.node)||{},Zt=gt.nodeSize.bridge;return{graph:{meta:Object.assign(gt.graph.meta,bt)},subScene:{meta:Object.assign(gt.subScene.meta,Mt)},nodeSize:{meta:Object.assign(gt.nodeSize.meta,Gt),node:Object.assign(gt.nodeSize.node,te),bridge:Zt}}}function k(v){return`\u25EC${v}\u25EC`}const P=k("ROOT"),N=k("BRIDGE_GRAPH");var D,E,y,M;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(D||(D={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(E||(E={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(y||(y={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(M||(M={}));var S=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof z.g!="undefined"?z.g:typeof self!="undefined"?self:{};function m(v,_){return v(_={exports:{}},_.exports),_.exports}var I=function(){this.__data__=[],this.size=0},A=function(v,_){return v===_||v!=v&&_!=_},L=function(v,_){for(var F=v.length;F--;)if(A(v[F][0],_))return F;return-1},U=Array.prototype.splice,V=function(v){var _=this.__data__,F=L(_,v);return!(F<0)&&(F==_.length-1?_.pop():U.call(_,F,1),--this.size,!0)},x=function(v){var _=this.__data__,F=L(_,v);return F<0?void 0:_[F][1]},d=function(v){return L(this.__data__,v)>-1},at=function(v,_){var F=this.__data__,Z=L(F,v);return Z<0?(++this.size,F.push([v,_])):F[Z][1]=_,this};function W(v){var _=-1,F=v==null?0:v.length;for(this.clear();++_<F;){var Z=v[_];this.set(Z[0],Z[1])}}W.prototype.clear=I,W.prototype.delete=V,W.prototype.get=x,W.prototype.has=d,W.prototype.set=at;var j=W,$=function(){this.__data__=new j,this.size=0},q=function(v){var _=this.__data__,F=_.delete(v);return this.size=_.size,F},et=function(v){return this.__data__.get(v)},Q=function(v){return this.__data__.has(v)},it=typeof S=="object"&&S&&S.Object===Object&&S,ht=typeof self=="object"&&self&&self.Object===Object&&self,dt=it||ht||Function("return this")(),Ot=dt.Symbol,It=Object.prototype,Kt=It.hasOwnProperty,Ft=It.toString,Nt=Ot?Ot.toStringTag:void 0,st=function(v){var _=Kt.call(v,Nt),F=v[Nt];try{v[Nt]=void 0;var Z=!0}catch(ct){}var ot=Ft.call(v);return Z&&(_?v[Nt]=F:delete v[Nt]),ot},yt=Object.prototype.toString,kt=function(v){return yt.call(v)},ee=Ot?Ot.toStringTag:void 0,$t=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":ee&&ee in Object(v)?st(v):kt(v)},ge=function(v){var _=typeof v;return v!=null&&(_=="object"||_=="function")},Pe,tr=function(v){if(!ge(v))return!1;var _=$t(v);return _=="[object Function]"||_=="[object GeneratorFunction]"||_=="[object AsyncFunction]"||_=="[object Proxy]"},Jt=dt["__core-js_shared__"],ae=(Pe=/[^.]+$/.exec(Jt&&Jt.keys&&Jt.keys.IE_PROTO||""))?"Symbol(src)_1."+Pe:"",Se=function(v){return!!ae&&ae in v},xe=Function.prototype.toString,we=function(v){if(v!=null){try{return xe.call(v)}catch(_){}try{return v+""}catch(_){}}return""},zt=/^\[object .+?Constructor\]$/,Wt=Function.prototype,Ie=Object.prototype,Yt=Wt.toString,ie=Ie.hasOwnProperty,Oe=RegExp("^"+Yt.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=function(v){return!(!ge(v)||Se(v))&&(tr(v)?Oe:zt).test(we(v))},_e=function(v,_){return v==null?void 0:v[_]},Ge=function(v,_){var F=_e(v,_);return re(F)?F:void 0},Ct=Ge(dt,"Map"),Nr=Ge(Object,"create"),Or=function(){this.__data__=Nr?Nr(null):{},this.size=0},Ur=function(v){var _=this.has(v)&&delete this.__data__[v];return this.size-=_?1:0,_},Sr=Object.prototype.hasOwnProperty,gn=function(v){var _=this.__data__;if(Nr){var F=_[v];return F==="__lodash_hash_undefined__"?void 0:F}return Sr.call(_,v)?_[v]:void 0},Rr=Object.prototype.hasOwnProperty,ln=function(v){var _=this.__data__;return Nr?_[v]!==void 0:Rr.call(_,v)},Nn=function(v,_){var F=this.__data__;return this.size+=this.has(v)?0:1,F[v]=Nr&&_===void 0?"__lodash_hash_undefined__":_,this};function Ln(v){var _=-1,F=v==null?0:v.length;for(this.clear();++_<F;){var Z=v[_];this.set(Z[0],Z[1])}}Ln.prototype.clear=Or,Ln.prototype.delete=Ur,Ln.prototype.get=gn,Ln.prototype.has=ln,Ln.prototype.set=Nn;var fn=Ln,qe=function(){this.size=0,this.__data__={hash:new fn,map:new(Ct||j),string:new fn}},rr=function(v){var _=typeof v;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?v!=="__proto__":v===null},vr=function(v,_){var F=v.__data__;return rr(_)?F[typeof _=="string"?"string":"hash"]:F.map},Pr=function(v){var _=vr(this,v).delete(v);return this.size-=_?1:0,_},en=function(v){return vr(this,v).get(v)},pn=function(v){return vr(this,v).has(v)},rn=function(v,_){var F=vr(this,v),Z=F.size;return F.set(v,_),this.size+=F.size==Z?0:1,this};function jn(v){var _=-1,F=v==null?0:v.length;for(this.clear();++_<F;){var Z=v[_];this.set(Z[0],Z[1])}}jn.prototype.clear=qe,jn.prototype.delete=Pr,jn.prototype.get=en,jn.prototype.has=pn,jn.prototype.set=rn;var Hn=jn,oa=function(v,_){var F=this.__data__;if(F instanceof j){var Z=F.__data__;if(!Ct||Z.length<199)return Z.push([v,_]),this.size=++F.size,this;F=this.__data__=new Hn(Z)}return F.set(v,_),this.size=F.size,this};function dn(v){var _=this.__data__=new j(v);this.size=_.size}dn.prototype.clear=$,dn.prototype.delete=q,dn.prototype.get=et,dn.prototype.has=Q,dn.prototype.set=oa;var Wn=dn,Dn=function(v,_){for(var F=-1,Z=v==null?0:v.length;++F<Z&&_(v[F],F,v)!==!1;);return v},Cn=function(){try{var v=Ge(Object,"defineProperty");return v({},"",{}),v}catch(_){}}(),la=function(v,_,F){_=="__proto__"&&Cn?Cn(v,_,{configurable:!0,enumerable:!0,value:F,writable:!0}):v[_]=F},K=Object.prototype.hasOwnProperty,ft=function(v,_,F){var Z=v[_];K.call(v,_)&&A(Z,F)&&(F!==void 0||_ in v)||la(v,_,F)},rt=function(v,_,F,Z){var ot=!F;F||(F={});for(var ct=-1,gt=_.length;++ct<gt;){var bt=_[ct],Mt=Z?Z(F[bt],v[bt],bt,F,v):void 0;Mt===void 0&&(Mt=v[bt]),ot?la(F,bt,Mt):ft(F,bt,Mt)}return F},O=function(v,_){for(var F=-1,Z=Array(v);++F<v;)Z[F]=_(F);return Z},b=function(v){return v!=null&&typeof v=="object"},w=function(v){return b(v)&&$t(v)=="[object Arguments]"},X=Object.prototype,xt=X.hasOwnProperty,At=X.propertyIsEnumerable,wt=w(function(){return arguments}())?w:function(v){return b(v)&&xt.call(v,"callee")&&!At.call(v,"callee")},Pt=Array.isArray,Me=function(){return!1},ve=m(function(v,_){var F=_&&!_.nodeType&&_,Z=F&&v&&!v.nodeType&&v,ot=Z&&Z.exports===F?dt.Buffer:void 0,ct=(ot?ot.isBuffer:void 0)||Me;v.exports=ct}),He=/^(?:0|[1-9]\d*)$/,br=function(v,_){var F=typeof v;return!!(_=_==null?9007199254740991:_)&&(F=="number"||F!="symbol"&&He.test(v))&&v>-1&&v%1==0&&v<_},ar=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},mr={};mr["[object Float32Array]"]=mr["[object Float64Array]"]=mr["[object Int8Array]"]=mr["[object Int16Array]"]=mr["[object Int32Array]"]=mr["[object Uint8Array]"]=mr["[object Uint8ClampedArray]"]=mr["[object Uint16Array]"]=mr["[object Uint32Array]"]=!0,mr["[object Arguments]"]=mr["[object Array]"]=mr["[object ArrayBuffer]"]=mr["[object Boolean]"]=mr["[object DataView]"]=mr["[object Date]"]=mr["[object Error]"]=mr["[object Function]"]=mr["[object Map]"]=mr["[object Number]"]=mr["[object Object]"]=mr["[object RegExp]"]=mr["[object Set]"]=mr["[object String]"]=mr["[object WeakMap]"]=!1;var Mn=function(v){return b(v)&&ar(v.length)&&!!mr[$t(v)]},Xe=function(v){return function(_){return v(_)}},hr=m(function(v,_){var F=_&&!_.nodeType&&_,Z=F&&v&&!v.nodeType&&v,ot=Z&&Z.exports===F&&it.process,ct=function(){try{var gt=Z&&Z.require&&Z.require("util").types;return gt||ot&&ot.binding&&ot.binding("util")}catch(bt){}}();v.exports=ct}),Er=hr&&hr.isTypedArray,on=Er?Xe(Er):Mn,Wr=Object.prototype.hasOwnProperty,xa=function(v,_){var F=Pt(v),Z=!F&&wt(v),ot=!F&&!Z&&ve(v),ct=!F&&!Z&&!ot&&on(v),gt=F||Z||ot||ct,bt=gt?O(v.length,String):[],Mt=bt.length;for(var Gt in v)!_&&!Wr.call(v,Gt)||gt&&(Gt=="length"||ot&&(Gt=="offset"||Gt=="parent")||ct&&(Gt=="buffer"||Gt=="byteLength"||Gt=="byteOffset")||br(Gt,Mt))||bt.push(Gt);return bt},Ta=Object.prototype,Rn=function(v){var _=v&&v.constructor;return v===(typeof _=="function"&&_.prototype||Ta)},Jn=function(v,_){return function(F){return v(_(F))}},Ga=Jn(Object.keys,Object),Aa=Object.prototype.hasOwnProperty,an=function(v){if(!Rn(v))return Ga(v);var _=[];for(var F in Object(v))Aa.call(v,F)&&F!="constructor"&&_.push(F);return _},Vn=function(v){return v!=null&&ar(v.length)&&!tr(v)},me=function(v){return Vn(v)?xa(v):an(v)},Dt=function(v,_){return v&&rt(_,me(_),v)},fe=function(v){var _=[];if(v!=null)for(var F in Object(v))_.push(F);return _},Ae=Object.prototype.hasOwnProperty,be=function(v){if(!ge(v))return fe(v);var _=Rn(v),F=[];for(var Z in v)(Z!="constructor"||!_&&Ae.call(v,Z))&&F.push(Z);return F},De=function(v){return Vn(v)?xa(v,!0):be(v)},or=function(v,_){return v&&rt(_,De(_),v)},Fr=m(function(v,_){var F=_&&!_.nodeType&&_,Z=F&&v&&!v.nodeType&&v,ot=Z&&Z.exports===F?dt.Buffer:void 0,ct=ot?ot.allocUnsafe:void 0;v.exports=function(gt,bt){if(bt)return gt.slice();var Mt=gt.length,Gt=ct?ct(Mt):new gt.constructor(Mt);return gt.copy(Gt),Gt}}),Jr=function(v,_){var F=-1,Z=v.length;for(_||(_=Array(Z));++F<Z;)_[F]=v[F];return _},Pn=function(v,_){for(var F=-1,Z=v==null?0:v.length,ot=0,ct=[];++F<Z;){var gt=v[F];_(gt,F,v)&&(ct[ot++]=gt)}return ct},Bn=function(){return[]},Zn=Object.prototype.propertyIsEnumerable,ba=Object.getOwnPropertySymbols,Ca=ba?function(v){return v==null?[]:(v=Object(v),Pn(ba(v),function(_){return Zn.call(v,_)}))}:Bn,li=function(v,_){return rt(v,Ca(v),_)},ta=function(v,_){for(var F=-1,Z=_.length,ot=v.length;++F<Z;)v[ot+F]=_[F];return v},fi=Jn(Object.getPrototypeOf,Object),Co=Object.getOwnPropertySymbols?function(v){for(var _=[];v;)ta(_,Ca(v)),v=fi(v);return _}:Bn,La=function(v,_){return rt(v,Co(v),_)},xi=function(v,_,F){var Z=_(v);return Pt(v)?Z:ta(Z,F(v))},so=function(v){return xi(v,me,Ca)},To=function(v){return xi(v,De,Co)},bo=Ge(dt,"DataView"),uo=Ge(dt,"Promise"),Hi=Ge(dt,"Set"),ds=Ge(dt,"WeakMap"),zi=we(bo),Ui=we(Ct),gs=we(uo),Ms=we(Hi),Go=we(ds),_o=$t;(bo&&_o(new bo(new ArrayBuffer(1)))!="[object DataView]"||Ct&&_o(new Ct)!="[object Map]"||uo&&_o(uo.resolve())!="[object Promise]"||Hi&&_o(new Hi)!="[object Set]"||ds&&_o(new ds)!="[object WeakMap]")&&(_o=function(v){var _=$t(v),F=_=="[object Object]"?v.constructor:void 0,Z=F?we(F):"";if(Z)switch(Z){case zi:return"[object DataView]";case Ui:return"[object Map]";case gs:return"[object Promise]";case Ms:return"[object Set]";case Go:return"[object WeakMap]"}return _});var Io=_o,$s=Object.prototype.hasOwnProperty,Yn=function(v){var _=v.length,F=new v.constructor(_);return _&&typeof v[0]=="string"&&$s.call(v,"index")&&(F.index=v.index,F.input=v.input),F},So=dt.Uint8Array,Oo=function(v){var _=new v.constructor(v.byteLength);return new So(_).set(new So(v)),_},Wi=function(v,_){var F=_?Oo(v.buffer):v.buffer;return new v.constructor(F,v.byteOffset,v.byteLength)},zn=/\w*$/,Lo=function(v){var _=new v.constructor(v.source,zn.exec(v));return _.lastIndex=v.lastIndex,_},Ai=Ot?Ot.prototype:void 0,zo=Ai?Ai.valueOf:void 0,Uo=function(v){return zo?Object(zo.call(v)):{}},ps=function(v,_){var F=_?Oo(v.buffer):v.buffer;return new v.constructor(F,v.byteOffset,v.length)},eo=function(v,_,F){var Z=v.constructor;switch(_){case"[object ArrayBuffer]":return Oo(v);case"[object Boolean]":case"[object Date]":return new Z(+v);case"[object DataView]":return Wi(v,F);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ps(v,F);case"[object Map]":return new Z;case"[object Number]":case"[object String]":return new Z(v);case"[object RegExp]":return Lo(v);case"[object Set]":return new Z;case"[object Symbol]":return Uo(v)}},ro=Object.create,ei=function(){function v(){}return function(_){if(!ge(_))return{};if(ro)return ro(_);v.prototype=_;var F=new v;return v.prototype=void 0,F}}(),fo=function(v){return typeof v.constructor!="function"||Rn(v)?{}:ei(fi(v))},Do=function(v){return b(v)&&Io(v)=="[object Map]"},Wo=hr&&hr.isMap,No=Wo?Xe(Wo):Do,is=function(v){return b(v)&&Io(v)=="[object Set]"},Xo=hr&&hr.isSet,Jo=Xo?Xe(Xo):is,Xa={};Xa["[object Arguments]"]=Xa["[object Array]"]=Xa["[object ArrayBuffer]"]=Xa["[object DataView]"]=Xa["[object Boolean]"]=Xa["[object Date]"]=Xa["[object Float32Array]"]=Xa["[object Float64Array]"]=Xa["[object Int8Array]"]=Xa["[object Int16Array]"]=Xa["[object Int32Array]"]=Xa["[object Map]"]=Xa["[object Number]"]=Xa["[object Object]"]=Xa["[object RegExp]"]=Xa["[object Set]"]=Xa["[object String]"]=Xa["[object Symbol]"]=Xa["[object Uint8Array]"]=Xa["[object Uint8ClampedArray]"]=Xa["[object Uint16Array]"]=Xa["[object Uint32Array]"]=!0,Xa["[object Error]"]=Xa["[object Function]"]=Xa["[object WeakMap]"]=!1;var As=function v(_,F,Z,ot,ct,gt){var bt,Mt=1&F,Gt=2&F,te=4&F;if(Z&&(bt=ct?Z(_,ot,ct,gt):Z(_)),bt!==void 0)return bt;if(!ge(_))return _;var Zt=Pt(_);if(Zt){if(bt=Yn(_),!Mt)return Jr(_,bt)}else{var ye=Io(_),We=ye=="[object Function]"||ye=="[object GeneratorFunction]";if(ve(_))return Fr(_,Mt);if(ye=="[object Object]"||ye=="[object Arguments]"||We&&!ct){if(bt=Gt||We?{}:fo(_),!Mt)return Gt?La(_,or(bt,_)):li(_,Dt(bt,_))}else{if(!Xa[ye])return ct?_:{};bt=eo(_,ye,Mt)}}gt||(gt=new Wn);var wr=gt.get(_);if(wr)return wr;gt.set(_,bt),Jo(_)?_.forEach(function(Je){bt.add(v(Je,F,Z,Je,_,gt))}):No(_)&&_.forEach(function(Je,Qe){bt.set(Qe,v(Je,F,Z,Qe,_,gt))});var Ze=Zt?void 0:(te?Gt?To:so:Gt?De:me)(_);return Dn(Ze||_,function(Je,Qe){Ze&&(Je=_[Qe=Je]),ft(bt,Qe,v(Je,F,Z,Qe,_,gt))}),bt},iu=function(v){return As(v,4)},Xi=function(v){return function(){return v}},os=function(v){return function(_,F,Z){for(var ot=-1,ct=Object(_),gt=Z(_),bt=gt.length;bt--;){var Mt=gt[v?bt:++ot];if(F(ct[Mt],Mt,ct)===!1)break}return _}}(),Eo=function(v,_){return v&&os(v,_,me)},Yi=function(v,_){return function(F,Z){if(F==null)return F;if(!Vn(F))return v(F,Z);for(var ot=F.length,ct=_?ot:-1,gt=Object(F);(_?ct--:++ct<ot)&&Z(gt[ct],ct,gt)!==!1;);return F}}(Eo),co=function(v){return v},pa=function(v){return typeof v=="function"?v:co},ja=function(v,_){return(Pt(v)?Dn:Yi)(v,pa(_))},yi=ja,no=function(v,_){var F=[];return Yi(v,function(Z,ot,ct){_(Z,ot,ct)&&F.push(Z)}),F},ki=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},Ki=function(v){return this.__data__.has(v)};function Yo(v){var _=-1,F=v==null?0:v.length;for(this.__data__=new Hn;++_<F;)this.add(v[_])}Yo.prototype.add=Yo.prototype.push=ki,Yo.prototype.has=Ki;var wo=Yo,ts=function(v,_){for(var F=-1,Z=v==null?0:v.length;++F<Z;)if(_(v[F],F,v))return!0;return!1},lo=function(v,_){return v.has(_)},Rs=function(v,_,F,Z,ot,ct){var gt=1&F,bt=v.length,Mt=_.length;if(bt!=Mt&&!(gt&&Mt>bt))return!1;var Gt=ct.get(v),te=ct.get(_);if(Gt&&te)return Gt==_&&te==v;var Zt=-1,ye=!0,We=2&F?new wo:void 0;for(ct.set(v,_),ct.set(_,v);++Zt<bt;){var wr=v[Zt],Ze=_[Zt];if(Z)var Je=gt?Z(Ze,wr,Zt,_,v,ct):Z(wr,Ze,Zt,v,_,ct);if(Je!==void 0){if(Je)continue;ye=!1;break}if(We){if(!ts(_,function(Qe,jr){if(!lo(We,jr)&&(wr===Qe||ot(wr,Qe,F,Z,ct)))return We.push(jr)})){ye=!1;break}}else if(wr!==Ze&&!ot(wr,Ze,F,Z,ct)){ye=!1;break}}return ct.delete(v),ct.delete(_),ye},ou=function(v){var _=-1,F=Array(v.size);return v.forEach(function(Z,ot){F[++_]=[ot,Z]}),F},Cs=function(v){var _=-1,F=Array(v.size);return v.forEach(function(Z){F[++_]=Z}),F},ci=Ot?Ot.prototype:void 0,Po=ci?ci.valueOf:void 0,Wu=function(v,_,F,Z,ot,ct,gt){switch(F){case"[object DataView]":if(v.byteLength!=_.byteLength||v.byteOffset!=_.byteOffset)return!1;v=v.buffer,_=_.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=_.byteLength||!ct(new So(v),new So(_)));case"[object Boolean]":case"[object Date]":case"[object Number]":return A(+v,+_);case"[object Error]":return v.name==_.name&&v.message==_.message;case"[object RegExp]":case"[object String]":return v==_+"";case"[object Map]":var bt=ou;case"[object Set]":var Mt=1&Z;if(bt||(bt=Cs),v.size!=_.size&&!Mt)return!1;var Gt=gt.get(v);if(Gt)return Gt==_;Z|=2,gt.set(v,_);var te=Rs(bt(v),bt(_),Z,ot,ct,gt);return gt.delete(v),te;case"[object Symbol]":if(Po)return Po.call(v)==Po.call(_)}return!1},ho=Object.prototype.hasOwnProperty,Bs=function(v,_,F,Z,ot,ct){var gt=1&F,bt=so(v),Mt=bt.length;if(Mt!=so(_).length&&!gt)return!1;for(var Gt=Mt;Gt--;){var te=bt[Gt];if(!(gt?te in _:ho.call(_,te)))return!1}var Zt=ct.get(v),ye=ct.get(_);if(Zt&&ye)return Zt==_&&ye==v;var We=!0;ct.set(v,_),ct.set(_,v);for(var wr=gt;++Gt<Mt;){var Ze=v[te=bt[Gt]],Je=_[te];if(Z)var Qe=gt?Z(Je,Ze,te,_,v,ct):Z(Ze,Je,te,v,_,ct);if(!(Qe===void 0?Ze===Je||ot(Ze,Je,F,Z,ct):Qe)){We=!1;break}wr||(wr=te=="constructor")}if(We&&!wr){var jr=v.constructor,hn=_.constructor;jr==hn||!("constructor"in v)||!("constructor"in _)||typeof jr=="function"&&jr instanceof jr&&typeof hn=="function"&&hn instanceof hn||(We=!1)}return ct.delete(v),ct.delete(_),We},Ts=Object.prototype.hasOwnProperty,Vo=function(v,_,F,Z,ot,ct){var gt=Pt(v),bt=Pt(_),Mt=gt?"[object Array]":Io(v),Gt=bt?"[object Array]":Io(_),te=(Mt=Mt=="[object Arguments]"?"[object Object]":Mt)=="[object Object]",Zt=(Gt=Gt=="[object Arguments]"?"[object Object]":Gt)=="[object Object]",ye=Mt==Gt;if(ye&&ve(v)){if(!ve(_))return!1;gt=!0,te=!1}if(ye&&!te)return ct||(ct=new Wn),gt||on(v)?Rs(v,_,F,Z,ot,ct):Wu(v,_,Mt,F,Z,ot,ct);if(!(1&F)){var We=te&&Ts.call(v,"__wrapped__"),wr=Zt&&Ts.call(_,"__wrapped__");if(We||wr){var Ze=We?v.value():v,Je=wr?_.value():_;return ct||(ct=new Wn),ot(Ze,Je,F,Z,ct)}}return!!ye&&(ct||(ct=new Wn),Bs(v,_,F,Z,ot,ct))},Fs=function v(_,F,Z,ot,ct){return _===F||(_==null||F==null||!b(_)&&!b(F)?_!=_&&F!=F:Vo(_,F,Z,ot,v,ct))},ss=function(v,_,F,Z){var ot=F.length,ct=ot,gt=!Z;if(v==null)return!ct;for(v=Object(v);ot--;){var bt=F[ot];if(gt&&bt[2]?bt[1]!==v[bt[0]]:!(bt[0]in v))return!1}for(;++ot<ct;){var Mt=(bt=F[ot])[0],Gt=v[Mt],te=bt[1];if(gt&&bt[2]){if(Gt===void 0&&!(Mt in v))return!1}else{var Zt=new Wn;if(Z)var ye=Z(Gt,te,Mt,v,_,Zt);if(!(ye===void 0?Fs(te,Gt,3,Z,Zt):ye))return!1}}return!0},jo=function(v){return v==v&&!ge(v)},us=function(v){for(var _=me(v),F=_.length;F--;){var Z=_[F],ot=v[Z];_[F]=[Z,ot,jo(ot)]}return _},su=function(v,_){return function(F){return F!=null&&F[v]===_&&(_!==void 0||v in Object(F))}},Gs=function(v){var _=us(v);return _.length==1&&_[0][2]?su(_[0][0],_[0][1]):function(F){return F===v||ss(F,v,_)}},fs=function(v){return typeof v=="symbol"||b(v)&&$t(v)=="[object Symbol]"},Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jt=/^\w*$/,ze=function(v,_){if(Pt(v))return!1;var F=typeof v;return!(F!="number"&&F!="symbol"&&F!="boolean"&&v!=null&&!fs(v))||jt.test(v)||!Tt.test(v)||_!=null&&v in Object(_)};function Ke(v,_){if(typeof v!="function"||_!=null&&typeof _!="function")throw new TypeError("Expected a function");var F=function(){var Z=arguments,ot=_?_.apply(this,Z):Z[0],ct=F.cache;if(ct.has(ot))return ct.get(ot);var gt=v.apply(this,Z);return F.cache=ct.set(ot,gt)||ct,gt};return F.cache=new(Ke.Cache||Hn),F}Ke.Cache=Hn;var Cr=Ke,cn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mn=/\\(\\)?/g,aa=function(v){var _=Cr(v,function(Z){return F.size===500&&F.clear(),Z}),F=_.cache;return _}(function(v){var _=[];return v.charCodeAt(0)===46&&_.push(""),v.replace(cn,function(F,Z,ot,ct){_.push(ot?ct.replace(mn,"$1"):Z||F)}),_}),ai=function(v,_){for(var F=-1,Z=v==null?0:v.length,ot=Array(Z);++F<Z;)ot[F]=_(v[F],F,v);return ot},Zi=Ot?Ot.prototype:void 0,ao=Zi?Zi.toString:void 0,zs=function v(_){if(typeof _=="string")return _;if(Pt(_))return ai(_,v)+"";if(fs(_))return ao?ao.call(_):"";var F=_+"";return F=="0"&&1/_==-1/0?"-0":F},Mu=function(v){return v==null?"":zs(v)},Ri=function(v,_){return Pt(v)?v:ze(v,_)?[v]:aa(Mu(v))},vo=function(v){if(typeof v=="string"||fs(v))return v;var _=v+"";return _=="0"&&1/v==-1/0?"-0":_},qs=function(v,_){for(var F=0,Z=(_=Ri(_,v)).length;v!=null&&F<Z;)v=v[vo(_[F++])];return F&&F==Z?v:void 0},Xu=function(v,_,F){var Z=v==null?void 0:qs(v,_);return Z===void 0?F:Z},Au=function(v,_){return v!=null&&_ in Object(v)},uu=function(v,_,F){for(var Z=-1,ot=(_=Ri(_,v)).length,ct=!1;++Z<ot;){var gt=vo(_[Z]);if(!(ct=v!=null&&F(v,gt)))break;v=v[gt]}return ct||++Z!=ot?ct:!!(ot=v==null?0:v.length)&&ar(ot)&&br(gt,ot)&&(Pt(v)||wt(v))},Qs=function(v,_){return v!=null&&uu(v,_,Au)},fu=function(v,_){return ze(v)&&jo(_)?su(vo(v),_):function(F){var Z=Xu(F,v);return Z===void 0&&Z===_?Qs(F,v):Fs(_,Z,3)}},Is=function(v){return function(_){return _==null?void 0:_[v]}},Js=function(v){return function(_){return qs(_,v)}},cs=function(v){return ze(v)?Is(vo(v)):Js(v)},Mo=function(v){return typeof v=="function"?v:v==null?co:typeof v=="object"?Pt(v)?fu(v[0],v[1]):Gs(v):cs(v)},rf=function(v,_){return(Pt(v)?Pn:no)(v,Mo(_))},kf=Object.prototype.hasOwnProperty,Rf=function(v,_){return v!=null&&kf.call(v,_)},Os=function(v,_){return v!=null&&uu(v,_,Rf)},Bf=Object.prototype.hasOwnProperty,h=function(v){if(v==null)return!0;if(Vn(v)&&(Pt(v)||typeof v=="string"||typeof v.splice=="function"||ve(v)||on(v)||wt(v)))return!v.length;var _=Io(v);if(_=="[object Map]"||_=="[object Set]")return!v.size;if(Rn(v))return!an(v).length;for(var F in v)if(Bf.call(v,F))return!1;return!0},T=function(v){return v===void 0},vt=function(v,_){var F=-1,Z=Vn(v)?Array(v.length):[];return Yi(v,function(ot,ct,gt){Z[++F]=_(ot,ct,gt)}),Z},Et=function(v,_){return(Pt(v)?ai:vt)(v,Mo(_))},Lt=function(v,_,F,Z){var ot=-1,ct=v==null?0:v.length;for(Z&&ct&&(F=v[++ot]);++ot<ct;)F=_(F,v[ot],ot,v);return F},Xt=function(v,_,F,Z,ot){return ot(v,function(ct,gt,bt){F=Z?(Z=!1,ct):_(F,ct,gt,bt)}),F},Vt=function(v,_,F){var Z=Pt(v)?Lt:Xt,ot=arguments.length<3;return Z(v,Mo(_),F,ot,Yi)},ue=function(v){return typeof v=="string"||!Pt(v)&&b(v)&&$t(v)=="[object String]"},he=Is("length"),Ce=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ye=function(v){return Ce.test(v)},pr="[\\ud800-\\udfff]",xr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",gr="\\ud83c[\\udffb-\\udfff]",Zr="[^\\ud800-\\udfff]",qr="(?:\\ud83c[\\udde6-\\uddff]){2}",Tr="[\\ud800-\\udbff][\\udc00-\\udfff]",_n="(?:"+xr+"|"+gr+")?",Ea="[\\ufe0e\\ufe0f]?"+_n+("(?:\\u200d(?:"+[Zr,qr,Tr].join("|")+")[\\ufe0e\\ufe0f]?"+_n+")*"),wa="(?:"+[Zr+xr+"?",xr,qr,Tr,pr].join("|")+")",ha=RegExp(gr+"(?="+gr+")|"+wa+Ea,"g"),qn=function(v){for(var _=ha.lastIndex=0;ha.test(v);)++_;return _},sa=function(v){return Ye(v)?qn(v):he(v)},Ni=function(v){if(v==null)return 0;if(Vn(v))return ue(v)?sa(v):v.length;var _=Io(v);return _=="[object Map]"||_=="[object Set]"?v.size:an(v).length},Ci=function(v,_,F){var Z=Pt(v),ot=Z||ve(v)||on(v);if(_=Mo(_),F==null){var ct=v&&v.constructor;F=ot?Z?new ct:[]:ge(v)&&tr(ct)?ei(fi(v)):{}}return(ot?Dn:Eo)(v,function(gt,bt,Mt){return _(F,gt,bt,Mt)}),F},_i=Ot?Ot.isConcatSpreadable:void 0,Ti=function(v){return Pt(v)||wt(v)||!!(_i&&v&&v[_i])},Ii=function v(_,F,Z,ot,ct){var gt=-1,bt=_.length;for(Z||(Z=Ti),ct||(ct=[]);++gt<bt;){var Mt=_[gt];F>0&&Z(Mt)?F>1?v(Mt,F-1,Z,ot,ct):ta(ct,Mt):ot||(ct[ct.length]=Mt)}return ct},Bi=function(v,_,F){switch(F.length){case 0:return v.call(_);case 1:return v.call(_,F[0]);case 2:return v.call(_,F[0],F[1]);case 3:return v.call(_,F[0],F[1],F[2])}return v.apply(_,F)},$i=Math.max,za=function(v,_,F){return _=$i(_===void 0?v.length-1:_,0),function(){for(var Z=arguments,ot=-1,ct=$i(Z.length-_,0),gt=Array(ct);++ot<ct;)gt[ot]=Z[_+ot];ot=-1;for(var bt=Array(_+1);++ot<_;)bt[ot]=Z[ot];return bt[_]=F(gt),Bi(v,this,bt)}},ii=Cn?function(v,_){return Cn(v,"toString",{configurable:!0,enumerable:!1,value:Xi(_),writable:!0})}:co,ls=Date.now,ys=function(v){var _=0,F=0;return function(){var Z=ls(),ot=16-(Z-F);if(F=Z,ot>0){if(++_>=800)return arguments[0]}else _=0;return v.apply(void 0,arguments)}}(ii),ko=function(v,_){return ys(za(v,_,co),v+"")},Cu=function(v,_,F,Z){for(var ot=v.length,ct=F+(Z?1:-1);Z?ct--:++ct<ot;)if(_(v[ct],ct,v))return ct;return-1},Ff=function(v){return v!=v},xc=function(v,_,F){for(var Z=F-1,ot=v.length;++Z<ot;)if(v[Z]===_)return Z;return-1},bc=function(v,_,F){return _==_?xc(v,_,F):Cu(v,Ff,F)},Ec=function(v,_){return!!(v!=null&&v.length)&&bc(v,_,0)>-1},Gf=function(v,_,F){for(var Z=-1,ot=v==null?0:v.length;++Z<ot;)if(F(_,v[Z]))return!0;return!1},zf=function(){},wc=Hi&&1/Cs(new Hi([,-0]))[1]==1/0?function(v){return new Hi(v)}:zf,nf=function(v,_,F){var Z=-1,ot=Ec,ct=v.length,gt=!0,bt=[],Mt=bt;if(F)gt=!1,ot=Gf;else if(ct>=200){var Gt=_?null:wc(v);if(Gt)return Cs(Gt);gt=!1,ot=lo,Mt=new wo}else Mt=_?[]:bt;t:for(;++Z<ct;){var te=v[Z],Zt=_?_(te):te;if(te=F||te!==0?te:0,gt&&Zt==Zt){for(var ye=Mt.length;ye--;)if(Mt[ye]===Zt)continue t;_&&Mt.push(Zt),bt.push(te)}else ot(Mt,Zt,F)||(Mt!==bt&&Mt.push(Zt),bt.push(te))}return bt},af=function(v){return b(v)&&Vn(v)},_c=ko(function(v){return nf(Ii(v,1,af,!0))}),of=function(v,_){return ai(_,function(F){return v[F]})},cu,Sc=function(v){return v==null?[]:of(v,me(v))};try{cu={clone:iu,constant:Xi,each:yi,filter:rf,has:Os,isArray:Pt,isEmpty:h,isFunction:tr,isUndefined:T,keys:me,map:Et,reduce:Vt,size:Ni,transform:Ci,union:_c,values:Sc}}catch(v){}cu||(cu=window._);var wn=cu,Tu=Ua;function Ua(v){this._isDirected=!wn.has(v,"directed")||v.directed,this._isMultigraph=!!wn.has(v,"multigraph")&&v.multigraph,this._isCompound=!!wn.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=wn.constant(void 0),this._defaultEdgeLabelFn=wn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function sf(v,_){v[_]?v[_]++:v[_]=1}function Uf(v,_){--v[_]||delete v[_]}function Us(v,_,F,Z){var ot=""+_,ct=""+F;if(!v&&ot>ct){var gt=ot;ot=ct,ct=gt}return ot+""+ct+""+(wn.isUndefined(Z)?"\0":Z)}function Wf(v,_,F,Z){var ot=""+_,ct=""+F;if(!v&&ot>ct){var gt=ot;ot=ct,ct=gt}var bt={v:ot,w:ct};return Z&&(bt.name=Z),bt}function lu(v,_){return Us(v,_.v,_.w,_.name)}Ua.prototype._nodeCount=0,Ua.prototype._edgeCount=0,Ua.prototype.isDirected=function(){return this._isDirected},Ua.prototype.isMultigraph=function(){return this._isMultigraph},Ua.prototype.isCompound=function(){return this._isCompound},Ua.prototype.setGraph=function(v){return this._label=v,this},Ua.prototype.graph=function(){return this._label},Ua.prototype.setDefaultNodeLabel=function(v){return wn.isFunction(v)||(v=wn.constant(v)),this._defaultNodeLabelFn=v,this},Ua.prototype.nodeCount=function(){return this._nodeCount},Ua.prototype.nodes=function(){return wn.keys(this._nodes)},Ua.prototype.sources=function(){var v=this;return wn.filter(this.nodes(),function(_){return wn.isEmpty(v._in[_])})},Ua.prototype.sinks=function(){var v=this;return wn.filter(this.nodes(),function(_){return wn.isEmpty(v._out[_])})},Ua.prototype.setNodes=function(v,_){var F=arguments,Z=this;return wn.each(v,function(ot){F.length>1?Z.setNode(ot,_):Z.setNode(ot)}),this},Ua.prototype.setNode=function(v,_){return wn.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=_),this):(this._nodes[v]=arguments.length>1?_:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},Ua.prototype.node=function(v){return this._nodes[v]},Ua.prototype.hasNode=function(v){return wn.has(this._nodes,v)},Ua.prototype.removeNode=function(v){var _=this;if(wn.has(this._nodes,v)){var F=function(Z){_.removeEdge(_._edgeObjs[Z])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],wn.each(this.children(v),function(Z){_.setParent(Z)}),delete this._children[v]),wn.each(wn.keys(this._in[v]),F),delete this._in[v],delete this._preds[v],wn.each(wn.keys(this._out[v]),F),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},Ua.prototype.setParent=function(v,_){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(wn.isUndefined(_))_="\0";else{for(var F=_+="";!wn.isUndefined(F);F=this.parent(F))if(F===v)throw new Error("Setting "+_+" as parent of "+v+" would create a cycle");this.setNode(_)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=_,this._children[_][v]=!0,this},Ua.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},Ua.prototype.parent=function(v){if(this._isCompound){var _=this._parent[v];if(_!=="\0")return _}},Ua.prototype.children=function(v){if(wn.isUndefined(v)&&(v="\0"),this._isCompound){var _=this._children[v];if(_)return wn.keys(_)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},Ua.prototype.predecessors=function(v){var _=this._preds[v];if(_)return wn.keys(_)},Ua.prototype.successors=function(v){var _=this._sucs[v];if(_)return wn.keys(_)},Ua.prototype.neighbors=function(v){var _=this.predecessors(v);if(_)return wn.union(_,this.successors(v))},Ua.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},Ua.prototype.filterNodes=function(v){var _=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});_.setGraph(this.graph());var F=this;wn.each(this._nodes,function(ct,gt){v(gt)&&_.setNode(gt,ct)}),wn.each(this._edgeObjs,function(ct){_.hasNode(ct.v)&&_.hasNode(ct.w)&&_.setEdge(ct,F.edge(ct))});var Z={};function ot(ct){var gt=F.parent(ct);return gt===void 0||_.hasNode(gt)?(Z[ct]=gt,gt):gt in Z?Z[gt]:ot(gt)}return this._isCompound&&wn.each(_.nodes(),function(ct){_.setParent(ct,ot(ct))}),_},Ua.prototype.setDefaultEdgeLabel=function(v){return wn.isFunction(v)||(v=wn.constant(v)),this._defaultEdgeLabelFn=v,this},Ua.prototype.edgeCount=function(){return this._edgeCount},Ua.prototype.edges=function(){return wn.values(this._edgeObjs)},Ua.prototype.setPath=function(v,_){var F=this,Z=arguments;return wn.reduce(v,function(ot,ct){return Z.length>1?F.setEdge(ot,ct,_):F.setEdge(ot,ct),ct}),this},Ua.prototype.setEdge=function(){var v,_,F,Z,ot=!1,ct=arguments[0];typeof ct=="object"&&ct!==null&&"v"in ct?(v=ct.v,_=ct.w,F=ct.name,arguments.length===2&&(Z=arguments[1],ot=!0)):(v=ct,_=arguments[1],F=arguments[3],arguments.length>2&&(Z=arguments[2],ot=!0)),v=""+v,_=""+_,wn.isUndefined(F)||(F=""+F);var gt=Us(this._isDirected,v,_,F);if(wn.has(this._edgeLabels,gt))return ot&&(this._edgeLabels[gt]=Z),this;if(!wn.isUndefined(F)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(_),this._edgeLabels[gt]=ot?Z:this._defaultEdgeLabelFn(v,_,F);var bt=Wf(this._isDirected,v,_,F);return v=bt.v,_=bt.w,Object.freeze(bt),this._edgeObjs[gt]=bt,sf(this._preds[_],v),sf(this._sucs[v],_),this._in[_][gt]=bt,this._out[v][gt]=bt,this._edgeCount++,this},Ua.prototype.edge=function(v,_,F){var Z=arguments.length===1?lu(this._isDirected,arguments[0]):Us(this._isDirected,v,_,F);return this._edgeLabels[Z]},Ua.prototype.hasEdge=function(v,_,F){var Z=arguments.length===1?lu(this._isDirected,arguments[0]):Us(this._isDirected,v,_,F);return wn.has(this._edgeLabels,Z)},Ua.prototype.removeEdge=function(v,_,F){var Z=arguments.length===1?lu(this._isDirected,arguments[0]):Us(this._isDirected,v,_,F),ot=this._edgeObjs[Z];return ot&&(v=ot.v,_=ot.w,delete this._edgeLabels[Z],delete this._edgeObjs[Z],Uf(this._preds[_],v),Uf(this._sucs[v],_),delete this._in[_][Z],delete this._out[v][Z],this._edgeCount--),this},Ua.prototype.inEdges=function(v,_){var F=this._in[v];if(F){var Z=wn.values(F);return _?wn.filter(Z,function(ot){return ot.v===_}):Z}},Ua.prototype.outEdges=function(v,_){var F=this._out[v];if(F){var Z=wn.values(F);return _?wn.filter(Z,function(ot){return ot.w===_}):Z}},Ua.prototype.nodeEdges=function(v,_){var F=this.inEdges(v,_);if(F)return F.concat(this.outEdges(v,_))};var Xf={Graph:Tu,version:"2.1.8"},Yf={write:function(v){var _={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:Vf(v),edges:ms(v)};return wn.isUndefined(v.graph())||(_.value=wn.clone(v.graph())),_},read:function(v){var _=new Tu(v.options).setGraph(v.value);return wn.each(v.nodes,function(F){_.setNode(F.v,F.value),F.parent&&_.setParent(F.v,F.parent)}),wn.each(v.edges,function(F){_.setEdge({v:F.v,w:F.w,name:F.name},F.value)}),_}};function Vf(v){return wn.map(v.nodes(),function(_){var F=v.node(_),Z=v.parent(_),ot={v:_};return wn.isUndefined(F)||(ot.value=F),wn.isUndefined(Z)||(ot.parent=Z),ot})}function ms(v){return wn.map(v.edges(),function(_){var F=v.edge(_),Z={v:_.v,w:_.w};return wn.isUndefined(_.name)||(Z.name=_.name),wn.isUndefined(F)||(Z.value=F),Z})}var jf=function(v){var _,F={},Z=[];function ot(ct){wn.has(F,ct)||(F[ct]=!0,_.push(ct),wn.each(v.successors(ct),ot),wn.each(v.predecessors(ct),ot))}return wn.each(v.nodes(),function(ct){_=[],ot(ct),_.length&&Z.push(_)}),Z},Hf=bi;function bi(){this._arr=[],this._keyIndices={}}bi.prototype.size=function(){return this._arr.length},bi.prototype.keys=function(){return this._arr.map(function(v){return v.key})},bi.prototype.has=function(v){return wn.has(this._keyIndices,v)},bi.prototype.priority=function(v){var _=this._keyIndices[v];if(_!==void 0)return this._arr[_].priority},bi.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},bi.prototype.add=function(v,_){var F=this._keyIndices;if(v=String(v),!wn.has(F,v)){var Z=this._arr,ot=Z.length;return F[v]=ot,Z.push({key:v,priority:_}),this._decrease(ot),!0}return!1},bi.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},bi.prototype.decrease=function(v,_){var F=this._keyIndices[v];if(_>this._arr[F].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[F].priority+" New: "+_);this._arr[F].priority=_,this._decrease(F)},bi.prototype._heapify=function(v){var _=this._arr,F=2*v,Z=F+1,ot=v;F<_.length&&(ot=_[F].priority<_[ot].priority?F:ot,Z<_.length&&(ot=_[Z].priority<_[ot].priority?Z:ot),ot!==v&&(this._swap(v,ot),this._heapify(ot)))},bi.prototype._decrease=function(v){for(var _,F=this._arr,Z=F[v].priority;v!==0&&!(F[_=v>>1].priority<Z);)this._swap(v,_),v=_},bi.prototype._swap=function(v,_){var F=this._arr,Z=this._keyIndices,ot=F[v],ct=F[_];F[v]=ct,F[_]=ot,Z[ct.key]=v,Z[ot.key]=_};var Yu=function(v,_,F,Z){return function(ot,ct,gt,bt){var Mt,Gt,te={},Zt=new Hf,ye=function(We){var wr=We.v!==Mt?We.v:We.w,Ze=te[wr],Je=gt(We),Qe=Gt.distance+Je;if(Je<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+We+" Weight: "+Je);Qe<Ze.distance&&(Ze.distance=Qe,Ze.predecessor=Mt,Zt.decrease(wr,Qe))};for(ot.nodes().forEach(function(We){var wr=We===ct?0:Number.POSITIVE_INFINITY;te[We]={distance:wr},Zt.add(We,wr)});Zt.size()>0&&(Mt=Zt.removeMin(),(Gt=te[Mt]).distance!==Number.POSITIVE_INFINITY);)bt(Mt).forEach(ye);return te}(v,String(_),F||xs,Z||function(ot){return v.outEdges(ot)})},xs=wn.constant(1),tt=function(v,_,F){return wn.transform(v.nodes(),function(Z,ot){Z[ot]=Yu(v,ot,_,F)},{})},pt=function(v){var _=0,F=[],Z={},ot=[];function ct(gt){var bt=Z[gt]={onStack:!0,lowlink:_,index:_++};if(F.push(gt),v.successors(gt).forEach(function(te){wn.has(Z,te)?Z[te].onStack&&(bt.lowlink=Math.min(bt.lowlink,Z[te].index)):(ct(te),bt.lowlink=Math.min(bt.lowlink,Z[te].lowlink))}),bt.lowlink===bt.index){var Mt,Gt=[];do Mt=F.pop(),Z[Mt].onStack=!1,Gt.push(Mt);while(gt!==Mt);ot.push(Gt)}}return v.nodes().forEach(function(gt){wn.has(Z,gt)||ct(gt)}),ot},St=function(v){return wn.filter(pt(v),function(_){return _.length>1||_.length===1&&v.hasEdge(_[0],_[0])})},Ut=function(v,_,F){return function(Z,ot,ct){var gt={},bt=Z.nodes();return bt.forEach(function(Mt){gt[Mt]={},gt[Mt][Mt]={distance:0},bt.forEach(function(Gt){Mt!==Gt&&(gt[Mt][Gt]={distance:Number.POSITIVE_INFINITY})}),ct(Mt).forEach(function(Gt){var te=Gt.v===Mt?Gt.w:Gt.v,Zt=ot(Gt);gt[Mt][te]={distance:Zt,predecessor:Mt}})}),bt.forEach(function(Mt){var Gt=gt[Mt];bt.forEach(function(te){var Zt=gt[te];bt.forEach(function(ye){var We=Zt[Mt],wr=Gt[ye],Ze=Zt[ye],Je=We.distance+wr.distance;Je<Ze.distance&&(Ze.distance=Je,Ze.predecessor=wr.predecessor)})})}),gt}(v,_||ne,F||function(Z){return v.outEdges(Z)})},ne=wn.constant(1),Be=Ue;function Ue(v){var _={},F={},Z=[];if(wn.each(v.sinks(),function ot(ct){if(wn.has(F,ct))throw new sr;wn.has(_,ct)||(F[ct]=!0,_[ct]=!0,wn.each(v.predecessors(ct),ot),delete F[ct],Z.push(ct))}),wn.size(_)!==v.nodeCount())throw new sr;return Z}function sr(){}Ue.CycleException=sr,sr.prototype=new Error;var Br=function(v,_,F){wn.isArray(_)||(_=[_]);var Z=(v.isDirected()?v.successors:v.neighbors).bind(v),ot=[],ct={};return wn.each(_,function(gt){if(!v.hasNode(gt))throw new Error("Graph does not have node: "+gt);Hr(v,gt,F==="post",ct,Z,ot)}),ot};function Hr(v,_,F,Z,ot,ct){wn.has(Z,_)||(Z[_]=!0,F||ct.push(_),wn.each(ot(_),function(gt){Hr(v,gt,F,Z,ot,ct)}),F&&ct.push(_))}var xn,Tn={Graph:Xf.Graph,json:Yf,alg:{components:jf,dijkstra:Yu,dijkstraAll:tt,findCycles:St,floydWarshall:Ut,isAcyclic:function(v){try{Be(v)}catch(_){if(_ instanceof Be.CycleException)return!1;throw _}return!0},postorder:function(v,_){return Br(v,_,"post")},preorder:function(v,_){return Br(v,_,"pre")},prim:function(v,_){var F,Z=new Tu,ot={},ct=new Hf;function gt(Mt){var Gt=Mt.v===F?Mt.w:Mt.v,te=ct.priority(Gt);if(te!==void 0){var Zt=_(Mt);Zt<te&&(ot[Gt]=F,ct.decrease(Gt,Zt))}}if(v.nodeCount()===0)return Z;wn.each(v.nodes(),function(Mt){ct.add(Mt,Number.POSITIVE_INFINITY),Z.setNode(Mt)}),ct.decrease(v.nodes()[0],0);for(var bt=!1;ct.size()>0;){if(F=ct.removeMin(),wn.has(ot,F))Z.setEdge(F,ot[F]);else{if(bt)throw new Error("Input graph is not connected: "+v);bt=!0}v.nodeEdges(F).forEach(gt)}return Z},tarjan:pt,topsort:Be},version:Xf.version};try{xn=Tn}catch(v){}xn||(xn=window.graphlib);var vn=xn,fa=function(v){return As(v,5)},da=function(v,_,F){if(!ge(F))return!1;var Z=typeof _;return!!(Z=="number"?Vn(F)&&br(_,F.length):Z=="string"&&_ in F)&&A(F[_],v)},ya=Object.prototype,na=ya.hasOwnProperty,Da=ko(function(v,_){v=Object(v);var F=-1,Z=_.length,ot=Z>2?_[2]:void 0;for(ot&&da(_[0],_[1],ot)&&(Z=1);++F<Z;)for(var ct=_[F],gt=De(ct),bt=-1,Mt=gt.length;++bt<Mt;){var Gt=gt[bt],te=v[Gt];(te===void 0||A(te,ya[Gt])&&!na.call(v,Gt))&&(v[Gt]=ct[Gt])}return v}),Fn=function(v){return function(_,F,Z){var ot=Object(_);if(!Vn(_)){var ct=Mo(F);_=me(_),F=function(bt){return ct(ot[bt],bt,ot)}}var gt=v(_,F,Z);return gt>-1?ot[ct?_[gt]:gt]:void 0}},Ia=/^\s+|\s+$/g,ia=/^[-+]0x[0-9a-f]+$/i,Un=/^0b[01]+$/i,Ma=/^0o[0-7]+$/i,qa=parseInt,ri=function(v){if(typeof v=="number")return v;if(fs(v))return NaN;if(ge(v)){var _=typeof v.valueOf=="function"?v.valueOf():v;v=ge(_)?_+"":_}if(typeof v!="string")return v===0?v:+v;v=v.replace(Ia,"");var F=Un.test(v);return F||Ma.test(v)?qa(v.slice(2),F?2:8):ia.test(v)?NaN:+v},Ba=function(v){return v?(v=ri(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},Fa=function(v){var _=Ba(v),F=_%1;return _==_?F?_-F:_:0},oi=Math.max,Oi=Fn(function(v,_,F){var Z=v==null?0:v.length;if(!Z)return-1;var ot=F==null?0:Fa(F);return ot<0&&(ot=oi(Z+ot,0)),Cu(v,Mo(_),ot)}),Ei=function(v){return v!=null&&v.length?Ii(v,1):[]},bs=function(v,_){return v==null?v:os(v,pa(_),De)},uf=function(v){var _=v==null?0:v.length;return _?v[_-1]:void 0},tu=function(v,_){var F={};return _=Mo(_),Eo(v,function(Z,ot,ct){la(F,ot,_(Z,ot,ct))}),F},Ws=function(v,_,F){for(var Z=-1,ot=v.length;++Z<ot;){var ct=v[Z],gt=_(ct);if(gt!=null&&(bt===void 0?gt==gt&&!fs(gt):F(gt,bt)))var bt=gt,Mt=ct}return Mt},hu=function(v,_){return v>_},ff=function(v){return v&&v.length?Ws(v,co,hu):void 0},vu=function(v,_,F){(F!==void 0&&!A(v[_],F)||F===void 0&&!(_ in v))&&la(v,_,F)},el=Function.prototype,Mc=Object.prototype,Vu=el.toString,cf=Mc.hasOwnProperty,lf=Vu.call(Object),Es=function(v){if(!b(v)||$t(v)!="[object Object]")return!1;var _=fi(v);if(_===null)return!0;var F=cf.call(_,"constructor")&&_.constructor;return typeof F=="function"&&F instanceof F&&Vu.call(F)==lf},eu=function(v,_){if((_!=="constructor"||typeof v[_]!="function")&&_!="__proto__")return v[_]},Xs=function(v){return rt(v,De(v))},ju=function(v,_,F,Z,ot,ct,gt){var bt=eu(v,F),Mt=eu(_,F),Gt=gt.get(Mt);if(Gt)vu(v,F,Gt);else{var te=ct?ct(bt,Mt,F+"",v,_,gt):void 0,Zt=te===void 0;if(Zt){var ye=Pt(Mt),We=!ye&&ve(Mt),wr=!ye&&!We&&on(Mt);te=Mt,ye||We||wr?Pt(bt)?te=bt:af(bt)?te=Jr(bt):We?(Zt=!1,te=Fr(Mt,!0)):wr?(Zt=!1,te=ps(Mt,!0)):te=[]:Es(Mt)||wt(Mt)?(te=bt,wt(bt)?te=Xs(bt):ge(bt)&&!tr(bt)||(te=fo(Mt))):Zt=!1}Zt&&(gt.set(Mt,te),ot(te,Mt,Z,ct,gt),gt.delete(Mt)),vu(v,F,te)}},go=function v(_,F,Z,ot,ct){_!==F&&os(F,function(gt,bt){if(ct||(ct=new Wn),ge(gt))ju(_,F,bt,Z,v,ot,ct);else{var Mt=ot?ot(eu(_,bt),gt,bt+"",_,F,ct):void 0;Mt===void 0&&(Mt=gt),vu(_,bt,Mt)}},De)},Ls=function(v){return ko(function(_,F){var Z=-1,ot=F.length,ct=ot>1?F[ot-1]:void 0,gt=ot>2?F[2]:void 0;for(ct=v.length>3&&typeof ct=="function"?(ot--,ct):void 0,gt&&da(F[0],F[1],gt)&&(ct=ot<3?void 0:ct,ot=1),_=Object(_);++Z<ot;){var bt=F[Z];bt&&v(_,bt,Z,ct)}return _})}(function(v,_,F){go(v,_,F)}),Ys=function(v,_){return v<_},hf=function(v){return v&&v.length?Ws(v,co,Ys):void 0},Gl=function(v,_){return v&&v.length?Ws(v,Mo(_),Ys):void 0},vf=function(){return dt.Date.now()},rl=function(v,_,F,Z){if(!ge(v))return v;for(var ot=-1,ct=(_=Ri(_,v)).length,gt=ct-1,bt=v;bt!=null&&++ot<ct;){var Mt=vo(_[ot]),Gt=F;if(Mt==="__proto__"||Mt==="constructor"||Mt==="prototype")return v;if(ot!=gt){var te=bt[Mt];(Gt=Z?Z(te,Mt,bt):void 0)===void 0&&(Gt=ge(te)?te:br(_[ot+1])?[]:{})}ft(bt,Mt,Gt),bt=bt[Mt]}return v},nl=function(v,_,F){for(var Z=-1,ot=_.length,ct={};++Z<ot;){var gt=_[Z],bt=qs(v,gt);F(bt,gt)&&rl(ct,Ri(gt,v),bt)}return ct},al=function(v,_){return nl(v,_,function(F,Z){return Qs(v,Z)})},il=function(v){return ys(za(v,void 0,Ei),v+"")}(function(v,_){return v==null?{}:al(v,_)}),Ac=Math.ceil,Kf=Math.max,zl=function(v,_,F,Z){for(var ot=-1,ct=Kf(Ac((_-v)/(F||1)),0),gt=Array(ct);ct--;)gt[Z?ct:++ot]=v,v+=F;return gt},Ul=function(v){return function(_,F,Z){return Z&&typeof Z!="number"&&da(_,F,Z)&&(F=Z=void 0),_=Ba(_),F===void 0?(F=_,_=0):F=Ba(F),Z=Z===void 0?_<F?1:-1:Ba(Z),zl(_,F,Z,v)}}(),ol=function(v,_){var F=v.length;for(v.sort(_);F--;)v[F]=v[F].value;return v},df=function(v,_){if(v!==_){var F=v!==void 0,Z=v===null,ot=v==v,ct=fs(v),gt=_!==void 0,bt=_===null,Mt=_==_,Gt=fs(_);if(!bt&&!Gt&&!ct&&v>_||ct&&gt&&Mt&&!bt&&!Gt||Z&&gt&&Mt||!F&&Mt||!ot)return 1;if(!Z&&!ct&&!Gt&&v<_||Gt&&F&&ot&&!Z&&!ct||bt&&F&&ot||!gt&&ot||!Mt)return-1}return 0},sl=function(v,_,F){for(var Z=-1,ot=v.criteria,ct=_.criteria,gt=ot.length,bt=F.length;++Z<gt;){var Mt=df(ot[Z],ct[Z]);if(Mt)return Z>=bt?Mt:Mt*(F[Z]=="desc"?-1:1)}return v.index-_.index},gf=function(v,_,F){_=_.length?ai(_,function(ct){return Pt(ct)?function(gt){return qs(gt,ct.length===1?ct[0]:ct)}:ct}):[co];var Z=-1;_=ai(_,Xe(Mo));var ot=vt(v,function(ct,gt,bt){return{criteria:ai(_,function(Mt){return Mt(ct)}),index:++Z,value:ct}});return ol(ot,function(ct,gt){return sl(ct,gt,F)})},ul=ko(function(v,_){if(v==null)return[];var F=_.length;return F>1&&da(v,_[0],_[1])?_=[]:F>2&&da(_[0],_[1],_[2])&&(_=[_[0]]),gf(v,Ii(_,1),[])}),Zf=0,es=function(v){var _=++Zf;return Mu(v)+_},fl=function(v,_,F){for(var Z=-1,ot=v.length,ct=_.length,gt={};++Z<ot;){var bt=Z<ct?_[Z]:void 0;F(gt,v[Z],bt)}return gt},$f,Cc=function(v,_){return fl(v||[],_||[],ft)};try{$f={cloneDeep:fa,constant:Xi,defaults:Da,each:yi,filter:rf,find:Oi,flatten:Ei,forEach:ja,forIn:bs,has:Os,isUndefined:T,last:uf,map:Et,mapValues:tu,max:ff,merge:Ls,min:hf,minBy:Gl,now:vf,pick:il,range:Ul,reduce:Vt,sortBy:ul,uniqueId:es,values:Sc,zipObject:Cc}}catch(v){}$f||($f=window._);var Ne=$f,Iu=Ds;function Ds(){var v={};v._next=v._prev=v,this._sentinel=v}function qf(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function cl(v,_){if(v!=="_next"&&v!=="_prev")return _}Ds.prototype.dequeue=function(){var v=this._sentinel,_=v._prev;if(_!==v)return qf(_),_},Ds.prototype.enqueue=function(v){var _=this._sentinel;v._prev&&v._next&&qf(v),v._next=_._next,_._next._prev=v,_._next=v,v._prev=_},Ds.prototype.toString=function(){for(var v=[],_=this._sentinel,F=_._prev;F!==_;)v.push(JSON.stringify(F,cl)),F=F._prev;return"["+v.join(", ")+"]"};var ll=vn.Graph,Ns=function(v,_){if(v.nodeCount()<=1)return[];var F=function(ot,ct){var gt=new ll,bt=0,Mt=0;Ne.forEach(ot.nodes(),function(Zt){gt.setNode(Zt,{v:Zt,in:0,out:0})}),Ne.forEach(ot.edges(),function(Zt){var ye=gt.edge(Zt.v,Zt.w)||0,We=ct(Zt),wr=ye+We;gt.setEdge(Zt.v,Zt.w,wr),Mt=Math.max(Mt,gt.node(Zt.v).out+=We),bt=Math.max(bt,gt.node(Zt.w).in+=We)});var Gt=Ne.range(Mt+bt+3).map(function(){return new Iu}),te=bt+1;return Ne.forEach(gt.nodes(),function(Zt){pf(Gt,te,gt.node(Zt))}),{graph:gt,buckets:Gt,zeroIdx:te}}(v,_||hl),Z=function(ot,ct,gt){for(var bt,Mt=[],Gt=ct[ct.length-1],te=ct[0];ot.nodeCount();){for(;bt=te.dequeue();)Ou(ot,ct,gt,bt);for(;bt=Gt.dequeue();)Ou(ot,ct,gt,bt);if(ot.nodeCount()){for(var Zt=ct.length-2;Zt>0;--Zt)if(bt=ct[Zt].dequeue()){Mt=Mt.concat(Ou(ot,ct,gt,bt,!0));break}}}return Mt}(F.graph,F.buckets,F.zeroIdx);return Ne.flatten(Ne.map(Z,function(ot){return v.outEdges(ot.v,ot.w)}),!0)},hl=Ne.constant(1);function Ou(v,_,F,Z,ot){var ct=ot?[]:void 0;return Ne.forEach(v.inEdges(Z.v),function(gt){var bt=v.edge(gt),Mt=v.node(gt.v);ot&&ct.push({v:gt.v,w:gt.w}),Mt.out-=bt,pf(_,F,Mt)}),Ne.forEach(v.outEdges(Z.v),function(gt){var bt=v.edge(gt),Mt=gt.w,Gt=v.node(Mt);Gt.in-=bt,pf(_,F,Gt)}),v.removeNode(Z.v),ct}function pf(v,_,F){F.out?F.in?v[F.out-F.in+_].enqueue(F):v[v.length-1].enqueue(F):v[0].enqueue(F)}var Tc={run:function(v){var _=v.graph().acyclicer==="greedy"?Ns(v,function(F){return function(Z){return F.edge(Z).weight}}(v)):function(F){var Z=[],ot={},ct={};function gt(bt){Ne.has(ct,bt)||(ct[bt]=!0,ot[bt]=!0,Ne.forEach(F.outEdges(bt),function(Mt){Ne.has(ot,Mt.w)?Z.push(Mt):gt(Mt.w)}),delete ot[bt])}return Ne.forEach(F.nodes(),gt),Z}(v);Ne.forEach(_,function(F){var Z=v.edge(F);v.removeEdge(F),Z.forwardName=F.name,Z.reversed=!0,v.setEdge(F.w,F.v,Z,Ne.uniqueId("rev"))})},undo:function(v){Ne.forEach(v.edges(),function(_){var F=v.edge(_);if(F.reversed){v.removeEdge(_);var Z=F.forwardName;delete F.reversed,delete F.forwardName,v.setEdge(_.w,_.v,F,Z)}})}},Ic=vn.Graph,po={addDummyNode:Lu,simplify:function(v){var _=new Ic().setGraph(v.graph());return Ne.forEach(v.nodes(),function(F){_.setNode(F,v.node(F))}),Ne.forEach(v.edges(),function(F){var Z=_.edge(F.v,F.w)||{weight:0,minlen:1},ot=v.edge(F);_.setEdge(F.v,F.w,{weight:Z.weight+ot.weight,minlen:Math.max(Z.minlen,ot.minlen)})}),_},asNonCompoundGraph:function(v){var _=new Ic({multigraph:v.isMultigraph()}).setGraph(v.graph());return Ne.forEach(v.nodes(),function(F){v.children(F).length||_.setNode(F,v.node(F))}),Ne.forEach(v.edges(),function(F){_.setEdge(F,v.edge(F))}),_},successorWeights:function(v){var _=Ne.map(v.nodes(),function(F){var Z={};return Ne.forEach(v.outEdges(F),function(ot){Z[ot.w]=(Z[ot.w]||0)+v.edge(ot).weight}),Z});return Ne.zipObject(v.nodes(),_)},predecessorWeights:function(v){var _=Ne.map(v.nodes(),function(F){var Z={};return Ne.forEach(v.inEdges(F),function(ot){Z[ot.v]=(Z[ot.v]||0)+v.edge(ot).weight}),Z});return Ne.zipObject(v.nodes(),_)},intersectRect:function(v,_){var F,Z,ot=v.x,ct=v.y,gt=_.x-ot,bt=_.y-ct,Mt=v.width/2,Gt=v.height/2;if(!gt&&!bt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(bt)*Mt>Math.abs(gt)*Gt?(bt<0&&(Gt=-Gt),F=Gt*gt/bt,Z=Gt):(gt<0&&(Mt=-Mt),F=Mt,Z=Mt*bt/gt),{x:ot+F,y:ct+Z}},buildLayerMatrix:function(v){var _=Ne.map(Ne.range(Oc(v)+1),function(){return[]});return Ne.forEach(v.nodes(),function(F){var Z=v.node(F),ot=Z.rank;Ne.isUndefined(ot)||(_[ot][Z.order]=F)}),_},normalizeRanks:function(v){var _=Ne.min(Ne.map(v.nodes(),function(F){return v.node(F).rank}));Ne.forEach(v.nodes(),function(F){var Z=v.node(F);Ne.has(Z,"rank")&&(Z.rank-=_)})},removeEmptyRanks:function(v){var _=Ne.min(Ne.map(v.nodes(),function(ct){return v.node(ct).rank})),F=[];Ne.forEach(v.nodes(),function(ct){var gt=v.node(ct).rank-_;F[gt]||(F[gt]=[]),F[gt].push(ct)});var Z=0,ot=v.graph().nodeRankFactor;Ne.forEach(F,function(ct,gt){Ne.isUndefined(ct)&&gt%ot!=0?--Z:Z&&Ne.forEach(ct,function(bt){v.node(bt).rank+=Z})})},addBorderNode:function(v,_,F,Z){var ot={width:0,height:0};return arguments.length>=4&&(ot.rank=F,ot.order=Z),Lu(v,"border",ot,_)},maxRank:Oc,partition:function(v,_){var F={lhs:[],rhs:[]};return Ne.forEach(v,function(Z){_(Z)?F.lhs.push(Z):F.rhs.push(Z)}),F},time:function(v,_){var F=Ne.now();try{return _()}finally{console.log(v+" time: "+(Ne.now()-F)+"ms")}},notime:function(v,_){return _()}};function Lu(v,_,F,Z){var ot;do ot=Ne.uniqueId(Z);while(v.hasNode(ot));return F.dummy=_,v.setNode(ot,F),ot}function Oc(v){return Ne.max(Ne.map(v.nodes(),function(_){var F=v.node(_).rank;if(!Ne.isUndefined(F))return F}))}var Qf={run:function(v){v.graph().dummyChains=[],Ne.forEach(v.edges(),function(_){(function(F,Z){var ot,ct,gt,bt=Z.v,Mt=F.node(bt).rank,Gt=Z.w,te=F.node(Gt).rank,Zt=Z.name,ye=F.edge(Z),We=ye.labelRank;if(te!==Mt+1){for(F.removeEdge(Z),gt=0,++Mt;Mt<te;++gt,++Mt)ye.points=[],ct={width:0,height:0,edgeLabel:ye,edgeObj:Z,rank:Mt},ot=po.addDummyNode(F,"edge",ct,"_d"),Mt===We&&(ct.width=ye.width,ct.height=ye.height,ct.dummy="edge-label",ct.labelpos=ye.labelpos),F.setEdge(bt,ot,{weight:ye.weight},Zt),gt===0&&F.graph().dummyChains.push(ot),bt=ot;F.setEdge(bt,Gt,{weight:ye.weight},Zt)}})(v,_)})},undo:function(v){Ne.forEach(v.graph().dummyChains,function(_){var F,Z=v.node(_),ot=Z.edgeLabel;for(v.setEdge(Z.edgeObj,ot);Z.dummy;)F=v.successors(_)[0],v.removeNode(_),ot.points.push({x:Z.x,y:Z.y}),Z.dummy==="edge-label"&&(ot.x=Z.x,ot.y=Z.y,ot.width=Z.width,ot.height=Z.height),_=F,Z=v.node(_)})}},du=function(v){var _={};Ne.forEach(v.sources(),function F(Z){var ot=v.node(Z);if(Ne.has(_,Z))return ot.rank;_[Z]=!0;var ct=Ne.min(Ne.map(v.outEdges(Z),function(gt){return F(gt.w)-v.edge(gt).minlen}));return ct!==Number.POSITIVE_INFINITY&&ct!=null||(ct=0),ot.rank=ct})},yf=function(v,_){return v.node(_.w).rank-v.node(_.v).rank-v.edge(_).minlen},Du=vn.Graph,gu=yf,Hu=function(v){var _,F,Z=new Du({directed:!1}),ot=v.nodes()[0],ct=v.nodeCount();for(Z.setNode(ot,{});mf(Z,v)<ct;)_=xf(Z,v),F=Z.hasNode(_.v)?gu(v,_):-gu(v,_),Nu(Z,v,F);return Z};function mf(v,_){return Ne.forEach(v.nodes(),function F(Z){Ne.forEach(_.nodeEdges(Z),function(ot){var ct=ot.v,gt=Z===ct?ot.w:ct;v.hasNode(gt)||gu(_,ot)||(v.setNode(gt,{}),v.setEdge(Z,gt,{}),F(gt))})}),v.nodeCount()}function xf(v,_){return Ne.minBy(_.edges(),function(F){if(v.hasNode(F.v)!==v.hasNode(F.w))return gu(_,F)})}function Nu(v,_,F){Ne.forEach(v.nodes(),function(Z){_.node(Z).rank+=F})}var Jf=yf,Lc=du,bf=vn.alg.preorder,vl=vn.alg.postorder,tc=po.simplify,Ef=hs;function hs(v){v=tc(v),Lc(v);var _,F=Hu(v);for(Dc(F),ec(F,v);_=wf(F);)Ku(F,v,_,Xl(F,v,_))}function ec(v,_){var F=vl(v,v.nodes());F=F.slice(0,F.length-1),Ne.forEach(F,function(Z){(function(ot,ct,gt){var bt=ot.node(gt).parent;ot.edge(gt,bt).cutvalue=Wl(ot,ct,gt)})(v,_,Z)})}function Wl(v,_,F){var Z=v.node(F).parent,ot=!0,ct=_.edge(F,Z),gt=0;return ct||(ot=!1,ct=_.edge(Z,F)),gt=ct.weight,Ne.forEach(_.nodeEdges(F),function(bt){var Mt,Gt,te=bt.v===F,Zt=te?bt.w:bt.v;if(Zt!==Z){var ye=te===ot,We=_.edge(bt).weight;if(gt+=ye?We:-We,Mt=F,Gt=Zt,v.hasEdge(Mt,Gt)){var wr=v.edge(F,Zt).cutvalue;gt+=ye?-wr:wr}}}),gt}function Dc(v,_){arguments.length<2&&(_=v.nodes()[0]),dl(v,{},1,_)}function dl(v,_,F,Z,ot){var ct=F,gt=v.node(Z);return _[Z]=!0,Ne.forEach(v.neighbors(Z),function(bt){Ne.has(_,bt)||(F=dl(v,_,F,bt,Z))}),gt.low=ct,gt.lim=F++,ot?gt.parent=ot:delete gt.parent,F}function wf(v){return Ne.find(v.edges(),function(_){return v.edge(_).cutvalue<0})}function Xl(v,_,F){var Z=F.v,ot=F.w;_.hasEdge(Z,ot)||(Z=F.w,ot=F.v);var ct=v.node(Z),gt=v.node(ot),bt=ct,Mt=!1;ct.lim>gt.lim&&(bt=gt,Mt=!0);var Gt=Ne.filter(_.edges(),function(te){return Mt===Yl(v,v.node(te.v),bt)&&Mt!==Yl(v,v.node(te.w),bt)});return Ne.minBy(Gt,function(te){return Jf(_,te)})}function Ku(v,_,F,Z){var ot=F.v,ct=F.w;v.removeEdge(ot,ct),v.setEdge(Z.v,Z.w,{}),Dc(v),ec(v,_),function(gt,bt){var Mt=Ne.find(gt.nodes(),function(te){return!bt.node(te).parent}),Gt=bf(gt,Mt);Gt=Gt.slice(1),Ne.forEach(Gt,function(te){var Zt=gt.node(te).parent,ye=bt.edge(te,Zt),We=!1;ye||(ye=bt.edge(Zt,te),We=!0),bt.node(te).rank=bt.node(Zt).rank+(We?ye.minlen:-ye.minlen)})}(v,_)}function Yl(v,_,F){return F.low<=_.lim&&_.lim<=F.lim}hs.initLowLimValues=Dc,hs.initCutValues=ec,hs.calcCutValue=Wl,hs.leaveEdge=wf,hs.enterEdge=Xl,hs.exchangeEdges=Ku;var gl=du,ph=function(v){switch(v.graph().ranker){case"network-simplex":pl(v);break;case"tight-tree":(function(_){gl(_),Hu(_)})(v);break;case"longest-path":Vl(v);break;default:pl(v)}},Vl=gl;function pl(v){Ef(v)}var yl=function(v){var _=function(F){var Z={},ot=0;function ct(gt){var bt=ot;Ne.forEach(F.children(gt),ct),Z[gt]={low:bt,lim:ot++}}return Ne.forEach(F.children(),ct),Z}(v);Ne.forEach(v.graph().dummyChains,function(F){for(var Z=v.node(F),ot=Z.edgeObj,ct=function(Zt,ye,We,wr){var Ze,Je,Qe=[],jr=[],hn=Math.min(ye[We].low,ye[wr].low),tn=Math.max(ye[We].lim,ye[wr].lim);Ze=We;do Ze=Zt.parent(Ze),Qe.push(Ze);while(Ze&&(ye[Ze].low>hn||tn>ye[Ze].lim));for(Je=Ze,Ze=wr;(Ze=Zt.parent(Ze))!==Je;)jr.push(Ze);return{path:Qe.concat(jr.reverse()),lca:Je}}(v,_,ot.v,ot.w),gt=ct.path,bt=ct.lca,Mt=0,Gt=gt[Mt],te=!0;F!==ot.w;){if(Z=v.node(F),te){for(;(Gt=gt[Mt])!==bt&&v.node(Gt).maxRank<Z.rank;)Mt++;Gt===bt&&(te=!1)}if(!te){for(;Mt<gt.length-1&&v.node(Gt=gt[Mt+1]).minRank<=Z.rank;)Mt++;Gt=gt[Mt]}v.setParent(F,Gt),F=v.successors(F)[0]}})},jl={run:function(v){var _=po.addDummyNode(v,"root",{},"_root"),F=function(gt){var bt={};function Mt(Gt,te){var Zt=gt.children(Gt);Zt&&Zt.length&&Ne.forEach(Zt,function(ye){Mt(ye,te+1)}),bt[Gt]=te}return Ne.forEach(gt.children(),function(Gt){Mt(Gt,1)}),bt}(v),Z=Ne.max(Ne.values(F))-1,ot=2*Z+1;v.graph().nestingRoot=_,Ne.forEach(v.edges(),function(gt){v.edge(gt).minlen*=ot});var ct=function(gt){return Ne.reduce(gt.edges(),function(bt,Mt){return bt+gt.edge(Mt).weight},0)}(v)+1;Ne.forEach(v.children(),function(gt){Hl(v,_,ot,ct,Z,F,gt)}),v.graph().nodeRankFactor=ot},cleanup:function(v){var _=v.graph();v.removeNode(_.nestingRoot),delete _.nestingRoot,Ne.forEach(v.edges(),function(F){v.edge(F).nestingEdge&&v.removeEdge(F)})}};function Hl(v,_,F,Z,ot,ct,gt){var bt=v.children(gt);if(bt.length){var Mt=po.addBorderNode(v,"_bt"),Gt=po.addBorderNode(v,"_bb"),te=v.node(gt);v.setParent(Mt,gt),te.borderTop=Mt,v.setParent(Gt,gt),te.borderBottom=Gt,Ne.forEach(bt,function(Zt){Hl(v,_,F,Z,ot,ct,Zt);var ye=v.node(Zt),We=ye.borderTop?ye.borderTop:Zt,wr=ye.borderBottom?ye.borderBottom:Zt,Ze=ye.borderTop?Z:2*Z,Je=We!==wr?1:ot-ct[gt]+1;v.setEdge(Mt,We,{weight:Ze,minlen:Je,nestingEdge:!0}),v.setEdge(wr,Gt,{weight:Ze,minlen:Je,nestingEdge:!0})}),v.parent(gt)||v.setEdge(_,Mt,{weight:0,minlen:ot+ct[gt]})}else gt!==_&&v.setEdge(_,gt,{weight:0,minlen:F})}var Kl=function(v){Ne.forEach(v.children(),function _(F){var Z=v.children(F),ot=v.node(F);if(Z.length&&Ne.forEach(Z,_),Ne.has(ot,"minRank")){ot.borderLeft=[],ot.borderRight=[];for(var ct=ot.minRank,gt=ot.maxRank+1;ct<gt;++ct)ml(v,"borderLeft","_bl",F,ot,ct),ml(v,"borderRight","_br",F,ot,ct)}})};function ml(v,_,F,Z,ot,ct){var gt={width:0,height:0,rank:ct,borderType:_},bt=ot[_][ct-1],Mt=po.addDummyNode(v,"border",gt,F);ot[_][ct]=Mt,v.setParent(Mt,Z),bt&&v.setEdge(bt,Mt,{weight:1})}var xl={adjust:function(v){var _=v.graph().rankdir.toLowerCase();_!=="lr"&&_!=="rl"||Zl(v)},undo:function(v){var _=v.graph().rankdir.toLowerCase();_!=="bt"&&_!=="rl"||function(F){Ne.forEach(F.nodes(),function(Z){Nc(F.node(Z))}),Ne.forEach(F.edges(),function(Z){var ot=F.edge(Z);Ne.forEach(ot.points,Nc),Ne.has(ot,"y")&&Nc(ot)})}(v),_!=="lr"&&_!=="rl"||(function(F){Ne.forEach(F.nodes(),function(Z){Ps(F.node(Z))}),Ne.forEach(F.edges(),function(Z){var ot=F.edge(Z);Ne.forEach(ot.points,Ps),Ne.has(ot,"x")&&Ps(ot)})}(v),Zl(v))}};function Zl(v){Ne.forEach(v.nodes(),function(_){$l(v.node(_))}),Ne.forEach(v.edges(),function(_){$l(v.edge(_))})}function $l(v){var _=v.width;v.width=v.height,v.height=_}function Nc(v){v.y=-v.y}function Ps(v){var _=v.x;v.x=v.y,v.y=_}var Pc=function(v){var _={},F=Ne.filter(v.nodes(),function(bt){return!v.children(bt).length}),Z=Ne.max(Ne.map(F,function(bt){return v.node(bt).rank})),ot=Ne.map(Ne.range(Z+1),function(){return[]});function ct(bt){if(!Ne.has(_,bt)){_[bt]=!0;var Mt=v.node(bt);ot[Mt.rank].push(bt),Ne.forEach(v.successors(bt),ct)}}var gt=Ne.sortBy(F,function(bt){return v.node(bt).rank});return Ne.forEach(gt,ct),ot},kc=function(v,_){for(var F=0,Z=1;Z<_.length;++Z)F+=rc(v,_[Z-1],_[Z]);return F};function rc(v,_,F){for(var Z=Ne.zipObject(F,Ne.map(F,function(Gt,te){return te})),ot=Ne.flatten(Ne.map(_,function(Gt){return Ne.sortBy(Ne.map(v.outEdges(Gt),function(te){return{pos:Z[te.w],weight:v.edge(te).weight}}),"pos")}),!0),ct=1;ct<F.length;)ct<<=1;var gt=2*ct-1;ct-=1;var bt=Ne.map(new Array(gt),function(){return 0}),Mt=0;return Ne.forEach(ot.forEach(function(Gt){var te=Gt.pos+ct;bt[te]+=Gt.weight;for(var Zt=0;te>0;)te%2&&(Zt+=bt[te+1]),bt[te=te-1>>1]+=Gt.weight;Mt+=Gt.weight*Zt})),Mt}var bl=function(v,_){return Ne.map(_,function(F){var Z=v.inEdges(F);if(Z.length){var ot=Ne.reduce(Z,function(ct,gt){var bt=v.edge(gt),Mt=v.node(gt.v);return{sum:ct.sum+bt.weight*Mt.order,weight:ct.weight+bt.weight}},{sum:0,weight:0});return{v:F,barycenter:ot.sum/ot.weight,weight:ot.weight}}return{v:F}})},Rc=function(v,_){var F={};return Ne.forEach(v,function(Z,ot){var ct=F[Z.v]={indegree:0,in:[],out:[],vs:[Z.v],i:ot};Ne.isUndefined(Z.barycenter)||(ct.barycenter=Z.barycenter,ct.weight=Z.weight)}),Ne.forEach(_.edges(),function(Z){var ot=F[Z.v],ct=F[Z.w];Ne.isUndefined(ot)||Ne.isUndefined(ct)||(ct.indegree++,ot.out.push(F[Z.w]))}),function(Z){var ot=[];function ct(Mt){return function(Gt){Gt.merged||(Ne.isUndefined(Gt.barycenter)||Ne.isUndefined(Mt.barycenter)||Gt.barycenter>=Mt.barycenter)&&function(te,Zt){var ye=0,We=0;te.weight&&(ye+=te.barycenter*te.weight,We+=te.weight),Zt.weight&&(ye+=Zt.barycenter*Zt.weight,We+=Zt.weight),te.vs=Zt.vs.concat(te.vs),te.barycenter=ye/We,te.weight=We,te.i=Math.min(Zt.i,te.i),Zt.merged=!0}(Mt,Gt)}}function gt(Mt){return function(Gt){Gt.in.push(Mt),--Gt.indegree==0&&Z.push(Gt)}}for(;Z.length;){var bt=Z.pop();ot.push(bt),Ne.forEach(bt.in.reverse(),ct(bt)),Ne.forEach(bt.out,gt(bt))}return Ne.map(Ne.filter(ot,function(Mt){return!Mt.merged}),function(Mt){return Ne.pick(Mt,["vs","i","barycenter","weight"])})}(Ne.filter(F,function(Z){return!Z.indegree}))},nc=function(v,_){var F=po.partition(v,function(Zt){return Ne.has(Zt,"barycenter")}),Z=F.lhs,ot=Ne.sortBy(F.rhs,function(Zt){return-Zt.i}),ct=[],gt=0,bt=0,Mt=0;Z.sort((Gt=!!_,function(Zt,ye){return Zt.barycenter<ye.barycenter?-1:Zt.barycenter>ye.barycenter?1:Gt?ye.i-Zt.i:Zt.i-ye.i})),Mt=Zu(ct,ot,Mt),Ne.forEach(Z,function(Zt){Mt+=Zt.vs.length,ct.push(Zt.vs),gt+=Zt.barycenter*Zt.weight,bt+=Zt.weight,Mt=Zu(ct,ot,Mt)});var Gt,te={vs:Ne.flatten(ct,!0)};return bt&&(te.barycenter=gt/bt,te.weight=bt),te};function Zu(v,_,F){for(var Z;_.length&&(Z=Ne.last(_)).i<=F;)_.pop(),v.push(Z.vs),F++;return F}var El=function v(_,F,Z,ot){var ct=_.children(F),gt=_.node(F),bt=gt?gt.borderLeft:void 0,Mt=gt?gt.borderRight:void 0,Gt={};bt&&(ct=Ne.filter(ct,function(Ze){return Ze!==bt&&Ze!==Mt}));var te=bl(_,ct);Ne.forEach(te,function(Ze){if(_.children(Ze.v).length){var Je=v(_,Ze.v,Z,ot);Gt[Ze.v]=Je,Ne.has(Je,"barycenter")&&(Qe=Ze,jr=Je,Ne.isUndefined(Qe.barycenter)?(Qe.barycenter=jr.barycenter,Qe.weight=jr.weight):(Qe.barycenter=(Qe.barycenter*Qe.weight+jr.barycenter*jr.weight)/(Qe.weight+jr.weight),Qe.weight+=jr.weight))}var Qe,jr});var Zt=Rc(te,Z);(function(Ze,Je){Ne.forEach(Ze,function(Qe){Qe.vs=Ne.flatten(Qe.vs.map(function(jr){return Je[jr]?Je[jr].vs:jr}),!0)})})(Zt,Gt);var ye=nc(Zt,ot);if(bt&&(ye.vs=Ne.flatten([bt,ye.vs,Mt],!0),_.predecessors(bt).length)){var We=_.node(_.predecessors(bt)[0]),wr=_.node(_.predecessors(Mt)[0]);Ne.has(ye,"barycenter")||(ye.barycenter=0,ye.weight=0),ye.barycenter=(ye.barycenter*ye.weight+We.order+wr.order)/(ye.weight+2),ye.weight+=2}return ye},Bc=vn.Graph,Fc=function(v,_,F){var Z=function(ct){for(var gt;ct.hasNode(gt=Ne.uniqueId("_root")););return gt}(v),ot=new Bc({compound:!0}).setGraph({root:Z}).setDefaultNodeLabel(function(ct){return v.node(ct)});return Ne.forEach(v.nodes(),function(ct){var gt=v.node(ct),bt=v.parent(ct);(gt.rank===_||gt.minRank<=_&&_<=gt.maxRank)&&(ot.setNode(ct),ot.setParent(ct,bt||Z),Ne.forEach(v[F](ct),function(Mt){var Gt=Mt.v===ct?Mt.w:Mt.v,te=ot.edge(Gt,ct),Zt=Ne.isUndefined(te)?0:te.weight;ot.setEdge(Gt,ct,{weight:v.edge(Mt).weight+Zt})}),Ne.has(gt,"minRank")&&ot.setNode(ct,{borderLeft:gt.borderLeft[_],borderRight:gt.borderRight[_]}))}),ot},Gc=function(v,_,F){var Z,ot={};Ne.forEach(F,function(ct){for(var gt,bt,Mt=v.parent(ct);Mt;){if((gt=v.parent(Mt))?(bt=ot[gt],ot[gt]=Mt):(bt=Z,Z=Mt),bt&&bt!==Mt)return void _.setEdge(bt,Mt);Mt=gt}})},ac=vn.Graph,ic=function(v){var _=po.maxRank(v),F=_f(v,Ne.range(1,_+1),"inEdges"),Z=_f(v,Ne.range(_-1,-1,-1),"outEdges"),ot=Pc(v);pu(v,ot);for(var ct,gt=Number.POSITIVE_INFINITY,bt=0,Mt=0;Mt<4;++bt,++Mt){oc(bt%2?F:Z,bt%4>=2),ot=po.buildLayerMatrix(v);var Gt=kc(v,ot);Gt<gt&&(Mt=0,ct=Ne.cloneDeep(ot),gt=Gt)}pu(v,ct)};function _f(v,_,F){return Ne.map(_,function(Z){return Fc(v,Z,F)})}function oc(v,_){var F=new ac;Ne.forEach(v,function(Z){var ot=Z.graph().root,ct=El(Z,ot,F,_);Ne.forEach(ct.vs,function(gt,bt){Z.node(gt).order=bt}),Gc(Z,F,ct.vs)})}function pu(v,_){Ne.forEach(_,function(F){Ne.forEach(F,function(Z,ot){v.node(Z).order=ot})})}var ql=vn.Graph,yu=function(v){var _,F=po.buildLayerMatrix(v),Z=Ne.merge($u(v,F),zc(v,F)),ot={};Ne.forEach(["u","d"],function(gt){_=gt==="u"?F:Ne.values(F).reverse(),Ne.forEach(["l","r"],function(bt){bt==="r"&&(_=Ne.map(_,function(Zt){return Ne.values(Zt).reverse()}));var Mt=(gt==="u"?v.predecessors:v.successors).bind(v),Gt=Ql(v,_,Z,Mt),te=Sf(v,_,Gt.root,Gt.align,bt==="r");bt==="r"&&(te=Ne.mapValues(te,function(Zt){return-Zt})),ot[gt+bt]=te})});var ct=ru(v,ot);return Wc(ot,ct),Jl(ot,v.graph().align)};function $u(v,_){var F={};return Ne.reduce(_,function(Z,ot){var ct=0,gt=0,bt=Z.length,Mt=Ne.last(ot);return Ne.forEach(ot,function(Gt,te){var Zt=function(We,wr){if(We.node(wr).dummy)return Ne.find(We.predecessors(wr),function(Ze){return We.node(Ze).dummy})}(v,Gt),ye=Zt?v.node(Zt).order:bt;(Zt||Gt===Mt)&&(Ne.forEach(ot.slice(gt,te+1),function(We){Ne.forEach(v.predecessors(We),function(wr){var Ze=v.node(wr),Je=Ze.order;!(Je<ct||ye<Je)||Ze.dummy&&v.node(We).dummy||Uc(F,wr,We)})}),gt=te+1,ct=ye)}),ot}),F}function zc(v,_){var F={};function Z(ot,ct,gt,bt,Mt){var Gt;Ne.forEach(Ne.range(ct,gt),function(te){Gt=ot[te],v.node(Gt).dummy&&Ne.forEach(v.predecessors(Gt),function(Zt){var ye=v.node(Zt);ye.dummy&&(ye.order<bt||ye.order>Mt)&&Uc(F,Zt,Gt)})})}return Ne.reduce(_,function(ot,ct){var gt,bt=-1,Mt=0;return Ne.forEach(ct,function(Gt,te){if(v.node(Gt).dummy==="border"){var Zt=v.predecessors(Gt);Zt.length&&(gt=v.node(Zt[0]).order,Z(ct,Mt,te,bt,gt),Mt=te,bt=gt)}Z(ct,Mt,ct.length,gt,ot.length)}),ct}),F}function Uc(v,_,F){if(_>F){var Z=_;_=F,F=Z}var ot=v[_];ot||(v[_]=ot={}),ot[F]=!0}function yh(v,_,F){if(_>F){var Z=_;_=F,F=Z}return Ne.has(v[_],F)}function Ql(v,_,F,Z){var ot={},ct={},gt={};return Ne.forEach(_,function(bt){Ne.forEach(bt,function(Mt,Gt){ot[Mt]=Mt,ct[Mt]=Mt,gt[Mt]=Gt})}),Ne.forEach(_,function(bt){var Mt=-1;Ne.forEach(bt,function(Gt){var te=Z(Gt);if(te.length)for(var Zt=((te=Ne.sortBy(te,function(Ze){return gt[Ze]})).length-1)/2,ye=Math.floor(Zt),We=Math.ceil(Zt);ye<=We;++ye){var wr=te[ye];ct[Gt]===Gt&&Mt<gt[wr]&&!yh(F,Gt,wr)&&(ct[wr]=Gt,ct[Gt]=ot[Gt]=ot[wr],Mt=gt[wr])}})}),{root:ot,align:ct}}function Sf(v,_,F,Z,ot){var ct={},gt=function(Gt,te,Zt,ye){var We=new ql,wr=Gt.graph(),Ze=function(Je,Qe,jr){return function(hn,tn,kn){var In,Kn=hn.node(tn),ca=hn.node(kn),ea=0;if(ea+=Kn.width/2,Ne.has(Kn,"labelpos"))switch(Kn.labelpos.toLowerCase()){case"l":In=-Kn.width/2;break;case"r":In=Kn.width/2}if(In&&(ea+=jr?In:-In),In=0,ea+=(Kn.dummy?Qe:Je)/2,ea+=(ca.dummy?Qe:Je)/2,ea+=ca.width/2,Ne.has(ca,"labelpos"))switch(ca.labelpos.toLowerCase()){case"l":In=ca.width/2;break;case"r":In=-ca.width/2}return In&&(ea+=jr?In:-In),In=0,ea}}(wr.nodesep,wr.edgesep,ye);return Ne.forEach(te,function(Je){var Qe;Ne.forEach(Je,function(jr){var hn=Zt[jr];if(We.setNode(hn),Qe){var tn=Zt[Qe],kn=We.edge(tn,hn);We.setEdge(tn,hn,Math.max(Ze(Gt,jr,Qe),kn||0))}Qe=jr})}),We}(v,_,F,ot),bt=ot?"borderLeft":"borderRight";function Mt(Gt,te){for(var Zt=gt.nodes(),ye=Zt.pop(),We={};ye;)We[ye]?Gt(ye):(We[ye]=!0,Zt.push(ye),Zt=Zt.concat(te(ye))),ye=Zt.pop()}return Mt(function(Gt){ct[Gt]=gt.inEdges(Gt).reduce(function(te,Zt){return Math.max(te,ct[Zt.v]+gt.edge(Zt))},0)},gt.predecessors.bind(gt)),Mt(function(Gt){var te=gt.outEdges(Gt).reduce(function(ye,We){return Math.min(ye,ct[We.w]-gt.edge(We))},Number.POSITIVE_INFINITY),Zt=v.node(Gt);te!==Number.POSITIVE_INFINITY&&Zt.borderType!==bt&&(ct[Gt]=Math.max(ct[Gt],te))},gt.successors.bind(gt)),Ne.forEach(Z,function(Gt){ct[Gt]=ct[F[Gt]]}),ct}function ru(v,_){return Ne.minBy(Ne.values(_),function(F){var Z=Number.NEGATIVE_INFINITY,ot=Number.POSITIVE_INFINITY;return Ne.forIn(F,function(ct,gt){var bt=function(Mt,Gt){return Mt.node(Gt).width}(v,gt)/2;Z=Math.max(ct+bt,Z),ot=Math.min(ct-bt,ot)}),Z-ot})}function Wc(v,_){var F=Ne.values(_),Z=Ne.min(F),ot=Ne.max(F);Ne.forEach(["u","d"],function(ct){Ne.forEach(["l","r"],function(gt){var bt,Mt=ct+gt,Gt=v[Mt];if(Gt!==_){var te=Ne.values(Gt);(bt=gt==="l"?Z-Ne.min(te):ot-Ne.max(te))&&(v[Mt]=Ne.mapValues(Gt,function(Zt){return Zt+bt}))}})})}function Jl(v,_){return Ne.mapValues(v.ul,function(F,Z){if(_)return v[_.toLowerCase()][Z];var ot=Ne.sortBy(Ne.map(v,Z));return(ot[1]+ot[2])/2})}var wl=yu,mh=function(v){(function(_){var F=po.buildLayerMatrix(_),Z=_.graph().ranksep,ot=0;Ne.forEach(F,function(ct){var gt=Ne.max(Ne.map(ct,function(bt){return _.node(bt).height}));Ne.forEach(ct,function(bt){_.node(bt).y=ot+gt/2}),ot+=gt+Z})})(v=po.asNonCompoundGraph(v)),Ne.forEach(wl(v),function(_,F){v.node(F).x=_})},_l=po.normalizeRanks,xh=po.removeEmptyRanks,Ho=po,th=vn.Graph,Mf=function(v,_){var F=_&&_.debugTiming?Ho.time:Ho.notime;F("layout",function(){var Z=F("  buildLayoutGraph",function(){return function(ot){var ct=new th({multigraph:!0,compound:!0}),gt=Ml(ot.graph());return ct.setGraph(Ne.merge({},eh,Ro(gt,mu),Ne.pick(gt,Sl))),Ne.forEach(ot.nodes(),function(bt){var Mt=Ml(ot.node(bt));ct.setNode(bt,Ne.defaults(Ro(Mt,Xc),rh)),ct.setParent(bt,ot.parent(bt))}),Ne.forEach(ot.edges(),function(bt){var Mt=Ml(ot.edge(bt));ct.setEdge(bt,Ne.merge({},xu,Ro(Mt,rs),Ne.pick(Mt,qi)))}),ct}(v)});F("  runLayout",function(){(function(ot,ct){ct("    makeSpaceForEdgeLabels",function(){(function(gt){var bt=gt.graph();bt.ranksep/=2,Ne.forEach(gt.edges(),function(Mt){var Gt=gt.edge(Mt);Gt.minlen*=2,Gt.labelpos.toLowerCase()!=="c"&&(bt.rankdir==="TB"||bt.rankdir==="BT"?Gt.width+=Gt.labeloffset:Gt.height+=Gt.labeloffset)})})(ot)}),ct("    removeSelfEdges",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){if(bt.v===bt.w){var Mt=gt.node(bt.v);Mt.selfEdges||(Mt.selfEdges=[]),Mt.selfEdges.push({e:bt,label:gt.edge(bt)}),gt.removeEdge(bt)}})})(ot)}),ct("    acyclic",function(){Tc.run(ot)}),ct("    nestingGraph.run",function(){jl.run(ot)}),ct("    rank",function(){ph(Ho.asNonCompoundGraph(ot))}),ct("    injectEdgeLabelProxies",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){var Mt=gt.edge(bt);if(Mt.width&&Mt.height){var Gt=gt.node(bt.v),te={rank:(gt.node(bt.w).rank-Gt.rank)/2+Gt.rank,e:bt};Ho.addDummyNode(gt,"edge-proxy",te,"_ep")}})})(ot)}),ct("    removeEmptyRanks",function(){xh(ot)}),ct("    nestingGraph.cleanup",function(){jl.cleanup(ot)}),ct("    normalizeRanks",function(){_l(ot)}),ct("    assignRankMinMax",function(){(function(gt){var bt=0;Ne.forEach(gt.nodes(),function(Mt){var Gt=gt.node(Mt);Gt.borderTop&&(Gt.minRank=gt.node(Gt.borderTop).rank,Gt.maxRank=gt.node(Gt.borderBottom).rank,bt=Ne.max(bt,Gt.maxRank))}),gt.graph().maxRank=bt})(ot)}),ct("    removeEdgeLabelProxies",function(){(function(gt){Ne.forEach(gt.nodes(),function(bt){var Mt=gt.node(bt);Mt.dummy==="edge-proxy"&&(gt.edge(Mt.e).labelRank=Mt.rank,gt.removeNode(bt))})})(ot)}),ct("    normalize.run",function(){Qf.run(ot)}),ct("    parentDummyChains",function(){yl(ot)}),ct("    addBorderSegments",function(){Kl(ot)}),ct("    order",function(){ic(ot)}),ct("    insertSelfEdges",function(){(function(gt){var bt=Ho.buildLayerMatrix(gt);Ne.forEach(bt,function(Mt){var Gt=0;Ne.forEach(Mt,function(te,Zt){var ye=gt.node(te);ye.order=Zt+Gt,Ne.forEach(ye.selfEdges,function(We){Ho.addDummyNode(gt,"selfedge",{width:We.label.width,height:We.label.height,rank:ye.rank,order:Zt+ ++Gt,e:We.e,label:We.label},"_se")}),delete ye.selfEdges})})})(ot)}),ct("    adjustCoordinateSystem",function(){xl.adjust(ot)}),ct("    position",function(){mh(ot)}),ct("    positionSelfEdges",function(){(function(gt){Ne.forEach(gt.nodes(),function(bt){var Mt=gt.node(bt);if(Mt.dummy==="selfedge"){var Gt=gt.node(Mt.e.v),te=Gt.x+Gt.width/2,Zt=Gt.y,ye=Mt.x-te,We=Gt.height/2;gt.setEdge(Mt.e,Mt.label),gt.removeNode(bt),Mt.label.points=[{x:te+2*ye/3,y:Zt-We},{x:te+5*ye/6,y:Zt-We},{x:te+ye,y:Zt},{x:te+5*ye/6,y:Zt+We},{x:te+2*ye/3,y:Zt+We}],Mt.label.x=Mt.x,Mt.label.y=Mt.y}})})(ot)}),ct("    removeBorderNodes",function(){(function(gt){Ne.forEach(gt.nodes(),function(bt){if(gt.children(bt).length){var Mt=gt.node(bt),Gt=gt.node(Mt.borderTop),te=gt.node(Mt.borderBottom),Zt=gt.node(Ne.last(Mt.borderLeft)),ye=gt.node(Ne.last(Mt.borderRight));Mt.width=Math.abs(ye.x-Zt.x),Mt.height=Math.abs(te.y-Gt.y),Mt.x=Zt.x+Mt.width/2,Mt.y=Gt.y+Mt.height/2}}),Ne.forEach(gt.nodes(),function(bt){gt.node(bt).dummy==="border"&&gt.removeNode(bt)})})(ot)}),ct("    normalize.undo",function(){Qf.undo(ot)}),ct("    fixupEdgeLabelCoords",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){var Mt=gt.edge(bt);if(Ne.has(Mt,"x"))switch(Mt.labelpos!=="l"&&Mt.labelpos!=="r"||(Mt.width-=Mt.labeloffset),Mt.labelpos){case"l":Mt.x-=Mt.width/2+Mt.labeloffset;break;case"r":Mt.x+=Mt.width/2+Mt.labeloffset}})})(ot)}),ct("    undoCoordinateSystem",function(){xl.undo(ot)}),ct("    translateGraph",function(){(function(gt){var bt=Number.POSITIVE_INFINITY,Mt=0,Gt=Number.POSITIVE_INFINITY,te=0,Zt=gt.graph(),ye=Zt.marginx||0,We=Zt.marginy||0;function wr(Ze){var Je=Ze.x,Qe=Ze.y,jr=Ze.width,hn=Ze.height;bt=Math.min(bt,Je-jr/2),Mt=Math.max(Mt,Je+jr/2),Gt=Math.min(Gt,Qe-hn/2),te=Math.max(te,Qe+hn/2)}Ne.forEach(gt.nodes(),function(Ze){wr(gt.node(Ze))}),Ne.forEach(gt.edges(),function(Ze){var Je=gt.edge(Ze);Ne.has(Je,"x")&&wr(Je)}),bt-=ye,Gt-=We,Ne.forEach(gt.nodes(),function(Ze){var Je=gt.node(Ze);Je.x-=bt,Je.y-=Gt}),Ne.forEach(gt.edges(),function(Ze){var Je=gt.edge(Ze);Ne.forEach(Je.points,function(Qe){Qe.x-=bt,Qe.y-=Gt}),Ne.has(Je,"x")&&(Je.x-=bt),Ne.has(Je,"y")&&(Je.y-=Gt)}),Zt.width=Mt-bt+ye,Zt.height=te-Gt+We})(ot)}),ct("    assignNodeIntersects",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){var Mt,Gt,te=gt.edge(bt),Zt=gt.node(bt.v),ye=gt.node(bt.w);te.points?(Mt=te.points[0],Gt=te.points[te.points.length-1]):(te.points=[],Mt=ye,Gt=Zt),te.points.unshift(Ho.intersectRect(Zt,Mt)),te.points.push(Ho.intersectRect(ye,Gt))})})(ot)}),ct("    reversePoints",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){var Mt=gt.edge(bt);Mt.reversed&&Mt.points.reverse()})})(ot)}),ct("    acyclic.undo",function(){Tc.undo(ot)})})(Z,F)}),F("  updateInputGraph",function(){(function(ot,ct){Ne.forEach(ot.nodes(),function(gt){var bt=ot.node(gt),Mt=ct.node(gt);bt&&(bt.x=Mt.x,bt.y=Mt.y,ct.children(gt).length&&(bt.width=Mt.width,bt.height=Mt.height))}),Ne.forEach(ot.edges(),function(gt){var bt=ot.edge(gt),Mt=ct.edge(gt);bt.points=Mt.points,Ne.has(Mt,"x")&&(bt.x=Mt.x,bt.y=Mt.y)}),ot.graph().width=ct.graph().width,ot.graph().height=ct.graph().height})(v,Z)})})},mu=["nodesep","edgesep","ranksep","marginx","marginy"],eh={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Sl=["acyclicer","ranker","rankdir","align"],Xc=["width","height"],rh={width:0,height:0},rs=["minlen","weight","width","height","labeloffset"],xu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},qi=["labelpos"];function Ro(v,_){return Ne.mapValues(Ne.pick(v,_),Number)}function Ml(v){var _={};return Ne.forEach(v,function(F,Z){_[Z.toLowerCase()]=F}),_}var nh=vn.Graph,ah={graphlib:vn,layout:Mf,debug:{debugOrdering:function(v){var _=po.buildLayerMatrix(v),F=new nh({compound:!0,multigraph:!0}).setGraph({});return Ne.forEach(v.nodes(),function(Z){F.setNode(Z,{label:Z}),F.setParent(Z,"layer"+v.node(Z).rank)}),Ne.forEach(v.edges(),function(Z){F.setEdge(Z.v,Z.w,{},Z.name)}),Ne.forEach(_,function(Z,ot){var ct="layer"+ot;F.setNode(ct,{rank:"same"}),Ne.reduce(Z,function(gt,bt){return F.setEdge(gt,bt,{style:"invis"}),bt})}),F}},util:{time:po.time,notime:po.notime},version:"0.8.5"},bh=ah.graphlib,Eh=ah.layout;class Al{constructor(_){this.cardinality=1,this.include=E.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=D.NODE,this.name=_.name,this.attr=_.attr||{},this.inputs=_.inputs,this.path=_.path||[],this.width=_.width,this.height=_.height}}class ih{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function wh(v){const _=new ih;return v.nodes.map(F=>new Al(F)).forEach(F=>{_.nodes[F.name]=F,F.inputs.forEach(Z=>{(function(ot,ct,gt){gt.name!==ct.name&&ot.edges.push(Object.assign(Object.assign({},gt.attr),{v:gt.name,w:ct.name}))})(_,F,Z)})}),_}class _h{constructor(_,F={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=E.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=D.META,this.path=[],this.name=_,this.metaGraph=Vc(_,y.META,F)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(_=>this.metaGraph.node(_))}leaves(){let _,F=[],Z=[this];for(;Z.length;){let ot=Z.shift();ot.isGroupNode?(_=ot.metaGraph,_.nodes().forEach(ct=>Z.push(_.node(ct)))):F.push(ot.name)}return F}}class oh{constructor(_,F){this.v=_,this.w=F,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(_,F){this.baseEdgeList.push(_)}}function sh(v,_={}){return new _h(v,_)}function Yc(v,_){return new oh(v,_)}function Vc(v,_,F){const Z=F||{},ot=new bh.Graph(Z);return ot.setGraph({name:v,rankdir:Z.rankdir,type:_,align:Z.align}),ot}class Cl{constructor(_={}){this.graphOptions=_,this.index={},this.graphOptions.compound=!0,this.root=sh(P,this.graphOptions),this.index[P]=this.root}getNodeMap(){return this.index}node(_){return this.index[_]}setNode(_,F){this.index[_]=F}getBridgeGraph(_){const F=this.index[_];if(!F)throw Error("Could not find node in hierarchy: "+_);if(!("metaGraph"in F))return null;const Z=F;if(Z.bridgeGraph)return Z.bridgeGraph;const ot=Vc(N,y.BRIDGE,this.graphOptions);if(Z.bridgeGraph=ot,!F.parentNode||!("metaGraph"in F.parentNode))return ot;const ct=F.parentNode;return[ct.metaGraph,this.getBridgeGraph(ct.name)].forEach(gt=>{gt.edges().filter(bt=>bt.v===_||bt.w===_).forEach(bt=>{const Mt=bt.w===_;gt.edge(bt).baseEdgeList.forEach(Gt=>{const[te,Zt]=Mt?[Gt.w,bt.v]:[Gt.v,bt.w],ye=this.getChildName(_,te),We={v:Mt?Zt:ye,w:Mt?ye:Zt};let wr=ot.edge(We);wr||(wr=Yc(We.v,We.w),wr.inbound=Mt,ot.setEdge(We.v,We.w,wr)),wr.addBaseEdge(Gt,this)})})}),ot}getChildName(_,F){let Z=this.index[F];for(;Z;){if(Z.parentNode&&Z.parentNode.name===_)return Z.name;Z=Z.parentNode}throw Error("Could not find immediate child for descendant: "+F)}getPredecessors(_){const F=this.index[_];if(!F)throw Error("Could not find node with name: "+_);return this.getOneWayEdges(F,!0)}getSuccessors(_){const F=this.index[_];if(!F)throw Error("Could not find node with name: "+_);return this.getOneWayEdges(F,!1)}getOneWayEdges(_,F){const Z=[];if(!_.parentNode||!_.parentNode.isGroupNode)return Z;const ot=_.parentNode,ct=ot.metaGraph,gt=this.getBridgeGraph(ot.name);return Vs(ct,_,F,Z),Vs(gt,_,F,Z),Z}}function uh(v,_){const{rankDirection:F,align:Z}=_,ot=new Cl({rankdir:F,align:Z});return function(ct,gt){Object.keys(gt.nodes).forEach(bt=>{const Mt=gt.nodes[bt],Gt=Mt.path;let te=ct.root;te.depth=Math.max(Gt.length,te.depth);for(let Zt=0;Zt<Gt.length&&(te.depth=Math.max(te.depth,Gt.length-Zt),te.cardinality+=Mt.cardinality,Zt!==Gt.length-1);Zt++){const ye=Gt[Zt];let We=ct.node(ye);We||(We=sh(ye,ct.graphOptions),We.path=Mt.path.slice(0,Zt+1),We.parentNode=te,ct.setNode(ye,We),te.metaGraph.setNode(ye,We)),te=We}ct.setNode(Mt.name,Mt),Mt.parentNode=te,te.metaGraph.setNode(Mt.name,Mt)})}(ot,v),function(ct,gt){const bt=ct.getNodeMap();let Mt=[],Gt=[];const te=(Zt,ye)=>{let We=0;for(;Zt;)ye[We++]=Zt.name,Zt=Zt.parentNode;return We-1};gt.edges.forEach(Zt=>{Mt=[],Gt=[];let ye=te(gt.nodes[Zt.v],Mt),We=te(gt.nodes[Zt.w],Gt);for(;Mt[ye]===Gt[We];)if(ye--,We--,ye<0||We<0)throw Error("No difference found between ancestor paths.");const wr=bt[Mt[ye+1]],Ze=Mt[ye],Je=Gt[We];let Qe=wr.metaGraph.edge(Ze,Je);Qe||(Qe=Yc(Ze,Je),wr.metaGraph.setEdge(Ze,Je,Qe)),Qe.addBaseEdge(Zt,ct)})}(ot,v),ot}function Vs(v,_,F,Z){(F?v.inEdges(_.name):v.outEdges(_.name)).forEach(ot=>{const ct=v.edge(ot);Z.push(ct)})}class Tl{constructor(_){this.hierarchy=_,this.index={},this.hasSubHierarchy={},this.root=new qt(this.hierarchy.root,this.hierarchy.graphOptions),this.index[_.root.name]=this.root,this.buildSubHierarchy(_.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(_){if(_ in this.hasSubHierarchy)return;this.hasSubHierarchy[_]=!0;const F=this.index[_];if(F.node.type!==D.META)return;const Z=F,ot=Z.node.metaGraph,ct=Z.coreGraph;ot.nodes().forEach(te=>{const Zt=this.getOrCreateRenderNodeByName(te);ct.setNode(te,Zt)}),ot.edges().forEach(te=>{const Zt=ot.edge(te),ye=new mt(Zt);ct.setEdge(te.v,te.w,ye)});const gt=Z.node.parentNode;if(!gt)return;const bt=this.getRenderNodeByName(gt.name),Mt=(te,...Zt)=>Zt.concat([te?"IN":"OUT"]).join("~~"),Gt=this.hierarchy.getBridgeGraph(_);Gt.edges().forEach(te=>{const Zt=Gt.edge(te),ye=!!ot.node(te.w),[We,wr]=ye?[te.w,te.v]:[te.v,te.w],Ze=kn=>{const In=ye?{v:kn,w:_}:{v:_,w:kn};return bt.coreGraph.edge(In)};let Je=Ze(wr);Je||(Je=Ze(Mt(ye,wr,gt.name)));const Qe=Mt(ye,_),jr=Mt(ye,wr,_);let hn=ct.node(jr);if(!hn){let kn=ct.node(Qe);if(!kn){const Kn={name:Qe,type:D.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:E.UNSPECIFIED,inbound:ye,attr:{}};kn=new sc(Kn),this.index[Qe]=kn,ct.setNode(Qe,kn)}const In={name:jr,type:D.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:E.UNSPECIFIED,inbound:ye,attr:{}};hn=new sc(In),this.index[jr]=hn,ct.setNode(jr,hn),ct.setParent(jr,Qe),kn.node.cardinality++}const tn=new mt(Zt);tn.adjoiningMetaEdge=Je,ye?ct.setEdge(jr,We,tn):ct.setEdge(We,jr,tn)})}getOrCreateRenderNodeByName(_){if(!_)return null;if(_ in this.index)return this.index[_];const F=this.getNodeByName(_);return F?(this.index[_]=F.isGroupNode?new qt(F,this.hierarchy.graphOptions):new sc(F),this.index[_]):null}getRenderNodeByName(_){return this.index[_]}getNodeByName(_){return this.hierarchy.node(_)}}class sc{constructor(_){this.node=_,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=_.width||0,this.height=_.height||0,this.displayName=_.name,this.attr=_.attr}}class mt{constructor(_){this.metaEdge=_,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class qt extends sc{constructor(_,F){super(_);const Z=_.metaGraph.graph();F.compound=!0,this.coreGraph=Vc(Z.name,y.CORE,F)}}function Ee(v,_){v.node.isGroupNode&&function(F,Z){const ot=Y(Z);F.coreGraph.nodes().map(ct=>F.coreGraph.node(ct)).forEach(ct=>{var gt,bt,Mt,Gt,te,Zt;const{height:ye,width:We}=ct;switch(ct.node.type){case D.NODE:Object.assign(ct,ot.nodeSize.node),ct.height=ye||ot.nodeSize.node.height,ct.width=We||ot.nodeSize.node.width;break;case D.BRIDGE:Object.assign(ct,ot.nodeSize.bridge);break;case D.META:ct.expanded?Ee(ct,Z):(Object.assign(ct,ot.nodeSize.meta),ct.height=ot.nodeSize.meta.height,ct.width=ot.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+ct.node.type)}if(!ct.expanded){const wr=ct.attr;(function(Ze,Je=!1){if(Ze.coreBox.width=Ze.width,Ze.coreBox.height=Ze.height,!Je){const Qe=`${Ze.displayName}`.length,jr=3;Ze.width=Math.max(Ze.coreBox.width,Qe*jr)}})(ct,Z&&(ct.node.type===0&&!!(!((bt=(gt=Z==null?void 0:Z.nodeSize)===null||gt===void 0?void 0:gt.meta)===null||bt===void 0)&&bt.width)||ct.node.type===1&&(!!(!((Gt=(Mt=Z==null?void 0:Z.nodeSize)===null||Mt===void 0?void 0:Mt.node)===null||Gt===void 0)&&Gt.width)||!!wr.width)||ct.node.type===2&&!!(!((Zt=(te=Z==null?void 0:Z.nodeSize)===null||te===void 0?void 0:te.bridge)===null||Zt===void 0)&&Zt.width)))}})}(v,_),v.node.type===D.META&&function(F,Z){const ot=Y(Z),ct=ot.subScene.meta;Object.assign(F,ct);const{nodeSep:gt,rankSep:bt,edgeSep:Mt,align:Gt}=ot.graph.meta,te={nodesep:gt,ranksep:bt,edgesep:Mt,align:Gt};Object.assign(F.coreBox,function(We,wr){const{ranksep:Ze,nodesep:Je,edgesep:Qe,align:jr}=wr;Object.assign(We.graph(),{ranksep:Ze,nodesep:Je,edgesep:Qe,align:jr});const hn=[];if(We.nodes().forEach(ca=>{We.node(ca).node.type!==D.BRIDGE&&hn.push(ca)}),!hn.length)return{width:0,height:0};Eh(We);let tn=1/0,kn=1/0,In=-1/0,Kn=-1/0;return hn.forEach(ca=>{const ea=We.node(ca),mi=.5*ea.width,va=ea.x-mi,Si=ea.x+mi;tn=va<tn?va:tn,In=Si>In?Si:In;const di=.5*ea.height,Pa=ea.y-di,Mi=ea.y+di;kn=Pa<kn?Pa:kn,Kn=Mi>Kn?Mi:Kn}),We.edges().forEach(ca=>{const ea=We.edge(ca),mi=We.node(ea.metaEdge.v),va=We.node(ea.metaEdge.w);if(ea.points.length===3&&function(Pa){let Mi=fr(Pa[0],Pa[1]);for(let Fi=1;Fi<Pa.length-1;Fi++){const yo=fr(Pa[Fi],Pa[Fi+1]);if(Math.abs(yo-Mi)>1)return!1;Mi=yo}return!0}(ea.points)){if(mi!=null){const Pa=mi.expanded?mi.x:Lr(mi);ea.points[0].x=Pa}if(va!=null){const Pa=va.expanded?va.x:Lr(va);ea.points[2].x=Pa}ea.points=[ea.points[0],ea.points[1]]}const Si=ea.points[ea.points.length-2];va!=null&&(ea.points[ea.points.length-1]=cr(Si,va));const di=ea.points[1];mi!=null&&(ea.points[0]=cr(di,mi)),ea.points.forEach(Pa=>{tn=Pa.x<tn?Pa.x:tn,In=Pa.x>In?Pa.x:In,kn=Pa.y<kn?Pa.y:kn,Kn=Pa.y>Kn?Pa.y:Kn})}),We.nodes().forEach(ca=>{const ea=We.node(ca);ea.x-=tn,ea.y-=kn}),We.edges().forEach(ca=>{We.edge(ca).points.forEach(ea=>{ea.x-=tn,ea.y-=kn})}),{width:In-tn,height:Kn-kn}}(F.coreGraph,te));let Zt=0;F.coreGraph.nodeCount()>0&&Zt++;const ye=Zt<=1?0:Zt;F.coreBox.width+=ye+ye,F.coreBox.height=ct.labelHeight+F.coreBox.height,F.width=F.coreBox.width+ct.paddingLeft+ct.paddingRight,F.height=F.paddingTop+F.coreBox.height+F.paddingBottom}(v,_)}function fr(v,_){const F=_.x-v.x,Z=_.y-v.y;return 180*Math.atan(Z/F)/Math.PI}function Lr(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function cr(v,_){const F=_.expanded?_.x:Lr(_),Z=_.y,ot=v.x-F,ct=v.y-Z;let gt,bt,Mt=_.expanded?_.width:_.coreBox.width,Gt=_.expanded?_.height:_.coreBox.height;return Math.abs(ct)*Mt/2>Math.abs(ot)*Gt/2?(ct<0&&(Gt=-Gt),gt=ct===0?0:Gt/2*ot/ct,bt=Gt/2):(ot<0&&(Mt=-Mt),gt=Mt/2,bt=ot===0?0:Mt/2*ct/ot),{x:F+gt,y:Z+bt}}function lr(v,_,F){var Z,ot,ct,gt;const bt=v.nodes.filter((Zt,ye,We)=>We.findIndex(wr=>wr.id===Zt.id)!==ye).map(Zt=>Zt.id);if(bt.length)throw new Error(`Duplicated ids found: ${bt.join(", ")}`);const Mt=function(Zt){const ye={nodes:[]},We=Zt.compound,wr=Object.keys(We||{}),Ze=new Map,Je=(jr,hn=[])=>{if(Ze.has(jr))return Ze.get(jr);for(let tn=0;tn<wr.length;tn++){let kn=wr[tn];if(We&&We[kn].indexOf(jr)!==-1)return hn.unshift(kn),Je(kn,hn)}return hn.length===0&&Ze.set(jr,hn),hn},Qe=jr=>Zt.edges.filter(hn=>hn.w===jr).map(hn=>({name:hn.v}));return Zt.nodes.forEach(jr=>{const hn=jr.id,tn=[...Je(hn),hn];let kn=Qe(hn);ye.nodes.push({name:hn,path:tn,inputs:kn,width:jr.width,height:jr.height,attr:Object.assign({},jr)})}),ye}(v),Gt=function(Zt,ye){const We=(Ze,Je)=>{for(let Qe of Je.values())if(Qe.includes(Ze))return!0;return!1},wr=(Ze,Je=[])=>{if(Object.keys(Ze).length===0)return[...new Set(Je)];const Qe=new Map(Object.keys(Ze).map(hn=>[hn,Ze[hn]])),jr={};for(let[hn,tn]of Qe)We(hn,Qe)?jr[hn]=tn:Je=Je.concat(hn,tn);return wr(jr,Je)};return wr(Zt).filter(Ze=>ye.includes(Ze))}(v.compound||{},(_==null?void 0:_.expanded)||[]),te=function(Zt,ye){return function(We){return new Tl(We)}(uh(wh(Zt),ye))}(Mt,{rankDirection:((ot=(Z=F==null?void 0:F.graph)===null||Z===void 0?void 0:Z.meta)===null||ot===void 0?void 0:ot.rankDir)||(_==null?void 0:_.rankDirection)||B.graph.meta.rankDir,align:((gt=(ct=F==null?void 0:F.graph)===null||ct===void 0?void 0:ct.meta)===null||gt===void 0?void 0:gt.align)||B.graph.meta.align});return function(Zt,ye){ye.forEach(We=>{const wr=Zt.getRenderInfoNodes().find(Qe=>Qe.displayName===We);let Ze=wr&&wr.node&&wr.node.name||"";const Je=Zt.getRenderNodeByName(Ze);if(!Je)throw new Error(`No nodes found: ${Ze}`);Je.expanded=!0,Zt.buildSubHierarchy(Ze)})}(te,Gt),Ee(te.root,F),$r(te.root)}function Yr(v,_=!1){const F=JSON.parse(JSON.stringify(v)),Z={nodes:[F],edges:[...F.edges]};return F.nodes.forEach(function ot(ct){(ct.type===0||ct.type===1)&&Z.nodes.push(ct),ct.type===0&&(Z.edges=Z.edges.concat(ct.edges)),Array.isArray(ct.nodes)&&ct.nodes.forEach(ot)}),_&&Z.nodes.forEach(ot=>{const ct=Z.nodes.find(gt=>gt.id===ot.parentNodeName);if(ct){const gt=ct.x-ct.width/2+ct.paddingLeft,bt=ct.y-ct.height/2+ct.labelHeight+ct.paddingTop;ct.id!==P&&(ot.x+=gt,ot.y+=bt),ot.type===0&&ot.edges.forEach(Mt=>{Mt.points.forEach(Gt=>{Gt.x+=ot.x-ot.width/2+ot.paddingLeft,Gt.y+=ot.y-ot.height/2+ot.labelHeight+ot.paddingTop})})}}),Z}function Vr(v,_,F,Z){var ot,ct;let gt=[];const bt=((ot=F.find(Zt=>Zt.id===v))===null||ot===void 0?void 0:ot.path)||[],Mt=((ct=F.find(Zt=>Zt.id===_))===null||ct===void 0?void 0:ct.path)||[],Gt=[P,...bt].slice(0,bt.length).reverse(),te=[P,...Mt].slice(0,Mt.length);return Gt.forEach(Zt=>{const ye=F.find(We=>We.id===Zt);gt=gt.concat(ye.edges.filter(We=>We.baseEdgeList.some(wr=>wr.v===((Z==null?void 0:Z.v)||v)&&wr.w===((Z==null?void 0:Z.w)||_))))}),te.filter(Zt=>!Gt.includes(Zt)).forEach(Zt=>{const ye=F.find(We=>We.id===Zt);gt=gt.concat(ye.edges.filter(We=>We.baseEdgeList.some(wr=>wr.v===((Z==null?void 0:Z.v)||v)&&wr.w===((Z==null?void 0:Z.w)||_))))}),gt}function $r(v){const _=v.coreGraph.nodes().map(Z=>v.coreGraph.node(Z));return Object.assign(Object.assign({},Gr(v)),{expanded:v.expanded,nodes:v.expanded?(F=_,F.map(Z=>Z.node.type===D.META?$r(Z):Gr(Z))):[],edges:v.expanded?nn(v):[]});var F}function Gr(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function nn(v){return v.coreGraph.edges().map(_=>({renderInfoEdge:v.coreGraph.edge(_),edge:_})).filter(({renderInfoEdge:_})=>_.metaEdge).map(({edge:_,renderInfoEdge:F})=>{const Z=function(ot,ct){const gt=ct.points.map(bt=>Object.assign({},bt));if(ct.adjoiningMetaEdge){const bt=ct.adjoiningMetaEdge.points,Mt=ct.metaEdge.inbound,Gt=Mt?bt[bt.length-1]:bt[0],te=gt[Mt?0:gt.length-1],Zt=ot.x-ot.width/2,ye=ot.y-ot.height/2,We=Gt.x-Zt,wr=Gt.y-ye,Ze=-ot.paddingLeft,Je=-(ot.paddingTop+ot.labelHeight);te.x=We+Ze,te.y=wr+Je}return gt}(v,F);return{adjoiningEdge:F.adjoiningMetaEdge?{w:F.adjoiningMetaEdge.metaEdge.w,v:F.adjoiningMetaEdge.metaEdge.v}:null,inbound:F.metaEdge.inbound,w:_.w,v:_.v,points:Z,weight:F.weight,baseEdgeList:F.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},73633:function(yr,R,z){"use strict";z.r(R),z.d(R,{ARRAY_TYPE:function(){return Y},EPSILON:function(){return B},RANDOM:function(){return k},equals:function(){return E},setMatrixArrayType:function(){return P},toRadian:function(){return D}});var B=1e-6,Y=typeof Float32Array!="undefined"?Float32Array:Array,k=Math.random;function P(y){Y=y}var N=Math.PI/180;function D(y){return y*N}function E(y,M){return Math.abs(y-M)<=B*Math.max(1,Math.abs(y),Math.abs(M))}Math.hypot||(Math.hypot=function(){for(var y=0,M=arguments.length;M--;)y+=arguments[M]*arguments[M];return Math.sqrt(y)})},858204:function(yr,R,z){"use strict";z.r(R),z.d(R,{glMatrix:function(){return E},mat2:function(){return B},mat2d:function(){return Y},mat3:function(){return Ur},mat4:function(){return k},quat:function(){return N},quat2:function(){return D},vec2:function(){return Bf},vec3:function(){return an},vec4:function(){return P}});var B={};z.r(B),z.d(B,{LDU:function(){return Q},add:function(){return it},adjoint:function(){return V},clone:function(){return M},copy:function(){return S},create:function(){return y},determinant:function(){return x},equals:function(){return Ot},exactEquals:function(){return dt},frob:function(){return et},fromRotation:function(){return j},fromScaling:function(){return $},fromValues:function(){return I},identity:function(){return m},invert:function(){return U},mul:function(){return Ft},multiply:function(){return d},multiplyScalar:function(){return It},multiplyScalarAndAdd:function(){return Kt},rotate:function(){return at},scale:function(){return W},set:function(){return A},str:function(){return q},sub:function(){return Nt},subtract:function(){return ht},transpose:function(){return L}});var Y={};z.r(Y),z.d(Y,{add:function(){return ie},clone:function(){return yt},copy:function(){return kt},create:function(){return st},determinant:function(){return tr},equals:function(){return Ct},exactEquals:function(){return Ge},frob:function(){return Yt},fromRotation:function(){return we},fromScaling:function(){return zt},fromTranslation:function(){return Wt},fromValues:function(){return $t},identity:function(){return ee},invert:function(){return Pe},mul:function(){return Nr},multiply:function(){return Jt},multiplyScalar:function(){return re},multiplyScalarAndAdd:function(){return _e},rotate:function(){return ae},scale:function(){return Se},set:function(){return ge},str:function(){return Ie},sub:function(){return Or},subtract:function(){return Oe},translate:function(){return xe}});var k={};z.r(k),z.d(k,{add:function(){return on},adjoint:function(){return rr},clone:function(){return gn},copy:function(){return Rr},create:function(){return Sr},determinant:function(){return vr},equals:function(){return Jn},exactEquals:function(){return Rn},frob:function(){return Er},fromQuat:function(){return At},fromQuat2:function(){return rt},fromRotation:function(){return Dn},fromRotationTranslation:function(){return ft},fromRotationTranslationScale:function(){return X},fromRotationTranslationScaleOrigin:function(){return xt},fromScaling:function(){return Wn},fromTranslation:function(){return dn},fromValues:function(){return ln},fromXRotation:function(){return Cn},fromYRotation:function(){return la},fromZRotation:function(){return K},frustum:function(){return wt},getRotation:function(){return w},getScaling:function(){return b},getTranslation:function(){return O},identity:function(){return Ln},invert:function(){return qe},lookAt:function(){return Mn},mul:function(){return Ga},multiply:function(){return Pr},multiplyScalar:function(){return xa},multiplyScalarAndAdd:function(){return Ta},ortho:function(){return ar},orthoNO:function(){return br},orthoZO:function(){return mr},perspective:function(){return Me},perspectiveFromFieldOfView:function(){return He},perspectiveNO:function(){return Pt},perspectiveZO:function(){return ve},rotate:function(){return rn},rotateX:function(){return jn},rotateY:function(){return Hn},rotateZ:function(){return oa},scale:function(){return pn},set:function(){return Nn},str:function(){return hr},sub:function(){return Aa},subtract:function(){return Wr},targetTo:function(){return Xe},translate:function(){return en},transpose:function(){return fn}});var P={};z.r(P),z.d(P,{add:function(){return be},ceil:function(){return Jr},clone:function(){return me},copy:function(){return fe},create:function(){return Vn},cross:function(){return uo},dist:function(){return So},distance:function(){return ta},div:function(){return Yn},divide:function(){return Fr},dot:function(){return bo},equals:function(){return _o},exactEquals:function(){return Go},floor:function(){return Pn},forEach:function(){return Lo},fromValues:function(){return Dt},inverse:function(){return so},len:function(){return Wi},length:function(){return Co},lerp:function(){return Hi},max:function(){return Zn},min:function(){return Bn},mul:function(){return $s},multiply:function(){return or},negate:function(){return xi},normalize:function(){return To},random:function(){return ds},round:function(){return ba},scale:function(){return Ca},scaleAndAdd:function(){return li},set:function(){return Ae},sqrDist:function(){return Oo},sqrLen:function(){return zn},squaredDistance:function(){return fi},squaredLength:function(){return La},str:function(){return Ms},sub:function(){return Io},subtract:function(){return De},transformMat4:function(){return zi},transformQuat:function(){return Ui},zero:function(){return gs}});var N={};z.r(N),z.d(N,{add:function(){return yi},calculateW:function(){return Wo},clone:function(){return Yi},conjugate:function(){return iu},copy:function(){return pa},create:function(){return Ai},dot:function(){return Ki},equals:function(){return ci},exactEquals:function(){return Cs},exp:function(){return No},fromEuler:function(){return os},fromMat3:function(){return Xi},fromValues:function(){return co},getAngle:function(){return eo},getAxisAngle:function(){return ps},identity:function(){return zo},invert:function(){return As},len:function(){return ts},length:function(){return wo},lerp:function(){return Yo},ln:function(){return is},mul:function(){return no},multiply:function(){return ro},normalize:function(){return ou},pow:function(){return Xo},random:function(){return Xa},rotateX:function(){return ei},rotateY:function(){return fo},rotateZ:function(){return Do},rotationTo:function(){return Po},scale:function(){return ki},set:function(){return ja},setAxes:function(){return ho},setAxisAngle:function(){return Uo},slerp:function(){return Jo},sqlerp:function(){return Wu},sqrLen:function(){return Rs},squaredLength:function(){return lo},str:function(){return Eo}});var D={};z.r(D),z.d(D,{add:function(){return Ri},clone:function(){return Ts},conjugate:function(){return fu},copy:function(){return Gs},create:function(){return Bs},dot:function(){return Au},equals:function(){return Os},exactEquals:function(){return Rf},fromMat4:function(){return su},fromRotation:function(){return us},fromRotationTranslation:function(){return ss},fromRotationTranslationValues:function(){return Fs},fromTranslation:function(){return jo},fromValues:function(){return Vo},getDual:function(){return ze},getReal:function(){return jt},getTranslation:function(){return cn},identity:function(){return fs},invert:function(){return Qs},len:function(){return Js},length:function(){return Is},lerp:function(){return uu},mul:function(){return qs},multiply:function(){return vo},normalize:function(){return rf},rotateAroundAxis:function(){return Mu},rotateByQuatAppend:function(){return ao},rotateByQuatPrepend:function(){return zs},rotateX:function(){return aa},rotateY:function(){return ai},rotateZ:function(){return Zi},scale:function(){return Xu},set:function(){return Tt},setDual:function(){return Cr},setReal:function(){return Ke},sqrLen:function(){return Mo},squaredLength:function(){return cs},str:function(){return kf},translate:function(){return mn}});var E=z(73633);function y(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function M(h){var T=new E.ARRAY_TYPE(4);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T}function S(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h}function m(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function I(h,T,vt,Et){var Lt=new E.ARRAY_TYPE(4);return Lt[0]=h,Lt[1]=T,Lt[2]=vt,Lt[3]=Et,Lt}function A(h,T,vt,Et,Lt){return h[0]=T,h[1]=vt,h[2]=Et,h[3]=Lt,h}function L(h,T){if(h===T){var vt=T[1];h[1]=T[2],h[2]=vt}else h[0]=T[0],h[1]=T[2],h[2]=T[1],h[3]=T[3];return h}function U(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[3],Vt=vt*Xt-Lt*Et;return Vt?(Vt=1/Vt,h[0]=Xt*Vt,h[1]=-Et*Vt,h[2]=-Lt*Vt,h[3]=vt*Vt,h):null}function V(h,T){var vt=T[0];return h[0]=T[3],h[1]=-T[1],h[2]=-T[2],h[3]=vt,h}function x(h){return h[0]*h[3]-h[2]*h[1]}function d(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=vt[0],he=vt[1],Ce=vt[2],Ye=vt[3];return h[0]=Et*ue+Xt*he,h[1]=Lt*ue+Vt*he,h[2]=Et*Ce+Xt*Ye,h[3]=Lt*Ce+Vt*Ye,h}function at(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=Math.sin(vt),he=Math.cos(vt);return h[0]=Et*he+Xt*ue,h[1]=Lt*he+Vt*ue,h[2]=Et*-ue+Xt*he,h[3]=Lt*-ue+Vt*he,h}function W(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=vt[0],he=vt[1];return h[0]=Et*ue,h[1]=Lt*ue,h[2]=Xt*he,h[3]=Vt*he,h}function j(h,T){var vt=Math.sin(T),Et=Math.cos(T);return h[0]=Et,h[1]=vt,h[2]=-vt,h[3]=Et,h}function $(h,T){return h[0]=T[0],h[1]=0,h[2]=0,h[3]=T[1],h}function q(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function et(h){return Math.hypot(h[0],h[1],h[2],h[3])}function Q(h,T,vt,Et){return h[2]=Et[2]/Et[0],vt[0]=Et[0],vt[1]=Et[1],vt[3]=Et[3]-h[2]*vt[1],[h,T,vt]}function it(h,T,vt){return h[0]=T[0]+vt[0],h[1]=T[1]+vt[1],h[2]=T[2]+vt[2],h[3]=T[3]+vt[3],h}function ht(h,T,vt){return h[0]=T[0]-vt[0],h[1]=T[1]-vt[1],h[2]=T[2]-vt[2],h[3]=T[3]-vt[3],h}function dt(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]}function Ot(h,T){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=T[0],ue=T[1],he=T[2],Ce=T[3];return Math.abs(vt-Vt)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(Vt))&&Math.abs(Et-ue)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ue))&&Math.abs(Lt-he)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(he))&&Math.abs(Xt-Ce)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Ce))}function It(h,T,vt){return h[0]=T[0]*vt,h[1]=T[1]*vt,h[2]=T[2]*vt,h[3]=T[3]*vt,h}function Kt(h,T,vt,Et){return h[0]=T[0]+vt[0]*Et,h[1]=T[1]+vt[1]*Et,h[2]=T[2]+vt[2]*Et,h[3]=T[3]+vt[3]*Et,h}var Ft=d,Nt=ht;function st(){var h=new E.ARRAY_TYPE(6);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function yt(h){var T=new E.ARRAY_TYPE(6);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T[4]=h[4],T[5]=h[5],T}function kt(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[4]=T[4],h[5]=T[5],h}function ee(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function $t(h,T,vt,Et,Lt,Xt){var Vt=new E.ARRAY_TYPE(6);return Vt[0]=h,Vt[1]=T,Vt[2]=vt,Vt[3]=Et,Vt[4]=Lt,Vt[5]=Xt,Vt}function ge(h,T,vt,Et,Lt,Xt,Vt){return h[0]=T,h[1]=vt,h[2]=Et,h[3]=Lt,h[4]=Xt,h[5]=Vt,h}function Pe(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[3],Vt=T[4],ue=T[5],he=vt*Xt-Et*Lt;return he?(he=1/he,h[0]=Xt*he,h[1]=-Et*he,h[2]=-Lt*he,h[3]=vt*he,h[4]=(Lt*ue-Xt*Vt)*he,h[5]=(Et*Vt-vt*ue)*he,h):null}function tr(h){return h[0]*h[3]-h[1]*h[2]}function Jt(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=T[4],he=T[5],Ce=vt[0],Ye=vt[1],pr=vt[2],xr=vt[3],gr=vt[4],Zr=vt[5];return h[0]=Et*Ce+Xt*Ye,h[1]=Lt*Ce+Vt*Ye,h[2]=Et*pr+Xt*xr,h[3]=Lt*pr+Vt*xr,h[4]=Et*gr+Xt*Zr+ue,h[5]=Lt*gr+Vt*Zr+he,h}function ae(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=T[4],he=T[5],Ce=Math.sin(vt),Ye=Math.cos(vt);return h[0]=Et*Ye+Xt*Ce,h[1]=Lt*Ye+Vt*Ce,h[2]=Et*-Ce+Xt*Ye,h[3]=Lt*-Ce+Vt*Ye,h[4]=ue,h[5]=he,h}function Se(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=T[4],he=T[5],Ce=vt[0],Ye=vt[1];return h[0]=Et*Ce,h[1]=Lt*Ce,h[2]=Xt*Ye,h[3]=Vt*Ye,h[4]=ue,h[5]=he,h}function xe(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=T[4],he=T[5],Ce=vt[0],Ye=vt[1];return h[0]=Et,h[1]=Lt,h[2]=Xt,h[3]=Vt,h[4]=Et*Ce+Xt*Ye+ue,h[5]=Lt*Ce+Vt*Ye+he,h}function we(h,T){var vt=Math.sin(T),Et=Math.cos(T);return h[0]=Et,h[1]=vt,h[2]=-vt,h[3]=Et,h[4]=0,h[5]=0,h}function zt(h,T){return h[0]=T[0],h[1]=0,h[2]=0,h[3]=T[1],h[4]=0,h[5]=0,h}function Wt(h,T){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=T[0],h[5]=T[1],h}function Ie(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function Yt(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function ie(h,T,vt){return h[0]=T[0]+vt[0],h[1]=T[1]+vt[1],h[2]=T[2]+vt[2],h[3]=T[3]+vt[3],h[4]=T[4]+vt[4],h[5]=T[5]+vt[5],h}function Oe(h,T,vt){return h[0]=T[0]-vt[0],h[1]=T[1]-vt[1],h[2]=T[2]-vt[2],h[3]=T[3]-vt[3],h[4]=T[4]-vt[4],h[5]=T[5]-vt[5],h}function re(h,T,vt){return h[0]=T[0]*vt,h[1]=T[1]*vt,h[2]=T[2]*vt,h[3]=T[3]*vt,h[4]=T[4]*vt,h[5]=T[5]*vt,h}function _e(h,T,vt,Et){return h[0]=T[0]+vt[0]*Et,h[1]=T[1]+vt[1]*Et,h[2]=T[2]+vt[2]*Et,h[3]=T[3]+vt[3]*Et,h[4]=T[4]+vt[4]*Et,h[5]=T[5]+vt[5]*Et,h}function Ge(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]&&h[4]===T[4]&&h[5]===T[5]}function Ct(h,T){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=h[4],ue=h[5],he=T[0],Ce=T[1],Ye=T[2],pr=T[3],xr=T[4],gr=T[5];return Math.abs(vt-he)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(he))&&Math.abs(Et-Ce)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Ce))&&Math.abs(Lt-Ye)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(Ye))&&Math.abs(Xt-pr)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(pr))&&Math.abs(Vt-xr)<=E.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(xr))&&Math.abs(ue-gr)<=E.EPSILON*Math.max(1,Math.abs(ue),Math.abs(gr))}var Nr=Jt,Or=Oe,Ur=z(935600);function Sr(){var h=new E.ARRAY_TYPE(16);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function gn(h){var T=new E.ARRAY_TYPE(16);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T[4]=h[4],T[5]=h[5],T[6]=h[6],T[7]=h[7],T[8]=h[8],T[9]=h[9],T[10]=h[10],T[11]=h[11],T[12]=h[12],T[13]=h[13],T[14]=h[14],T[15]=h[15],T}function Rr(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[4]=T[4],h[5]=T[5],h[6]=T[6],h[7]=T[7],h[8]=T[8],h[9]=T[9],h[10]=T[10],h[11]=T[11],h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15],h}function ln(h,T,vt,Et,Lt,Xt,Vt,ue,he,Ce,Ye,pr,xr,gr,Zr,qr){var Tr=new E.ARRAY_TYPE(16);return Tr[0]=h,Tr[1]=T,Tr[2]=vt,Tr[3]=Et,Tr[4]=Lt,Tr[5]=Xt,Tr[6]=Vt,Tr[7]=ue,Tr[8]=he,Tr[9]=Ce,Tr[10]=Ye,Tr[11]=pr,Tr[12]=xr,Tr[13]=gr,Tr[14]=Zr,Tr[15]=qr,Tr}function Nn(h,T,vt,Et,Lt,Xt,Vt,ue,he,Ce,Ye,pr,xr,gr,Zr,qr,Tr){return h[0]=T,h[1]=vt,h[2]=Et,h[3]=Lt,h[4]=Xt,h[5]=Vt,h[6]=ue,h[7]=he,h[8]=Ce,h[9]=Ye,h[10]=pr,h[11]=xr,h[12]=gr,h[13]=Zr,h[14]=qr,h[15]=Tr,h}function Ln(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function fn(h,T){if(h===T){var vt=T[1],Et=T[2],Lt=T[3],Xt=T[6],Vt=T[7],ue=T[11];h[1]=T[4],h[2]=T[8],h[3]=T[12],h[4]=vt,h[6]=T[9],h[7]=T[13],h[8]=Et,h[9]=Xt,h[11]=T[14],h[12]=Lt,h[13]=Vt,h[14]=ue}else h[0]=T[0],h[1]=T[4],h[2]=T[8],h[3]=T[12],h[4]=T[1],h[5]=T[5],h[6]=T[9],h[7]=T[13],h[8]=T[2],h[9]=T[6],h[10]=T[10],h[11]=T[14],h[12]=T[3],h[13]=T[7],h[14]=T[11],h[15]=T[15];return h}function qe(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[3],Vt=T[4],ue=T[5],he=T[6],Ce=T[7],Ye=T[8],pr=T[9],xr=T[10],gr=T[11],Zr=T[12],qr=T[13],Tr=T[14],_n=T[15],Ea=vt*ue-Et*Vt,wa=vt*he-Lt*Vt,ha=vt*Ce-Xt*Vt,qn=Et*he-Lt*ue,sa=Et*Ce-Xt*ue,Ni=Lt*Ce-Xt*he,Ci=Ye*qr-pr*Zr,_i=Ye*Tr-xr*Zr,Ti=Ye*_n-gr*Zr,Ii=pr*Tr-xr*qr,Bi=pr*_n-gr*qr,$i=xr*_n-gr*Tr,za=Ea*$i-wa*Bi+ha*Ii+qn*Ti-sa*_i+Ni*Ci;return za?(za=1/za,h[0]=(ue*$i-he*Bi+Ce*Ii)*za,h[1]=(Lt*Bi-Et*$i-Xt*Ii)*za,h[2]=(qr*Ni-Tr*sa+_n*qn)*za,h[3]=(xr*sa-pr*Ni-gr*qn)*za,h[4]=(he*Ti-Vt*$i-Ce*_i)*za,h[5]=(vt*$i-Lt*Ti+Xt*_i)*za,h[6]=(Tr*ha-Zr*Ni-_n*wa)*za,h[7]=(Ye*Ni-xr*ha+gr*wa)*za,h[8]=(Vt*Bi-ue*Ti+Ce*Ci)*za,h[9]=(Et*Ti-vt*Bi-Xt*Ci)*za,h[10]=(Zr*sa-qr*ha+_n*Ea)*za,h[11]=(pr*ha-Ye*sa-gr*Ea)*za,h[12]=(ue*_i-Vt*Ii-he*Ci)*za,h[13]=(vt*Ii-Et*_i+Lt*Ci)*za,h[14]=(qr*wa-Zr*qn-Tr*Ea)*za,h[15]=(Ye*qn-pr*wa+xr*Ea)*za,h):null}function rr(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[3],Vt=T[4],ue=T[5],he=T[6],Ce=T[7],Ye=T[8],pr=T[9],xr=T[10],gr=T[11],Zr=T[12],qr=T[13],Tr=T[14],_n=T[15];return h[0]=ue*(xr*_n-gr*Tr)-pr*(he*_n-Ce*Tr)+qr*(he*gr-Ce*xr),h[1]=-(Et*(xr*_n-gr*Tr)-pr*(Lt*_n-Xt*Tr)+qr*(Lt*gr-Xt*xr)),h[2]=Et*(he*_n-Ce*Tr)-ue*(Lt*_n-Xt*Tr)+qr*(Lt*Ce-Xt*he),h[3]=-(Et*(he*gr-Ce*xr)-ue*(Lt*gr-Xt*xr)+pr*(Lt*Ce-Xt*he)),h[4]=-(Vt*(xr*_n-gr*Tr)-Ye*(he*_n-Ce*Tr)+Zr*(he*gr-Ce*xr)),h[5]=vt*(xr*_n-gr*Tr)-Ye*(Lt*_n-Xt*Tr)+Zr*(Lt*gr-Xt*xr),h[6]=-(vt*(he*_n-Ce*Tr)-Vt*(Lt*_n-Xt*Tr)+Zr*(Lt*Ce-Xt*he)),h[7]=vt*(he*gr-Ce*xr)-Vt*(Lt*gr-Xt*xr)+Ye*(Lt*Ce-Xt*he),h[8]=Vt*(pr*_n-gr*qr)-Ye*(ue*_n-Ce*qr)+Zr*(ue*gr-Ce*pr),h[9]=-(vt*(pr*_n-gr*qr)-Ye*(Et*_n-Xt*qr)+Zr*(Et*gr-Xt*pr)),h[10]=vt*(ue*_n-Ce*qr)-Vt*(Et*_n-Xt*qr)+Zr*(Et*Ce-Xt*ue),h[11]=-(vt*(ue*gr-Ce*pr)-Vt*(Et*gr-Xt*pr)+Ye*(Et*Ce-Xt*ue)),h[12]=-(Vt*(pr*Tr-xr*qr)-Ye*(ue*Tr-he*qr)+Zr*(ue*xr-he*pr)),h[13]=vt*(pr*Tr-xr*qr)-Ye*(Et*Tr-Lt*qr)+Zr*(Et*xr-Lt*pr),h[14]=-(vt*(ue*Tr-he*qr)-Vt*(Et*Tr-Lt*qr)+Zr*(Et*he-Lt*ue)),h[15]=vt*(ue*xr-he*pr)-Vt*(Et*xr-Lt*pr)+Ye*(Et*he-Lt*ue),h}function vr(h){var T=h[0],vt=h[1],Et=h[2],Lt=h[3],Xt=h[4],Vt=h[5],ue=h[6],he=h[7],Ce=h[8],Ye=h[9],pr=h[10],xr=h[11],gr=h[12],Zr=h[13],qr=h[14],Tr=h[15],_n=T*Vt-vt*Xt,Ea=T*ue-Et*Xt,wa=T*he-Lt*Xt,ha=vt*ue-Et*Vt,qn=vt*he-Lt*Vt,sa=Et*he-Lt*ue,Ni=Ce*Zr-Ye*gr,Ci=Ce*qr-pr*gr,_i=Ce*Tr-xr*gr,Ti=Ye*qr-pr*Zr,Ii=Ye*Tr-xr*Zr,Bi=pr*Tr-xr*qr;return _n*Bi-Ea*Ii+wa*Ti+ha*_i-qn*Ci+sa*Ni}function Pr(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=T[4],he=T[5],Ce=T[6],Ye=T[7],pr=T[8],xr=T[9],gr=T[10],Zr=T[11],qr=T[12],Tr=T[13],_n=T[14],Ea=T[15],wa=vt[0],ha=vt[1],qn=vt[2],sa=vt[3];return h[0]=wa*Et+ha*ue+qn*pr+sa*qr,h[1]=wa*Lt+ha*he+qn*xr+sa*Tr,h[2]=wa*Xt+ha*Ce+qn*gr+sa*_n,h[3]=wa*Vt+ha*Ye+qn*Zr+sa*Ea,wa=vt[4],ha=vt[5],qn=vt[6],sa=vt[7],h[4]=wa*Et+ha*ue+qn*pr+sa*qr,h[5]=wa*Lt+ha*he+qn*xr+sa*Tr,h[6]=wa*Xt+ha*Ce+qn*gr+sa*_n,h[7]=wa*Vt+ha*Ye+qn*Zr+sa*Ea,wa=vt[8],ha=vt[9],qn=vt[10],sa=vt[11],h[8]=wa*Et+ha*ue+qn*pr+sa*qr,h[9]=wa*Lt+ha*he+qn*xr+sa*Tr,h[10]=wa*Xt+ha*Ce+qn*gr+sa*_n,h[11]=wa*Vt+ha*Ye+qn*Zr+sa*Ea,wa=vt[12],ha=vt[13],qn=vt[14],sa=vt[15],h[12]=wa*Et+ha*ue+qn*pr+sa*qr,h[13]=wa*Lt+ha*he+qn*xr+sa*Tr,h[14]=wa*Xt+ha*Ce+qn*gr+sa*_n,h[15]=wa*Vt+ha*Ye+qn*Zr+sa*Ea,h}function en(h,T,vt){var Et=vt[0],Lt=vt[1],Xt=vt[2],Vt,ue,he,Ce,Ye,pr,xr,gr,Zr,qr,Tr,_n;return T===h?(h[12]=T[0]*Et+T[4]*Lt+T[8]*Xt+T[12],h[13]=T[1]*Et+T[5]*Lt+T[9]*Xt+T[13],h[14]=T[2]*Et+T[6]*Lt+T[10]*Xt+T[14],h[15]=T[3]*Et+T[7]*Lt+T[11]*Xt+T[15]):(Vt=T[0],ue=T[1],he=T[2],Ce=T[3],Ye=T[4],pr=T[5],xr=T[6],gr=T[7],Zr=T[8],qr=T[9],Tr=T[10],_n=T[11],h[0]=Vt,h[1]=ue,h[2]=he,h[3]=Ce,h[4]=Ye,h[5]=pr,h[6]=xr,h[7]=gr,h[8]=Zr,h[9]=qr,h[10]=Tr,h[11]=_n,h[12]=Vt*Et+Ye*Lt+Zr*Xt+T[12],h[13]=ue*Et+pr*Lt+qr*Xt+T[13],h[14]=he*Et+xr*Lt+Tr*Xt+T[14],h[15]=Ce*Et+gr*Lt+_n*Xt+T[15]),h}function pn(h,T,vt){var Et=vt[0],Lt=vt[1],Xt=vt[2];return h[0]=T[0]*Et,h[1]=T[1]*Et,h[2]=T[2]*Et,h[3]=T[3]*Et,h[4]=T[4]*Lt,h[5]=T[5]*Lt,h[6]=T[6]*Lt,h[7]=T[7]*Lt,h[8]=T[8]*Xt,h[9]=T[9]*Xt,h[10]=T[10]*Xt,h[11]=T[11]*Xt,h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15],h}function rn(h,T,vt,Et){var Lt=Et[0],Xt=Et[1],Vt=Et[2],ue=Math.hypot(Lt,Xt,Vt),he,Ce,Ye,pr,xr,gr,Zr,qr,Tr,_n,Ea,wa,ha,qn,sa,Ni,Ci,_i,Ti,Ii,Bi,$i,za,ii;return ue<E.EPSILON?null:(ue=1/ue,Lt*=ue,Xt*=ue,Vt*=ue,he=Math.sin(vt),Ce=Math.cos(vt),Ye=1-Ce,pr=T[0],xr=T[1],gr=T[2],Zr=T[3],qr=T[4],Tr=T[5],_n=T[6],Ea=T[7],wa=T[8],ha=T[9],qn=T[10],sa=T[11],Ni=Lt*Lt*Ye+Ce,Ci=Xt*Lt*Ye+Vt*he,_i=Vt*Lt*Ye-Xt*he,Ti=Lt*Xt*Ye-Vt*he,Ii=Xt*Xt*Ye+Ce,Bi=Vt*Xt*Ye+Lt*he,$i=Lt*Vt*Ye+Xt*he,za=Xt*Vt*Ye-Lt*he,ii=Vt*Vt*Ye+Ce,h[0]=pr*Ni+qr*Ci+wa*_i,h[1]=xr*Ni+Tr*Ci+ha*_i,h[2]=gr*Ni+_n*Ci+qn*_i,h[3]=Zr*Ni+Ea*Ci+sa*_i,h[4]=pr*Ti+qr*Ii+wa*Bi,h[5]=xr*Ti+Tr*Ii+ha*Bi,h[6]=gr*Ti+_n*Ii+qn*Bi,h[7]=Zr*Ti+Ea*Ii+sa*Bi,h[8]=pr*$i+qr*za+wa*ii,h[9]=xr*$i+Tr*za+ha*ii,h[10]=gr*$i+_n*za+qn*ii,h[11]=Zr*$i+Ea*za+sa*ii,T!==h&&(h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15]),h)}function jn(h,T,vt){var Et=Math.sin(vt),Lt=Math.cos(vt),Xt=T[4],Vt=T[5],ue=T[6],he=T[7],Ce=T[8],Ye=T[9],pr=T[10],xr=T[11];return T!==h&&(h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15]),h[4]=Xt*Lt+Ce*Et,h[5]=Vt*Lt+Ye*Et,h[6]=ue*Lt+pr*Et,h[7]=he*Lt+xr*Et,h[8]=Ce*Lt-Xt*Et,h[9]=Ye*Lt-Vt*Et,h[10]=pr*Lt-ue*Et,h[11]=xr*Lt-he*Et,h}function Hn(h,T,vt){var Et=Math.sin(vt),Lt=Math.cos(vt),Xt=T[0],Vt=T[1],ue=T[2],he=T[3],Ce=T[8],Ye=T[9],pr=T[10],xr=T[11];return T!==h&&(h[4]=T[4],h[5]=T[5],h[6]=T[6],h[7]=T[7],h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15]),h[0]=Xt*Lt-Ce*Et,h[1]=Vt*Lt-Ye*Et,h[2]=ue*Lt-pr*Et,h[3]=he*Lt-xr*Et,h[8]=Xt*Et+Ce*Lt,h[9]=Vt*Et+Ye*Lt,h[10]=ue*Et+pr*Lt,h[11]=he*Et+xr*Lt,h}function oa(h,T,vt){var Et=Math.sin(vt),Lt=Math.cos(vt),Xt=T[0],Vt=T[1],ue=T[2],he=T[3],Ce=T[4],Ye=T[5],pr=T[6],xr=T[7];return T!==h&&(h[8]=T[8],h[9]=T[9],h[10]=T[10],h[11]=T[11],h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15]),h[0]=Xt*Lt+Ce*Et,h[1]=Vt*Lt+Ye*Et,h[2]=ue*Lt+pr*Et,h[3]=he*Lt+xr*Et,h[4]=Ce*Lt-Xt*Et,h[5]=Ye*Lt-Vt*Et,h[6]=pr*Lt-ue*Et,h[7]=xr*Lt-he*Et,h}function dn(h,T){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=T[0],h[13]=T[1],h[14]=T[2],h[15]=1,h}function Wn(h,T){return h[0]=T[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=T[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=T[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Dn(h,T,vt){var Et=vt[0],Lt=vt[1],Xt=vt[2],Vt=Math.hypot(Et,Lt,Xt),ue,he,Ce;return Vt<E.EPSILON?null:(Vt=1/Vt,Et*=Vt,Lt*=Vt,Xt*=Vt,ue=Math.sin(T),he=Math.cos(T),Ce=1-he,h[0]=Et*Et*Ce+he,h[1]=Lt*Et*Ce+Xt*ue,h[2]=Xt*Et*Ce-Lt*ue,h[3]=0,h[4]=Et*Lt*Ce-Xt*ue,h[5]=Lt*Lt*Ce+he,h[6]=Xt*Lt*Ce+Et*ue,h[7]=0,h[8]=Et*Xt*Ce+Lt*ue,h[9]=Lt*Xt*Ce-Et*ue,h[10]=Xt*Xt*Ce+he,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function Cn(h,T){var vt=Math.sin(T),Et=Math.cos(T);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Et,h[6]=vt,h[7]=0,h[8]=0,h[9]=-vt,h[10]=Et,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function la(h,T){var vt=Math.sin(T),Et=Math.cos(T);return h[0]=Et,h[1]=0,h[2]=-vt,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=vt,h[9]=0,h[10]=Et,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function K(h,T){var vt=Math.sin(T),Et=Math.cos(T);return h[0]=Et,h[1]=vt,h[2]=0,h[3]=0,h[4]=-vt,h[5]=Et,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ft(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=Et+Et,he=Lt+Lt,Ce=Xt+Xt,Ye=Et*ue,pr=Et*he,xr=Et*Ce,gr=Lt*he,Zr=Lt*Ce,qr=Xt*Ce,Tr=Vt*ue,_n=Vt*he,Ea=Vt*Ce;return h[0]=1-(gr+qr),h[1]=pr+Ea,h[2]=xr-_n,h[3]=0,h[4]=pr-Ea,h[5]=1-(Ye+qr),h[6]=Zr+Tr,h[7]=0,h[8]=xr+_n,h[9]=Zr-Tr,h[10]=1-(Ye+gr),h[11]=0,h[12]=vt[0],h[13]=vt[1],h[14]=vt[2],h[15]=1,h}function rt(h,T){var vt=new E.ARRAY_TYPE(3),Et=-T[0],Lt=-T[1],Xt=-T[2],Vt=T[3],ue=T[4],he=T[5],Ce=T[6],Ye=T[7],pr=Et*Et+Lt*Lt+Xt*Xt+Vt*Vt;return pr>0?(vt[0]=(ue*Vt+Ye*Et+he*Xt-Ce*Lt)*2/pr,vt[1]=(he*Vt+Ye*Lt+Ce*Et-ue*Xt)*2/pr,vt[2]=(Ce*Vt+Ye*Xt+ue*Lt-he*Et)*2/pr):(vt[0]=(ue*Vt+Ye*Et+he*Xt-Ce*Lt)*2,vt[1]=(he*Vt+Ye*Lt+Ce*Et-ue*Xt)*2,vt[2]=(Ce*Vt+Ye*Xt+ue*Lt-he*Et)*2),ft(h,T,vt),h}function O(h,T){return h[0]=T[12],h[1]=T[13],h[2]=T[14],h}function b(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[4],Vt=T[5],ue=T[6],he=T[8],Ce=T[9],Ye=T[10];return h[0]=Math.hypot(vt,Et,Lt),h[1]=Math.hypot(Xt,Vt,ue),h[2]=Math.hypot(he,Ce,Ye),h}function w(h,T){var vt=new E.ARRAY_TYPE(3);b(vt,T);var Et=1/vt[0],Lt=1/vt[1],Xt=1/vt[2],Vt=T[0]*Et,ue=T[1]*Lt,he=T[2]*Xt,Ce=T[4]*Et,Ye=T[5]*Lt,pr=T[6]*Xt,xr=T[8]*Et,gr=T[9]*Lt,Zr=T[10]*Xt,qr=Vt+Ye+Zr,Tr=0;return qr>0?(Tr=Math.sqrt(qr+1)*2,h[3]=.25*Tr,h[0]=(pr-gr)/Tr,h[1]=(xr-he)/Tr,h[2]=(ue-Ce)/Tr):Vt>Ye&&Vt>Zr?(Tr=Math.sqrt(1+Vt-Ye-Zr)*2,h[3]=(pr-gr)/Tr,h[0]=.25*Tr,h[1]=(ue+Ce)/Tr,h[2]=(xr+he)/Tr):Ye>Zr?(Tr=Math.sqrt(1+Ye-Vt-Zr)*2,h[3]=(xr-he)/Tr,h[0]=(ue+Ce)/Tr,h[1]=.25*Tr,h[2]=(pr+gr)/Tr):(Tr=Math.sqrt(1+Zr-Vt-Ye)*2,h[3]=(ue-Ce)/Tr,h[0]=(xr+he)/Tr,h[1]=(pr+gr)/Tr,h[2]=.25*Tr),h}function X(h,T,vt,Et){var Lt=T[0],Xt=T[1],Vt=T[2],ue=T[3],he=Lt+Lt,Ce=Xt+Xt,Ye=Vt+Vt,pr=Lt*he,xr=Lt*Ce,gr=Lt*Ye,Zr=Xt*Ce,qr=Xt*Ye,Tr=Vt*Ye,_n=ue*he,Ea=ue*Ce,wa=ue*Ye,ha=Et[0],qn=Et[1],sa=Et[2];return h[0]=(1-(Zr+Tr))*ha,h[1]=(xr+wa)*ha,h[2]=(gr-Ea)*ha,h[3]=0,h[4]=(xr-wa)*qn,h[5]=(1-(pr+Tr))*qn,h[6]=(qr+_n)*qn,h[7]=0,h[8]=(gr+Ea)*sa,h[9]=(qr-_n)*sa,h[10]=(1-(pr+Zr))*sa,h[11]=0,h[12]=vt[0],h[13]=vt[1],h[14]=vt[2],h[15]=1,h}function xt(h,T,vt,Et,Lt){var Xt=T[0],Vt=T[1],ue=T[2],he=T[3],Ce=Xt+Xt,Ye=Vt+Vt,pr=ue+ue,xr=Xt*Ce,gr=Xt*Ye,Zr=Xt*pr,qr=Vt*Ye,Tr=Vt*pr,_n=ue*pr,Ea=he*Ce,wa=he*Ye,ha=he*pr,qn=Et[0],sa=Et[1],Ni=Et[2],Ci=Lt[0],_i=Lt[1],Ti=Lt[2],Ii=(1-(qr+_n))*qn,Bi=(gr+ha)*qn,$i=(Zr-wa)*qn,za=(gr-ha)*sa,ii=(1-(xr+_n))*sa,ls=(Tr+Ea)*sa,ys=(Zr+wa)*Ni,ko=(Tr-Ea)*Ni,Cu=(1-(xr+qr))*Ni;return h[0]=Ii,h[1]=Bi,h[2]=$i,h[3]=0,h[4]=za,h[5]=ii,h[6]=ls,h[7]=0,h[8]=ys,h[9]=ko,h[10]=Cu,h[11]=0,h[12]=vt[0]+Ci-(Ii*Ci+za*_i+ys*Ti),h[13]=vt[1]+_i-(Bi*Ci+ii*_i+ko*Ti),h[14]=vt[2]+Ti-($i*Ci+ls*_i+Cu*Ti),h[15]=1,h}function At(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[3],Vt=vt+vt,ue=Et+Et,he=Lt+Lt,Ce=vt*Vt,Ye=Et*Vt,pr=Et*ue,xr=Lt*Vt,gr=Lt*ue,Zr=Lt*he,qr=Xt*Vt,Tr=Xt*ue,_n=Xt*he;return h[0]=1-pr-Zr,h[1]=Ye+_n,h[2]=xr-Tr,h[3]=0,h[4]=Ye-_n,h[5]=1-Ce-Zr,h[6]=gr+qr,h[7]=0,h[8]=xr+Tr,h[9]=gr-qr,h[10]=1-Ce-pr,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function wt(h,T,vt,Et,Lt,Xt,Vt){var ue=1/(vt-T),he=1/(Lt-Et),Ce=1/(Xt-Vt);return h[0]=Xt*2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Xt*2*he,h[6]=0,h[7]=0,h[8]=(vt+T)*ue,h[9]=(Lt+Et)*he,h[10]=(Vt+Xt)*Ce,h[11]=-1,h[12]=0,h[13]=0,h[14]=Vt*Xt*2*Ce,h[15]=0,h}function Pt(h,T,vt,Et,Lt){var Xt=1/Math.tan(T/2),Vt;return h[0]=Xt/vt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Xt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Lt!=null&&Lt!==1/0?(Vt=1/(Et-Lt),h[10]=(Lt+Et)*Vt,h[14]=2*Lt*Et*Vt):(h[10]=-1,h[14]=-2*Et),h}var Me=Pt;function ve(h,T,vt,Et,Lt){var Xt=1/Math.tan(T/2),Vt;return h[0]=Xt/vt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Xt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Lt!=null&&Lt!==1/0?(Vt=1/(Et-Lt),h[10]=Lt*Vt,h[14]=Lt*Et*Vt):(h[10]=-1,h[14]=-Et),h}function He(h,T,vt,Et){var Lt=Math.tan(T.upDegrees*Math.PI/180),Xt=Math.tan(T.downDegrees*Math.PI/180),Vt=Math.tan(T.leftDegrees*Math.PI/180),ue=Math.tan(T.rightDegrees*Math.PI/180),he=2/(Vt+ue),Ce=2/(Lt+Xt);return h[0]=he,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Ce,h[6]=0,h[7]=0,h[8]=-((Vt-ue)*he*.5),h[9]=(Lt-Xt)*Ce*.5,h[10]=Et/(vt-Et),h[11]=-1,h[12]=0,h[13]=0,h[14]=Et*vt/(vt-Et),h[15]=0,h}function br(h,T,vt,Et,Lt,Xt,Vt){var ue=1/(T-vt),he=1/(Et-Lt),Ce=1/(Xt-Vt);return h[0]=-2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*he,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Ce,h[11]=0,h[12]=(T+vt)*ue,h[13]=(Lt+Et)*he,h[14]=(Vt+Xt)*Ce,h[15]=1,h}var ar=br;function mr(h,T,vt,Et,Lt,Xt,Vt){var ue=1/(T-vt),he=1/(Et-Lt),Ce=1/(Xt-Vt);return h[0]=-2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*he,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Ce,h[11]=0,h[12]=(T+vt)*ue,h[13]=(Lt+Et)*he,h[14]=Xt*Ce,h[15]=1,h}function Mn(h,T,vt,Et){var Lt,Xt,Vt,ue,he,Ce,Ye,pr,xr,gr,Zr=T[0],qr=T[1],Tr=T[2],_n=Et[0],Ea=Et[1],wa=Et[2],ha=vt[0],qn=vt[1],sa=vt[2];return Math.abs(Zr-ha)<E.EPSILON&&Math.abs(qr-qn)<E.EPSILON&&Math.abs(Tr-sa)<E.EPSILON?Ln(h):(Ye=Zr-ha,pr=qr-qn,xr=Tr-sa,gr=1/Math.hypot(Ye,pr,xr),Ye*=gr,pr*=gr,xr*=gr,Lt=Ea*xr-wa*pr,Xt=wa*Ye-_n*xr,Vt=_n*pr-Ea*Ye,gr=Math.hypot(Lt,Xt,Vt),gr?(gr=1/gr,Lt*=gr,Xt*=gr,Vt*=gr):(Lt=0,Xt=0,Vt=0),ue=pr*Vt-xr*Xt,he=xr*Lt-Ye*Vt,Ce=Ye*Xt-pr*Lt,gr=Math.hypot(ue,he,Ce),gr?(gr=1/gr,ue*=gr,he*=gr,Ce*=gr):(ue=0,he=0,Ce=0),h[0]=Lt,h[1]=ue,h[2]=Ye,h[3]=0,h[4]=Xt,h[5]=he,h[6]=pr,h[7]=0,h[8]=Vt,h[9]=Ce,h[10]=xr,h[11]=0,h[12]=-(Lt*Zr+Xt*qr+Vt*Tr),h[13]=-(ue*Zr+he*qr+Ce*Tr),h[14]=-(Ye*Zr+pr*qr+xr*Tr),h[15]=1,h)}function Xe(h,T,vt,Et){var Lt=T[0],Xt=T[1],Vt=T[2],ue=Et[0],he=Et[1],Ce=Et[2],Ye=Lt-vt[0],pr=Xt-vt[1],xr=Vt-vt[2],gr=Ye*Ye+pr*pr+xr*xr;gr>0&&(gr=1/Math.sqrt(gr),Ye*=gr,pr*=gr,xr*=gr);var Zr=he*xr-Ce*pr,qr=Ce*Ye-ue*xr,Tr=ue*pr-he*Ye;return gr=Zr*Zr+qr*qr+Tr*Tr,gr>0&&(gr=1/Math.sqrt(gr),Zr*=gr,qr*=gr,Tr*=gr),h[0]=Zr,h[1]=qr,h[2]=Tr,h[3]=0,h[4]=pr*Tr-xr*qr,h[5]=xr*Zr-Ye*Tr,h[6]=Ye*qr-pr*Zr,h[7]=0,h[8]=Ye,h[9]=pr,h[10]=xr,h[11]=0,h[12]=Lt,h[13]=Xt,h[14]=Vt,h[15]=1,h}function hr(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function Er(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function on(h,T,vt){return h[0]=T[0]+vt[0],h[1]=T[1]+vt[1],h[2]=T[2]+vt[2],h[3]=T[3]+vt[3],h[4]=T[4]+vt[4],h[5]=T[5]+vt[5],h[6]=T[6]+vt[6],h[7]=T[7]+vt[7],h[8]=T[8]+vt[8],h[9]=T[9]+vt[9],h[10]=T[10]+vt[10],h[11]=T[11]+vt[11],h[12]=T[12]+vt[12],h[13]=T[13]+vt[13],h[14]=T[14]+vt[14],h[15]=T[15]+vt[15],h}function Wr(h,T,vt){return h[0]=T[0]-vt[0],h[1]=T[1]-vt[1],h[2]=T[2]-vt[2],h[3]=T[3]-vt[3],h[4]=T[4]-vt[4],h[5]=T[5]-vt[5],h[6]=T[6]-vt[6],h[7]=T[7]-vt[7],h[8]=T[8]-vt[8],h[9]=T[9]-vt[9],h[10]=T[10]-vt[10],h[11]=T[11]-vt[11],h[12]=T[12]-vt[12],h[13]=T[13]-vt[13],h[14]=T[14]-vt[14],h[15]=T[15]-vt[15],h}function xa(h,T,vt){return h[0]=T[0]*vt,h[1]=T[1]*vt,h[2]=T[2]*vt,h[3]=T[3]*vt,h[4]=T[4]*vt,h[5]=T[5]*vt,h[6]=T[6]*vt,h[7]=T[7]*vt,h[8]=T[8]*vt,h[9]=T[9]*vt,h[10]=T[10]*vt,h[11]=T[11]*vt,h[12]=T[12]*vt,h[13]=T[13]*vt,h[14]=T[14]*vt,h[15]=T[15]*vt,h}function Ta(h,T,vt,Et){return h[0]=T[0]+vt[0]*Et,h[1]=T[1]+vt[1]*Et,h[2]=T[2]+vt[2]*Et,h[3]=T[3]+vt[3]*Et,h[4]=T[4]+vt[4]*Et,h[5]=T[5]+vt[5]*Et,h[6]=T[6]+vt[6]*Et,h[7]=T[7]+vt[7]*Et,h[8]=T[8]+vt[8]*Et,h[9]=T[9]+vt[9]*Et,h[10]=T[10]+vt[10]*Et,h[11]=T[11]+vt[11]*Et,h[12]=T[12]+vt[12]*Et,h[13]=T[13]+vt[13]*Et,h[14]=T[14]+vt[14]*Et,h[15]=T[15]+vt[15]*Et,h}function Rn(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]&&h[4]===T[4]&&h[5]===T[5]&&h[6]===T[6]&&h[7]===T[7]&&h[8]===T[8]&&h[9]===T[9]&&h[10]===T[10]&&h[11]===T[11]&&h[12]===T[12]&&h[13]===T[13]&&h[14]===T[14]&&h[15]===T[15]}function Jn(h,T){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=h[4],ue=h[5],he=h[6],Ce=h[7],Ye=h[8],pr=h[9],xr=h[10],gr=h[11],Zr=h[12],qr=h[13],Tr=h[14],_n=h[15],Ea=T[0],wa=T[1],ha=T[2],qn=T[3],sa=T[4],Ni=T[5],Ci=T[6],_i=T[7],Ti=T[8],Ii=T[9],Bi=T[10],$i=T[11],za=T[12],ii=T[13],ls=T[14],ys=T[15];return Math.abs(vt-Ea)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(Ea))&&Math.abs(Et-wa)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(wa))&&Math.abs(Lt-ha)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(ha))&&Math.abs(Xt-qn)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(qn))&&Math.abs(Vt-sa)<=E.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(sa))&&Math.abs(ue-Ni)<=E.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Ni))&&Math.abs(he-Ci)<=E.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ci))&&Math.abs(Ce-_i)<=E.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(_i))&&Math.abs(Ye-Ti)<=E.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Ti))&&Math.abs(pr-Ii)<=E.EPSILON*Math.max(1,Math.abs(pr),Math.abs(Ii))&&Math.abs(xr-Bi)<=E.EPSILON*Math.max(1,Math.abs(xr),Math.abs(Bi))&&Math.abs(gr-$i)<=E.EPSILON*Math.max(1,Math.abs(gr),Math.abs($i))&&Math.abs(Zr-za)<=E.EPSILON*Math.max(1,Math.abs(Zr),Math.abs(za))&&Math.abs(qr-ii)<=E.EPSILON*Math.max(1,Math.abs(qr),Math.abs(ii))&&Math.abs(Tr-ls)<=E.EPSILON*Math.max(1,Math.abs(Tr),Math.abs(ls))&&Math.abs(_n-ys)<=E.EPSILON*Math.max(1,Math.abs(_n),Math.abs(ys))}var Ga=Pr,Aa=Wr,an=z(277160);function Vn(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function me(h){var T=new E.ARRAY_TYPE(4);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T}function Dt(h,T,vt,Et){var Lt=new E.ARRAY_TYPE(4);return Lt[0]=h,Lt[1]=T,Lt[2]=vt,Lt[3]=Et,Lt}function fe(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h}function Ae(h,T,vt,Et,Lt){return h[0]=T,h[1]=vt,h[2]=Et,h[3]=Lt,h}function be(h,T,vt){return h[0]=T[0]+vt[0],h[1]=T[1]+vt[1],h[2]=T[2]+vt[2],h[3]=T[3]+vt[3],h}function De(h,T,vt){return h[0]=T[0]-vt[0],h[1]=T[1]-vt[1],h[2]=T[2]-vt[2],h[3]=T[3]-vt[3],h}function or(h,T,vt){return h[0]=T[0]*vt[0],h[1]=T[1]*vt[1],h[2]=T[2]*vt[2],h[3]=T[3]*vt[3],h}function Fr(h,T,vt){return h[0]=T[0]/vt[0],h[1]=T[1]/vt[1],h[2]=T[2]/vt[2],h[3]=T[3]/vt[3],h}function Jr(h,T){return h[0]=Math.ceil(T[0]),h[1]=Math.ceil(T[1]),h[2]=Math.ceil(T[2]),h[3]=Math.ceil(T[3]),h}function Pn(h,T){return h[0]=Math.floor(T[0]),h[1]=Math.floor(T[1]),h[2]=Math.floor(T[2]),h[3]=Math.floor(T[3]),h}function Bn(h,T,vt){return h[0]=Math.min(T[0],vt[0]),h[1]=Math.min(T[1],vt[1]),h[2]=Math.min(T[2],vt[2]),h[3]=Math.min(T[3],vt[3]),h}function Zn(h,T,vt){return h[0]=Math.max(T[0],vt[0]),h[1]=Math.max(T[1],vt[1]),h[2]=Math.max(T[2],vt[2]),h[3]=Math.max(T[3],vt[3]),h}function ba(h,T){return h[0]=Math.round(T[0]),h[1]=Math.round(T[1]),h[2]=Math.round(T[2]),h[3]=Math.round(T[3]),h}function Ca(h,T,vt){return h[0]=T[0]*vt,h[1]=T[1]*vt,h[2]=T[2]*vt,h[3]=T[3]*vt,h}function li(h,T,vt,Et){return h[0]=T[0]+vt[0]*Et,h[1]=T[1]+vt[1]*Et,h[2]=T[2]+vt[2]*Et,h[3]=T[3]+vt[3]*Et,h}function ta(h,T){var vt=T[0]-h[0],Et=T[1]-h[1],Lt=T[2]-h[2],Xt=T[3]-h[3];return Math.hypot(vt,Et,Lt,Xt)}function fi(h,T){var vt=T[0]-h[0],Et=T[1]-h[1],Lt=T[2]-h[2],Xt=T[3]-h[3];return vt*vt+Et*Et+Lt*Lt+Xt*Xt}function Co(h){var T=h[0],vt=h[1],Et=h[2],Lt=h[3];return Math.hypot(T,vt,Et,Lt)}function La(h){var T=h[0],vt=h[1],Et=h[2],Lt=h[3];return T*T+vt*vt+Et*Et+Lt*Lt}function xi(h,T){return h[0]=-T[0],h[1]=-T[1],h[2]=-T[2],h[3]=-T[3],h}function so(h,T){return h[0]=1/T[0],h[1]=1/T[1],h[2]=1/T[2],h[3]=1/T[3],h}function To(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[3],Vt=vt*vt+Et*Et+Lt*Lt+Xt*Xt;return Vt>0&&(Vt=1/Math.sqrt(Vt)),h[0]=vt*Vt,h[1]=Et*Vt,h[2]=Lt*Vt,h[3]=Xt*Vt,h}function bo(h,T){return h[0]*T[0]+h[1]*T[1]+h[2]*T[2]+h[3]*T[3]}function uo(h,T,vt,Et){var Lt=vt[0]*Et[1]-vt[1]*Et[0],Xt=vt[0]*Et[2]-vt[2]*Et[0],Vt=vt[0]*Et[3]-vt[3]*Et[0],ue=vt[1]*Et[2]-vt[2]*Et[1],he=vt[1]*Et[3]-vt[3]*Et[1],Ce=vt[2]*Et[3]-vt[3]*Et[2],Ye=T[0],pr=T[1],xr=T[2],gr=T[3];return h[0]=pr*Ce-xr*he+gr*ue,h[1]=-(Ye*Ce)+xr*Vt-gr*Xt,h[2]=Ye*he-pr*Vt+gr*Lt,h[3]=-(Ye*ue)+pr*Xt-xr*Lt,h}function Hi(h,T,vt,Et){var Lt=T[0],Xt=T[1],Vt=T[2],ue=T[3];return h[0]=Lt+Et*(vt[0]-Lt),h[1]=Xt+Et*(vt[1]-Xt),h[2]=Vt+Et*(vt[2]-Vt),h[3]=ue+Et*(vt[3]-ue),h}function ds(h,T){T=T||1;var vt,Et,Lt,Xt,Vt,ue;do vt=E.RANDOM()*2-1,Et=E.RANDOM()*2-1,Vt=vt*vt+Et*Et;while(Vt>=1);do Lt=E.RANDOM()*2-1,Xt=E.RANDOM()*2-1,ue=Lt*Lt+Xt*Xt;while(ue>=1);var he=Math.sqrt((1-Vt)/ue);return h[0]=T*vt,h[1]=T*Et,h[2]=T*Lt*he,h[3]=T*Xt*he,h}function zi(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3];return h[0]=vt[0]*Et+vt[4]*Lt+vt[8]*Xt+vt[12]*Vt,h[1]=vt[1]*Et+vt[5]*Lt+vt[9]*Xt+vt[13]*Vt,h[2]=vt[2]*Et+vt[6]*Lt+vt[10]*Xt+vt[14]*Vt,h[3]=vt[3]*Et+vt[7]*Lt+vt[11]*Xt+vt[15]*Vt,h}function Ui(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=vt[0],ue=vt[1],he=vt[2],Ce=vt[3],Ye=Ce*Et+ue*Xt-he*Lt,pr=Ce*Lt+he*Et-Vt*Xt,xr=Ce*Xt+Vt*Lt-ue*Et,gr=-Vt*Et-ue*Lt-he*Xt;return h[0]=Ye*Ce+gr*-Vt+pr*-he-xr*-ue,h[1]=pr*Ce+gr*-ue+xr*-Vt-Ye*-he,h[2]=xr*Ce+gr*-he+Ye*-ue-pr*-Vt,h[3]=T[3],h}function gs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function Ms(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function Go(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]}function _o(h,T){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=T[0],ue=T[1],he=T[2],Ce=T[3];return Math.abs(vt-Vt)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(Vt))&&Math.abs(Et-ue)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ue))&&Math.abs(Lt-he)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(he))&&Math.abs(Xt-Ce)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Ce))}var Io=De,$s=or,Yn=Fr,So=ta,Oo=fi,Wi=Co,zn=La,Lo=function(){var h=Vn();return function(T,vt,Et,Lt,Xt,Vt){var ue,he;for(vt||(vt=4),Et||(Et=0),Lt?he=Math.min(Lt*vt+Et,T.length):he=T.length,ue=Et;ue<he;ue+=vt)h[0]=T[ue],h[1]=T[ue+1],h[2]=T[ue+2],h[3]=T[ue+3],Xt(h,h,Vt),T[ue]=h[0],T[ue+1]=h[1],T[ue+2]=h[2],T[ue+3]=h[3];return T}}();function Ai(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function zo(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function Uo(h,T,vt){vt=vt*.5;var Et=Math.sin(vt);return h[0]=Et*T[0],h[1]=Et*T[1],h[2]=Et*T[2],h[3]=Math.cos(vt),h}function ps(h,T){var vt=Math.acos(T[3])*2,Et=Math.sin(vt/2);return Et>E.EPSILON?(h[0]=T[0]/Et,h[1]=T[1]/Et,h[2]=T[2]/Et):(h[0]=1,h[1]=0,h[2]=0),vt}function eo(h,T){var vt=Ki(h,T);return Math.acos(2*vt*vt-1)}function ro(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=vt[0],he=vt[1],Ce=vt[2],Ye=vt[3];return h[0]=Et*Ye+Vt*ue+Lt*Ce-Xt*he,h[1]=Lt*Ye+Vt*he+Xt*ue-Et*Ce,h[2]=Xt*Ye+Vt*Ce+Et*he-Lt*ue,h[3]=Vt*Ye-Et*ue-Lt*he-Xt*Ce,h}function ei(h,T,vt){vt*=.5;var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=Math.sin(vt),he=Math.cos(vt);return h[0]=Et*he+Vt*ue,h[1]=Lt*he+Xt*ue,h[2]=Xt*he-Lt*ue,h[3]=Vt*he-Et*ue,h}function fo(h,T,vt){vt*=.5;var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=Math.sin(vt),he=Math.cos(vt);return h[0]=Et*he-Xt*ue,h[1]=Lt*he+Vt*ue,h[2]=Xt*he+Et*ue,h[3]=Vt*he-Lt*ue,h}function Do(h,T,vt){vt*=.5;var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=Math.sin(vt),he=Math.cos(vt);return h[0]=Et*he+Lt*ue,h[1]=Lt*he-Et*ue,h[2]=Xt*he+Vt*ue,h[3]=Vt*he-Xt*ue,h}function Wo(h,T){var vt=T[0],Et=T[1],Lt=T[2];return h[0]=vt,h[1]=Et,h[2]=Lt,h[3]=Math.sqrt(Math.abs(1-vt*vt-Et*Et-Lt*Lt)),h}function No(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[3],Vt=Math.sqrt(vt*vt+Et*Et+Lt*Lt),ue=Math.exp(Xt),he=Vt>0?ue*Math.sin(Vt)/Vt:0;return h[0]=vt*he,h[1]=Et*he,h[2]=Lt*he,h[3]=ue*Math.cos(Vt),h}function is(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[3],Vt=Math.sqrt(vt*vt+Et*Et+Lt*Lt),ue=Vt>0?Math.atan2(Vt,Xt)/Vt:0;return h[0]=vt*ue,h[1]=Et*ue,h[2]=Lt*ue,h[3]=.5*Math.log(vt*vt+Et*Et+Lt*Lt+Xt*Xt),h}function Xo(h,T,vt){return is(h,T),ki(h,h,vt),No(h,h),h}function Jo(h,T,vt,Et){var Lt=T[0],Xt=T[1],Vt=T[2],ue=T[3],he=vt[0],Ce=vt[1],Ye=vt[2],pr=vt[3],xr,gr,Zr,qr,Tr;return gr=Lt*he+Xt*Ce+Vt*Ye+ue*pr,gr<0&&(gr=-gr,he=-he,Ce=-Ce,Ye=-Ye,pr=-pr),1-gr>E.EPSILON?(xr=Math.acos(gr),Zr=Math.sin(xr),qr=Math.sin((1-Et)*xr)/Zr,Tr=Math.sin(Et*xr)/Zr):(qr=1-Et,Tr=Et),h[0]=qr*Lt+Tr*he,h[1]=qr*Xt+Tr*Ce,h[2]=qr*Vt+Tr*Ye,h[3]=qr*ue+Tr*pr,h}function Xa(h){var T=E.RANDOM(),vt=E.RANDOM(),Et=E.RANDOM(),Lt=Math.sqrt(1-T),Xt=Math.sqrt(T);return h[0]=Lt*Math.sin(2*Math.PI*vt),h[1]=Lt*Math.cos(2*Math.PI*vt),h[2]=Xt*Math.sin(2*Math.PI*Et),h[3]=Xt*Math.cos(2*Math.PI*Et),h}function As(h,T){var vt=T[0],Et=T[1],Lt=T[2],Xt=T[3],Vt=vt*vt+Et*Et+Lt*Lt+Xt*Xt,ue=Vt?1/Vt:0;return h[0]=-vt*ue,h[1]=-Et*ue,h[2]=-Lt*ue,h[3]=Xt*ue,h}function iu(h,T){return h[0]=-T[0],h[1]=-T[1],h[2]=-T[2],h[3]=T[3],h}function Xi(h,T){var vt=T[0]+T[4]+T[8],Et;if(vt>0)Et=Math.sqrt(vt+1),h[3]=.5*Et,Et=.5/Et,h[0]=(T[5]-T[7])*Et,h[1]=(T[6]-T[2])*Et,h[2]=(T[1]-T[3])*Et;else{var Lt=0;T[4]>T[0]&&(Lt=1),T[8]>T[Lt*3+Lt]&&(Lt=2);var Xt=(Lt+1)%3,Vt=(Lt+2)%3;Et=Math.sqrt(T[Lt*3+Lt]-T[Xt*3+Xt]-T[Vt*3+Vt]+1),h[Lt]=.5*Et,Et=.5/Et,h[3]=(T[Xt*3+Vt]-T[Vt*3+Xt])*Et,h[Xt]=(T[Xt*3+Lt]+T[Lt*3+Xt])*Et,h[Vt]=(T[Vt*3+Lt]+T[Lt*3+Vt])*Et}return h}function os(h,T,vt,Et){var Lt=.5*Math.PI/180;T*=Lt,vt*=Lt,Et*=Lt;var Xt=Math.sin(T),Vt=Math.cos(T),ue=Math.sin(vt),he=Math.cos(vt),Ce=Math.sin(Et),Ye=Math.cos(Et);return h[0]=Xt*he*Ye-Vt*ue*Ce,h[1]=Vt*ue*Ye+Xt*he*Ce,h[2]=Vt*he*Ce-Xt*ue*Ye,h[3]=Vt*he*Ye+Xt*ue*Ce,h}function Eo(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var Yi=me,co=Dt,pa=fe,ja=Ae,yi=be,no=ro,ki=Ca,Ki=bo,Yo=Hi,wo=Co,ts=wo,lo=La,Rs=lo,ou=To,Cs=Go,ci=_o,Po=function(){var h=an.create(),T=an.fromValues(1,0,0),vt=an.fromValues(0,1,0);return function(Et,Lt,Xt){var Vt=an.dot(Lt,Xt);return Vt<-.999999?(an.cross(h,T,Lt),an.len(h)<1e-6&&an.cross(h,vt,Lt),an.normalize(h,h),Uo(Et,h,Math.PI),Et):Vt>.999999?(Et[0]=0,Et[1]=0,Et[2]=0,Et[3]=1,Et):(an.cross(h,Lt,Xt),Et[0]=h[0],Et[1]=h[1],Et[2]=h[2],Et[3]=1+Vt,ou(Et,Et))}}(),Wu=function(){var h=Ai(),T=Ai();return function(vt,Et,Lt,Xt,Vt,ue){return Jo(h,Et,Vt,ue),Jo(T,Lt,Xt,ue),Jo(vt,h,T,2*ue*(1-ue)),vt}}(),ho=function(){var h=Ur.create();return function(T,vt,Et,Lt){return h[0]=Et[0],h[3]=Et[1],h[6]=Et[2],h[1]=Lt[0],h[4]=Lt[1],h[7]=Lt[2],h[2]=-vt[0],h[5]=-vt[1],h[8]=-vt[2],ou(T,Xi(T,h))}}();function Bs(){var h=new E.ARRAY_TYPE(8);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function Ts(h){var T=new E.ARRAY_TYPE(8);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T[4]=h[4],T[5]=h[5],T[6]=h[6],T[7]=h[7],T}function Vo(h,T,vt,Et,Lt,Xt,Vt,ue){var he=new E.ARRAY_TYPE(8);return he[0]=h,he[1]=T,he[2]=vt,he[3]=Et,he[4]=Lt,he[5]=Xt,he[6]=Vt,he[7]=ue,he}function Fs(h,T,vt,Et,Lt,Xt,Vt){var ue=new E.ARRAY_TYPE(8);ue[0]=h,ue[1]=T,ue[2]=vt,ue[3]=Et;var he=Lt*.5,Ce=Xt*.5,Ye=Vt*.5;return ue[4]=he*Et+Ce*vt-Ye*T,ue[5]=Ce*Et+Ye*h-he*vt,ue[6]=Ye*Et+he*T-Ce*h,ue[7]=-he*h-Ce*T-Ye*vt,ue}function ss(h,T,vt){var Et=vt[0]*.5,Lt=vt[1]*.5,Xt=vt[2]*.5,Vt=T[0],ue=T[1],he=T[2],Ce=T[3];return h[0]=Vt,h[1]=ue,h[2]=he,h[3]=Ce,h[4]=Et*Ce+Lt*he-Xt*ue,h[5]=Lt*Ce+Xt*Vt-Et*he,h[6]=Xt*Ce+Et*ue-Lt*Vt,h[7]=-Et*Vt-Lt*ue-Xt*he,h}function jo(h,T){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=T[0]*.5,h[5]=T[1]*.5,h[6]=T[2]*.5,h[7]=0,h}function us(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function su(h,T){var vt=Ai();w(vt,T);var Et=new E.ARRAY_TYPE(3);return O(Et,T),ss(h,vt,Et),h}function Gs(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[4]=T[4],h[5]=T[5],h[6]=T[6],h[7]=T[7],h}function fs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function Tt(h,T,vt,Et,Lt,Xt,Vt,ue,he){return h[0]=T,h[1]=vt,h[2]=Et,h[3]=Lt,h[4]=Xt,h[5]=Vt,h[6]=ue,h[7]=he,h}var jt=pa;function ze(h,T){return h[0]=T[4],h[1]=T[5],h[2]=T[6],h[3]=T[7],h}var Ke=pa;function Cr(h,T){return h[4]=T[0],h[5]=T[1],h[6]=T[2],h[7]=T[3],h}function cn(h,T){var vt=T[4],Et=T[5],Lt=T[6],Xt=T[7],Vt=-T[0],ue=-T[1],he=-T[2],Ce=T[3];return h[0]=(vt*Ce+Xt*Vt+Et*he-Lt*ue)*2,h[1]=(Et*Ce+Xt*ue+Lt*Vt-vt*he)*2,h[2]=(Lt*Ce+Xt*he+vt*ue-Et*Vt)*2,h}function mn(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=vt[0]*.5,he=vt[1]*.5,Ce=vt[2]*.5,Ye=T[4],pr=T[5],xr=T[6],gr=T[7];return h[0]=Et,h[1]=Lt,h[2]=Xt,h[3]=Vt,h[4]=Vt*ue+Lt*Ce-Xt*he+Ye,h[5]=Vt*he+Xt*ue-Et*Ce+pr,h[6]=Vt*Ce+Et*he-Lt*ue+xr,h[7]=-Et*ue-Lt*he-Xt*Ce+gr,h}function aa(h,T,vt){var Et=-T[0],Lt=-T[1],Xt=-T[2],Vt=T[3],ue=T[4],he=T[5],Ce=T[6],Ye=T[7],pr=ue*Vt+Ye*Et+he*Xt-Ce*Lt,xr=he*Vt+Ye*Lt+Ce*Et-ue*Xt,gr=Ce*Vt+Ye*Xt+ue*Lt-he*Et,Zr=Ye*Vt-ue*Et-he*Lt-Ce*Xt;return ei(h,T,vt),Et=h[0],Lt=h[1],Xt=h[2],Vt=h[3],h[4]=pr*Vt+Zr*Et+xr*Xt-gr*Lt,h[5]=xr*Vt+Zr*Lt+gr*Et-pr*Xt,h[6]=gr*Vt+Zr*Xt+pr*Lt-xr*Et,h[7]=Zr*Vt-pr*Et-xr*Lt-gr*Xt,h}function ai(h,T,vt){var Et=-T[0],Lt=-T[1],Xt=-T[2],Vt=T[3],ue=T[4],he=T[5],Ce=T[6],Ye=T[7],pr=ue*Vt+Ye*Et+he*Xt-Ce*Lt,xr=he*Vt+Ye*Lt+Ce*Et-ue*Xt,gr=Ce*Vt+Ye*Xt+ue*Lt-he*Et,Zr=Ye*Vt-ue*Et-he*Lt-Ce*Xt;return fo(h,T,vt),Et=h[0],Lt=h[1],Xt=h[2],Vt=h[3],h[4]=pr*Vt+Zr*Et+xr*Xt-gr*Lt,h[5]=xr*Vt+Zr*Lt+gr*Et-pr*Xt,h[6]=gr*Vt+Zr*Xt+pr*Lt-xr*Et,h[7]=Zr*Vt-pr*Et-xr*Lt-gr*Xt,h}function Zi(h,T,vt){var Et=-T[0],Lt=-T[1],Xt=-T[2],Vt=T[3],ue=T[4],he=T[5],Ce=T[6],Ye=T[7],pr=ue*Vt+Ye*Et+he*Xt-Ce*Lt,xr=he*Vt+Ye*Lt+Ce*Et-ue*Xt,gr=Ce*Vt+Ye*Xt+ue*Lt-he*Et,Zr=Ye*Vt-ue*Et-he*Lt-Ce*Xt;return Do(h,T,vt),Et=h[0],Lt=h[1],Xt=h[2],Vt=h[3],h[4]=pr*Vt+Zr*Et+xr*Xt-gr*Lt,h[5]=xr*Vt+Zr*Lt+gr*Et-pr*Xt,h[6]=gr*Vt+Zr*Xt+pr*Lt-xr*Et,h[7]=Zr*Vt-pr*Et-xr*Lt-gr*Xt,h}function ao(h,T,vt){var Et=vt[0],Lt=vt[1],Xt=vt[2],Vt=vt[3],ue=T[0],he=T[1],Ce=T[2],Ye=T[3];return h[0]=ue*Vt+Ye*Et+he*Xt-Ce*Lt,h[1]=he*Vt+Ye*Lt+Ce*Et-ue*Xt,h[2]=Ce*Vt+Ye*Xt+ue*Lt-he*Et,h[3]=Ye*Vt-ue*Et-he*Lt-Ce*Xt,ue=T[4],he=T[5],Ce=T[6],Ye=T[7],h[4]=ue*Vt+Ye*Et+he*Xt-Ce*Lt,h[5]=he*Vt+Ye*Lt+Ce*Et-ue*Xt,h[6]=Ce*Vt+Ye*Xt+ue*Lt-he*Et,h[7]=Ye*Vt-ue*Et-he*Lt-Ce*Xt,h}function zs(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=vt[0],he=vt[1],Ce=vt[2],Ye=vt[3];return h[0]=Et*Ye+Vt*ue+Lt*Ce-Xt*he,h[1]=Lt*Ye+Vt*he+Xt*ue-Et*Ce,h[2]=Xt*Ye+Vt*Ce+Et*he-Lt*ue,h[3]=Vt*Ye-Et*ue-Lt*he-Xt*Ce,ue=vt[4],he=vt[5],Ce=vt[6],Ye=vt[7],h[4]=Et*Ye+Vt*ue+Lt*Ce-Xt*he,h[5]=Lt*Ye+Vt*he+Xt*ue-Et*Ce,h[6]=Xt*Ye+Vt*Ce+Et*he-Lt*ue,h[7]=Vt*Ye-Et*ue-Lt*he-Xt*Ce,h}function Mu(h,T,vt,Et){if(Math.abs(Et)<E.EPSILON)return Gs(h,T);var Lt=Math.hypot(vt[0],vt[1],vt[2]);Et=Et*.5;var Xt=Math.sin(Et),Vt=Xt*vt[0]/Lt,ue=Xt*vt[1]/Lt,he=Xt*vt[2]/Lt,Ce=Math.cos(Et),Ye=T[0],pr=T[1],xr=T[2],gr=T[3];h[0]=Ye*Ce+gr*Vt+pr*he-xr*ue,h[1]=pr*Ce+gr*ue+xr*Vt-Ye*he,h[2]=xr*Ce+gr*he+Ye*ue-pr*Vt,h[3]=gr*Ce-Ye*Vt-pr*ue-xr*he;var Zr=T[4],qr=T[5],Tr=T[6],_n=T[7];return h[4]=Zr*Ce+_n*Vt+qr*he-Tr*ue,h[5]=qr*Ce+_n*ue+Tr*Vt-Zr*he,h[6]=Tr*Ce+_n*he+Zr*ue-qr*Vt,h[7]=_n*Ce-Zr*Vt-qr*ue-Tr*he,h}function Ri(h,T,vt){return h[0]=T[0]+vt[0],h[1]=T[1]+vt[1],h[2]=T[2]+vt[2],h[3]=T[3]+vt[3],h[4]=T[4]+vt[4],h[5]=T[5]+vt[5],h[6]=T[6]+vt[6],h[7]=T[7]+vt[7],h}function vo(h,T,vt){var Et=T[0],Lt=T[1],Xt=T[2],Vt=T[3],ue=vt[4],he=vt[5],Ce=vt[6],Ye=vt[7],pr=T[4],xr=T[5],gr=T[6],Zr=T[7],qr=vt[0],Tr=vt[1],_n=vt[2],Ea=vt[3];return h[0]=Et*Ea+Vt*qr+Lt*_n-Xt*Tr,h[1]=Lt*Ea+Vt*Tr+Xt*qr-Et*_n,h[2]=Xt*Ea+Vt*_n+Et*Tr-Lt*qr,h[3]=Vt*Ea-Et*qr-Lt*Tr-Xt*_n,h[4]=Et*Ye+Vt*ue+Lt*Ce-Xt*he+pr*Ea+Zr*qr+xr*_n-gr*Tr,h[5]=Lt*Ye+Vt*he+Xt*ue-Et*Ce+xr*Ea+Zr*Tr+gr*qr-pr*_n,h[6]=Xt*Ye+Vt*Ce+Et*he-Lt*ue+gr*Ea+Zr*_n+pr*Tr-xr*qr,h[7]=Vt*Ye-Et*ue-Lt*he-Xt*Ce+Zr*Ea-pr*qr-xr*Tr-gr*_n,h}var qs=vo;function Xu(h,T,vt){return h[0]=T[0]*vt,h[1]=T[1]*vt,h[2]=T[2]*vt,h[3]=T[3]*vt,h[4]=T[4]*vt,h[5]=T[5]*vt,h[6]=T[6]*vt,h[7]=T[7]*vt,h}var Au=Ki;function uu(h,T,vt,Et){var Lt=1-Et;return Au(T,vt)<0&&(Et=-Et),h[0]=T[0]*Lt+vt[0]*Et,h[1]=T[1]*Lt+vt[1]*Et,h[2]=T[2]*Lt+vt[2]*Et,h[3]=T[3]*Lt+vt[3]*Et,h[4]=T[4]*Lt+vt[4]*Et,h[5]=T[5]*Lt+vt[5]*Et,h[6]=T[6]*Lt+vt[6]*Et,h[7]=T[7]*Lt+vt[7]*Et,h}function Qs(h,T){var vt=cs(T);return h[0]=-T[0]/vt,h[1]=-T[1]/vt,h[2]=-T[2]/vt,h[3]=T[3]/vt,h[4]=-T[4]/vt,h[5]=-T[5]/vt,h[6]=-T[6]/vt,h[7]=T[7]/vt,h}function fu(h,T){return h[0]=-T[0],h[1]=-T[1],h[2]=-T[2],h[3]=T[3],h[4]=-T[4],h[5]=-T[5],h[6]=-T[6],h[7]=T[7],h}var Is=wo,Js=Is,cs=lo,Mo=cs;function rf(h,T){var vt=cs(T);if(vt>0){vt=Math.sqrt(vt);var Et=T[0]/vt,Lt=T[1]/vt,Xt=T[2]/vt,Vt=T[3]/vt,ue=T[4],he=T[5],Ce=T[6],Ye=T[7],pr=Et*ue+Lt*he+Xt*Ce+Vt*Ye;h[0]=Et,h[1]=Lt,h[2]=Xt,h[3]=Vt,h[4]=(ue-Et*pr)/vt,h[5]=(he-Lt*pr)/vt,h[6]=(Ce-Xt*pr)/vt,h[7]=(Ye-Vt*pr)/vt}return h}function kf(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function Rf(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]&&h[4]===T[4]&&h[5]===T[5]&&h[6]===T[6]&&h[7]===T[7]}function Os(h,T){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=h[4],ue=h[5],he=h[6],Ce=h[7],Ye=T[0],pr=T[1],xr=T[2],gr=T[3],Zr=T[4],qr=T[5],Tr=T[6],_n=T[7];return Math.abs(vt-Ye)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(Ye))&&Math.abs(Et-pr)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(pr))&&Math.abs(Lt-xr)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(xr))&&Math.abs(Xt-gr)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(gr))&&Math.abs(Vt-Zr)<=E.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(Zr))&&Math.abs(ue-qr)<=E.EPSILON*Math.max(1,Math.abs(ue),Math.abs(qr))&&Math.abs(he-Tr)<=E.EPSILON*Math.max(1,Math.abs(he),Math.abs(Tr))&&Math.abs(Ce-_n)<=E.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(_n))}var Bf=z(631437)},935600:function(yr,R,z){"use strict";z.r(R),z.d(R,{add:function(){return it},adjoint:function(){return m},clone:function(){return P},copy:function(){return N},create:function(){return Y},determinant:function(){return I},equals:function(){return Kt},exactEquals:function(){return It},frob:function(){return Q},fromMat2d:function(){return W},fromMat4:function(){return k},fromQuat:function(){return j},fromRotation:function(){return d},fromScaling:function(){return at},fromTranslation:function(){return x},fromValues:function(){return D},identity:function(){return y},invert:function(){return S},mul:function(){return Ft},multiply:function(){return A},multiplyScalar:function(){return dt},multiplyScalarAndAdd:function(){return Ot},normalFromMat4:function(){return $},projection:function(){return q},rotate:function(){return U},scale:function(){return V},set:function(){return E},str:function(){return et},sub:function(){return Nt},subtract:function(){return ht},translate:function(){return L},transpose:function(){return M}});var B=z(73633);function Y(){var st=new B.ARRAY_TYPE(9);return B.ARRAY_TYPE!=Float32Array&&(st[1]=0,st[2]=0,st[3]=0,st[5]=0,st[6]=0,st[7]=0),st[0]=1,st[4]=1,st[8]=1,st}function k(st,yt){return st[0]=yt[0],st[1]=yt[1],st[2]=yt[2],st[3]=yt[4],st[4]=yt[5],st[5]=yt[6],st[6]=yt[8],st[7]=yt[9],st[8]=yt[10],st}function P(st){var yt=new B.ARRAY_TYPE(9);return yt[0]=st[0],yt[1]=st[1],yt[2]=st[2],yt[3]=st[3],yt[4]=st[4],yt[5]=st[5],yt[6]=st[6],yt[7]=st[7],yt[8]=st[8],yt}function N(st,yt){return st[0]=yt[0],st[1]=yt[1],st[2]=yt[2],st[3]=yt[3],st[4]=yt[4],st[5]=yt[5],st[6]=yt[6],st[7]=yt[7],st[8]=yt[8],st}function D(st,yt,kt,ee,$t,ge,Pe,tr,Jt){var ae=new B.ARRAY_TYPE(9);return ae[0]=st,ae[1]=yt,ae[2]=kt,ae[3]=ee,ae[4]=$t,ae[5]=ge,ae[6]=Pe,ae[7]=tr,ae[8]=Jt,ae}function E(st,yt,kt,ee,$t,ge,Pe,tr,Jt,ae){return st[0]=yt,st[1]=kt,st[2]=ee,st[3]=$t,st[4]=ge,st[5]=Pe,st[6]=tr,st[7]=Jt,st[8]=ae,st}function y(st){return st[0]=1,st[1]=0,st[2]=0,st[3]=0,st[4]=1,st[5]=0,st[6]=0,st[7]=0,st[8]=1,st}function M(st,yt){if(st===yt){var kt=yt[1],ee=yt[2],$t=yt[5];st[1]=yt[3],st[2]=yt[6],st[3]=kt,st[5]=yt[7],st[6]=ee,st[7]=$t}else st[0]=yt[0],st[1]=yt[3],st[2]=yt[6],st[3]=yt[1],st[4]=yt[4],st[5]=yt[7],st[6]=yt[2],st[7]=yt[5],st[8]=yt[8];return st}function S(st,yt){var kt=yt[0],ee=yt[1],$t=yt[2],ge=yt[3],Pe=yt[4],tr=yt[5],Jt=yt[6],ae=yt[7],Se=yt[8],xe=Se*Pe-tr*ae,we=-Se*ge+tr*Jt,zt=ae*ge-Pe*Jt,Wt=kt*xe+ee*we+$t*zt;return Wt?(Wt=1/Wt,st[0]=xe*Wt,st[1]=(-Se*ee+$t*ae)*Wt,st[2]=(tr*ee-$t*Pe)*Wt,st[3]=we*Wt,st[4]=(Se*kt-$t*Jt)*Wt,st[5]=(-tr*kt+$t*ge)*Wt,st[6]=zt*Wt,st[7]=(-ae*kt+ee*Jt)*Wt,st[8]=(Pe*kt-ee*ge)*Wt,st):null}function m(st,yt){var kt=yt[0],ee=yt[1],$t=yt[2],ge=yt[3],Pe=yt[4],tr=yt[5],Jt=yt[6],ae=yt[7],Se=yt[8];return st[0]=Pe*Se-tr*ae,st[1]=$t*ae-ee*Se,st[2]=ee*tr-$t*Pe,st[3]=tr*Jt-ge*Se,st[4]=kt*Se-$t*Jt,st[5]=$t*ge-kt*tr,st[6]=ge*ae-Pe*Jt,st[7]=ee*Jt-kt*ae,st[8]=kt*Pe-ee*ge,st}function I(st){var yt=st[0],kt=st[1],ee=st[2],$t=st[3],ge=st[4],Pe=st[5],tr=st[6],Jt=st[7],ae=st[8];return yt*(ae*ge-Pe*Jt)+kt*(-ae*$t+Pe*tr)+ee*(Jt*$t-ge*tr)}function A(st,yt,kt){var ee=yt[0],$t=yt[1],ge=yt[2],Pe=yt[3],tr=yt[4],Jt=yt[5],ae=yt[6],Se=yt[7],xe=yt[8],we=kt[0],zt=kt[1],Wt=kt[2],Ie=kt[3],Yt=kt[4],ie=kt[5],Oe=kt[6],re=kt[7],_e=kt[8];return st[0]=we*ee+zt*Pe+Wt*ae,st[1]=we*$t+zt*tr+Wt*Se,st[2]=we*ge+zt*Jt+Wt*xe,st[3]=Ie*ee+Yt*Pe+ie*ae,st[4]=Ie*$t+Yt*tr+ie*Se,st[5]=Ie*ge+Yt*Jt+ie*xe,st[6]=Oe*ee+re*Pe+_e*ae,st[7]=Oe*$t+re*tr+_e*Se,st[8]=Oe*ge+re*Jt+_e*xe,st}function L(st,yt,kt){var ee=yt[0],$t=yt[1],ge=yt[2],Pe=yt[3],tr=yt[4],Jt=yt[5],ae=yt[6],Se=yt[7],xe=yt[8],we=kt[0],zt=kt[1];return st[0]=ee,st[1]=$t,st[2]=ge,st[3]=Pe,st[4]=tr,st[5]=Jt,st[6]=we*ee+zt*Pe+ae,st[7]=we*$t+zt*tr+Se,st[8]=we*ge+zt*Jt+xe,st}function U(st,yt,kt){var ee=yt[0],$t=yt[1],ge=yt[2],Pe=yt[3],tr=yt[4],Jt=yt[5],ae=yt[6],Se=yt[7],xe=yt[8],we=Math.sin(kt),zt=Math.cos(kt);return st[0]=zt*ee+we*Pe,st[1]=zt*$t+we*tr,st[2]=zt*ge+we*Jt,st[3]=zt*Pe-we*ee,st[4]=zt*tr-we*$t,st[5]=zt*Jt-we*ge,st[6]=ae,st[7]=Se,st[8]=xe,st}function V(st,yt,kt){var ee=kt[0],$t=kt[1];return st[0]=ee*yt[0],st[1]=ee*yt[1],st[2]=ee*yt[2],st[3]=$t*yt[3],st[4]=$t*yt[4],st[5]=$t*yt[5],st[6]=yt[6],st[7]=yt[7],st[8]=yt[8],st}function x(st,yt){return st[0]=1,st[1]=0,st[2]=0,st[3]=0,st[4]=1,st[5]=0,st[6]=yt[0],st[7]=yt[1],st[8]=1,st}function d(st,yt){var kt=Math.sin(yt),ee=Math.cos(yt);return st[0]=ee,st[1]=kt,st[2]=0,st[3]=-kt,st[4]=ee,st[5]=0,st[6]=0,st[7]=0,st[8]=1,st}function at(st,yt){return st[0]=yt[0],st[1]=0,st[2]=0,st[3]=0,st[4]=yt[1],st[5]=0,st[6]=0,st[7]=0,st[8]=1,st}function W(st,yt){return st[0]=yt[0],st[1]=yt[1],st[2]=0,st[3]=yt[2],st[4]=yt[3],st[5]=0,st[6]=yt[4],st[7]=yt[5],st[8]=1,st}function j(st,yt){var kt=yt[0],ee=yt[1],$t=yt[2],ge=yt[3],Pe=kt+kt,tr=ee+ee,Jt=$t+$t,ae=kt*Pe,Se=ee*Pe,xe=ee*tr,we=$t*Pe,zt=$t*tr,Wt=$t*Jt,Ie=ge*Pe,Yt=ge*tr,ie=ge*Jt;return st[0]=1-xe-Wt,st[3]=Se-ie,st[6]=we+Yt,st[1]=Se+ie,st[4]=1-ae-Wt,st[7]=zt-Ie,st[2]=we-Yt,st[5]=zt+Ie,st[8]=1-ae-xe,st}function $(st,yt){var kt=yt[0],ee=yt[1],$t=yt[2],ge=yt[3],Pe=yt[4],tr=yt[5],Jt=yt[6],ae=yt[7],Se=yt[8],xe=yt[9],we=yt[10],zt=yt[11],Wt=yt[12],Ie=yt[13],Yt=yt[14],ie=yt[15],Oe=kt*tr-ee*Pe,re=kt*Jt-$t*Pe,_e=kt*ae-ge*Pe,Ge=ee*Jt-$t*tr,Ct=ee*ae-ge*tr,Nr=$t*ae-ge*Jt,Or=Se*Ie-xe*Wt,Ur=Se*Yt-we*Wt,Sr=Se*ie-zt*Wt,gn=xe*Yt-we*Ie,Rr=xe*ie-zt*Ie,ln=we*ie-zt*Yt,Nn=Oe*ln-re*Rr+_e*gn+Ge*Sr-Ct*Ur+Nr*Or;return Nn?(Nn=1/Nn,st[0]=(tr*ln-Jt*Rr+ae*gn)*Nn,st[1]=(Jt*Sr-Pe*ln-ae*Ur)*Nn,st[2]=(Pe*Rr-tr*Sr+ae*Or)*Nn,st[3]=($t*Rr-ee*ln-ge*gn)*Nn,st[4]=(kt*ln-$t*Sr+ge*Ur)*Nn,st[5]=(ee*Sr-kt*Rr-ge*Or)*Nn,st[6]=(Ie*Nr-Yt*Ct+ie*Ge)*Nn,st[7]=(Yt*_e-Wt*Nr-ie*re)*Nn,st[8]=(Wt*Ct-Ie*_e+ie*Oe)*Nn,st):null}function q(st,yt,kt){return st[0]=2/yt,st[1]=0,st[2]=0,st[3]=0,st[4]=-2/kt,st[5]=0,st[6]=-1,st[7]=1,st[8]=1,st}function et(st){return"mat3("+st[0]+", "+st[1]+", "+st[2]+", "+st[3]+", "+st[4]+", "+st[5]+", "+st[6]+", "+st[7]+", "+st[8]+")"}function Q(st){return Math.hypot(st[0],st[1],st[2],st[3],st[4],st[5],st[6],st[7],st[8])}function it(st,yt,kt){return st[0]=yt[0]+kt[0],st[1]=yt[1]+kt[1],st[2]=yt[2]+kt[2],st[3]=yt[3]+kt[3],st[4]=yt[4]+kt[4],st[5]=yt[5]+kt[5],st[6]=yt[6]+kt[6],st[7]=yt[7]+kt[7],st[8]=yt[8]+kt[8],st}function ht(st,yt,kt){return st[0]=yt[0]-kt[0],st[1]=yt[1]-kt[1],st[2]=yt[2]-kt[2],st[3]=yt[3]-kt[3],st[4]=yt[4]-kt[4],st[5]=yt[5]-kt[5],st[6]=yt[6]-kt[6],st[7]=yt[7]-kt[7],st[8]=yt[8]-kt[8],st}function dt(st,yt,kt){return st[0]=yt[0]*kt,st[1]=yt[1]*kt,st[2]=yt[2]*kt,st[3]=yt[3]*kt,st[4]=yt[4]*kt,st[5]=yt[5]*kt,st[6]=yt[6]*kt,st[7]=yt[7]*kt,st[8]=yt[8]*kt,st}function Ot(st,yt,kt,ee){return st[0]=yt[0]+kt[0]*ee,st[1]=yt[1]+kt[1]*ee,st[2]=yt[2]+kt[2]*ee,st[3]=yt[3]+kt[3]*ee,st[4]=yt[4]+kt[4]*ee,st[5]=yt[5]+kt[5]*ee,st[6]=yt[6]+kt[6]*ee,st[7]=yt[7]+kt[7]*ee,st[8]=yt[8]+kt[8]*ee,st}function It(st,yt){return st[0]===yt[0]&&st[1]===yt[1]&&st[2]===yt[2]&&st[3]===yt[3]&&st[4]===yt[4]&&st[5]===yt[5]&&st[6]===yt[6]&&st[7]===yt[7]&&st[8]===yt[8]}function Kt(st,yt){var kt=st[0],ee=st[1],$t=st[2],ge=st[3],Pe=st[4],tr=st[5],Jt=st[6],ae=st[7],Se=st[8],xe=yt[0],we=yt[1],zt=yt[2],Wt=yt[3],Ie=yt[4],Yt=yt[5],ie=yt[6],Oe=yt[7],re=yt[8];return Math.abs(kt-xe)<=B.EPSILON*Math.max(1,Math.abs(kt),Math.abs(xe))&&Math.abs(ee-we)<=B.EPSILON*Math.max(1,Math.abs(ee),Math.abs(we))&&Math.abs($t-zt)<=B.EPSILON*Math.max(1,Math.abs($t),Math.abs(zt))&&Math.abs(ge-Wt)<=B.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Wt))&&Math.abs(Pe-Ie)<=B.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(Ie))&&Math.abs(tr-Yt)<=B.EPSILON*Math.max(1,Math.abs(tr),Math.abs(Yt))&&Math.abs(Jt-ie)<=B.EPSILON*Math.max(1,Math.abs(Jt),Math.abs(ie))&&Math.abs(ae-Oe)<=B.EPSILON*Math.max(1,Math.abs(ae),Math.abs(Oe))&&Math.abs(Se-re)<=B.EPSILON*Math.max(1,Math.abs(Se),Math.abs(re))}var Ft=A,Nt=ht},631437:function(yr,R,z){"use strict";z.r(R),z.d(R,{add:function(){return E},angle:function(){return st},ceil:function(){return m},clone:function(){return k},copy:function(){return N},create:function(){return Y},cross:function(){return it},dist:function(){return ae},distance:function(){return d},div:function(){return Jt},divide:function(){return S},dot:function(){return Q},equals:function(){return $t},exactEquals:function(){return ee},floor:function(){return I},forEach:function(){return we},fromValues:function(){return P},inverse:function(){return q},len:function(){return ge},length:function(){return W},lerp:function(){return ht},max:function(){return L},min:function(){return A},mul:function(){return tr},multiply:function(){return M},negate:function(){return $},normalize:function(){return et},random:function(){return dt},rotate:function(){return Nt},round:function(){return U},scale:function(){return V},scaleAndAdd:function(){return x},set:function(){return D},sqrDist:function(){return Se},sqrLen:function(){return xe},squaredDistance:function(){return at},squaredLength:function(){return j},str:function(){return kt},sub:function(){return Pe},subtract:function(){return y},transformMat2:function(){return Ot},transformMat2d:function(){return It},transformMat3:function(){return Kt},transformMat4:function(){return Ft},zero:function(){return yt}});var B=z(73633);function Y(){var zt=new B.ARRAY_TYPE(2);return B.ARRAY_TYPE!=Float32Array&&(zt[0]=0,zt[1]=0),zt}function k(zt){var Wt=new B.ARRAY_TYPE(2);return Wt[0]=zt[0],Wt[1]=zt[1],Wt}function P(zt,Wt){var Ie=new B.ARRAY_TYPE(2);return Ie[0]=zt,Ie[1]=Wt,Ie}function N(zt,Wt){return zt[0]=Wt[0],zt[1]=Wt[1],zt}function D(zt,Wt,Ie){return zt[0]=Wt,zt[1]=Ie,zt}function E(zt,Wt,Ie){return zt[0]=Wt[0]+Ie[0],zt[1]=Wt[1]+Ie[1],zt}function y(zt,Wt,Ie){return zt[0]=Wt[0]-Ie[0],zt[1]=Wt[1]-Ie[1],zt}function M(zt,Wt,Ie){return zt[0]=Wt[0]*Ie[0],zt[1]=Wt[1]*Ie[1],zt}function S(zt,Wt,Ie){return zt[0]=Wt[0]/Ie[0],zt[1]=Wt[1]/Ie[1],zt}function m(zt,Wt){return zt[0]=Math.ceil(Wt[0]),zt[1]=Math.ceil(Wt[1]),zt}function I(zt,Wt){return zt[0]=Math.floor(Wt[0]),zt[1]=Math.floor(Wt[1]),zt}function A(zt,Wt,Ie){return zt[0]=Math.min(Wt[0],Ie[0]),zt[1]=Math.min(Wt[1],Ie[1]),zt}function L(zt,Wt,Ie){return zt[0]=Math.max(Wt[0],Ie[0]),zt[1]=Math.max(Wt[1],Ie[1]),zt}function U(zt,Wt){return zt[0]=Math.round(Wt[0]),zt[1]=Math.round(Wt[1]),zt}function V(zt,Wt,Ie){return zt[0]=Wt[0]*Ie,zt[1]=Wt[1]*Ie,zt}function x(zt,Wt,Ie,Yt){return zt[0]=Wt[0]+Ie[0]*Yt,zt[1]=Wt[1]+Ie[1]*Yt,zt}function d(zt,Wt){var Ie=Wt[0]-zt[0],Yt=Wt[1]-zt[1];return Math.hypot(Ie,Yt)}function at(zt,Wt){var Ie=Wt[0]-zt[0],Yt=Wt[1]-zt[1];return Ie*Ie+Yt*Yt}function W(zt){var Wt=zt[0],Ie=zt[1];return Math.hypot(Wt,Ie)}function j(zt){var Wt=zt[0],Ie=zt[1];return Wt*Wt+Ie*Ie}function $(zt,Wt){return zt[0]=-Wt[0],zt[1]=-Wt[1],zt}function q(zt,Wt){return zt[0]=1/Wt[0],zt[1]=1/Wt[1],zt}function et(zt,Wt){var Ie=Wt[0],Yt=Wt[1],ie=Ie*Ie+Yt*Yt;return ie>0&&(ie=1/Math.sqrt(ie)),zt[0]=Wt[0]*ie,zt[1]=Wt[1]*ie,zt}function Q(zt,Wt){return zt[0]*Wt[0]+zt[1]*Wt[1]}function it(zt,Wt,Ie){var Yt=Wt[0]*Ie[1]-Wt[1]*Ie[0];return zt[0]=zt[1]=0,zt[2]=Yt,zt}function ht(zt,Wt,Ie,Yt){var ie=Wt[0],Oe=Wt[1];return zt[0]=ie+Yt*(Ie[0]-ie),zt[1]=Oe+Yt*(Ie[1]-Oe),zt}function dt(zt,Wt){Wt=Wt||1;var Ie=B.RANDOM()*2*Math.PI;return zt[0]=Math.cos(Ie)*Wt,zt[1]=Math.sin(Ie)*Wt,zt}function Ot(zt,Wt,Ie){var Yt=Wt[0],ie=Wt[1];return zt[0]=Ie[0]*Yt+Ie[2]*ie,zt[1]=Ie[1]*Yt+Ie[3]*ie,zt}function It(zt,Wt,Ie){var Yt=Wt[0],ie=Wt[1];return zt[0]=Ie[0]*Yt+Ie[2]*ie+Ie[4],zt[1]=Ie[1]*Yt+Ie[3]*ie+Ie[5],zt}function Kt(zt,Wt,Ie){var Yt=Wt[0],ie=Wt[1];return zt[0]=Ie[0]*Yt+Ie[3]*ie+Ie[6],zt[1]=Ie[1]*Yt+Ie[4]*ie+Ie[7],zt}function Ft(zt,Wt,Ie){var Yt=Wt[0],ie=Wt[1];return zt[0]=Ie[0]*Yt+Ie[4]*ie+Ie[12],zt[1]=Ie[1]*Yt+Ie[5]*ie+Ie[13],zt}function Nt(zt,Wt,Ie,Yt){var ie=Wt[0]-Ie[0],Oe=Wt[1]-Ie[1],re=Math.sin(Yt),_e=Math.cos(Yt);return zt[0]=ie*_e-Oe*re+Ie[0],zt[1]=ie*re+Oe*_e+Ie[1],zt}function st(zt,Wt){var Ie=zt[0],Yt=zt[1],ie=Wt[0],Oe=Wt[1],re=Math.sqrt(Ie*Ie+Yt*Yt)*Math.sqrt(ie*ie+Oe*Oe),_e=re&&(Ie*ie+Yt*Oe)/re;return Math.acos(Math.min(Math.max(_e,-1),1))}function yt(zt){return zt[0]=0,zt[1]=0,zt}function kt(zt){return"vec2("+zt[0]+", "+zt[1]+")"}function ee(zt,Wt){return zt[0]===Wt[0]&&zt[1]===Wt[1]}function $t(zt,Wt){var Ie=zt[0],Yt=zt[1],ie=Wt[0],Oe=Wt[1];return Math.abs(Ie-ie)<=B.EPSILON*Math.max(1,Math.abs(Ie),Math.abs(ie))&&Math.abs(Yt-Oe)<=B.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(Oe))}var ge=W,Pe=y,tr=M,Jt=S,ae=d,Se=at,xe=j,we=function(){var zt=Y();return function(Wt,Ie,Yt,ie,Oe,re){var _e,Ge;for(Ie||(Ie=2),Yt||(Yt=0),ie?Ge=Math.min(ie*Ie+Yt,Wt.length):Ge=Wt.length,_e=Yt;_e<Ge;_e+=Ie)zt[0]=Wt[_e],zt[1]=Wt[_e+1],Oe(zt,zt,re),Wt[_e]=zt[0],Wt[_e+1]=zt[1];return Wt}}()},277160:function(yr,R,z){"use strict";z.r(R),z.d(R,{add:function(){return y},angle:function(){return ee},bezier:function(){return Ot},ceil:function(){return I},clone:function(){return k},copy:function(){return D},create:function(){return Y},cross:function(){return it},dist:function(){return xe},distance:function(){return at},div:function(){return Se},divide:function(){return m},dot:function(){return Q},equals:function(){return tr},exactEquals:function(){return Pe},floor:function(){return A},forEach:function(){return Ie},fromValues:function(){return N},hermite:function(){return dt},inverse:function(){return q},len:function(){return zt},length:function(){return P},lerp:function(){return ht},max:function(){return U},min:function(){return L},mul:function(){return ae},multiply:function(){return S},negate:function(){return $},normalize:function(){return et},random:function(){return It},rotateX:function(){return st},rotateY:function(){return yt},rotateZ:function(){return kt},round:function(){return V},scale:function(){return x},scaleAndAdd:function(){return d},set:function(){return E},sqrDist:function(){return we},sqrLen:function(){return Wt},squaredDistance:function(){return W},squaredLength:function(){return j},str:function(){return ge},sub:function(){return Jt},subtract:function(){return M},transformMat3:function(){return Ft},transformMat4:function(){return Kt},transformQuat:function(){return Nt},zero:function(){return $t}});var B=z(73633);function Y(){var Yt=new B.ARRAY_TYPE(3);return B.ARRAY_TYPE!=Float32Array&&(Yt[0]=0,Yt[1]=0,Yt[2]=0),Yt}function k(Yt){var ie=new B.ARRAY_TYPE(3);return ie[0]=Yt[0],ie[1]=Yt[1],ie[2]=Yt[2],ie}function P(Yt){var ie=Yt[0],Oe=Yt[1],re=Yt[2];return Math.hypot(ie,Oe,re)}function N(Yt,ie,Oe){var re=new B.ARRAY_TYPE(3);return re[0]=Yt,re[1]=ie,re[2]=Oe,re}function D(Yt,ie){return Yt[0]=ie[0],Yt[1]=ie[1],Yt[2]=ie[2],Yt}function E(Yt,ie,Oe,re){return Yt[0]=ie,Yt[1]=Oe,Yt[2]=re,Yt}function y(Yt,ie,Oe){return Yt[0]=ie[0]+Oe[0],Yt[1]=ie[1]+Oe[1],Yt[2]=ie[2]+Oe[2],Yt}function M(Yt,ie,Oe){return Yt[0]=ie[0]-Oe[0],Yt[1]=ie[1]-Oe[1],Yt[2]=ie[2]-Oe[2],Yt}function S(Yt,ie,Oe){return Yt[0]=ie[0]*Oe[0],Yt[1]=ie[1]*Oe[1],Yt[2]=ie[2]*Oe[2],Yt}function m(Yt,ie,Oe){return Yt[0]=ie[0]/Oe[0],Yt[1]=ie[1]/Oe[1],Yt[2]=ie[2]/Oe[2],Yt}function I(Yt,ie){return Yt[0]=Math.ceil(ie[0]),Yt[1]=Math.ceil(ie[1]),Yt[2]=Math.ceil(ie[2]),Yt}function A(Yt,ie){return Yt[0]=Math.floor(ie[0]),Yt[1]=Math.floor(ie[1]),Yt[2]=Math.floor(ie[2]),Yt}function L(Yt,ie,Oe){return Yt[0]=Math.min(ie[0],Oe[0]),Yt[1]=Math.min(ie[1],Oe[1]),Yt[2]=Math.min(ie[2],Oe[2]),Yt}function U(Yt,ie,Oe){return Yt[0]=Math.max(ie[0],Oe[0]),Yt[1]=Math.max(ie[1],Oe[1]),Yt[2]=Math.max(ie[2],Oe[2]),Yt}function V(Yt,ie){return Yt[0]=Math.round(ie[0]),Yt[1]=Math.round(ie[1]),Yt[2]=Math.round(ie[2]),Yt}function x(Yt,ie,Oe){return Yt[0]=ie[0]*Oe,Yt[1]=ie[1]*Oe,Yt[2]=ie[2]*Oe,Yt}function d(Yt,ie,Oe,re){return Yt[0]=ie[0]+Oe[0]*re,Yt[1]=ie[1]+Oe[1]*re,Yt[2]=ie[2]+Oe[2]*re,Yt}function at(Yt,ie){var Oe=ie[0]-Yt[0],re=ie[1]-Yt[1],_e=ie[2]-Yt[2];return Math.hypot(Oe,re,_e)}function W(Yt,ie){var Oe=ie[0]-Yt[0],re=ie[1]-Yt[1],_e=ie[2]-Yt[2];return Oe*Oe+re*re+_e*_e}function j(Yt){var ie=Yt[0],Oe=Yt[1],re=Yt[2];return ie*ie+Oe*Oe+re*re}function $(Yt,ie){return Yt[0]=-ie[0],Yt[1]=-ie[1],Yt[2]=-ie[2],Yt}function q(Yt,ie){return Yt[0]=1/ie[0],Yt[1]=1/ie[1],Yt[2]=1/ie[2],Yt}function et(Yt,ie){var Oe=ie[0],re=ie[1],_e=ie[2],Ge=Oe*Oe+re*re+_e*_e;return Ge>0&&(Ge=1/Math.sqrt(Ge)),Yt[0]=ie[0]*Ge,Yt[1]=ie[1]*Ge,Yt[2]=ie[2]*Ge,Yt}function Q(Yt,ie){return Yt[0]*ie[0]+Yt[1]*ie[1]+Yt[2]*ie[2]}function it(Yt,ie,Oe){var re=ie[0],_e=ie[1],Ge=ie[2],Ct=Oe[0],Nr=Oe[1],Or=Oe[2];return Yt[0]=_e*Or-Ge*Nr,Yt[1]=Ge*Ct-re*Or,Yt[2]=re*Nr-_e*Ct,Yt}function ht(Yt,ie,Oe,re){var _e=ie[0],Ge=ie[1],Ct=ie[2];return Yt[0]=_e+re*(Oe[0]-_e),Yt[1]=Ge+re*(Oe[1]-Ge),Yt[2]=Ct+re*(Oe[2]-Ct),Yt}function dt(Yt,ie,Oe,re,_e,Ge){var Ct=Ge*Ge,Nr=Ct*(2*Ge-3)+1,Or=Ct*(Ge-2)+Ge,Ur=Ct*(Ge-1),Sr=Ct*(3-2*Ge);return Yt[0]=ie[0]*Nr+Oe[0]*Or+re[0]*Ur+_e[0]*Sr,Yt[1]=ie[1]*Nr+Oe[1]*Or+re[1]*Ur+_e[1]*Sr,Yt[2]=ie[2]*Nr+Oe[2]*Or+re[2]*Ur+_e[2]*Sr,Yt}function Ot(Yt,ie,Oe,re,_e,Ge){var Ct=1-Ge,Nr=Ct*Ct,Or=Ge*Ge,Ur=Nr*Ct,Sr=3*Ge*Nr,gn=3*Or*Ct,Rr=Or*Ge;return Yt[0]=ie[0]*Ur+Oe[0]*Sr+re[0]*gn+_e[0]*Rr,Yt[1]=ie[1]*Ur+Oe[1]*Sr+re[1]*gn+_e[1]*Rr,Yt[2]=ie[2]*Ur+Oe[2]*Sr+re[2]*gn+_e[2]*Rr,Yt}function It(Yt,ie){ie=ie||1;var Oe=B.RANDOM()*2*Math.PI,re=B.RANDOM()*2-1,_e=Math.sqrt(1-re*re)*ie;return Yt[0]=Math.cos(Oe)*_e,Yt[1]=Math.sin(Oe)*_e,Yt[2]=re*ie,Yt}function Kt(Yt,ie,Oe){var re=ie[0],_e=ie[1],Ge=ie[2],Ct=Oe[3]*re+Oe[7]*_e+Oe[11]*Ge+Oe[15];return Ct=Ct||1,Yt[0]=(Oe[0]*re+Oe[4]*_e+Oe[8]*Ge+Oe[12])/Ct,Yt[1]=(Oe[1]*re+Oe[5]*_e+Oe[9]*Ge+Oe[13])/Ct,Yt[2]=(Oe[2]*re+Oe[6]*_e+Oe[10]*Ge+Oe[14])/Ct,Yt}function Ft(Yt,ie,Oe){var re=ie[0],_e=ie[1],Ge=ie[2];return Yt[0]=re*Oe[0]+_e*Oe[3]+Ge*Oe[6],Yt[1]=re*Oe[1]+_e*Oe[4]+Ge*Oe[7],Yt[2]=re*Oe[2]+_e*Oe[5]+Ge*Oe[8],Yt}function Nt(Yt,ie,Oe){var re=Oe[0],_e=Oe[1],Ge=Oe[2],Ct=Oe[3],Nr=ie[0],Or=ie[1],Ur=ie[2],Sr=_e*Ur-Ge*Or,gn=Ge*Nr-re*Ur,Rr=re*Or-_e*Nr,ln=_e*Rr-Ge*gn,Nn=Ge*Sr-re*Rr,Ln=re*gn-_e*Sr,fn=Ct*2;return Sr*=fn,gn*=fn,Rr*=fn,ln*=2,Nn*=2,Ln*=2,Yt[0]=Nr+Sr+ln,Yt[1]=Or+gn+Nn,Yt[2]=Ur+Rr+Ln,Yt}function st(Yt,ie,Oe,re){var _e=[],Ge=[];return _e[0]=ie[0]-Oe[0],_e[1]=ie[1]-Oe[1],_e[2]=ie[2]-Oe[2],Ge[0]=_e[0],Ge[1]=_e[1]*Math.cos(re)-_e[2]*Math.sin(re),Ge[2]=_e[1]*Math.sin(re)+_e[2]*Math.cos(re),Yt[0]=Ge[0]+Oe[0],Yt[1]=Ge[1]+Oe[1],Yt[2]=Ge[2]+Oe[2],Yt}function yt(Yt,ie,Oe,re){var _e=[],Ge=[];return _e[0]=ie[0]-Oe[0],_e[1]=ie[1]-Oe[1],_e[2]=ie[2]-Oe[2],Ge[0]=_e[2]*Math.sin(re)+_e[0]*Math.cos(re),Ge[1]=_e[1],Ge[2]=_e[2]*Math.cos(re)-_e[0]*Math.sin(re),Yt[0]=Ge[0]+Oe[0],Yt[1]=Ge[1]+Oe[1],Yt[2]=Ge[2]+Oe[2],Yt}function kt(Yt,ie,Oe,re){var _e=[],Ge=[];return _e[0]=ie[0]-Oe[0],_e[1]=ie[1]-Oe[1],_e[2]=ie[2]-Oe[2],Ge[0]=_e[0]*Math.cos(re)-_e[1]*Math.sin(re),Ge[1]=_e[0]*Math.sin(re)+_e[1]*Math.cos(re),Ge[2]=_e[2],Yt[0]=Ge[0]+Oe[0],Yt[1]=Ge[1]+Oe[1],Yt[2]=Ge[2]+Oe[2],Yt}function ee(Yt,ie){var Oe=Yt[0],re=Yt[1],_e=Yt[2],Ge=ie[0],Ct=ie[1],Nr=ie[2],Or=Math.sqrt(Oe*Oe+re*re+_e*_e),Ur=Math.sqrt(Ge*Ge+Ct*Ct+Nr*Nr),Sr=Or*Ur,gn=Sr&&Q(Yt,ie)/Sr;return Math.acos(Math.min(Math.max(gn,-1),1))}function $t(Yt){return Yt[0]=0,Yt[1]=0,Yt[2]=0,Yt}function ge(Yt){return"vec3("+Yt[0]+", "+Yt[1]+", "+Yt[2]+")"}function Pe(Yt,ie){return Yt[0]===ie[0]&&Yt[1]===ie[1]&&Yt[2]===ie[2]}function tr(Yt,ie){var Oe=Yt[0],re=Yt[1],_e=Yt[2],Ge=ie[0],Ct=ie[1],Nr=ie[2];return Math.abs(Oe-Ge)<=B.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Ge))&&Math.abs(re-Ct)<=B.EPSILON*Math.max(1,Math.abs(re),Math.abs(Ct))&&Math.abs(_e-Nr)<=B.EPSILON*Math.max(1,Math.abs(_e),Math.abs(Nr))}var Jt=M,ae=S,Se=m,xe=at,we=W,zt=P,Wt=j,Ie=function(){var Yt=Y();return function(ie,Oe,re,_e,Ge,Ct){var Nr,Or;for(Oe||(Oe=3),re||(re=0),_e?Or=Math.min(_e*Oe+re,ie.length):Or=ie.length,Nr=re;Nr<Or;Nr+=Oe)Yt[0]=ie[Nr],Yt[1]=ie[Nr+1],Yt[2]=ie[Nr+2],Ge(Yt,Yt,Ct),ie[Nr]=Yt[0],ie[Nr+1]=Yt[1],ie[Nr+2]=Yt[2];return ie}}()},738186:function(yr){var R=[],z=[],B="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function Y(P,N){if(N=N||{},P===void 0)throw new Error(B);var D=N.prepend===!0?"prepend":"append",E=N.container!==void 0?N.container:document.querySelector("head"),y=R.indexOf(E);y===-1&&(y=R.push(E)-1,z[y]={});var M;return z[y]!==void 0&&z[y][D]!==void 0?M=z[y][D]:(M=z[y][D]=k(),D==="prepend"?E.insertBefore(M,E.childNodes[0]):E.appendChild(M)),P.charCodeAt(0)===65279&&(P=P.substr(1,P.length)),M.styleSheet?M.styleSheet.cssText+=P:M.textContent+=P,M}function k(){var P=document.createElement("style");return P.setAttribute("type","text/css"),P}yr.exports=Y,yr.exports.insertCss=Y},744091:function(yr,R,z){"use strict";z.r(R),z.d(R,{isAnyArray:function(){return Y}});const B=Object.prototype.toString;function Y(k){const P=B.call(k);return P.endsWith("Array]")&&!P.includes("Big")}},238749:function(yr,R,z){var B=z(644239),Y=z(541780),k=z(637005),P="[object Arguments]",N="[object Array]",D="[object Boolean]",E="[object Date]",y="[object Error]",M="[object Function]",S="[object Map]",m="[object Number]",I="[object Object]",A="[object RegExp]",L="[object Set]",U="[object String]",V="[object WeakMap]",x="[object ArrayBuffer]",d="[object DataView]",at="[object Float32Array]",W="[object Float64Array]",j="[object Int8Array]",$="[object Int16Array]",q="[object Int32Array]",et="[object Uint8Array]",Q="[object Uint8ClampedArray]",it="[object Uint16Array]",ht="[object Uint32Array]",dt={};dt[at]=dt[W]=dt[j]=dt[$]=dt[q]=dt[et]=dt[Q]=dt[it]=dt[ht]=!0,dt[P]=dt[N]=dt[x]=dt[D]=dt[d]=dt[E]=dt[y]=dt[M]=dt[S]=dt[m]=dt[I]=dt[A]=dt[L]=dt[U]=dt[V]=!1;function Ot(It){return k(It)&&Y(It.length)&&!!dt[B(It)]}yr.exports=Ot},307518:function(yr){function R(z){return function(B){return z(B)}}yr.exports=R},385924:function(yr,R,z){var B=z(205569),Y=B(Object.getPrototypeOf,Object);yr.exports=Y},531167:function(yr,R,z){yr=z.nmd(yr);var B=z(431957),Y=R&&!R.nodeType&&R,k=Y&&!0&&yr&&!yr.nodeType&&yr,P=k&&k.exports===Y,N=P&&B.process,D=function(){try{var E=k&&k.require&&k.require("util").types;return E||N&&N.binding&&N.binding("util")}catch(y){}}();yr.exports=D},205569:function(yr){function R(z,B){return function(Y){return z(B(Y))}}yr.exports=R},541780:function(yr){var R=9007199254740991;function z(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=R}yr.exports=z},281763:function(yr,R,z){var B=z(644239),Y=z(637005),k="[object Number]";function P(N){return typeof N=="number"||Y(N)&&B(N)==k}yr.exports=P},968630:function(yr,R,z){var B=z(644239),Y=z(385924),k=z(637005),P="[object Object]",N=Function.prototype,D=Object.prototype,E=N.toString,y=D.hasOwnProperty,M=E.call(Object);function S(m){if(!k(m)||B(m)!=P)return!1;var I=Y(m);if(I===null)return!0;var A=y.call(I,"constructor")&&I.constructor;return typeof A=="function"&&A instanceof A&&E.call(A)==M}yr.exports=S},936719:function(yr,R,z){var B=z(238749),Y=z(307518),k=z(531167),P=k&&k.isTypedArray,N=P?Y(P):B;yr.exports=N},975823:function(yr,R,z){"use strict";z.r(R),z.d(R,{default:function(){return P}});var B=z(744091);function Y(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,B.isAnyArray)(N))throw new TypeError("input must be an array");if(N.length===0)throw new TypeError("input must not be empty");var E=D.fromIndex,y=E===void 0?0:E,M=D.toIndex,S=M===void 0?N.length:M;if(y<0||y>=N.length||!Number.isInteger(y))throw new Error("fromIndex must be a positive integer smaller than length");if(S<=y||S>N.length||!Number.isInteger(S))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var m=N[y],I=y+1;I<S;I++)N[I]>m&&(m=N[I]);return m}function k(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,B.isAnyArray)(N))throw new TypeError("input must be an array");if(N.length===0)throw new TypeError("input must not be empty");var E=D.fromIndex,y=E===void 0?0:E,M=D.toIndex,S=M===void 0?N.length:M;if(y<0||y>=N.length||!Number.isInteger(y))throw new Error("fromIndex must be a positive integer smaller than length");if(S<=y||S>N.length||!Number.isInteger(S))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var m=N[y],I=y+1;I<S;I++)N[I]<m&&(m=N[I]);return m}function P(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,B.isAnyArray)(N)){if(N.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var E;if(D.output!==void 0){if(!(0,B.isAnyArray)(D.output))throw new TypeError("output option must be an array if specified");E=D.output}else E=new Array(N.length);var y=k(N),M=Y(N);if(y===M)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var S=D.min,m=S===void 0?D.autoMinMax?y:0:S,I=D.max,A=I===void 0?D.autoMinMax?M:1:I;if(m>=A)throw new RangeError("min option must be smaller than max option");for(var L=(A-m)/(M-y),U=0;U<N.length;U++)E[U]=(N[U]-y)*L+m;return E}},481550:function(yr){(function(R,z){yr.exports=z()})(this,function(){"use strict";var R=function(mt){return mt instanceof Uint8Array||mt instanceof Uint16Array||mt instanceof Uint32Array||mt instanceof Int8Array||mt instanceof Int16Array||mt instanceof Int32Array||mt instanceof Float32Array||mt instanceof Float64Array||mt instanceof Uint8ClampedArray},z=function(mt,qt){for(var Ee=Object.keys(qt),fr=0;fr<Ee.length;++fr)mt[Ee[fr]]=qt[Ee[fr]];return mt},B=`
`;function Y(mt){return typeof atob!="undefined"?atob(mt):"base64:"+mt}function k(mt){var qt=new Error("(regl) "+mt);throw console.error(qt),qt}function P(mt,qt){mt||k(qt)}function N(mt){return mt?": "+mt:""}function D(mt,qt,Ee){mt in qt||k("unknown parameter ("+mt+")"+N(Ee)+". possible values: "+Object.keys(qt).join())}function E(mt,qt){R(mt)||k("invalid parameter type"+N(qt)+". must be a typed array")}function y(mt,qt){switch(qt){case"number":return typeof mt=="number";case"object":return typeof mt=="object";case"string":return typeof mt=="string";case"boolean":return typeof mt=="boolean";case"function":return typeof mt=="function";case"undefined":return typeof mt=="undefined";case"symbol":return typeof mt=="symbol"}}function M(mt,qt,Ee){y(mt,qt)||k("invalid parameter type"+N(Ee)+". expected "+qt+", got "+typeof mt)}function S(mt,qt){mt>=0&&(mt|0)===mt||k("invalid parameter type, ("+mt+")"+N(qt)+". must be a nonnegative integer")}function m(mt,qt,Ee){qt.indexOf(mt)<0&&k("invalid value"+N(Ee)+". must be one of: "+qt)}var I=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function A(mt){Object.keys(mt).forEach(function(qt){I.indexOf(qt)<0&&k('invalid regl constructor argument "'+qt+'". must be one of '+I)})}function L(mt,qt){for(mt=mt+"";mt.length<qt;)mt=" "+mt;return mt}function U(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function V(mt,qt){this.number=mt,this.line=qt,this.errors=[]}function x(mt,qt,Ee){this.file=mt,this.line=qt,this.message=Ee}function d(){var mt=new Error,qt=(mt.stack||mt).toString(),Ee=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(qt);if(Ee)return Ee[1];var fr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(qt);return fr?fr[1]:"unknown"}function at(){var mt=new Error,qt=(mt.stack||mt).toString(),Ee=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(qt);if(Ee)return Ee[1];var fr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(qt);return fr?fr[1]:"unknown"}function W(mt,qt){var Ee=mt.split(`
`),fr=1,Lr=0,cr={unknown:new U,0:new U};cr.unknown.name=cr[0].name=qt||d(),cr.unknown.lines.push(new V(0,""));for(var lr=0;lr<Ee.length;++lr){var Yr=Ee[lr],Vr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Yr);if(Vr)switch(Vr[1]){case"line":var $r=/(\d+)(\s+\d+)?/.exec(Vr[2]);$r&&(fr=$r[1]|0,$r[2]&&(Lr=$r[2]|0,Lr in cr||(cr[Lr]=new U)));break;case"define":var Gr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Vr[2]);Gr&&(cr[Lr].name=Gr[1]?Y(Gr[2]):Gr[2]);break}cr[Lr].lines.push(new V(fr++,Yr))}return Object.keys(cr).forEach(function(nn){var v=cr[nn];v.lines.forEach(function(_){v.index[_.number]=_})}),cr}function j(mt){var qt=[];return mt.split(`
`).forEach(function(Ee){if(!(Ee.length<5)){var fr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ee);fr?qt.push(new x(fr[1]|0,fr[2]|0,fr[3].trim())):Ee.length>0&&qt.push(new x("unknown",0,Ee))}}),qt}function $(mt,qt){qt.forEach(function(Ee){var fr=mt[Ee.file];if(fr){var Lr=fr.index[Ee.line];if(Lr){Lr.errors.push(Ee),fr.hasErrors=!0;return}}mt.unknown.hasErrors=!0,mt.unknown.lines[0].errors.push(Ee)})}function q(mt,qt,Ee,fr,Lr){if(!mt.getShaderParameter(qt,mt.COMPILE_STATUS)){var cr=mt.getShaderInfoLog(qt),lr=fr===mt.FRAGMENT_SHADER?"fragment":"vertex";It(Ee,"string",lr+" shader source must be a string",Lr);var Yr=W(Ee,Lr),Vr=j(cr);$(Yr,Vr),Object.keys(Yr).forEach(function($r){var Gr=Yr[$r];if(!Gr.hasErrors)return;var nn=[""],v=[""];function _(F,Z){nn.push(F),v.push(Z||"")}_("file number "+$r+": "+Gr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Gr.lines.forEach(function(F){if(F.errors.length>0){_(L(F.number,4)+"|  ","background-color:yellow; font-weight:bold"),_(F.line+B,"color:red; background-color:yellow; font-weight:bold");var Z=0;F.errors.forEach(function(ot){var ct=ot.message,gt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ct);if(gt){var bt=gt[1];switch(ct=gt[2],bt){case"assign":bt="=";break}Z=Math.max(F.line.indexOf(bt,Z),0)}else Z=0;_(L("| ",6)),_(L("^^^",Z+3)+B,"font-weight:bold"),_(L("| ",6)),_(ct+B,"font-weight:bold")}),_(L("| ",6)+B)}else _(L(F.number,4)+"|  "),_(F.line+B,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=nn.join("%c"),console.log.apply(console,v)):console.log(nn.join(""))}),P.raise("Error compiling "+lr+" shader, "+Yr[0].name)}}function et(mt,qt,Ee,fr,Lr){if(!mt.getProgramParameter(qt,mt.LINK_STATUS)){var cr=mt.getProgramInfoLog(qt),lr=W(Ee,Lr),Yr=W(fr,Lr),Vr='Error linking program with vertex shader, "'+Yr[0].name+'", and fragment shader "'+lr[0].name+'"';typeof document!="undefined"?console.log("%c"+Vr+B+"%c"+cr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Vr+B+cr),P.raise(Vr)}}function Q(mt){mt._commandRef=d()}function it(mt,qt,Ee,fr){Q(mt);function Lr(Vr){return Vr?fr.id(Vr):0}mt._fragId=Lr(mt.static.frag),mt._vertId=Lr(mt.static.vert);function cr(Vr,$r){Object.keys($r).forEach(function(Gr){Vr[fr.id(Gr)]=!0})}var lr=mt._uniformSet={};cr(lr,qt.static),cr(lr,qt.dynamic);var Yr=mt._attributeSet={};cr(Yr,Ee.static),cr(Yr,Ee.dynamic),mt._hasCount="count"in mt.static||"count"in mt.dynamic||"elements"in mt.static||"elements"in mt.dynamic}function ht(mt,qt){var Ee=at();k(mt+" in command "+(qt||d())+(Ee==="unknown"?"":" called from "+Ee))}function dt(mt,qt,Ee){mt||ht(qt,Ee||d())}function Ot(mt,qt,Ee,fr){mt in qt||ht("unknown parameter ("+mt+")"+N(Ee)+". possible values: "+Object.keys(qt).join(),fr||d())}function It(mt,qt,Ee,fr){y(mt,qt)||ht("invalid parameter type"+N(Ee)+". expected "+qt+", got "+typeof mt,fr||d())}function Kt(mt){mt()}function Ft(mt,qt,Ee){mt.texture?m(mt.texture._texture.internalformat,qt,"unsupported texture format for attachment"):m(mt.renderbuffer._renderbuffer.format,Ee,"unsupported renderbuffer format for attachment")}var Nt=33071,st=9728,yt=9984,kt=9985,ee=9986,$t=9987,ge=5120,Pe=5121,tr=5122,Jt=5123,ae=5124,Se=5125,xe=5126,we=32819,zt=32820,Wt=33635,Ie=34042,Yt=36193,ie={};ie[ge]=ie[Pe]=1,ie[tr]=ie[Jt]=ie[Yt]=ie[Wt]=ie[we]=ie[zt]=2,ie[ae]=ie[Se]=ie[xe]=ie[Ie]=4;function Oe(mt,qt){return mt===zt||mt===we||mt===Wt?2:mt===Ie?4:ie[mt]*qt}function re(mt){return!(mt&mt-1)&&!!mt}function _e(mt,qt,Ee){var fr,Lr=qt.width,cr=qt.height,lr=qt.channels;P(Lr>0&&Lr<=Ee.maxTextureSize&&cr>0&&cr<=Ee.maxTextureSize,"invalid texture shape"),(mt.wrapS!==Nt||mt.wrapT!==Nt)&&P(re(Lr)&&re(cr),"incompatible wrap mode for texture, both width and height must be power of 2"),qt.mipmask===1?Lr!==1&&cr!==1&&P(mt.minFilter!==yt&&mt.minFilter!==ee&&mt.minFilter!==kt&&mt.minFilter!==$t,"min filter requires mipmap"):(P(re(Lr)&&re(cr),"texture must be a square power of 2 to support mipmapping"),P(qt.mipmask===(Lr<<1)-1,"missing or incomplete mipmap data")),qt.type===xe&&(Ee.extensions.indexOf("oes_texture_float_linear")<0&&P(mt.minFilter===st&&mt.magFilter===st,"filter not supported, must enable oes_texture_float_linear"),P(!mt.genMipmaps,"mipmap generation not supported with float textures"));var Yr=qt.images;for(fr=0;fr<16;++fr)if(Yr[fr]){var Vr=Lr>>fr,$r=cr>>fr;P(qt.mipmask&1<<fr,"missing mipmap data");var Gr=Yr[fr];if(P(Gr.width===Vr&&Gr.height===$r,"invalid shape for mip images"),P(Gr.format===qt.format&&Gr.internalformat===qt.internalformat&&Gr.type===qt.type,"incompatible type for mip image"),!Gr.compressed)if(Gr.data){var nn=Math.ceil(Oe(Gr.type,lr)*Vr/Gr.unpackAlignment)*Gr.unpackAlignment;P(Gr.data.byteLength===nn*$r,"invalid data for image, buffer size is inconsistent with image format")}else Gr.element||Gr.copy}else mt.genMipmaps||P((qt.mipmask&1<<fr)===0,"extra mipmap data");qt.compressed&&P(!mt.genMipmaps,"mipmap generation for compressed images not supported")}function Ge(mt,qt,Ee,fr){var Lr=mt.width,cr=mt.height,lr=mt.channels;P(Lr>0&&Lr<=fr.maxTextureSize&&cr>0&&cr<=fr.maxTextureSize,"invalid texture shape"),P(Lr===cr,"cube map must be square"),P(qt.wrapS===Nt&&qt.wrapT===Nt,"wrap mode not supported by cube map");for(var Yr=0;Yr<Ee.length;++Yr){var Vr=Ee[Yr];P(Vr.width===Lr&&Vr.height===cr,"inconsistent cube map face shape"),qt.genMipmaps&&(P(!Vr.compressed,"can not generate mipmap for compressed textures"),P(Vr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var $r=Vr.images,Gr=0;Gr<16;++Gr){var nn=$r[Gr];if(nn){var v=Lr>>Gr,_=cr>>Gr;P(Vr.mipmask&1<<Gr,"missing mipmap data"),P(nn.width===v&&nn.height===_,"invalid shape for mip images"),P(nn.format===mt.format&&nn.internalformat===mt.internalformat&&nn.type===mt.type,"incompatible type for mip image"),nn.compressed||(nn.data?P(nn.data.byteLength===v*_*Math.max(Oe(nn.type,lr),nn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):nn.element||nn.copy)}}}}var Ct=z(P,{optional:Kt,raise:k,commandRaise:ht,command:dt,parameter:D,commandParameter:Ot,constructor:A,type:M,commandType:It,isTypedArray:E,nni:S,oneOf:m,shaderError:q,linkError:et,callSite:at,saveCommandRef:Q,saveDrawInfo:it,framebufferFormat:Ft,guessCommand:d,texture2D:_e,textureCube:Ge}),Nr=0,Or=0,Ur=5,Sr=6;function gn(mt,qt){this.id=Nr++,this.type=mt,this.data=qt}function Rr(mt){return mt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ln(mt){if(mt.length===0)return[];var qt=mt.charAt(0),Ee=mt.charAt(mt.length-1);if(mt.length>1&&qt===Ee&&(qt==='"'||qt==="'"))return['"'+Rr(mt.substr(1,mt.length-2))+'"'];var fr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(mt);if(fr)return ln(mt.substr(0,fr.index)).concat(ln(fr[1])).concat(ln(mt.substr(fr.index+fr[0].length)));var Lr=mt.split(".");if(Lr.length===1)return['"'+Rr(mt)+'"'];for(var cr=[],lr=0;lr<Lr.length;++lr)cr=cr.concat(ln(Lr[lr]));return cr}function Nn(mt){return"["+ln(mt).join("][")+"]"}function Ln(mt,qt){return new gn(mt,Nn(qt+""))}function fn(mt){return typeof mt=="function"&&!mt._reglType||mt instanceof gn}function qe(mt,qt){if(typeof mt=="function")return new gn(Or,mt);if(typeof mt=="number"||typeof mt=="boolean")return new gn(Ur,mt);if(Array.isArray(mt))return new gn(Sr,mt.map((Ee,fr)=>qe(Ee,qt+"["+fr+"]")));if(mt instanceof gn)return mt;Ct(!1,"invalid option type in uniform "+qt)}var rr={DynamicVariable:gn,define:Ln,isDynamic:fn,unbox:qe,accessor:Nn},vr={next:typeof requestAnimationFrame=="function"?function(mt){return requestAnimationFrame(mt)}:function(mt){return setTimeout(mt,16)},cancel:typeof cancelAnimationFrame=="function"?function(mt){return cancelAnimationFrame(mt)}:clearTimeout},Pr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function en(){var mt={"":0},qt=[""];return{id:function(Ee){var fr=mt[Ee];return fr||(fr=mt[Ee]=qt.length,qt.push(Ee),fr)},str:function(Ee){return qt[Ee]}}}function pn(mt,qt,Ee){var fr=document.createElement("canvas");z(fr.style,{border:0,margin:0,padding:0,top:0,left:0}),mt.appendChild(fr),mt===document.body&&(fr.style.position="absolute",z(mt.style,{margin:0,padding:0}));function Lr(){var Yr=window.innerWidth,Vr=window.innerHeight;if(mt!==document.body){var $r=mt.getBoundingClientRect();Yr=$r.right-$r.left,Vr=$r.bottom-$r.top}fr.width=Ee*Yr,fr.height=Ee*Vr,z(fr.style,{width:Yr+"px",height:Vr+"px"})}var cr;mt!==document.body&&typeof ResizeObserver=="function"?(cr=new ResizeObserver(function(){setTimeout(Lr)}),cr.observe(mt)):window.addEventListener("resize",Lr,!1);function lr(){cr?cr.disconnect():window.removeEventListener("resize",Lr),mt.removeChild(fr)}return Lr(),{canvas:fr,onDestroy:lr}}function rn(mt,qt){function Ee(fr){try{return mt.getContext(fr,qt)}catch(Lr){return null}}return Ee("webgl")||Ee("experimental-webgl")||Ee("webgl-experimental")}function jn(mt){return typeof mt.nodeName=="string"&&typeof mt.appendChild=="function"&&typeof mt.getBoundingClientRect=="function"}function Hn(mt){return typeof mt.drawArrays=="function"||typeof mt.drawElements=="function"}function oa(mt){return typeof mt=="string"?mt.split():(Ct(Array.isArray(mt),"invalid extension array"),mt)}function dn(mt){return typeof mt=="string"?(Ct(typeof document!="undefined","not supported outside of DOM"),document.querySelector(mt)):mt}function Wn(mt){var qt=mt||{},Ee,fr,Lr,cr,lr={},Yr=[],Vr=[],$r=typeof window=="undefined"?1:window.devicePixelRatio,Gr=!1,nn=function(F){F&&Ct.raise(F)},v=function(){};if(typeof qt=="string"?(Ct(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ee=document.querySelector(qt),Ct(Ee,"invalid query string for element")):typeof qt=="object"?jn(qt)?Ee=qt:Hn(qt)?(cr=qt,Lr=cr.canvas):(Ct.constructor(qt),"gl"in qt?cr=qt.gl:"canvas"in qt?Lr=dn(qt.canvas):"container"in qt&&(fr=dn(qt.container)),"attributes"in qt&&(lr=qt.attributes,Ct.type(lr,"object","invalid context attributes")),"extensions"in qt&&(Yr=oa(qt.extensions)),"optionalExtensions"in qt&&(Vr=oa(qt.optionalExtensions)),"onDone"in qt&&(Ct.type(qt.onDone,"function","invalid or missing onDone callback"),nn=qt.onDone),"profile"in qt&&(Gr=!!qt.profile),"pixelRatio"in qt&&($r=+qt.pixelRatio,Ct($r>0,"invalid pixel ratio"))):Ct.raise("invalid arguments to regl"),Ee&&(Ee.nodeName.toLowerCase()==="canvas"?Lr=Ee:fr=Ee),!cr){if(!Lr){Ct(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var _=pn(fr||document.body,nn,$r);if(!_)return null;Lr=_.canvas,v=_.onDestroy}lr.premultipliedAlpha===void 0&&(lr.premultipliedAlpha=!0),cr=rn(Lr,lr)}return cr?{gl:cr,canvas:Lr,container:fr,extensions:Yr,optionalExtensions:Vr,pixelRatio:$r,profile:Gr,onDone:nn,onDestroy:v}:(v(),nn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Dn(mt,qt){var Ee={};function fr(lr){Ct.type(lr,"string","extension name must be string");var Yr=lr.toLowerCase(),Vr;try{Vr=Ee[Yr]=mt.getExtension(Yr)}catch($r){}return!!Vr}for(var Lr=0;Lr<qt.extensions.length;++Lr){var cr=qt.extensions[Lr];if(!fr(cr))return qt.onDestroy(),qt.onDone('"'+cr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return qt.optionalExtensions.forEach(fr),{extensions:Ee,restore:function(){Object.keys(Ee).forEach(function(lr){if(Ee[lr]&&!fr(lr))throw new Error("(regl): error restoring extension "+lr)})}}}function Cn(mt,qt){for(var Ee=Array(mt),fr=0;fr<mt;++fr)Ee[fr]=qt(fr);return Ee}var la=5120,K=5121,ft=5122,rt=5123,O=5124,b=5125,w=5126;function X(mt){for(var qt=16;qt<=1<<28;qt*=16)if(mt<=qt)return qt;return 0}function xt(mt){var qt,Ee;return qt=(mt>65535)<<4,mt>>>=qt,Ee=(mt>255)<<3,mt>>>=Ee,qt|=Ee,Ee=(mt>15)<<2,mt>>>=Ee,qt|=Ee,Ee=(mt>3)<<1,mt>>>=Ee,qt|=Ee,qt|mt>>1}function At(){var mt=Cn(8,function(){return[]});function qt(cr){var lr=X(cr),Yr=mt[xt(lr)>>2];return Yr.length>0?Yr.pop():new ArrayBuffer(lr)}function Ee(cr){mt[xt(cr.byteLength)>>2].push(cr)}function fr(cr,lr){var Yr=null;switch(cr){case la:Yr=new Int8Array(qt(lr),0,lr);break;case K:Yr=new Uint8Array(qt(lr),0,lr);break;case ft:Yr=new Int16Array(qt(2*lr),0,lr);break;case rt:Yr=new Uint16Array(qt(2*lr),0,lr);break;case O:Yr=new Int32Array(qt(4*lr),0,lr);break;case b:Yr=new Uint32Array(qt(4*lr),0,lr);break;case w:Yr=new Float32Array(qt(4*lr),0,lr);break;default:return null}return Yr.length!==lr?Yr.subarray(0,lr):Yr}function Lr(cr){Ee(cr.buffer)}return{alloc:qt,free:Ee,allocType:fr,freeType:Lr}}var wt=At();wt.zero=At();var Pt=3408,Me=3410,ve=3411,He=3412,br=3413,ar=3414,mr=3415,Mn=33901,Xe=33902,hr=3379,Er=3386,on=34921,Wr=36347,xa=36348,Ta=35661,Rn=35660,Jn=34930,Ga=36349,Aa=34076,an=34024,Vn=7936,me=7937,Dt=7938,fe=35724,Ae=34047,be=36063,De=34852,or=3553,Fr=34067,Jr=34069,Pn=33984,Bn=6408,Zn=5126,ba=5121,Ca=36160,li=36053,ta=36064,fi=16384,Co=function(mt,qt){var Ee=1;qt.ext_texture_filter_anisotropic&&(Ee=mt.getParameter(Ae));var fr=1,Lr=1;qt.webgl_draw_buffers&&(fr=mt.getParameter(De),Lr=mt.getParameter(be));var cr=!!qt.oes_texture_float;if(cr){var lr=mt.createTexture();mt.bindTexture(or,lr),mt.texImage2D(or,0,Bn,1,1,0,Bn,Zn,null);var Yr=mt.createFramebuffer();if(mt.bindFramebuffer(Ca,Yr),mt.framebufferTexture2D(Ca,ta,or,lr,0),mt.bindTexture(or,null),mt.checkFramebufferStatus(Ca)!==li)cr=!1;else{mt.viewport(0,0,1,1),mt.clearColor(1,0,0,1),mt.clear(fi);var Vr=wt.allocType(Zn,4);mt.readPixels(0,0,1,1,Bn,Zn,Vr),mt.getError()?cr=!1:(mt.deleteFramebuffer(Yr),mt.deleteTexture(lr),cr=Vr[0]===1),wt.freeType(Vr)}}var $r=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Gr=!0;if(!$r){var nn=mt.createTexture(),v=wt.allocType(ba,36);mt.activeTexture(Pn),mt.bindTexture(Fr,nn),mt.texImage2D(Jr,0,Bn,3,3,0,Bn,ba,v),wt.freeType(v),mt.bindTexture(Fr,null),mt.deleteTexture(nn),Gr=!mt.getError()}return{colorBits:[mt.getParameter(Me),mt.getParameter(ve),mt.getParameter(He),mt.getParameter(br)],depthBits:mt.getParameter(ar),stencilBits:mt.getParameter(mr),subpixelBits:mt.getParameter(Pt),extensions:Object.keys(qt).filter(function(_){return!!qt[_]}),maxAnisotropic:Ee,maxDrawbuffers:fr,maxColorAttachments:Lr,pointSizeDims:mt.getParameter(Mn),lineWidthDims:mt.getParameter(Xe),maxViewportDims:mt.getParameter(Er),maxCombinedTextureUnits:mt.getParameter(Ta),maxCubeMapSize:mt.getParameter(Aa),maxRenderbufferSize:mt.getParameter(an),maxTextureUnits:mt.getParameter(Jn),maxTextureSize:mt.getParameter(hr),maxAttributes:mt.getParameter(on),maxVertexUniforms:mt.getParameter(Wr),maxVertexTextureUnits:mt.getParameter(Rn),maxVaryingVectors:mt.getParameter(xa),maxFragmentUniforms:mt.getParameter(Ga),glsl:mt.getParameter(fe),renderer:mt.getParameter(me),vendor:mt.getParameter(Vn),version:mt.getParameter(Dt),readFloat:cr,npotTextureCube:Gr}};function La(mt){return!!mt&&typeof mt=="object"&&Array.isArray(mt.shape)&&Array.isArray(mt.stride)&&typeof mt.offset=="number"&&mt.shape.length===mt.stride.length&&(Array.isArray(mt.data)||R(mt.data))}var xi=function(mt){return Object.keys(mt).map(function(qt){return mt[qt]})},so={shape:zi,flatten:ds};function To(mt,qt,Ee){for(var fr=0;fr<qt;++fr)Ee[fr]=mt[fr]}function bo(mt,qt,Ee,fr){for(var Lr=0,cr=0;cr<qt;++cr)for(var lr=mt[cr],Yr=0;Yr<Ee;++Yr)fr[Lr++]=lr[Yr]}function uo(mt,qt,Ee,fr,Lr,cr){for(var lr=cr,Yr=0;Yr<qt;++Yr)for(var Vr=mt[Yr],$r=0;$r<Ee;++$r)for(var Gr=Vr[$r],nn=0;nn<fr;++nn)Lr[lr++]=Gr[nn]}function Hi(mt,qt,Ee,fr,Lr){for(var cr=1,lr=Ee+1;lr<qt.length;++lr)cr*=qt[lr];var Yr=qt[Ee];if(qt.length-Ee===4){var Vr=qt[Ee+1],$r=qt[Ee+2],Gr=qt[Ee+3];for(lr=0;lr<Yr;++lr)uo(mt[lr],Vr,$r,Gr,fr,Lr),Lr+=cr}else for(lr=0;lr<Yr;++lr)Hi(mt[lr],qt,Ee+1,fr,Lr),Lr+=cr}function ds(mt,qt,Ee,fr){var Lr=1;if(qt.length)for(var cr=0;cr<qt.length;++cr)Lr*=qt[cr];else Lr=0;var lr=fr||wt.allocType(Ee,Lr);switch(qt.length){case 0:break;case 1:To(mt,qt[0],lr);break;case 2:bo(mt,qt[0],qt[1],lr);break;case 3:uo(mt,qt[0],qt[1],qt[2],lr,0);break;default:Hi(mt,qt,0,lr,0)}return lr}function zi(mt){for(var qt=[],Ee=mt;Ee.length;Ee=Ee[0])qt.push(Ee.length);return qt}var Ui={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},gs=5120,Ms=5122,Go=5124,_o=5121,Io=5123,$s=5125,Yn=5126,So=5126,Oo={int8:gs,int16:Ms,int32:Go,uint8:_o,uint16:Io,uint32:$s,float:Yn,float32:So},Wi=35048,zn=35040,Lo={dynamic:Wi,stream:zn,static:35044},Ai=so.flatten,zo=so.shape,Uo=35044,ps=35040,eo=5121,ro=5126,ei=[];ei[5120]=1,ei[5122]=2,ei[5124]=4,ei[5121]=1,ei[5123]=2,ei[5125]=4,ei[5126]=4;function fo(mt){return Ui[Object.prototype.toString.call(mt)]|0}function Do(mt,qt){for(var Ee=0;Ee<qt.length;++Ee)mt[Ee]=qt[Ee]}function Wo(mt,qt,Ee,fr,Lr,cr,lr){for(var Yr=0,Vr=0;Vr<Ee;++Vr)for(var $r=0;$r<fr;++$r)mt[Yr++]=qt[Lr*Vr+cr*$r+lr]}function No(mt,qt,Ee,fr){var Lr=0,cr={};function lr(Z){this.id=Lr++,this.buffer=mt.createBuffer(),this.type=Z,this.usage=Uo,this.byteLength=0,this.dimension=1,this.dtype=eo,this.persistentData=null,Ee.profile&&(this.stats={size:0})}lr.prototype.bind=function(){mt.bindBuffer(this.type,this.buffer)},lr.prototype.destroy=function(){v(this)};var Yr=[];function Vr(Z,ot){var ct=Yr.pop();return ct||(ct=new lr(Z)),ct.bind(),nn(ct,ot,ps,0,1,!1),ct}function $r(Z){Yr.push(Z)}function Gr(Z,ot,ct){Z.byteLength=ot.byteLength,mt.bufferData(Z.type,ot,ct)}function nn(Z,ot,ct,gt,bt,Mt){var Gt;if(Z.usage=ct,Array.isArray(ot)){if(Z.dtype=gt||ro,ot.length>0){var te;if(Array.isArray(ot[0])){Gt=zo(ot);for(var Zt=1,ye=1;ye<Gt.length;++ye)Zt*=Gt[ye];Z.dimension=Zt,te=Ai(ot,Gt,Z.dtype),Gr(Z,te,ct),Mt?Z.persistentData=te:wt.freeType(te)}else if(typeof ot[0]=="number"){Z.dimension=bt;var We=wt.allocType(Z.dtype,ot.length);Do(We,ot),Gr(Z,We,ct),Mt?Z.persistentData=We:wt.freeType(We)}else R(ot[0])?(Z.dimension=ot[0].length,Z.dtype=gt||fo(ot[0])||ro,te=Ai(ot,[ot.length,ot[0].length],Z.dtype),Gr(Z,te,ct),Mt?Z.persistentData=te:wt.freeType(te)):Ct.raise("invalid buffer data")}}else if(R(ot))Z.dtype=gt||fo(ot),Z.dimension=bt,Gr(Z,ot,ct),Mt&&(Z.persistentData=new Uint8Array(new Uint8Array(ot.buffer)));else if(La(ot)){Gt=ot.shape;var wr=ot.stride,Ze=ot.offset,Je=0,Qe=0,jr=0,hn=0;Gt.length===1?(Je=Gt[0],Qe=1,jr=wr[0],hn=0):Gt.length===2?(Je=Gt[0],Qe=Gt[1],jr=wr[0],hn=wr[1]):Ct.raise("invalid shape"),Z.dtype=gt||fo(ot.data)||ro,Z.dimension=Qe;var tn=wt.allocType(Z.dtype,Je*Qe);Wo(tn,ot.data,Je,Qe,jr,hn,Ze),Gr(Z,tn,ct),Mt?Z.persistentData=tn:wt.freeType(tn)}else ot instanceof ArrayBuffer?(Z.dtype=eo,Z.dimension=bt,Gr(Z,ot,ct),Mt&&(Z.persistentData=new Uint8Array(new Uint8Array(ot)))):Ct.raise("invalid buffer data")}function v(Z){qt.bufferCount--,fr(Z);var ot=Z.buffer;Ct(ot,"buffer must not be deleted already"),mt.deleteBuffer(ot),Z.buffer=null,delete cr[Z.id]}function _(Z,ot,ct,gt){qt.bufferCount++;var bt=new lr(ot);cr[bt.id]=bt;function Mt(Zt){var ye=Uo,We=null,wr=0,Ze=0,Je=1;return Array.isArray(Zt)||R(Zt)||La(Zt)||Zt instanceof ArrayBuffer?We=Zt:typeof Zt=="number"?wr=Zt|0:Zt&&(Ct.type(Zt,"object","buffer arguments must be an object, a number or an array"),"data"in Zt&&(Ct(We===null||Array.isArray(We)||R(We)||La(We),"invalid data for buffer"),We=Zt.data),"usage"in Zt&&(Ct.parameter(Zt.usage,Lo,"invalid buffer usage"),ye=Lo[Zt.usage]),"type"in Zt&&(Ct.parameter(Zt.type,Oo,"invalid buffer type"),Ze=Oo[Zt.type]),"dimension"in Zt&&(Ct.type(Zt.dimension,"number","invalid dimension"),Je=Zt.dimension|0),"length"in Zt&&(Ct.nni(wr,"buffer length must be a nonnegative integer"),wr=Zt.length|0)),bt.bind(),We?nn(bt,We,ye,Ze,Je,gt):(wr&&mt.bufferData(bt.type,wr,ye),bt.dtype=Ze||eo,bt.usage=ye,bt.dimension=Je,bt.byteLength=wr),Ee.profile&&(bt.stats.size=bt.byteLength*ei[bt.dtype]),Mt}function Gt(Zt,ye){Ct(ye+Zt.byteLength<=bt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Zt.byteLength+" starting from offset "+ye+" to a buffer of size "+bt.byteLength),mt.bufferSubData(bt.type,ye,Zt)}function te(Zt,ye){var We=(ye||0)|0,wr;if(bt.bind(),R(Zt)||Zt instanceof ArrayBuffer)Gt(Zt,We);else if(Array.isArray(Zt)){if(Zt.length>0)if(typeof Zt[0]=="number"){var Ze=wt.allocType(bt.dtype,Zt.length);Do(Ze,Zt),Gt(Ze,We),wt.freeType(Ze)}else if(Array.isArray(Zt[0])||R(Zt[0])){wr=zo(Zt);var Je=Ai(Zt,wr,bt.dtype);Gt(Je,We),wt.freeType(Je)}else Ct.raise("invalid buffer data")}else if(La(Zt)){wr=Zt.shape;var Qe=Zt.stride,jr=0,hn=0,tn=0,kn=0;wr.length===1?(jr=wr[0],hn=1,tn=Qe[0],kn=0):wr.length===2?(jr=wr[0],hn=wr[1],tn=Qe[0],kn=Qe[1]):Ct.raise("invalid shape");var In=Array.isArray(Zt.data)?bt.dtype:fo(Zt.data),Kn=wt.allocType(In,jr*hn);Wo(Kn,Zt.data,jr,hn,tn,kn,Zt.offset),Gt(Kn,We),wt.freeType(Kn)}else Ct.raise("invalid data for buffer subdata");return Mt}return ct||Mt(Z),Mt._reglType="buffer",Mt._buffer=bt,Mt.subdata=te,Ee.profile&&(Mt.stats=bt.stats),Mt.destroy=function(){v(bt)},Mt}function F(){xi(cr).forEach(function(Z){Z.buffer=mt.createBuffer(),mt.bindBuffer(Z.type,Z.buffer),mt.bufferData(Z.type,Z.persistentData||Z.byteLength,Z.usage)})}return Ee.profile&&(qt.getTotalBufferSize=function(){var Z=0;return Object.keys(cr).forEach(function(ot){Z+=cr[ot].stats.size}),Z}),{create:_,createStream:Vr,destroyStream:$r,clear:function(){xi(cr).forEach(v),Yr.forEach(v)},getBuffer:function(Z){return Z&&Z._buffer instanceof lr?Z._buffer:null},restore:F,_initBuffer:nn}}var is=0,Xo=0,Jo=1,Xa=1,As=4,iu=4,Xi={points:is,point:Xo,lines:Jo,line:Xa,triangles:As,triangle:iu,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},os=0,Eo=1,Yi=4,co=5120,pa=5121,ja=5122,yi=5123,no=5124,ki=5125,Ki=34963,Yo=35040,wo=35044;function ts(mt,qt,Ee,fr){var Lr={},cr=0,lr={uint8:pa,uint16:yi};qt.oes_element_index_uint&&(lr.uint32=ki);function Yr(F){this.id=cr++,Lr[this.id]=this,this.buffer=F,this.primType=Yi,this.vertCount=0,this.type=0}Yr.prototype.bind=function(){this.buffer.bind()};var Vr=[];function $r(F){var Z=Vr.pop();return Z||(Z=new Yr(Ee.create(null,Ki,!0,!1)._buffer)),nn(Z,F,Yo,-1,-1,0,0),Z}function Gr(F){Vr.push(F)}function nn(F,Z,ot,ct,gt,bt,Mt){F.buffer.bind();var Gt;if(Z){var te=Mt;!Mt&&(!R(Z)||La(Z)&&!R(Z.data))&&(te=qt.oes_element_index_uint?ki:yi),Ee._initBuffer(F.buffer,Z,ot,te,3)}else mt.bufferData(Ki,bt,ot),F.buffer.dtype=Gt||pa,F.buffer.usage=ot,F.buffer.dimension=3,F.buffer.byteLength=bt;if(Gt=Mt,!Mt){switch(F.buffer.dtype){case pa:case co:Gt=pa;break;case yi:case ja:Gt=yi;break;case ki:case no:Gt=ki;break;default:Ct.raise("unsupported type for element array")}F.buffer.dtype=Gt}F.type=Gt,Ct(Gt!==ki||!!qt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Zt=gt;Zt<0&&(Zt=F.buffer.byteLength,Gt===yi?Zt>>=1:Gt===ki&&(Zt>>=2)),F.vertCount=Zt;var ye=ct;if(ct<0){ye=Yi;var We=F.buffer.dimension;We===1&&(ye=os),We===2&&(ye=Eo),We===3&&(ye=Yi)}F.primType=ye}function v(F){fr.elementsCount--,Ct(F.buffer!==null,"must not double destroy elements"),delete Lr[F.id],F.buffer.destroy(),F.buffer=null}function _(F,Z){var ot=Ee.create(null,Ki,!0),ct=new Yr(ot._buffer);fr.elementsCount++;function gt(bt){if(!bt)ot(),ct.primType=Yi,ct.vertCount=0,ct.type=pa;else if(typeof bt=="number")ot(bt),ct.primType=Yi,ct.vertCount=bt|0,ct.type=pa;else{var Mt=null,Gt=wo,te=-1,Zt=-1,ye=0,We=0;Array.isArray(bt)||R(bt)||La(bt)?Mt=bt:(Ct.type(bt,"object","invalid arguments for elements"),"data"in bt&&(Mt=bt.data,Ct(Array.isArray(Mt)||R(Mt)||La(Mt),"invalid data for element buffer")),"usage"in bt&&(Ct.parameter(bt.usage,Lo,"invalid element buffer usage"),Gt=Lo[bt.usage]),"primitive"in bt&&(Ct.parameter(bt.primitive,Xi,"invalid element buffer primitive"),te=Xi[bt.primitive]),"count"in bt&&(Ct(typeof bt.count=="number"&&bt.count>=0,"invalid vertex count for elements"),Zt=bt.count|0),"type"in bt&&(Ct.parameter(bt.type,lr,"invalid buffer type"),We=lr[bt.type]),"length"in bt?ye=bt.length|0:(ye=Zt,We===yi||We===ja?ye*=2:(We===ki||We===no)&&(ye*=4))),nn(ct,Mt,Gt,te,Zt,ye,We)}return gt}return gt(F),gt._reglType="elements",gt._elements=ct,gt.subdata=function(bt,Mt){return ot.subdata(bt,Mt),gt},gt.destroy=function(){v(ct)},gt}return{create:_,createStream:$r,destroyStream:Gr,getElements:function(F){return typeof F=="function"&&F._elements instanceof Yr?F._elements:null},clear:function(){xi(Lr).forEach(v)}}}var lo=new Float32Array(1),Rs=new Uint32Array(lo.buffer),ou=5123;function Cs(mt){for(var qt=wt.allocType(ou,mt.length),Ee=0;Ee<mt.length;++Ee)if(isNaN(mt[Ee]))qt[Ee]=65535;else if(mt[Ee]===1/0)qt[Ee]=31744;else if(mt[Ee]===-1/0)qt[Ee]=64512;else{lo[0]=mt[Ee];var fr=Rs[0],Lr=fr>>>31<<15,cr=(fr<<1>>>24)-127,lr=fr>>13&1024-1;if(cr<-24)qt[Ee]=Lr;else if(cr<-14){var Yr=-14-cr;qt[Ee]=Lr+(lr+1024>>Yr)}else cr>15?qt[Ee]=Lr+31744:qt[Ee]=Lr+(cr+15<<10)+lr}return qt}function ci(mt){return Array.isArray(mt)||R(mt)}var Po=function(mt){return!(mt&mt-1)&&!!mt},Wu=34467,ho=3553,Bs=34067,Ts=34069,Vo=6408,Fs=6406,ss=6407,jo=6409,us=6410,su=32854,Gs=32855,fs=36194,Tt=32819,jt=32820,ze=33635,Ke=34042,Cr=6402,cn=34041,mn=35904,aa=35906,ai=36193,Zi=33776,ao=33777,zs=33778,Mu=33779,Ri=35986,vo=35987,qs=34798,Xu=35840,Au=35841,uu=35842,Qs=35843,fu=36196,Is=5121,Js=5123,cs=5125,Mo=5126,rf=10242,kf=10243,Rf=10497,Os=33071,Bf=33648,h=10240,T=10241,vt=9728,Et=9729,Lt=9984,Xt=9985,Vt=9986,ue=9987,he=33170,Ce=4352,Ye=4353,pr=4354,xr=34046,gr=3317,Zr=37440,qr=37441,Tr=37443,_n=37444,Ea=33984,wa=[Lt,Vt,Xt,ue],ha=[0,jo,us,ss,Vo],qn={};qn[jo]=qn[Fs]=qn[Cr]=1,qn[cn]=qn[us]=2,qn[ss]=qn[mn]=3,qn[Vo]=qn[aa]=4;function sa(mt){return"[object "+mt+"]"}var Ni=sa("HTMLCanvasElement"),Ci=sa("OffscreenCanvas"),_i=sa("CanvasRenderingContext2D"),Ti=sa("ImageBitmap"),Ii=sa("HTMLImageElement"),Bi=sa("HTMLVideoElement"),$i=Object.keys(Ui).concat([Ni,Ci,_i,Ti,Ii,Bi]),za=[];za[Is]=1,za[Mo]=4,za[ai]=2,za[Js]=2,za[cs]=4;var ii=[];ii[su]=2,ii[Gs]=2,ii[fs]=2,ii[cn]=4,ii[Zi]=.5,ii[ao]=.5,ii[zs]=1,ii[Mu]=1,ii[Ri]=.5,ii[vo]=1,ii[qs]=1,ii[Xu]=.5,ii[Au]=.25,ii[uu]=.5,ii[Qs]=.25,ii[fu]=.5;function ls(mt){return Array.isArray(mt)&&(mt.length===0||typeof mt[0]=="number")}function ys(mt){if(!Array.isArray(mt))return!1;var qt=mt.length;return!(qt===0||!ci(mt[0]))}function ko(mt){return Object.prototype.toString.call(mt)}function Cu(mt){return ko(mt)===Ni}function Ff(mt){return ko(mt)===Ci}function xc(mt){return ko(mt)===_i}function bc(mt){return ko(mt)===Ti}function Ec(mt){return ko(mt)===Ii}function Gf(mt){return ko(mt)===Bi}function zf(mt){if(!mt)return!1;var qt=ko(mt);return $i.indexOf(qt)>=0?!0:ls(mt)||ys(mt)||La(mt)}function wc(mt){return Ui[Object.prototype.toString.call(mt)]|0}function nf(mt,qt){var Ee=qt.length;switch(mt.type){case Is:case Js:case cs:case Mo:var fr=wt.allocType(mt.type,Ee);fr.set(qt),mt.data=fr;break;case ai:mt.data=Cs(qt);break;default:Ct.raise("unsupported texture type, must specify a typed array")}}function af(mt,qt){return wt.allocType(mt.type===ai?Mo:mt.type,qt)}function _c(mt,qt){mt.type===ai?(mt.data=Cs(qt),wt.freeType(qt)):mt.data=qt}function of(mt,qt,Ee,fr,Lr,cr){for(var lr=mt.width,Yr=mt.height,Vr=mt.channels,$r=lr*Yr*Vr,Gr=af(mt,$r),nn=0,v=0;v<Yr;++v)for(var _=0;_<lr;++_)for(var F=0;F<Vr;++F)Gr[nn++]=qt[Ee*_+fr*v+Lr*F+cr];_c(mt,Gr)}function cu(mt,qt,Ee,fr,Lr,cr){var lr;if(typeof ii[mt]!="undefined"?lr=ii[mt]:lr=qn[mt]*za[qt],cr&&(lr*=6),Lr){for(var Yr=0,Vr=Ee;Vr>=1;)Yr+=lr*Vr*Vr,Vr/=2;return Yr}else return lr*Ee*fr}function Sc(mt,qt,Ee,fr,Lr,cr,lr){var Yr={"don't care":Ce,"dont care":Ce,nice:pr,fast:Ye},Vr={repeat:Rf,clamp:Os,mirror:Bf},$r={nearest:vt,linear:Et},Gr=z({mipmap:ue,"nearest mipmap nearest":Lt,"linear mipmap nearest":Xt,"nearest mipmap linear":Vt,"linear mipmap linear":ue},$r),nn={none:0,browser:_n},v={uint8:Is,rgba4:Tt,rgb565:ze,"rgb5 a1":jt},_={alpha:Fs,luminance:jo,"luminance alpha":us,rgb:ss,rgba:Vo,rgba4:su,"rgb5 a1":Gs,rgb565:fs},F={};qt.ext_srgb&&(_.srgb=mn,_.srgba=aa),qt.oes_texture_float&&(v.float32=v.float=Mo),qt.oes_texture_half_float&&(v.float16=v["half float"]=ai),qt.webgl_depth_texture&&(z(_,{depth:Cr,"depth stencil":cn}),z(v,{uint16:Js,uint32:cs,"depth stencil":Ke})),qt.webgl_compressed_texture_s3tc&&z(F,{"rgb s3tc dxt1":Zi,"rgba s3tc dxt1":ao,"rgba s3tc dxt3":zs,"rgba s3tc dxt5":Mu}),qt.webgl_compressed_texture_atc&&z(F,{"rgb atc":Ri,"rgba atc explicit alpha":vo,"rgba atc interpolated alpha":qs}),qt.webgl_compressed_texture_pvrtc&&z(F,{"rgb pvrtc 4bppv1":Xu,"rgb pvrtc 2bppv1":Au,"rgba pvrtc 4bppv1":uu,"rgba pvrtc 2bppv1":Qs}),qt.webgl_compressed_texture_etc1&&(F["rgb etc1"]=fu);var Z=Array.prototype.slice.call(mt.getParameter(Wu));Object.keys(F).forEach(function(pe){var dr=F[pe];Z.indexOf(dr)>=0&&(_[pe]=dr)});var ot=Object.keys(_);Ee.textureFormats=ot;var ct=[];Object.keys(_).forEach(function(pe){var dr=_[pe];ct[dr]=pe});var gt=[];Object.keys(v).forEach(function(pe){var dr=v[pe];gt[dr]=pe});var bt=[];Object.keys($r).forEach(function(pe){var dr=$r[pe];bt[dr]=pe});var Mt=[];Object.keys(Gr).forEach(function(pe){var dr=Gr[pe];Mt[dr]=pe});var Gt=[];Object.keys(Vr).forEach(function(pe){var dr=Vr[pe];Gt[dr]=pe});var te=ot.reduce(function(pe,dr){var ur=_[dr];return ur===jo||ur===Fs||ur===jo||ur===us||ur===Cr||ur===cn||qt.ext_srgb&&(ur===mn||ur===aa)?pe[ur]=ur:ur===Gs||dr.indexOf("rgba")>=0?pe[ur]=Vo:pe[ur]=ss,pe},{});function Zt(){this.internalformat=Vo,this.format=Vo,this.type=Is,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=_n,this.width=0,this.height=0,this.channels=0}function ye(pe,dr){pe.internalformat=dr.internalformat,pe.format=dr.format,pe.type=dr.type,pe.compressed=dr.compressed,pe.premultiplyAlpha=dr.premultiplyAlpha,pe.flipY=dr.flipY,pe.unpackAlignment=dr.unpackAlignment,pe.colorSpace=dr.colorSpace,pe.width=dr.width,pe.height=dr.height,pe.channels=dr.channels}function We(pe,dr){if(!(typeof dr!="object"||!dr)){if("premultiplyAlpha"in dr&&(Ct.type(dr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),pe.premultiplyAlpha=dr.premultiplyAlpha),"flipY"in dr&&(Ct.type(dr.flipY,"boolean","invalid texture flip"),pe.flipY=dr.flipY),"alignment"in dr&&(Ct.oneOf(dr.alignment,[1,2,4,8],"invalid texture unpack alignment"),pe.unpackAlignment=dr.alignment),"colorSpace"in dr&&(Ct.parameter(dr.colorSpace,nn,"invalid colorSpace"),pe.colorSpace=nn[dr.colorSpace]),"type"in dr){var ur=dr.type;Ct(qt.oes_texture_float||!(ur==="float"||ur==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Ct(qt.oes_texture_half_float||!(ur==="half float"||ur==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Ct(qt.webgl_depth_texture||!(ur==="uint16"||ur==="uint32"||ur==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ct.parameter(ur,v,"invalid texture type"),pe.type=v[ur]}var Sn=pe.width,Na=pe.height,le=pe.channels,Ht=!1;"shape"in dr?(Ct(Array.isArray(dr.shape)&&dr.shape.length>=2,"shape must be an array"),Sn=dr.shape[0],Na=dr.shape[1],dr.shape.length===3&&(le=dr.shape[2],Ct(le>0&&le<=4,"invalid number of channels"),Ht=!0),Ct(Sn>=0&&Sn<=Ee.maxTextureSize,"invalid width"),Ct(Na>=0&&Na<=Ee.maxTextureSize,"invalid height")):("radius"in dr&&(Sn=Na=dr.radius,Ct(Sn>=0&&Sn<=Ee.maxTextureSize,"invalid radius")),"width"in dr&&(Sn=dr.width,Ct(Sn>=0&&Sn<=Ee.maxTextureSize,"invalid width")),"height"in dr&&(Na=dr.height,Ct(Na>=0&&Na<=Ee.maxTextureSize,"invalid height")),"channels"in dr&&(le=dr.channels,Ct(le>0&&le<=4,"invalid number of channels"),Ht=!0)),pe.width=Sn|0,pe.height=Na|0,pe.channels=le|0;var ke=!1;if("format"in dr){var er=dr.format;Ct(qt.webgl_depth_texture||!(er==="depth"||er==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ct.parameter(er,_,"invalid texture format");var nr=pe.internalformat=_[er];pe.format=te[nr],er in v&&("type"in dr||(pe.type=v[er])),er in F&&(pe.compressed=!0),ke=!0}!Ht&&ke?pe.channels=qn[pe.format]:Ht&&!ke?pe.channels!==ha[pe.format]&&(pe.format=pe.internalformat=ha[pe.channels]):ke&&Ht&&Ct(pe.channels===qn[pe.format],"number of channels inconsistent with specified format")}}function wr(pe){mt.pixelStorei(Zr,pe.flipY),mt.pixelStorei(qr,pe.premultiplyAlpha),mt.pixelStorei(Tr,pe.colorSpace),mt.pixelStorei(gr,pe.unpackAlignment)}function Ze(){Zt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Je(pe,dr){var ur=null;if(zf(dr)?ur=dr:dr&&(Ct.type(dr,"object","invalid pixel data type"),We(pe,dr),"x"in dr&&(pe.xOffset=dr.x|0),"y"in dr&&(pe.yOffset=dr.y|0),zf(dr.data)&&(ur=dr.data)),Ct(!pe.compressed||ur instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),dr.copy){Ct(!ur,"can not specify copy and data field for the same texture");var Sn=Lr.viewportWidth,Na=Lr.viewportHeight;pe.width=pe.width||Sn-pe.xOffset,pe.height=pe.height||Na-pe.yOffset,pe.needsCopy=!0,Ct(pe.xOffset>=0&&pe.xOffset<Sn&&pe.yOffset>=0&&pe.yOffset<Na&&pe.width>0&&pe.width<=Sn&&pe.height>0&&pe.height<=Na,"copy texture read out of bounds")}else if(!ur)pe.width=pe.width||1,pe.height=pe.height||1,pe.channels=pe.channels||4;else if(R(ur))pe.channels=pe.channels||4,pe.data=ur,!("type"in dr)&&pe.type===Is&&(pe.type=wc(ur));else if(ls(ur))pe.channels=pe.channels||4,nf(pe,ur),pe.alignment=1,pe.needsFree=!0;else if(La(ur)){var le=ur.data;!Array.isArray(le)&&pe.type===Is&&(pe.type=wc(le));var Ht=ur.shape,ke=ur.stride,er,nr,Fe,Re,Ve,ce;Ht.length===3?(Fe=Ht[2],ce=ke[2]):(Ct(Ht.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Fe=1,ce=1),er=Ht[0],nr=Ht[1],Re=ke[0],Ve=ke[1],pe.alignment=1,pe.width=er,pe.height=nr,pe.channels=Fe,pe.format=pe.internalformat=ha[Fe],pe.needsFree=!0,of(pe,le,Re,Ve,ce,ur.offset)}else if(Cu(ur)||Ff(ur)||xc(ur))Cu(ur)||Ff(ur)?pe.element=ur:pe.element=ur.canvas,pe.width=pe.element.width,pe.height=pe.element.height,pe.channels=4;else if(bc(ur))pe.element=ur,pe.width=ur.width,pe.height=ur.height,pe.channels=4;else if(Ec(ur))pe.element=ur,pe.width=ur.naturalWidth,pe.height=ur.naturalHeight,pe.channels=4;else if(Gf(ur))pe.element=ur,pe.width=ur.videoWidth,pe.height=ur.videoHeight,pe.channels=4;else if(ys(ur)){var Le=pe.width||ur[0].length,oe=pe.height||ur.length,$e=pe.channels;ci(ur[0][0])?$e=$e||ur[0][0].length:$e=$e||1;for(var ir=so.shape(ur),Ir=1,kr=0;kr<ir.length;++kr)Ir*=ir[kr];var _r=af(pe,Ir);so.flatten(ur,ir,"",_r),_c(pe,_r),pe.alignment=1,pe.width=Le,pe.height=oe,pe.channels=$e,pe.format=pe.internalformat=ha[$e],pe.needsFree=!0}pe.type===Mo?Ct(Ee.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):pe.type===ai&&Ct(Ee.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Qe(pe,dr,ur){var Sn=pe.element,Na=pe.data,le=pe.internalformat,Ht=pe.format,ke=pe.type,er=pe.width,nr=pe.height;wr(pe),Sn?mt.texImage2D(dr,ur,Ht,Ht,ke,Sn):pe.compressed?mt.compressedTexImage2D(dr,ur,le,er,nr,0,Na):pe.needsCopy?(fr(),mt.copyTexImage2D(dr,ur,Ht,pe.xOffset,pe.yOffset,er,nr,0)):mt.texImage2D(dr,ur,Ht,er,nr,0,Ht,ke,Na||null)}function jr(pe,dr,ur,Sn,Na){var le=pe.element,Ht=pe.data,ke=pe.internalformat,er=pe.format,nr=pe.type,Fe=pe.width,Re=pe.height;wr(pe),le?mt.texSubImage2D(dr,Na,ur,Sn,er,nr,le):pe.compressed?mt.compressedTexSubImage2D(dr,Na,ur,Sn,ke,Fe,Re,Ht):pe.needsCopy?(fr(),mt.copyTexSubImage2D(dr,Na,ur,Sn,pe.xOffset,pe.yOffset,Fe,Re)):mt.texSubImage2D(dr,Na,ur,Sn,Fe,Re,er,nr,Ht)}var hn=[];function tn(){return hn.pop()||new Ze}function kn(pe){pe.needsFree&&wt.freeType(pe.data),Ze.call(pe),hn.push(pe)}function In(){Zt.call(this),this.genMipmaps=!1,this.mipmapHint=Ce,this.mipmask=0,this.images=Array(16)}function Kn(pe,dr,ur){var Sn=pe.images[0]=tn();pe.mipmask=1,Sn.width=pe.width=dr,Sn.height=pe.height=ur,Sn.channels=pe.channels=4}function ca(pe,dr){var ur=null;if(zf(dr))ur=pe.images[0]=tn(),ye(ur,pe),Je(ur,dr),pe.mipmask=1;else if(We(pe,dr),Array.isArray(dr.mipmap))for(var Sn=dr.mipmap,Na=0;Na<Sn.length;++Na)ur=pe.images[Na]=tn(),ye(ur,pe),ur.width>>=Na,ur.height>>=Na,Je(ur,Sn[Na]),pe.mipmask|=1<<Na;else ur=pe.images[0]=tn(),ye(ur,pe),Je(ur,dr),pe.mipmask=1;ye(pe,pe.images[0]),pe.compressed&&(pe.internalformat===Zi||pe.internalformat===ao||pe.internalformat===zs||pe.internalformat===Mu)&&Ct(pe.width%4===0&&pe.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ea(pe,dr){for(var ur=pe.images,Sn=0;Sn<ur.length;++Sn){if(!ur[Sn])return;Qe(ur[Sn],dr,Sn)}}var mi=[];function va(){var pe=mi.pop()||new In;Zt.call(pe),pe.mipmask=0;for(var dr=0;dr<16;++dr)pe.images[dr]=null;return pe}function Si(pe){for(var dr=pe.images,ur=0;ur<dr.length;++ur)dr[ur]&&kn(dr[ur]),dr[ur]=null;mi.push(pe)}function di(){this.minFilter=vt,this.magFilter=vt,this.wrapS=Os,this.wrapT=Os,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ce}function Pa(pe,dr){if("min"in dr){var ur=dr.min;Ct.parameter(ur,Gr),pe.minFilter=Gr[ur],wa.indexOf(pe.minFilter)>=0&&!("faces"in dr)&&(pe.genMipmaps=!0)}if("mag"in dr){var Sn=dr.mag;Ct.parameter(Sn,$r),pe.magFilter=$r[Sn]}var Na=pe.wrapS,le=pe.wrapT;if("wrap"in dr){var Ht=dr.wrap;typeof Ht=="string"?(Ct.parameter(Ht,Vr),Na=le=Vr[Ht]):Array.isArray(Ht)&&(Ct.parameter(Ht[0],Vr),Ct.parameter(Ht[1],Vr),Na=Vr[Ht[0]],le=Vr[Ht[1]])}else{if("wrapS"in dr){var ke=dr.wrapS;Ct.parameter(ke,Vr),Na=Vr[ke]}if("wrapT"in dr){var er=dr.wrapT;Ct.parameter(er,Vr),le=Vr[er]}}if(pe.wrapS=Na,pe.wrapT=le,"anisotropic"in dr){var nr=dr.anisotropic;Ct(typeof nr=="number"&&nr>=1&&nr<=Ee.maxAnisotropic,"aniso samples must be between 1 and "),pe.anisotropic=dr.anisotropic}if("mipmap"in dr){var Fe=!1;switch(typeof dr.mipmap){case"string":Ct.parameter(dr.mipmap,Yr,"invalid mipmap hint"),pe.mipmapHint=Yr[dr.mipmap],pe.genMipmaps=!0,Fe=!0;break;case"boolean":Fe=pe.genMipmaps=dr.mipmap;break;case"object":Ct(Array.isArray(dr.mipmap),"invalid mipmap type"),pe.genMipmaps=!1,Fe=!0;break;default:Ct.raise("invalid mipmap type")}Fe&&!("min"in dr)&&(pe.minFilter=Lt)}}function Mi(pe,dr){mt.texParameteri(dr,T,pe.minFilter),mt.texParameteri(dr,h,pe.magFilter),mt.texParameteri(dr,rf,pe.wrapS),mt.texParameteri(dr,kf,pe.wrapT),qt.ext_texture_filter_anisotropic&&mt.texParameteri(dr,xr,pe.anisotropic),pe.genMipmaps&&(mt.hint(he,pe.mipmapHint),mt.generateMipmap(dr))}var Fi=0,yo={},Ao=Ee.maxTextureUnits,Qi=Array(Ao).map(function(){return null});function _a(pe){Zt.call(this),this.mipmask=0,this.internalformat=Vo,this.id=Fi++,this.refCount=1,this.target=pe,this.texture=mt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new di,lr.profile&&(this.stats={size:0})}function Ko(pe){mt.activeTexture(Ea),mt.bindTexture(pe.target,pe.texture)}function ni(){var pe=Qi[0];pe?mt.bindTexture(pe.target,pe.texture):mt.bindTexture(ho,null)}function $n(pe){var dr=pe.texture;Ct(dr,"must not double destroy texture");var ur=pe.unit,Sn=pe.target;ur>=0&&(mt.activeTexture(Ea+ur),mt.bindTexture(Sn,null),Qi[ur]=null),mt.deleteTexture(dr),pe.texture=null,pe.params=null,pe.pixels=null,pe.refCount=0,delete yo[pe.id],cr.textureCount--}z(_a.prototype,{bind:function(){var pe=this;pe.bindCount+=1;var dr=pe.unit;if(dr<0){for(var ur=0;ur<Ao;++ur){var Sn=Qi[ur];if(Sn){if(Sn.bindCount>0)continue;Sn.unit=-1}Qi[ur]=pe,dr=ur;break}dr>=Ao&&Ct.raise("insufficient number of texture units"),lr.profile&&cr.maxTextureUnits<dr+1&&(cr.maxTextureUnits=dr+1),pe.unit=dr,mt.activeTexture(Ea+dr),mt.bindTexture(pe.target,pe.texture)}return dr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$n(this)}});function ka(pe,dr){var ur=new _a(ho);yo[ur.id]=ur,cr.textureCount++;function Sn(Ht,ke){var er=ur.texInfo;di.call(er);var nr=va();return typeof Ht=="number"?typeof ke=="number"?Kn(nr,Ht|0,ke|0):Kn(nr,Ht|0,Ht|0):Ht?(Ct.type(Ht,"object","invalid arguments to regl.texture"),Pa(er,Ht),ca(nr,Ht)):Kn(nr,1,1),er.genMipmaps&&(nr.mipmask=(nr.width<<1)-1),ur.mipmask=nr.mipmask,ye(ur,nr),Ct.texture2D(er,nr,Ee),ur.internalformat=nr.internalformat,Sn.width=nr.width,Sn.height=nr.height,Ko(ur),ea(nr,ho),Mi(er,ho),ni(),Si(nr),lr.profile&&(ur.stats.size=cu(ur.internalformat,ur.type,nr.width,nr.height,er.genMipmaps,!1)),Sn.format=ct[ur.internalformat],Sn.type=gt[ur.type],Sn.mag=bt[er.magFilter],Sn.min=Mt[er.minFilter],Sn.wrapS=Gt[er.wrapS],Sn.wrapT=Gt[er.wrapT],Sn}function Na(Ht,ke,er,nr){Ct(!!Ht,"must specify image data");var Fe=ke|0,Re=er|0,Ve=nr|0,ce=tn();return ye(ce,ur),ce.width=0,ce.height=0,Je(ce,Ht),ce.width=ce.width||(ur.width>>Ve)-Fe,ce.height=ce.height||(ur.height>>Ve)-Re,Ct(ur.type===ce.type&&ur.format===ce.format&&ur.internalformat===ce.internalformat,"incompatible format for texture.subimage"),Ct(Fe>=0&&Re>=0&&Fe+ce.width<=ur.width&&Re+ce.height<=ur.height,"texture.subimage write out of bounds"),Ct(ur.mipmask&1<<Ve,"missing mipmap data"),Ct(ce.data||ce.element||ce.needsCopy,"missing image data"),Ko(ur),jr(ce,ho,Fe,Re,Ve),ni(),kn(ce),Sn}function le(Ht,ke){var er=Ht|0,nr=ke|0||er;if(er===ur.width&&nr===ur.height)return Sn;Sn.width=ur.width=er,Sn.height=ur.height=nr,Ko(ur);for(var Fe=0;ur.mipmask>>Fe;++Fe){var Re=er>>Fe,Ve=nr>>Fe;if(!Re||!Ve)break;mt.texImage2D(ho,Fe,ur.format,Re,Ve,0,ur.format,ur.type,null)}return ni(),lr.profile&&(ur.stats.size=cu(ur.internalformat,ur.type,er,nr,!1,!1)),Sn}return Sn(pe,dr),Sn.subimage=Na,Sn.resize=le,Sn._reglType="texture2d",Sn._texture=ur,lr.profile&&(Sn.stats=ur.stats),Sn.destroy=function(){ur.decRef()},Sn}function Ha(pe,dr,ur,Sn,Na,le){var Ht=new _a(Bs);yo[Ht.id]=Ht,cr.cubeCount++;var ke=new Array(6);function er(Re,Ve,ce,Le,oe,$e){var ir,Ir=Ht.texInfo;for(di.call(Ir),ir=0;ir<6;++ir)ke[ir]=va();if(typeof Re=="number"||!Re){var kr=Re|0||1;for(ir=0;ir<6;++ir)Kn(ke[ir],kr,kr)}else if(typeof Re=="object")if(Ve)ca(ke[0],Re),ca(ke[1],Ve),ca(ke[2],ce),ca(ke[3],Le),ca(ke[4],oe),ca(ke[5],$e);else if(Pa(Ir,Re),We(Ht,Re),"faces"in Re){var _r=Re.faces;for(Ct(Array.isArray(_r)&&_r.length===6,"cube faces must be a length 6 array"),ir=0;ir<6;++ir)Ct(typeof _r[ir]=="object"&&!!_r[ir],"invalid input for cube map face"),ye(ke[ir],Ht),ca(ke[ir],_r[ir])}else for(ir=0;ir<6;++ir)ca(ke[ir],Re);else Ct.raise("invalid arguments to cube map");for(ye(Ht,ke[0]),Ee.npotTextureCube||Ct(Po(Ht.width)&&Po(Ht.height),"your browser does not support non power or two texture dimensions"),Ir.genMipmaps?Ht.mipmask=(ke[0].width<<1)-1:Ht.mipmask=ke[0].mipmask,Ct.textureCube(Ht,Ir,ke,Ee),Ht.internalformat=ke[0].internalformat,er.width=ke[0].width,er.height=ke[0].height,Ko(Ht),ir=0;ir<6;++ir)ea(ke[ir],Ts+ir);for(Mi(Ir,Bs),ni(),lr.profile&&(Ht.stats.size=cu(Ht.internalformat,Ht.type,er.width,er.height,Ir.genMipmaps,!0)),er.format=ct[Ht.internalformat],er.type=gt[Ht.type],er.mag=bt[Ir.magFilter],er.min=Mt[Ir.minFilter],er.wrapS=Gt[Ir.wrapS],er.wrapT=Gt[Ir.wrapT],ir=0;ir<6;++ir)Si(ke[ir]);return er}function nr(Re,Ve,ce,Le,oe){Ct(!!Ve,"must specify image data"),Ct(typeof Re=="number"&&Re===(Re|0)&&Re>=0&&Re<6,"invalid face");var $e=ce|0,ir=Le|0,Ir=oe|0,kr=tn();return ye(kr,Ht),kr.width=0,kr.height=0,Je(kr,Ve),kr.width=kr.width||(Ht.width>>Ir)-$e,kr.height=kr.height||(Ht.height>>Ir)-ir,Ct(Ht.type===kr.type&&Ht.format===kr.format&&Ht.internalformat===kr.internalformat,"incompatible format for texture.subimage"),Ct($e>=0&&ir>=0&&$e+kr.width<=Ht.width&&ir+kr.height<=Ht.height,"texture.subimage write out of bounds"),Ct(Ht.mipmask&1<<Ir,"missing mipmap data"),Ct(kr.data||kr.element||kr.needsCopy,"missing image data"),Ko(Ht),jr(kr,Ts+Re,$e,ir,Ir),ni(),kn(kr),er}function Fe(Re){var Ve=Re|0;if(Ve!==Ht.width){er.width=Ht.width=Ve,er.height=Ht.height=Ve,Ko(Ht);for(var ce=0;ce<6;++ce)for(var Le=0;Ht.mipmask>>Le;++Le)mt.texImage2D(Ts+ce,Le,Ht.format,Ve>>Le,Ve>>Le,0,Ht.format,Ht.type,null);return ni(),lr.profile&&(Ht.stats.size=cu(Ht.internalformat,Ht.type,er.width,er.height,!1,!0)),er}}return er(pe,dr,ur,Sn,Na,le),er.subimage=nr,er.resize=Fe,er._reglType="textureCube",er._texture=Ht,lr.profile&&(er.stats=Ht.stats),er.destroy=function(){Ht.decRef()},er}function io(){for(var pe=0;pe<Ao;++pe)mt.activeTexture(Ea+pe),mt.bindTexture(ho,null),Qi[pe]=null;xi(yo).forEach($n),cr.cubeCount=0,cr.textureCount=0}lr.profile&&(cr.getTotalTextureSize=function(){var pe=0;return Object.keys(yo).forEach(function(dr){pe+=yo[dr].stats.size}),pe});function Pu(){for(var pe=0;pe<Ao;++pe){var dr=Qi[pe];dr&&(dr.bindCount=0,dr.unit=-1,Qi[pe]=null)}xi(yo).forEach(function(ur){ur.texture=mt.createTexture(),mt.bindTexture(ur.target,ur.texture);for(var Sn=0;Sn<32;++Sn)if(ur.mipmask&1<<Sn)if(ur.target===ho)mt.texImage2D(ho,Sn,ur.internalformat,ur.width>>Sn,ur.height>>Sn,0,ur.internalformat,ur.type,null);else for(var Na=0;Na<6;++Na)mt.texImage2D(Ts+Na,Sn,ur.internalformat,ur.width>>Sn,ur.height>>Sn,0,ur.internalformat,ur.type,null);Mi(ur.texInfo,ur.target)})}function uc(){for(var pe=0;pe<Ao;++pe){var dr=Qi[pe];dr&&(dr.bindCount=0,dr.unit=-1,Qi[pe]=null),mt.activeTexture(Ea+pe),mt.bindTexture(ho,null),mt.bindTexture(Bs,null)}}return{create2D:ka,createCube:Ha,clear:io,getTexture:function(pe){return null},restore:Pu,refresh:uc}}var wn=36161,Tu=32854,Ua=32855,sf=36194,Uf=33189,Us=36168,Wf=34041,lu=35907,Xf=34836,Yf=34842,Vf=34843,ms=[];ms[Tu]=2,ms[Ua]=2,ms[sf]=2,ms[Uf]=2,ms[Us]=1,ms[Wf]=4,ms[lu]=4,ms[Xf]=16,ms[Yf]=8,ms[Vf]=6;function jf(mt,qt,Ee){return ms[mt]*qt*Ee}var Hf=function(mt,qt,Ee,fr,Lr){var cr={rgba4:Tu,rgb565:sf,"rgb5 a1":Ua,depth:Uf,stencil:Us,"depth stencil":Wf};qt.ext_srgb&&(cr.srgba=lu),qt.ext_color_buffer_half_float&&(cr.rgba16f=Yf,cr.rgb16f=Vf),qt.webgl_color_buffer_float&&(cr.rgba32f=Xf);var lr=[];Object.keys(cr).forEach(function(_){var F=cr[_];lr[F]=_});var Yr=0,Vr={};function $r(_){this.id=Yr++,this.refCount=1,this.renderbuffer=_,this.format=Tu,this.width=0,this.height=0,Lr.profile&&(this.stats={size:0})}$r.prototype.decRef=function(){--this.refCount<=0&&Gr(this)};function Gr(_){var F=_.renderbuffer;Ct(F,"must not double destroy renderbuffer"),mt.bindRenderbuffer(wn,null),mt.deleteRenderbuffer(F),_.renderbuffer=null,_.refCount=0,delete Vr[_.id],fr.renderbufferCount--}function nn(_,F){var Z=new $r(mt.createRenderbuffer());Vr[Z.id]=Z,fr.renderbufferCount++;function ot(gt,bt){var Mt=0,Gt=0,te=Tu;if(typeof gt=="object"&&gt){var Zt=gt;if("shape"in Zt){var ye=Zt.shape;Ct(Array.isArray(ye)&&ye.length>=2,"invalid renderbuffer shape"),Mt=ye[0]|0,Gt=ye[1]|0}else"radius"in Zt&&(Mt=Gt=Zt.radius|0),"width"in Zt&&(Mt=Zt.width|0),"height"in Zt&&(Gt=Zt.height|0);"format"in Zt&&(Ct.parameter(Zt.format,cr,"invalid renderbuffer format"),te=cr[Zt.format])}else typeof gt=="number"?(Mt=gt|0,typeof bt=="number"?Gt=bt|0:Gt=Mt):gt?Ct.raise("invalid arguments to renderbuffer constructor"):Mt=Gt=1;if(Ct(Mt>0&&Gt>0&&Mt<=Ee.maxRenderbufferSize&&Gt<=Ee.maxRenderbufferSize,"invalid renderbuffer size"),!(Mt===Z.width&&Gt===Z.height&&te===Z.format))return ot.width=Z.width=Mt,ot.height=Z.height=Gt,Z.format=te,mt.bindRenderbuffer(wn,Z.renderbuffer),mt.renderbufferStorage(wn,te,Mt,Gt),Ct(mt.getError()===0,"invalid render buffer format"),Lr.profile&&(Z.stats.size=jf(Z.format,Z.width,Z.height)),ot.format=lr[Z.format],ot}function ct(gt,bt){var Mt=gt|0,Gt=bt|0||Mt;return Mt===Z.width&&Gt===Z.height||(Ct(Mt>0&&Gt>0&&Mt<=Ee.maxRenderbufferSize&&Gt<=Ee.maxRenderbufferSize,"invalid renderbuffer size"),ot.width=Z.width=Mt,ot.height=Z.height=Gt,mt.bindRenderbuffer(wn,Z.renderbuffer),mt.renderbufferStorage(wn,Z.format,Mt,Gt),Ct(mt.getError()===0,"invalid render buffer format"),Lr.profile&&(Z.stats.size=jf(Z.format,Z.width,Z.height))),ot}return ot(_,F),ot.resize=ct,ot._reglType="renderbuffer",ot._renderbuffer=Z,Lr.profile&&(ot.stats=Z.stats),ot.destroy=function(){Z.decRef()},ot}Lr.profile&&(fr.getTotalRenderbufferSize=function(){var _=0;return Object.keys(Vr).forEach(function(F){_+=Vr[F].stats.size}),_});function v(){xi(Vr).forEach(function(_){_.renderbuffer=mt.createRenderbuffer(),mt.bindRenderbuffer(wn,_.renderbuffer),mt.renderbufferStorage(wn,_.format,_.width,_.height)}),mt.bindRenderbuffer(wn,null)}return{create:nn,clear:function(){xi(Vr).forEach(Gr)},restore:v}},bi=36160,Yu=36161,xs=3553,tt=34069,pt=36064,St=36096,Ut=36128,ne=33306,Be=36053,Ue=36054,sr=36055,Br=36057,Hr=36061,xn=36193,Tn=5121,vn=5126,fa=6407,da=6408,ya=6402,na=[fa,da],Da=[];Da[da]=4,Da[fa]=3;var Fn=[];Fn[Tn]=1,Fn[vn]=4,Fn[xn]=2;var Ia=32854,ia=32855,Un=36194,Ma=33189,qa=36168,ri=34041,Ba=35907,Fa=34836,oi=34842,Oi=34843,Ei=[Ia,ia,Un,Ba,oi,Oi,Fa],bs={};bs[Be]="complete",bs[Ue]="incomplete attachment",bs[Br]="incomplete dimensions",bs[sr]="incomplete, missing attachment",bs[Hr]="unsupported";function uf(mt,qt,Ee,fr,Lr,cr){var lr={cur:null,next:null,dirty:!1,setFBO:null},Yr=["rgba"],Vr=["rgba4","rgb565","rgb5 a1"];qt.ext_srgb&&Vr.push("srgba"),qt.ext_color_buffer_half_float&&Vr.push("rgba16f","rgb16f"),qt.webgl_color_buffer_float&&Vr.push("rgba32f");var $r=["uint8"];qt.oes_texture_half_float&&$r.push("half float","float16"),qt.oes_texture_float&&$r.push("float","float32");function Gr(Ze,Je,Qe){this.target=Ze,this.texture=Je,this.renderbuffer=Qe;var jr=0,hn=0;Je?(jr=Je.width,hn=Je.height):Qe&&(jr=Qe.width,hn=Qe.height),this.width=jr,this.height=hn}function nn(Ze){Ze&&(Ze.texture&&Ze.texture._texture.decRef(),Ze.renderbuffer&&Ze.renderbuffer._renderbuffer.decRef())}function v(Ze,Je,Qe){if(Ze)if(Ze.texture){var jr=Ze.texture._texture,hn=Math.max(1,jr.width),tn=Math.max(1,jr.height);Ct(hn===Je&&tn===Qe,"inconsistent width/height for supplied texture"),jr.refCount+=1}else{var kn=Ze.renderbuffer._renderbuffer;Ct(kn.width===Je&&kn.height===Qe,"inconsistent width/height for renderbuffer"),kn.refCount+=1}}function _(Ze,Je){Je&&(Je.texture?mt.framebufferTexture2D(bi,Ze,Je.target,Je.texture._texture.texture,0):mt.framebufferRenderbuffer(bi,Ze,Yu,Je.renderbuffer._renderbuffer.renderbuffer))}function F(Ze){var Je=xs,Qe=null,jr=null,hn=Ze;typeof Ze=="object"&&(hn=Ze.data,"target"in Ze&&(Je=Ze.target|0)),Ct.type(hn,"function","invalid attachment data");var tn=hn._reglType;return tn==="texture2d"?(Qe=hn,Ct(Je===xs)):tn==="textureCube"?(Qe=hn,Ct(Je>=tt&&Je<tt+6,"invalid cube map target")):tn==="renderbuffer"?(jr=hn,Je=Yu):Ct.raise("invalid regl object for attachment"),new Gr(Je,Qe,jr)}function Z(Ze,Je,Qe,jr,hn){if(Qe){var tn=fr.create2D({width:Ze,height:Je,format:jr,type:hn});return tn._texture.refCount=0,new Gr(xs,tn,null)}else{var kn=Lr.create({width:Ze,height:Je,format:jr});return kn._renderbuffer.refCount=0,new Gr(Yu,null,kn)}}function ot(Ze){return Ze&&(Ze.texture||Ze.renderbuffer)}function ct(Ze,Je,Qe){Ze&&(Ze.texture?Ze.texture.resize(Je,Qe):Ze.renderbuffer&&Ze.renderbuffer.resize(Je,Qe),Ze.width=Je,Ze.height=Qe)}var gt=0,bt={};function Mt(){this.id=gt++,bt[this.id]=this,this.framebuffer=mt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Gt(Ze){Ze.colorAttachments.forEach(nn),nn(Ze.depthAttachment),nn(Ze.stencilAttachment),nn(Ze.depthStencilAttachment)}function te(Ze){var Je=Ze.framebuffer;Ct(Je,"must not double destroy framebuffer"),mt.deleteFramebuffer(Je),Ze.framebuffer=null,cr.framebufferCount--,delete bt[Ze.id]}function Zt(Ze){var Je;mt.bindFramebuffer(bi,Ze.framebuffer);var Qe=Ze.colorAttachments;for(Je=0;Je<Qe.length;++Je)_(pt+Je,Qe[Je]);for(Je=Qe.length;Je<Ee.maxColorAttachments;++Je)mt.framebufferTexture2D(bi,pt+Je,xs,null,0);mt.framebufferTexture2D(bi,ne,xs,null,0),mt.framebufferTexture2D(bi,St,xs,null,0),mt.framebufferTexture2D(bi,Ut,xs,null,0),_(St,Ze.depthAttachment),_(Ut,Ze.stencilAttachment),_(ne,Ze.depthStencilAttachment);var jr=mt.checkFramebufferStatus(bi);!mt.isContextLost()&&jr!==Be&&Ct.raise("framebuffer configuration not supported, status = "+bs[jr]),mt.bindFramebuffer(bi,lr.next?lr.next.framebuffer:null),lr.cur=lr.next,mt.getError()}function ye(Ze,Je){var Qe=new Mt;cr.framebufferCount++;function jr(tn,kn){var In;Ct(lr.next!==Qe,"can not update framebuffer which is currently in use");var Kn=0,ca=0,ea=!0,mi=!0,va=null,Si=!0,di="rgba",Pa="uint8",Mi=1,Fi=null,yo=null,Ao=null,Qi=!1;if(typeof tn=="number")Kn=tn|0,ca=kn|0||Kn;else if(!tn)Kn=ca=1;else{Ct.type(tn,"object","invalid arguments for framebuffer");var _a=tn;if("shape"in _a){var Ko=_a.shape;Ct(Array.isArray(Ko)&&Ko.length>=2,"invalid shape for framebuffer"),Kn=Ko[0],ca=Ko[1]}else"radius"in _a&&(Kn=ca=_a.radius),"width"in _a&&(Kn=_a.width),"height"in _a&&(ca=_a.height);("color"in _a||"colors"in _a)&&(va=_a.color||_a.colors,Array.isArray(va)&&Ct(va.length===1||qt.webgl_draw_buffers,"multiple render targets not supported")),va||("colorCount"in _a&&(Mi=_a.colorCount|0,Ct(Mi>0,"invalid color buffer count")),"colorTexture"in _a&&(Si=!!_a.colorTexture,di="rgba4"),"colorType"in _a&&(Pa=_a.colorType,Si?(Ct(qt.oes_texture_float||!(Pa==="float"||Pa==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Ct(qt.oes_texture_half_float||!(Pa==="half float"||Pa==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Pa==="half float"||Pa==="float16"?(Ct(qt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),di="rgba16f"):(Pa==="float"||Pa==="float32")&&(Ct(qt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),di="rgba32f"),Ct.oneOf(Pa,$r,"invalid color type")),"colorFormat"in _a&&(di=_a.colorFormat,Yr.indexOf(di)>=0?Si=!0:Vr.indexOf(di)>=0?Si=!1:Si?Ct.oneOf(_a.colorFormat,Yr,"invalid color format for texture"):Ct.oneOf(_a.colorFormat,Vr,"invalid color format for renderbuffer"))),("depthTexture"in _a||"depthStencilTexture"in _a)&&(Qi=!!(_a.depthTexture||_a.depthStencilTexture),Ct(!Qi||qt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in _a&&(typeof _a.depth=="boolean"?ea=_a.depth:(Fi=_a.depth,mi=!1)),"stencil"in _a&&(typeof _a.stencil=="boolean"?mi=_a.stencil:(yo=_a.stencil,ea=!1)),"depthStencil"in _a&&(typeof _a.depthStencil=="boolean"?ea=mi=_a.depthStencil:(Ao=_a.depthStencil,ea=!1,mi=!1))}var ni=null,$n=null,ka=null,Ha=null;if(Array.isArray(va))ni=va.map(F);else if(va)ni=[F(va)];else for(ni=new Array(Mi),In=0;In<Mi;++In)ni[In]=Z(Kn,ca,Si,di,Pa);Ct(qt.webgl_draw_buffers||ni.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Ct(ni.length<=Ee.maxColorAttachments,"too many color attachments, not supported"),Kn=Kn||ni[0].width,ca=ca||ni[0].height,Fi?$n=F(Fi):ea&&!mi&&($n=Z(Kn,ca,Qi,"depth","uint32")),yo?ka=F(yo):mi&&!ea&&(ka=Z(Kn,ca,!1,"stencil","uint8")),Ao?Ha=F(Ao):!Fi&&!yo&&mi&&ea&&(Ha=Z(Kn,ca,Qi,"depth stencil","depth stencil")),Ct(!!Fi+!!yo+!!Ao<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var io=null;for(In=0;In<ni.length;++In)if(v(ni[In],Kn,ca),Ct(!ni[In]||ni[In].texture&&na.indexOf(ni[In].texture._texture.format)>=0||ni[In].renderbuffer&&Ei.indexOf(ni[In].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+In+" is invalid"),ni[In]&&ni[In].texture){var Pu=Da[ni[In].texture._texture.format]*Fn[ni[In].texture._texture.type];io===null?io=Pu:Ct(io===Pu,"all color attachments much have the same number of bits per pixel.")}return v($n,Kn,ca),Ct(!$n||$n.texture&&$n.texture._texture.format===ya||$n.renderbuffer&&$n.renderbuffer._renderbuffer.format===Ma,"invalid depth attachment for framebuffer object"),v(ka,Kn,ca),Ct(!ka||ka.renderbuffer&&ka.renderbuffer._renderbuffer.format===qa,"invalid stencil attachment for framebuffer object"),v(Ha,Kn,ca),Ct(!Ha||Ha.texture&&Ha.texture._texture.format===ri||Ha.renderbuffer&&Ha.renderbuffer._renderbuffer.format===ri,"invalid depth-stencil attachment for framebuffer object"),Gt(Qe),Qe.width=Kn,Qe.height=ca,Qe.colorAttachments=ni,Qe.depthAttachment=$n,Qe.stencilAttachment=ka,Qe.depthStencilAttachment=Ha,jr.color=ni.map(ot),jr.depth=ot($n),jr.stencil=ot(ka),jr.depthStencil=ot(Ha),jr.width=Qe.width,jr.height=Qe.height,Zt(Qe),jr}function hn(tn,kn){Ct(lr.next!==Qe,"can not resize a framebuffer which is currently in use");var In=Math.max(tn|0,1),Kn=Math.max(kn|0||In,1);if(In===Qe.width&&Kn===Qe.height)return jr;for(var ca=Qe.colorAttachments,ea=0;ea<ca.length;++ea)ct(ca[ea],In,Kn);return ct(Qe.depthAttachment,In,Kn),ct(Qe.stencilAttachment,In,Kn),ct(Qe.depthStencilAttachment,In,Kn),Qe.width=jr.width=In,Qe.height=jr.height=Kn,Zt(Qe),jr}return jr(Ze,Je),z(jr,{resize:hn,_reglType:"framebuffer",_framebuffer:Qe,destroy:function(){te(Qe),Gt(Qe)},use:function(tn){lr.setFBO({framebuffer:jr},tn)}})}function We(Ze){var Je=Array(6);function Qe(hn){var tn;Ct(Je.indexOf(lr.next)<0,"can not update framebuffer which is currently in use");var kn={color:null},In=0,Kn=null,ca="rgba",ea="uint8",mi=1;if(typeof hn=="number")In=hn|0;else if(!hn)In=1;else{Ct.type(hn,"object","invalid arguments for framebuffer");var va=hn;if("shape"in va){var Si=va.shape;Ct(Array.isArray(Si)&&Si.length>=2,"invalid shape for framebuffer"),Ct(Si[0]===Si[1],"cube framebuffer must be square"),In=Si[0]}else"radius"in va&&(In=va.radius|0),"width"in va?(In=va.width|0,"height"in va&&Ct(va.height===In,"must be square")):"height"in va&&(In=va.height|0);("color"in va||"colors"in va)&&(Kn=va.color||va.colors,Array.isArray(Kn)&&Ct(Kn.length===1||qt.webgl_draw_buffers,"multiple render targets not supported")),Kn||("colorCount"in va&&(mi=va.colorCount|0,Ct(mi>0,"invalid color buffer count")),"colorType"in va&&(Ct.oneOf(va.colorType,$r,"invalid color type"),ea=va.colorType),"colorFormat"in va&&(ca=va.colorFormat,Ct.oneOf(va.colorFormat,Yr,"invalid color format for texture"))),"depth"in va&&(kn.depth=va.depth),"stencil"in va&&(kn.stencil=va.stencil),"depthStencil"in va&&(kn.depthStencil=va.depthStencil)}var di;if(Kn)if(Array.isArray(Kn))for(di=[],tn=0;tn<Kn.length;++tn)di[tn]=Kn[tn];else di=[Kn];else{di=Array(mi);var Pa={radius:In,format:ca,type:ea};for(tn=0;tn<mi;++tn)di[tn]=fr.createCube(Pa)}for(kn.color=Array(di.length),tn=0;tn<di.length;++tn){var Mi=di[tn];Ct(typeof Mi=="function"&&Mi._reglType==="textureCube","invalid cube map"),In=In||Mi.width,Ct(Mi.width===In&&Mi.height===In,"invalid cube map shape"),kn.color[tn]={target:tt,data:di[tn]}}for(tn=0;tn<6;++tn){for(var Fi=0;Fi<di.length;++Fi)kn.color[Fi].target=tt+tn;tn>0&&(kn.depth=Je[0].depth,kn.stencil=Je[0].stencil,kn.depthStencil=Je[0].depthStencil),Je[tn]?Je[tn](kn):Je[tn]=ye(kn)}return z(Qe,{width:In,height:In,color:di})}function jr(hn){var tn,kn=hn|0;if(Ct(kn>0&&kn<=Ee.maxCubeMapSize,"invalid radius for cube fbo"),kn===Qe.width)return Qe;var In=Qe.color;for(tn=0;tn<In.length;++tn)In[tn].resize(kn);for(tn=0;tn<6;++tn)Je[tn].resize(kn);return Qe.width=Qe.height=kn,Qe}return Qe(Ze),z(Qe,{faces:Je,resize:jr,_reglType:"framebufferCube",destroy:function(){Je.forEach(function(hn){hn.destroy()})}})}function wr(){lr.cur=null,lr.next=null,lr.dirty=!0,xi(bt).forEach(function(Ze){Ze.framebuffer=mt.createFramebuffer(),Zt(Ze)})}return z(lr,{getFramebuffer:function(Ze){if(typeof Ze=="function"&&Ze._reglType==="framebuffer"){var Je=Ze._framebuffer;if(Je instanceof Mt)return Je}return null},create:ye,createCube:We,clear:function(){xi(bt).forEach(te)},restore:wr})}var tu=5126,Ws=34962;function hu(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=tu,this.offset=0,this.stride=0,this.divisor=0}function ff(mt,qt,Ee,fr,Lr){for(var cr=Ee.maxAttributes,lr=new Array(cr),Yr=0;Yr<cr;++Yr)lr[Yr]=new hu;var Vr=0,$r={},Gr={Record:hu,scope:{},state:lr,currentVAO:null,targetVAO:null,restore:v()?bt:function(){},createVAO:Mt,getVAO:F,destroyBuffer:nn,setVAO:v()?Z:ot,clear:v()?ct:function(){}};function nn(Gt){for(var te=0;te<lr.length;++te){var Zt=lr[te];Zt.buffer===Gt&&(mt.disableVertexAttribArray(te),Zt.buffer=null)}}function v(){return qt.oes_vertex_array_object}function _(){return qt.angle_instanced_arrays}function F(Gt){return typeof Gt=="function"&&Gt._vao?Gt._vao:null}function Z(Gt){if(Gt!==Gr.currentVAO){var te=v();Gt?te.bindVertexArrayOES(Gt.vao):te.bindVertexArrayOES(null),Gr.currentVAO=Gt}}function ot(Gt){if(Gt!==Gr.currentVAO){if(Gt)Gt.bindAttrs();else for(var te=_(),Zt=0;Zt<lr.length;++Zt){var ye=lr[Zt];ye.buffer?(mt.enableVertexAttribArray(Zt),mt.vertexAttribPointer(Zt,ye.size,ye.type,ye.normalized,ye.stride,ye.offfset),te&&ye.divisor&&te.vertexAttribDivisorANGLE(Zt,ye.divisor)):(mt.disableVertexAttribArray(Zt),mt.vertexAttrib4f(Zt,ye.x,ye.y,ye.z,ye.w))}Gr.currentVAO=Gt}}function ct(){xi($r).forEach(function(Gt){Gt.destroy()})}function gt(){this.id=++Vr,this.attributes=[];var Gt=v();Gt?this.vao=Gt.createVertexArrayOES():this.vao=null,$r[this.id]=this,this.buffers=[]}gt.prototype.bindAttrs=function(){for(var Gt=_(),te=this.attributes,Zt=0;Zt<te.length;++Zt){var ye=te[Zt];ye.buffer?(mt.enableVertexAttribArray(Zt),mt.bindBuffer(Ws,ye.buffer.buffer),mt.vertexAttribPointer(Zt,ye.size,ye.type,ye.normalized,ye.stride,ye.offset),Gt&&ye.divisor&&Gt.vertexAttribDivisorANGLE(Zt,ye.divisor)):(mt.disableVertexAttribArray(Zt),mt.vertexAttrib4f(Zt,ye.x,ye.y,ye.z,ye.w))}for(var We=te.length;We<cr;++We)mt.disableVertexAttribArray(We)},gt.prototype.refresh=function(){var Gt=v();Gt&&(Gt.bindVertexArrayOES(this.vao),this.bindAttrs(),Gr.currentVAO=this)},gt.prototype.destroy=function(){if(this.vao){var Gt=v();this===Gr.currentVAO&&(Gr.currentVAO=null,Gt.bindVertexArrayOES(null)),Gt.deleteVertexArrayOES(this.vao),this.vao=null}$r[this.id]&&(delete $r[this.id],fr.vaoCount-=1)};function bt(){var Gt=v();Gt&&xi($r).forEach(function(te){te.refresh()})}function Mt(Gt){var te=new gt;fr.vaoCount+=1;function Zt(ye){Ct(Array.isArray(ye),"arguments to vertex array constructor must be an array"),Ct(ye.length<cr,"too many attributes"),Ct(ye.length>0,"must specify at least one attribute");var We={},wr=te.attributes;wr.length=ye.length;for(var Ze=0;Ze<ye.length;++Ze){var Je=ye[Ze],Qe=wr[Ze]=new hu,jr=Je.data||Je;if(Array.isArray(jr)||R(jr)||La(jr)){var hn;te.buffers[Ze]&&(hn=te.buffers[Ze],R(jr)&&hn._buffer.byteLength>=jr.byteLength?hn.subdata(jr):(hn.destroy(),te.buffers[Ze]=null)),te.buffers[Ze]||(hn=te.buffers[Ze]=Lr.create(Je,Ws,!1,!0)),Qe.buffer=Lr.getBuffer(hn),Qe.size=Qe.buffer.dimension|0,Qe.normalized=!1,Qe.type=Qe.buffer.dtype,Qe.offset=0,Qe.stride=0,Qe.divisor=0,Qe.state=1,We[Ze]=1}else Lr.getBuffer(Je)?(Qe.buffer=Lr.getBuffer(Je),Qe.size=Qe.buffer.dimension|0,Qe.normalized=!1,Qe.type=Qe.buffer.dtype,Qe.offset=0,Qe.stride=0,Qe.divisor=0,Qe.state=1):Lr.getBuffer(Je.buffer)?(Qe.buffer=Lr.getBuffer(Je.buffer),Qe.size=(+Je.size||Qe.buffer.dimension)|0,Qe.normalized=!!Je.normalized||!1,"type"in Je?(Ct.parameter(Je.type,Oo,"invalid buffer type"),Qe.type=Oo[Je.type]):Qe.type=Qe.buffer.dtype,Qe.offset=(Je.offset||0)|0,Qe.stride=(Je.stride||0)|0,Qe.divisor=(Je.divisor||0)|0,Qe.state=1,Ct(Qe.size>=1&&Qe.size<=4,"size must be between 1 and 4"),Ct(Qe.offset>=0,"invalid offset"),Ct(Qe.stride>=0&&Qe.stride<=255,"stride must be between 0 and 255"),Ct(Qe.divisor>=0,"divisor must be positive"),Ct(!Qe.divisor||!!qt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Je?(Ct(Ze>0,"first attribute must not be a constant"),Qe.x=+Je.x||0,Qe.y=+Je.y||0,Qe.z=+Je.z||0,Qe.w=+Je.w||0,Qe.state=2):Ct(!1,"invalid attribute spec for location "+Ze)}for(var tn=0;tn<te.buffers.length;++tn)!We[tn]&&te.buffers[tn]&&(te.buffers[tn].destroy(),te.buffers[tn]=null);return te.refresh(),Zt}return Zt.destroy=function(){for(var ye=0;ye<te.buffers.length;++ye)te.buffers[ye]&&te.buffers[ye].destroy();te.buffers.length=0,te.destroy()},Zt._vao=te,Zt._reglType="vao",Zt(Gt)}return Gr}var vu=35632,el=35633,Mc=35718,Vu=35721;function cf(mt,qt,Ee,fr){var Lr={},cr={};function lr(Z,ot,ct,gt){this.name=Z,this.id=ot,this.location=ct,this.info=gt}function Yr(Z,ot){for(var ct=0;ct<Z.length;++ct)if(Z[ct].id===ot.id){Z[ct].location=ot.location;return}Z.push(ot)}function Vr(Z,ot,ct){var gt=Z===vu?Lr:cr,bt=gt[ot];if(!bt){var Mt=qt.str(ot);bt=mt.createShader(Z),mt.shaderSource(bt,Mt),mt.compileShader(bt),Ct.shaderError(mt,bt,Mt,Z,ct),gt[ot]=bt}return bt}var $r={},Gr=[],nn=0;function v(Z,ot){this.id=nn++,this.fragId=Z,this.vertId=ot,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,fr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function _(Z,ot,ct){var gt,bt,Mt=Vr(vu,Z.fragId),Gt=Vr(el,Z.vertId),te=Z.program=mt.createProgram();if(mt.attachShader(te,Mt),mt.attachShader(te,Gt),ct)for(gt=0;gt<ct.length;++gt){var Zt=ct[gt];mt.bindAttribLocation(te,Zt[0],Zt[1])}mt.linkProgram(te),Ct.linkError(mt,te,qt.str(Z.fragId),qt.str(Z.vertId),ot);var ye=mt.getProgramParameter(te,Mc);fr.profile&&(Z.stats.uniformsCount=ye);var We=Z.uniforms;for(gt=0;gt<ye;++gt)if(bt=mt.getActiveUniform(te,gt),bt)if(bt.size>1)for(var wr=0;wr<bt.size;++wr){var Ze=bt.name.replace("[0]","["+wr+"]");Yr(We,new lr(Ze,qt.id(Ze),mt.getUniformLocation(te,Ze),bt))}else Yr(We,new lr(bt.name,qt.id(bt.name),mt.getUniformLocation(te,bt.name),bt));var Je=mt.getProgramParameter(te,Vu);fr.profile&&(Z.stats.attributesCount=Je);var Qe=Z.attributes;for(gt=0;gt<Je;++gt)bt=mt.getActiveAttrib(te,gt),bt&&Yr(Qe,new lr(bt.name,qt.id(bt.name),mt.getAttribLocation(te,bt.name),bt))}fr.profile&&(Ee.getMaxUniformsCount=function(){var Z=0;return Gr.forEach(function(ot){ot.stats.uniformsCount>Z&&(Z=ot.stats.uniformsCount)}),Z},Ee.getMaxAttributesCount=function(){var Z=0;return Gr.forEach(function(ot){ot.stats.attributesCount>Z&&(Z=ot.stats.attributesCount)}),Z});function F(){Lr={},cr={};for(var Z=0;Z<Gr.length;++Z)_(Gr[Z],null,Gr[Z].attributes.map(function(ot){return[ot.location,ot.name]}))}return{clear:function(){var Z=mt.deleteShader.bind(mt);xi(Lr).forEach(Z),Lr={},xi(cr).forEach(Z),cr={},Gr.forEach(function(ot){mt.deleteProgram(ot.program)}),Gr.length=0,$r={},Ee.shaderCount=0},program:function(Z,ot,ct,gt){Ct.command(Z>=0,"missing vertex shader",ct),Ct.command(ot>=0,"missing fragment shader",ct);var bt=$r[ot];bt||(bt=$r[ot]={});var Mt=bt[Z];if(Mt&&(Mt.refCount++,!gt))return Mt;var Gt=new v(ot,Z);return Ee.shaderCount++,_(Gt,ct,gt),Mt||(bt[Z]=Gt),Gr.push(Gt),z(Gt,{destroy:function(){if(Gt.refCount--,Gt.refCount<=0){mt.deleteProgram(Gt.program);var te=Gr.indexOf(Gt);Gr.splice(te,1),Ee.shaderCount--}bt[Gt.vertId].refCount<=0&&(mt.deleteShader(cr[Gt.vertId]),delete cr[Gt.vertId],delete $r[Gt.fragId][Gt.vertId]),Object.keys($r[Gt.fragId]).length||(mt.deleteShader(Lr[Gt.fragId]),delete Lr[Gt.fragId],delete $r[Gt.fragId])}})},restore:F,shader:Vr,frag:-1,vert:-1}}var lf=6408,Es=5121,eu=3333,Xs=5126;function ju(mt,qt,Ee,fr,Lr,cr,lr){function Yr(Gr){var nn;qt.next===null?(Ct(Lr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),nn=Es):(Ct(qt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),nn=qt.next.colorAttachments[0].texture._texture.type,cr.oes_texture_float?(Ct(nn===Es||nn===Xs,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),nn===Xs&&Ct(lr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Ct(nn===Es,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,_=0,F=fr.framebufferWidth,Z=fr.framebufferHeight,ot=null;R(Gr)?ot=Gr:Gr&&(Ct.type(Gr,"object","invalid arguments to regl.read()"),v=Gr.x|0,_=Gr.y|0,Ct(v>=0&&v<fr.framebufferWidth,"invalid x offset for regl.read"),Ct(_>=0&&_<fr.framebufferHeight,"invalid y offset for regl.read"),F=(Gr.width||fr.framebufferWidth-v)|0,Z=(Gr.height||fr.framebufferHeight-_)|0,ot=Gr.data||null),ot&&(nn===Es?Ct(ot instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):nn===Xs&&Ct(ot instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Ct(F>0&&F+v<=fr.framebufferWidth,"invalid width for read pixels"),Ct(Z>0&&Z+_<=fr.framebufferHeight,"invalid height for read pixels"),Ee();var ct=F*Z*4;return ot||(nn===Es?ot=new Uint8Array(ct):nn===Xs&&(ot=ot||new Float32Array(ct))),Ct.isTypedArray(ot,"data buffer for regl.read() must be a typedarray"),Ct(ot.byteLength>=ct,"data buffer for regl.read() too small"),mt.pixelStorei(eu,4),mt.readPixels(v,_,F,Z,lf,nn,ot),ot}function Vr(Gr){var nn;return qt.setFBO({framebuffer:Gr.framebuffer},function(){nn=Yr(Gr)}),nn}function $r(Gr){return!Gr||!("framebuffer"in Gr)?Yr(Gr):Vr(Gr)}return $r}function go(mt){return Array.prototype.slice.call(mt)}function Ls(mt){return go(mt).join("")}function Ys(){var mt=0,qt=[],Ee=[];function fr(nn){for(var v=0;v<Ee.length;++v)if(Ee[v]===nn)return qt[v];var _="g"+mt++;return qt.push(_),Ee.push(nn),_}function Lr(){var nn=[];function v(){nn.push.apply(nn,go(arguments))}var _=[];function F(){var Z="v"+mt++;return _.push(Z),arguments.length>0&&(nn.push(Z,"="),nn.push.apply(nn,go(arguments)),nn.push(";")),Z}return z(v,{def:F,toString:function(){return Ls([_.length>0?"var "+_.join(",")+";":"",Ls(nn)])}})}function cr(){var nn=Lr(),v=Lr(),_=nn.toString,F=v.toString;function Z(ot,ct){v(ot,ct,"=",nn.def(ot,ct),";")}return z(function(){nn.apply(nn,go(arguments))},{def:nn.def,entry:nn,exit:v,save:Z,set:function(ot,ct,gt){Z(ot,ct),nn(ot,ct,"=",gt,";")},toString:function(){return _()+F()}})}function lr(){var nn=Ls(arguments),v=cr(),_=cr(),F=v.toString,Z=_.toString;return z(v,{then:function(){return v.apply(v,go(arguments)),this},else:function(){return _.apply(_,go(arguments)),this},toString:function(){var ot=Z();return ot&&(ot="else{"+ot+"}"),Ls(["if(",nn,"){",F(),"}",ot])}})}var Yr=Lr(),Vr={};function $r(nn,v){var _=[];function F(){var bt="a"+_.length;return _.push(bt),bt}v=v||0;for(var Z=0;Z<v;++Z)F();var ot=cr(),ct=ot.toString,gt=Vr[nn]=z(ot,{arg:F,toString:function(){return Ls(["function(",_.join(),"){",ct(),"}"])}});return gt}function Gr(){var nn=['"use strict";',Yr,"return {"];Object.keys(Vr).forEach(function(F){nn.push('"',F,'":',Vr[F].toString(),",")}),nn.push("}");var v=Ls(nn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),_=Function.apply(null,qt.concat(v));return _.apply(null,Ee)}return{global:Yr,link:fr,block:Lr,proc:$r,scope:cr,cond:lr,compile:Gr}}var hf="xyzw".split(""),Gl=5121,vf=1,rl=2,nl=0,al=1,il=2,Ac=3,Kf=4,zl=5,Ul=6,ol="dither",df="blend.enable",sl="blend.color",gf="blend.equation",ul="blend.func",Zf="depth.enable",es="depth.func",fl="depth.range",$f="depth.mask",Cc="colorMask",Ne="cull.enable",Iu="cull.face",Ds="frontFace",qf="lineWidth",cl="polygonOffset.enable",ll="polygonOffset.offset",Ns="sample.alpha",hl="sample.enable",Ou="sample.coverage",pf="stencil.enable",Tc="stencil.mask",Ic="stencil.func",po="stencil.opFront",Lu="stencil.opBack",Oc="scissor.enable",Qf="scissor.box",du="viewport",yf="profile",Du="framebuffer",gu="vert",Hu="frag",mf="elements",xf="primitive",Nu="count",Jf="offset",Lc="instances",bf="vao",vl="Width",tc="Height",Ef=Du+vl,hs=Du+tc,ec=du+vl,Wl=du+tc,Dc="drawingBuffer",dl=Dc+vl,wf=Dc+tc,Xl=[ul,gf,Ic,po,Lu,Ou,du,Qf,ll],Ku=34962,Yl=34963,gl=35632,ph=35633,Vl=3553,pl=34067,yl=2884,jl=3042,Hl=3024,Kl=2960,ml=2929,xl=3089,Zl=32823,$l=32926,Nc=32928,Ps=5126,Pc=35664,kc=35665,rc=35666,bl=5124,Rc=35667,nc=35668,Zu=35669,El=35670,Bc=35671,Fc=35672,Gc=35673,ac=35674,ic=35675,_f=35676,oc=35678,pu=35680,ql=4,yu=1028,$u=1029,zc=2304,Uc=2305,yh=32775,Ql=32776,Sf=519,ru=7680,Wc=0,Jl=1,wl=32774,mh=513,_l=36160,xh=36064,Ho={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},th=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Mf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},mu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},eh={frag:gl,vert:ph},Sl={cw:zc,ccw:Uc};function Xc(mt){return Array.isArray(mt)||R(mt)||La(mt)}function rh(mt){return mt.sort(function(qt,Ee){return qt===du?-1:Ee===du?1:qt<Ee?-1:1})}function rs(mt,qt,Ee,fr){this.thisDep=mt,this.contextDep=qt,this.propDep=Ee,this.append=fr}function xu(mt){return mt&&!(mt.thisDep||mt.contextDep||mt.propDep)}function qi(mt){return new rs(!1,!1,!1,mt)}function Ro(mt,qt){var Ee=mt.type;if(Ee===nl){var fr=mt.data.length;return new rs(!0,fr>=1,fr>=2,qt)}else if(Ee===Kf){var Lr=mt.data;return new rs(Lr.thisDep,Lr.contextDep,Lr.propDep,qt)}else{if(Ee===zl)return new rs(!1,!1,!1,qt);if(Ee===Ul){for(var cr=!1,lr=!1,Yr=!1,Vr=0;Vr<mt.data.length;++Vr){var $r=mt.data[Vr];if($r.type===al)Yr=!0;else if($r.type===il)lr=!0;else if($r.type===Ac)cr=!0;else if($r.type===nl){cr=!0;var Gr=$r.data;Gr>=1&&(lr=!0),Gr>=2&&(Yr=!0)}else $r.type===Kf&&(cr=cr||$r.data.thisDep,lr=lr||$r.data.contextDep,Yr=Yr||$r.data.propDep)}return new rs(cr,lr,Yr,qt)}else return new rs(Ee===Ac,Ee===il,Ee===al,qt)}}var Ml=new rs(!1,!1,!1,function(){});function nh(mt,qt,Ee,fr,Lr,cr,lr,Yr,Vr,$r,Gr,nn,v,_,F){var Z=$r.Record,ot={add:32774,subtract:32778,"reverse subtract":32779};Ee.ext_blend_minmax&&(ot.min=yh,ot.max=Ql);var ct=Ee.angle_instanced_arrays,gt=Ee.webgl_draw_buffers,bt={dirty:!0,profile:F.profile},Mt={},Gt=[],te={},Zt={};function ye(le){return le.replace(".","_")}function We(le,Ht,ke){var er=ye(le);Gt.push(le),Mt[er]=bt[er]=!!ke,te[er]=Ht}function wr(le,Ht,ke){var er=ye(le);Gt.push(le),Array.isArray(ke)?(bt[er]=ke.slice(),Mt[er]=ke.slice()):bt[er]=Mt[er]=ke,Zt[er]=Ht}We(ol,Hl),We(df,jl),wr(sl,"blendColor",[0,0,0,0]),wr(gf,"blendEquationSeparate",[wl,wl]),wr(ul,"blendFuncSeparate",[Jl,Wc,Jl,Wc]),We(Zf,ml,!0),wr(es,"depthFunc",mh),wr(fl,"depthRange",[0,1]),wr($f,"depthMask",!0),wr(Cc,Cc,[!0,!0,!0,!0]),We(Ne,yl),wr(Iu,"cullFace",$u),wr(Ds,Ds,Uc),wr(qf,qf,1),We(cl,Zl),wr(ll,"polygonOffset",[0,0]),We(Ns,$l),We(hl,Nc),wr(Ou,"sampleCoverage",[1,!1]),We(pf,Kl),wr(Tc,"stencilMask",-1),wr(Ic,"stencilFunc",[Sf,0,-1]),wr(po,"stencilOpSeparate",[yu,ru,ru,ru]),wr(Lu,"stencilOpSeparate",[$u,ru,ru,ru]),We(Oc,xl),wr(Qf,"scissor",[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]),wr(du,du,[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]);var Ze={gl:mt,context:v,strings:qt,next:Mt,current:bt,draw:nn,elements:cr,buffer:Lr,shader:Gr,attributes:$r.state,vao:$r,uniforms:Vr,framebuffer:Yr,extensions:Ee,timer:_,isBufferArgs:Xc},Je={primTypes:Xi,compareFuncs:Mf,blendFuncs:Ho,blendEquations:ot,stencilOps:mu,glTypes:Oo,orientationType:Sl};Ct.optional(function(){Ze.isArrayLike=ci}),gt&&(Je.backBuffer=[$u],Je.drawBuffer=Cn(fr.maxDrawbuffers,function(le){return le===0?[0]:Cn(le,function(Ht){return xh+Ht})}));var Qe=0;function jr(){var le=Ys(),Ht=le.link,ke=le.global;le.id=Qe++,le.batchId="0";var er=Ht(Ze),nr=le.shared={props:"a0"};Object.keys(Ze).forEach(function(Le){nr[Le]=ke.def(er,".",Le)}),Ct.optional(function(){le.CHECK=Ht(Ct),le.commandStr=Ct.guessCommand(),le.command=Ht(le.commandStr),le.assert=function(Le,oe,$e){Le("if(!(",oe,"))",this.CHECK,".commandRaise(",Ht($e),",",this.command,");")},Je.invalidBlendCombinations=th});var Fe=le.next={},Re=le.current={};Object.keys(Zt).forEach(function(Le){Array.isArray(bt[Le])&&(Fe[Le]=ke.def(nr.next,".",Le),Re[Le]=ke.def(nr.current,".",Le))});var Ve=le.constants={};Object.keys(Je).forEach(function(Le){Ve[Le]=ke.def(JSON.stringify(Je[Le]))}),le.invoke=function(Le,oe){switch(oe.type){case nl:var $e=["this",nr.context,nr.props,le.batchId];return Le.def(Ht(oe.data),".call(",$e.slice(0,Math.max(oe.data.length+1,4)),")");case al:return Le.def(nr.props,oe.data);case il:return Le.def(nr.context,oe.data);case Ac:return Le.def("this",oe.data);case Kf:return oe.data.append(le,Le),oe.data.ref;case zl:return oe.data.toString();case Ul:return oe.data.map(function(ir){return le.invoke(Le,ir)})}},le.attribCache={};var ce={};return le.scopeAttrib=function(Le){var oe=qt.id(Le);if(oe in ce)return ce[oe];var $e=$r.scope[oe];$e||($e=$r.scope[oe]=new Z);var ir=ce[oe]=Ht($e);return ir},le}function hn(le){var Ht=le.static,ke=le.dynamic,er;if(yf in Ht){var nr=!!Ht[yf];er=qi(function(Re,Ve){return nr}),er.enable=nr}else if(yf in ke){var Fe=ke[yf];er=Ro(Fe,function(Re,Ve){return Re.invoke(Ve,Fe)})}return er}function tn(le,Ht){var ke=le.static,er=le.dynamic;if(Du in ke){var nr=ke[Du];return nr?(nr=Yr.getFramebuffer(nr),Ct.command(nr,"invalid framebuffer object"),qi(function(Re,Ve){var ce=Re.link(nr),Le=Re.shared;Ve.set(Le.framebuffer,".next",ce);var oe=Le.context;return Ve.set(oe,"."+Ef,ce+".width"),Ve.set(oe,"."+hs,ce+".height"),ce})):qi(function(Re,Ve){var ce=Re.shared;Ve.set(ce.framebuffer,".next","null");var Le=ce.context;return Ve.set(Le,"."+Ef,Le+"."+dl),Ve.set(Le,"."+hs,Le+"."+wf),"null"})}else if(Du in er){var Fe=er[Du];return Ro(Fe,function(Re,Ve){var ce=Re.invoke(Ve,Fe),Le=Re.shared,oe=Le.framebuffer,$e=Ve.def(oe,".getFramebuffer(",ce,")");Ct.optional(function(){Re.assert(Ve,"!"+ce+"||"+$e,"invalid framebuffer object")}),Ve.set(oe,".next",$e);var ir=Le.context;return Ve.set(ir,"."+Ef,$e+"?"+$e+".width:"+ir+"."+dl),Ve.set(ir,"."+hs,$e+"?"+$e+".height:"+ir+"."+wf),$e})}else return null}function kn(le,Ht,ke){var er=le.static,nr=le.dynamic;function Fe(ce){if(ce in er){var Le=er[ce];Ct.commandType(Le,"object","invalid "+ce,ke.commandStr);var oe=!0,$e=Le.x|0,ir=Le.y|0,Ir,kr;return"width"in Le?(Ir=Le.width|0,Ct.command(Ir>=0,"invalid "+ce,ke.commandStr)):oe=!1,"height"in Le?(kr=Le.height|0,Ct.command(kr>=0,"invalid "+ce,ke.commandStr)):oe=!1,new rs(!oe&&Ht&&Ht.thisDep,!oe&&Ht&&Ht.contextDep,!oe&&Ht&&Ht.propDep,function(Xn,Sa){var On=Xn.shared.context,Qn=Ir;"width"in Le||(Qn=Sa.def(On,".",Ef,"-",$e));var ma=kr;return"height"in Le||(ma=Sa.def(On,".",hs,"-",ir)),[$e,ir,Qn,ma]})}else if(ce in nr){var _r=nr[ce],Qr=Ro(_r,function(Xn,Sa){var On=Xn.invoke(Sa,_r);Ct.optional(function(){Xn.assert(Sa,On+"&&typeof "+On+'==="object"',"invalid "+ce)});var Qn=Xn.shared.context,ma=Sa.def(On,".x|0"),Ra=Sa.def(On,".y|0"),Gi=Sa.def('"width" in ',On,"?",On,".width|0:","(",Qn,".",Ef,"-",ma,")"),ws=Sa.def('"height" in ',On,"?",On,".height|0:","(",Qn,".",hs,"-",Ra,")");return Ct.optional(function(){Xn.assert(Sa,Gi+">=0&&"+ws+">=0","invalid "+ce)}),[ma,Ra,Gi,ws]});return Ht&&(Qr.thisDep=Qr.thisDep||Ht.thisDep,Qr.contextDep=Qr.contextDep||Ht.contextDep,Qr.propDep=Qr.propDep||Ht.propDep),Qr}else return Ht?new rs(Ht.thisDep,Ht.contextDep,Ht.propDep,function(Xn,Sa){var On=Xn.shared.context;return[0,0,Sa.def(On,".",Ef),Sa.def(On,".",hs)]}):null}var Re=Fe(du);if(Re){var Ve=Re;Re=new rs(Re.thisDep,Re.contextDep,Re.propDep,function(ce,Le){var oe=Ve.append(ce,Le),$e=ce.shared.context;return Le.set($e,"."+ec,oe[2]),Le.set($e,"."+Wl,oe[3]),oe})}return{viewport:Re,scissor_box:Fe(Qf)}}function In(le,Ht){var ke=le.static,er=typeof ke[Hu]=="string"&&typeof ke[gu]=="string";if(er){if(Object.keys(Ht.dynamic).length>0)return null;var nr=Ht.static,Fe=Object.keys(nr);if(Fe.length>0&&typeof nr[Fe[0]]=="number"){for(var Re=[],Ve=0;Ve<Fe.length;++Ve)Ct(typeof nr[Fe[Ve]]=="number","must specify all vertex attribute locations when using vaos"),Re.push([nr[Fe[Ve]]|0,Fe[Ve]]);return Re}}return null}function Kn(le,Ht,ke){var er=le.static,nr=le.dynamic;function Fe(oe){if(oe in er){var $e=qt.id(er[oe]);Ct.optional(function(){Gr.shader(eh[oe],$e,Ct.guessCommand())});var ir=qi(function(){return $e});return ir.id=$e,ir}else if(oe in nr){var Ir=nr[oe];return Ro(Ir,function(kr,_r){var Qr=kr.invoke(_r,Ir),Xn=_r.def(kr.shared.strings,".id(",Qr,")");return Ct.optional(function(){_r(kr.shared.shader,".shader(",eh[oe],",",Xn,",",kr.command,");")}),Xn})}return null}var Re=Fe(Hu),Ve=Fe(gu),ce=null,Le;return xu(Re)&&xu(Ve)?(ce=Gr.program(Ve.id,Re.id,null,ke),Le=qi(function(oe,$e){return oe.link(ce)})):Le=new rs(Re&&Re.thisDep||Ve&&Ve.thisDep,Re&&Re.contextDep||Ve&&Ve.contextDep,Re&&Re.propDep||Ve&&Ve.propDep,function(oe,$e){var ir=oe.shared.shader,Ir;Re?Ir=Re.append(oe,$e):Ir=$e.def(ir,".",Hu);var kr;Ve?kr=Ve.append(oe,$e):kr=$e.def(ir,".",gu);var _r=ir+".program("+kr+","+Ir;return Ct.optional(function(){_r+=","+oe.command}),$e.def(_r+")")}),{frag:Re,vert:Ve,progVar:Le,program:ce}}function ca(le,Ht){var ke=le.static,er=le.dynamic;function nr(){if(mf in ke){var oe=ke[mf];Xc(oe)?oe=cr.getElements(cr.create(oe,!0)):oe&&(oe=cr.getElements(oe),Ct.command(oe,"invalid elements",Ht.commandStr));var $e=qi(function(Ir,kr){if(oe){var _r=Ir.link(oe);return Ir.ELEMENTS=_r,_r}return Ir.ELEMENTS=null,null});return $e.value=oe,$e}else if(mf in er){var ir=er[mf];return Ro(ir,function(Ir,kr){var _r=Ir.shared,Qr=_r.isBufferArgs,Xn=_r.elements,Sa=Ir.invoke(kr,ir),On=kr.def("null"),Qn=kr.def(Qr,"(",Sa,")"),ma=Ir.cond(Qn).then(On,"=",Xn,".createStream(",Sa,");").else(On,"=",Xn,".getElements(",Sa,");");return Ct.optional(function(){Ir.assert(ma.else,"!"+Sa+"||"+On,"invalid elements")}),kr.entry(ma),kr.exit(Ir.cond(Qn).then(Xn,".destroyStream(",On,");")),Ir.ELEMENTS=On,On})}return null}var Fe=nr();function Re(){if(xf in ke){var oe=ke[xf];return Ct.commandParameter(oe,Xi,"invalid primitve",Ht.commandStr),qi(function(ir,Ir){return Xi[oe]})}else if(xf in er){var $e=er[xf];return Ro($e,function(ir,Ir){var kr=ir.constants.primTypes,_r=ir.invoke(Ir,$e);return Ct.optional(function(){ir.assert(Ir,_r+" in "+kr,"invalid primitive, must be one of "+Object.keys(Xi))}),Ir.def(kr,"[",_r,"]")})}else if(Fe)return xu(Fe)?Fe.value?qi(function(ir,Ir){return Ir.def(ir.ELEMENTS,".primType")}):qi(function(){return ql}):new rs(Fe.thisDep,Fe.contextDep,Fe.propDep,function(ir,Ir){var kr=ir.ELEMENTS;return Ir.def(kr,"?",kr,".primType:",ql)});return null}function Ve(oe,$e){if(oe in ke){var ir=ke[oe]|0;return Ct.command(!$e||ir>=0,"invalid "+oe,Ht.commandStr),qi(function(kr,_r){return $e&&(kr.OFFSET=ir),ir})}else if(oe in er){var Ir=er[oe];return Ro(Ir,function(kr,_r){var Qr=kr.invoke(_r,Ir);return $e&&(kr.OFFSET=Qr,Ct.optional(function(){kr.assert(_r,Qr+">=0","invalid "+oe)})),Qr})}else if($e&&Fe)return qi(function(kr,_r){return kr.OFFSET="0",0});return null}var ce=Ve(Jf,!0);function Le(){if(Nu in ke){var oe=ke[Nu]|0;return Ct.command(typeof oe=="number"&&oe>=0,"invalid vertex count",Ht.commandStr),qi(function(){return oe})}else if(Nu in er){var $e=er[Nu];return Ro($e,function(kr,_r){var Qr=kr.invoke(_r,$e);return Ct.optional(function(){kr.assert(_r,"typeof "+Qr+'==="number"&&'+Qr+">=0&&"+Qr+"===("+Qr+"|0)","invalid vertex count")}),Qr})}else if(Fe)if(xu(Fe)){if(Fe)return ce?new rs(ce.thisDep,ce.contextDep,ce.propDep,function(kr,_r){var Qr=_r.def(kr.ELEMENTS,".vertCount-",kr.OFFSET);return Ct.optional(function(){kr.assert(_r,Qr+">=0","invalid vertex offset/element buffer too small")}),Qr}):qi(function(kr,_r){return _r.def(kr.ELEMENTS,".vertCount")});var ir=qi(function(){return-1});return Ct.optional(function(){ir.MISSING=!0}),ir}else{var Ir=new rs(Fe.thisDep||ce.thisDep,Fe.contextDep||ce.contextDep,Fe.propDep||ce.propDep,function(kr,_r){var Qr=kr.ELEMENTS;return kr.OFFSET?_r.def(Qr,"?",Qr,".vertCount-",kr.OFFSET,":-1"):_r.def(Qr,"?",Qr,".vertCount:-1")});return Ct.optional(function(){Ir.DYNAMIC=!0}),Ir}return null}return{elements:Fe,primitive:Re(),count:Le(),instances:Ve(Lc,!1),offset:ce}}function ea(le,Ht){var ke=le.static,er=le.dynamic,nr={};return Gt.forEach(function(Fe){var Re=ye(Fe);function Ve(ce,Le){if(Fe in ke){var oe=ce(ke[Fe]);nr[Re]=qi(function(){return oe})}else if(Fe in er){var $e=er[Fe];nr[Re]=Ro($e,function(ir,Ir){return Le(ir,Ir,ir.invoke(Ir,$e))})}}switch(Fe){case Ne:case df:case ol:case pf:case Zf:case Oc:case cl:case Ns:case hl:case $f:return Ve(function(ce){return Ct.commandType(ce,"boolean",Fe,Ht.commandStr),ce},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,"typeof "+oe+'==="boolean"',"invalid flag "+Fe,ce.commandStr)}),oe});case es:return Ve(function(ce){return Ct.commandParameter(ce,Mf,"invalid "+Fe,Ht.commandStr),Mf[ce]},function(ce,Le,oe){var $e=ce.constants.compareFuncs;return Ct.optional(function(){ce.assert(Le,oe+" in "+$e,"invalid "+Fe+", must be one of "+Object.keys(Mf))}),Le.def($e,"[",oe,"]")});case fl:return Ve(function(ce){return Ct.command(ci(ce)&&ce.length===2&&typeof ce[0]=="number"&&typeof ce[1]=="number"&&ce[0]<=ce[1],"depth range is 2d array",Ht.commandStr),ce},function(ce,Le,oe){Ct.optional(function(){ce.assert(Le,ce.shared.isArrayLike+"("+oe+")&&"+oe+".length===2&&typeof "+oe+'[0]==="number"&&typeof '+oe+'[1]==="number"&&'+oe+"[0]<="+oe+"[1]","depth range must be a 2d array")});var $e=Le.def("+",oe,"[0]"),ir=Le.def("+",oe,"[1]");return[$e,ir]});case ul:return Ve(function(ce){Ct.commandType(ce,"object","blend.func",Ht.commandStr);var Le="srcRGB"in ce?ce.srcRGB:ce.src,oe="srcAlpha"in ce?ce.srcAlpha:ce.src,$e="dstRGB"in ce?ce.dstRGB:ce.dst,ir="dstAlpha"in ce?ce.dstAlpha:ce.dst;return Ct.commandParameter(Le,Ho,Re+".srcRGB",Ht.commandStr),Ct.commandParameter(oe,Ho,Re+".srcAlpha",Ht.commandStr),Ct.commandParameter($e,Ho,Re+".dstRGB",Ht.commandStr),Ct.commandParameter(ir,Ho,Re+".dstAlpha",Ht.commandStr),Ct.command(th.indexOf(Le+", "+$e)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Le+", "+$e+")",Ht.commandStr),[Ho[Le],Ho[$e],Ho[oe],Ho[ir]]},function(ce,Le,oe){var $e=ce.constants.blendFuncs;Ct.optional(function(){ce.assert(Le,oe+"&&typeof "+oe+'==="object"',"invalid blend func, must be an object")});function ir(On,Qn){var ma=Le.def('"',On,Qn,'" in ',oe,"?",oe,".",On,Qn,":",oe,".",On);return Ct.optional(function(){ce.assert(Le,ma+" in "+$e,"invalid "+Fe+"."+On+Qn+", must be one of "+Object.keys(Ho))}),ma}var Ir=ir("src","RGB"),kr=ir("dst","RGB");Ct.optional(function(){var On=ce.constants.invalidBlendCombinations;ce.assert(Le,On+".indexOf("+Ir+'+", "+'+kr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var _r=Le.def($e,"[",Ir,"]"),Qr=Le.def($e,"[",ir("src","Alpha"),"]"),Xn=Le.def($e,"[",kr,"]"),Sa=Le.def($e,"[",ir("dst","Alpha"),"]");return[_r,Xn,Qr,Sa]});case gf:return Ve(function(ce){if(typeof ce=="string")return Ct.commandParameter(ce,ot,"invalid "+Fe,Ht.commandStr),[ot[ce],ot[ce]];if(typeof ce=="object")return Ct.commandParameter(ce.rgb,ot,Fe+".rgb",Ht.commandStr),Ct.commandParameter(ce.alpha,ot,Fe+".alpha",Ht.commandStr),[ot[ce.rgb],ot[ce.alpha]];Ct.commandRaise("invalid blend.equation",Ht.commandStr)},function(ce,Le,oe){var $e=ce.constants.blendEquations,ir=Le.def(),Ir=Le.def(),kr=ce.cond("typeof ",oe,'==="string"');return Ct.optional(function(){function _r(Qr,Xn,Sa){ce.assert(Qr,Sa+" in "+$e,"invalid "+Xn+", must be one of "+Object.keys(ot))}_r(kr.then,Fe,oe),ce.assert(kr.else,oe+"&&typeof "+oe+'==="object"',"invalid "+Fe),_r(kr.else,Fe+".rgb",oe+".rgb"),_r(kr.else,Fe+".alpha",oe+".alpha")}),kr.then(ir,"=",Ir,"=",$e,"[",oe,"];"),kr.else(ir,"=",$e,"[",oe,".rgb];",Ir,"=",$e,"[",oe,".alpha];"),Le(kr),[ir,Ir]});case sl:return Ve(function(ce){return Ct.command(ci(ce)&&ce.length===4,"blend.color must be a 4d array",Ht.commandStr),Cn(4,function(Le){return+ce[Le]})},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,ce.shared.isArrayLike+"("+oe+")&&"+oe+".length===4","blend.color must be a 4d array")}),Cn(4,function($e){return Le.def("+",oe,"[",$e,"]")})});case Tc:return Ve(function(ce){return Ct.commandType(ce,"number",Re,Ht.commandStr),ce|0},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,"typeof "+oe+'==="number"',"invalid stencil.mask")}),Le.def(oe,"|0")});case Ic:return Ve(function(ce){Ct.commandType(ce,"object",Re,Ht.commandStr);var Le=ce.cmp||"keep",oe=ce.ref||0,$e="mask"in ce?ce.mask:-1;return Ct.commandParameter(Le,Mf,Fe+".cmp",Ht.commandStr),Ct.commandType(oe,"number",Fe+".ref",Ht.commandStr),Ct.commandType($e,"number",Fe+".mask",Ht.commandStr),[Mf[Le],oe,$e]},function(ce,Le,oe){var $e=ce.constants.compareFuncs;Ct.optional(function(){function _r(){ce.assert(Le,Array.prototype.join.call(arguments,""),"invalid stencil.func")}_r(oe+"&&typeof ",oe,'==="object"'),_r('!("cmp" in ',oe,")||(",oe,".cmp in ",$e,")")});var ir=Le.def('"cmp" in ',oe,"?",$e,"[",oe,".cmp]",":",ru),Ir=Le.def(oe,".ref|0"),kr=Le.def('"mask" in ',oe,"?",oe,".mask|0:-1");return[ir,Ir,kr]});case po:case Lu:return Ve(function(ce){Ct.commandType(ce,"object",Re,Ht.commandStr);var Le=ce.fail||"keep",oe=ce.zfail||"keep",$e=ce.zpass||"keep";return Ct.commandParameter(Le,mu,Fe+".fail",Ht.commandStr),Ct.commandParameter(oe,mu,Fe+".zfail",Ht.commandStr),Ct.commandParameter($e,mu,Fe+".zpass",Ht.commandStr),[Fe===Lu?$u:yu,mu[Le],mu[oe],mu[$e]]},function(ce,Le,oe){var $e=ce.constants.stencilOps;Ct.optional(function(){ce.assert(Le,oe+"&&typeof "+oe+'==="object"',"invalid "+Fe)});function ir(Ir){return Ct.optional(function(){ce.assert(Le,'!("'+Ir+'" in '+oe+")||("+oe+"."+Ir+" in "+$e+")","invalid "+Fe+"."+Ir+", must be one of "+Object.keys(mu))}),Le.def('"',Ir,'" in ',oe,"?",$e,"[",oe,".",Ir,"]:",ru)}return[Fe===Lu?$u:yu,ir("fail"),ir("zfail"),ir("zpass")]});case ll:return Ve(function(ce){Ct.commandType(ce,"object",Re,Ht.commandStr);var Le=ce.factor|0,oe=ce.units|0;return Ct.commandType(Le,"number",Re+".factor",Ht.commandStr),Ct.commandType(oe,"number",Re+".units",Ht.commandStr),[Le,oe]},function(ce,Le,oe){Ct.optional(function(){ce.assert(Le,oe+"&&typeof "+oe+'==="object"',"invalid "+Fe)});var $e=Le.def(oe,".factor|0"),ir=Le.def(oe,".units|0");return[$e,ir]});case Iu:return Ve(function(ce){var Le=0;return ce==="front"?Le=yu:ce==="back"&&(Le=$u),Ct.command(!!Le,Re,Ht.commandStr),Le},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,oe+'==="front"||'+oe+'==="back"',"invalid cull.face")}),Le.def(oe,'==="front"?',yu,":",$u)});case qf:return Ve(function(ce){return Ct.command(typeof ce=="number"&&ce>=fr.lineWidthDims[0]&&ce<=fr.lineWidthDims[1],"invalid line width, must be a positive number between "+fr.lineWidthDims[0]+" and "+fr.lineWidthDims[1],Ht.commandStr),ce},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,"typeof "+oe+'==="number"&&'+oe+">="+fr.lineWidthDims[0]+"&&"+oe+"<="+fr.lineWidthDims[1],"invalid line width")}),oe});case Ds:return Ve(function(ce){return Ct.commandParameter(ce,Sl,Re,Ht.commandStr),Sl[ce]},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,oe+'==="cw"||'+oe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Le.def(oe+'==="cw"?'+zc+":"+Uc)});case Cc:return Ve(function(ce){return Ct.command(ci(ce)&&ce.length===4,"color.mask must be length 4 array",Ht.commandStr),ce.map(function(Le){return!!Le})},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,ce.shared.isArrayLike+"("+oe+")&&"+oe+".length===4","invalid color.mask")}),Cn(4,function($e){return"!!"+oe+"["+$e+"]"})});case Ou:return Ve(function(ce){Ct.command(typeof ce=="object"&&ce,Re,Ht.commandStr);var Le="value"in ce?ce.value:1,oe=!!ce.invert;return Ct.command(typeof Le=="number"&&Le>=0&&Le<=1,"sample.coverage.value must be a number between 0 and 1",Ht.commandStr),[Le,oe]},function(ce,Le,oe){Ct.optional(function(){ce.assert(Le,oe+"&&typeof "+oe+'==="object"',"invalid sample.coverage")});var $e=Le.def('"value" in ',oe,"?+",oe,".value:1"),ir=Le.def("!!",oe,".invert");return[$e,ir]})}}),nr}function mi(le,Ht){var ke=le.static,er=le.dynamic,nr={};return Object.keys(ke).forEach(function(Fe){var Re=ke[Fe],Ve;if(typeof Re=="number"||typeof Re=="boolean")Ve=qi(function(){return Re});else if(typeof Re=="function"){var ce=Re._reglType;ce==="texture2d"||ce==="textureCube"?Ve=qi(function(Le){return Le.link(Re)}):ce==="framebuffer"||ce==="framebufferCube"?(Ct.command(Re.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Fe+'"',Ht.commandStr),Ve=qi(function(Le){return Le.link(Re.color[0])})):Ct.commandRaise('invalid data for uniform "'+Fe+'"',Ht.commandStr)}else ci(Re)?Ve=qi(function(Le){var oe=Le.global.def("[",Cn(Re.length,function($e){return Ct.command(typeof Re[$e]=="number"||typeof Re[$e]=="boolean","invalid uniform "+Fe,Le.commandStr),Re[$e]}),"]");return oe}):Ct.commandRaise('invalid or missing data for uniform "'+Fe+'"',Ht.commandStr);Ve.value=Re,nr[Fe]=Ve}),Object.keys(er).forEach(function(Fe){var Re=er[Fe];nr[Fe]=Ro(Re,function(Ve,ce){return Ve.invoke(ce,Re)})}),nr}function va(le,Ht){var ke=le.static,er=le.dynamic,nr={};return Object.keys(ke).forEach(function(Fe){var Re=ke[Fe],Ve=qt.id(Fe),ce=new Z;if(Xc(Re))ce.state=vf,ce.buffer=Lr.getBuffer(Lr.create(Re,Ku,!1,!0)),ce.type=0;else{var Le=Lr.getBuffer(Re);if(Le)ce.state=vf,ce.buffer=Le,ce.type=0;else if(Ct.command(typeof Re=="object"&&Re,"invalid data for attribute "+Fe,Ht.commandStr),"constant"in Re){var oe=Re.constant;ce.buffer="null",ce.state=rl,typeof oe=="number"?ce.x=oe:(Ct.command(ci(oe)&&oe.length>0&&oe.length<=4,"invalid constant for attribute "+Fe,Ht.commandStr),hf.forEach(function(Xn,Sa){Sa<oe.length&&(ce[Xn]=oe[Sa])}))}else{Xc(Re.buffer)?Le=Lr.getBuffer(Lr.create(Re.buffer,Ku,!1,!0)):Le=Lr.getBuffer(Re.buffer),Ct.command(!!Le,'missing buffer for attribute "'+Fe+'"',Ht.commandStr);var $e=Re.offset|0;Ct.command($e>=0,'invalid offset for attribute "'+Fe+'"',Ht.commandStr);var ir=Re.stride|0;Ct.command(ir>=0&&ir<256,'invalid stride for attribute "'+Fe+'", must be integer betweeen [0, 255]',Ht.commandStr);var Ir=Re.size|0;Ct.command(!("size"in Re)||Ir>0&&Ir<=4,'invalid size for attribute "'+Fe+'", must be 1,2,3,4',Ht.commandStr);var kr=!!Re.normalized,_r=0;"type"in Re&&(Ct.commandParameter(Re.type,Oo,"invalid type for attribute "+Fe,Ht.commandStr),_r=Oo[Re.type]);var Qr=Re.divisor|0;"divisor"in Re&&(Ct.command(Qr===0||ct,'cannot specify divisor for attribute "'+Fe+'", instancing not supported',Ht.commandStr),Ct.command(Qr>=0,'invalid divisor for attribute "'+Fe+'"',Ht.commandStr)),Ct.optional(function(){var Xn=Ht.commandStr,Sa=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Re).forEach(function(On){Ct.command(Sa.indexOf(On)>=0,'unknown parameter "'+On+'" for attribute pointer "'+Fe+'" (valid parameters are '+Sa+")",Xn)})}),ce.buffer=Le,ce.state=vf,ce.size=Ir,ce.normalized=kr,ce.type=_r||Le.dtype,ce.offset=$e,ce.stride=ir,ce.divisor=Qr}}nr[Fe]=qi(function(Xn,Sa){var On=Xn.attribCache;if(Ve in On)return On[Ve];var Qn={isStream:!1};return Object.keys(ce).forEach(function(ma){Qn[ma]=ce[ma]}),ce.buffer&&(Qn.buffer=Xn.link(ce.buffer),Qn.type=Qn.type||Qn.buffer+".dtype"),On[Ve]=Qn,Qn})}),Object.keys(er).forEach(function(Fe){var Re=er[Fe];function Ve(ce,Le){var oe=ce.invoke(Le,Re),$e=ce.shared,ir=ce.constants,Ir=$e.isBufferArgs,kr=$e.buffer;Ct.optional(function(){ce.assert(Le,oe+"&&(typeof "+oe+'==="object"||typeof '+oe+'==="function")&&('+Ir+"("+oe+")||"+kr+".getBuffer("+oe+")||"+kr+".getBuffer("+oe+".buffer)||"+Ir+"("+oe+'.buffer)||("constant" in '+oe+"&&(typeof "+oe+'.constant==="number"||'+$e.isArrayLike+"("+oe+".constant))))",'invalid dynamic attribute "'+Fe+'"')});var _r={isStream:Le.def(!1)},Qr=new Z;Qr.state=vf,Object.keys(Qr).forEach(function(Qn){_r[Qn]=Le.def(""+Qr[Qn])});var Xn=_r.buffer,Sa=_r.type;Le("if(",Ir,"(",oe,")){",_r.isStream,"=true;",Xn,"=",kr,".createStream(",Ku,",",oe,");",Sa,"=",Xn,".dtype;","}else{",Xn,"=",kr,".getBuffer(",oe,");","if(",Xn,"){",Sa,"=",Xn,".dtype;",'}else if("constant" in ',oe,"){",_r.state,"=",rl,";","if(typeof "+oe+'.constant === "number"){',_r[hf[0]],"=",oe,".constant;",hf.slice(1).map(function(Qn){return _r[Qn]}).join("="),"=0;","}else{",hf.map(function(Qn,ma){return _r[Qn]+"="+oe+".constant.length>"+ma+"?"+oe+".constant["+ma+"]:0;"}).join(""),"}}else{","if(",Ir,"(",oe,".buffer)){",Xn,"=",kr,".createStream(",Ku,",",oe,".buffer);","}else{",Xn,"=",kr,".getBuffer(",oe,".buffer);","}",Sa,'="type" in ',oe,"?",ir.glTypes,"[",oe,".type]:",Xn,".dtype;",_r.normalized,"=!!",oe,".normalized;");function On(Qn){Le(_r[Qn],"=",oe,".",Qn,"|0;")}return On("size"),On("offset"),On("stride"),On("divisor"),Le("}}"),Le.exit("if(",_r.isStream,"){",kr,".destroyStream(",Xn,");","}"),_r}nr[Fe]=Ro(Re,Ve)}),nr}function Si(le,Ht){var ke=le.static,er=le.dynamic;if(bf in ke){var nr=ke[bf];return nr!==null&&$r.getVAO(nr)===null&&(nr=$r.createVAO(nr)),qi(function(Re){return Re.link($r.getVAO(nr))})}else if(bf in er){var Fe=er[bf];return Ro(Fe,function(Re,Ve){var ce=Re.invoke(Ve,Fe);return Ve.def(Re.shared.vao+".getVAO("+ce+")")})}return null}function di(le){var Ht=le.static,ke=le.dynamic,er={};return Object.keys(Ht).forEach(function(nr){var Fe=Ht[nr];er[nr]=qi(function(Re,Ve){return typeof Fe=="number"||typeof Fe=="boolean"?""+Fe:Re.link(Fe)})}),Object.keys(ke).forEach(function(nr){var Fe=ke[nr];er[nr]=Ro(Fe,function(Re,Ve){return Re.invoke(Ve,Fe)})}),er}function Pa(le,Ht,ke,er,nr){var Fe=le.static,Re=le.dynamic;Ct.optional(function(){var On=[Du,gu,Hu,mf,xf,Jf,Nu,Lc,yf,bf].concat(Gt);function Qn(ma){Object.keys(ma).forEach(function(Ra){Ct.command(On.indexOf(Ra)>=0,'unknown parameter "'+Ra+'"',nr.commandStr)})}Qn(Fe),Qn(Re)});var Ve=In(le,Ht),ce=tn(le,nr),Le=kn(le,ce,nr),oe=ca(le,nr),$e=ea(le,nr),ir=Kn(le,nr,Ve);function Ir(On){var Qn=Le[On];Qn&&($e[On]=Qn)}Ir(du),Ir(ye(Qf));var kr=Object.keys($e).length>0,_r={framebuffer:ce,draw:oe,shader:ir,state:$e,dirty:kr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(_r.profile=hn(le,nr),_r.uniforms=mi(ke,nr),_r.drawVAO=_r.scopeVAO=Si(le,nr),!_r.drawVAO&&ir.program&&!Ve&&Ee.angle_instanced_arrays){var Qr=!0,Xn=ir.program.attributes.map(function(On){var Qn=Ht.static[On];return Qr=Qr&&!!Qn,Qn});if(Qr&&Xn.length>0){var Sa=$r.getVAO($r.createVAO(Xn));_r.drawVAO=new rs(null,null,null,function(On,Qn){return On.link(Sa)}),_r.useVAO=!0}}return Ve?_r.useVAO=!0:_r.attributes=va(Ht,nr),_r.context=di(er,nr),_r}function Mi(le,Ht,ke){var er=le.shared,nr=er.context,Fe=le.scope();Object.keys(ke).forEach(function(Re){Ht.save(nr,"."+Re);var Ve=ke[Re],ce=Ve.append(le,Ht);Array.isArray(ce)?Fe(nr,".",Re,"=[",ce.join(),"];"):Fe(nr,".",Re,"=",ce,";")}),Ht(Fe)}function Fi(le,Ht,ke,er){var nr=le.shared,Fe=nr.gl,Re=nr.framebuffer,Ve;gt&&(Ve=Ht.def(nr.extensions,".webgl_draw_buffers"));var ce=le.constants,Le=ce.drawBuffer,oe=ce.backBuffer,$e;ke?$e=ke.append(le,Ht):$e=Ht.def(Re,".next"),er||Ht("if(",$e,"!==",Re,".cur){"),Ht("if(",$e,"){",Fe,".bindFramebuffer(",_l,",",$e,".framebuffer);"),gt&&Ht(Ve,".drawBuffersWEBGL(",Le,"[",$e,".colorAttachments.length]);"),Ht("}else{",Fe,".bindFramebuffer(",_l,",null);"),gt&&Ht(Ve,".drawBuffersWEBGL(",oe,");"),Ht("}",Re,".cur=",$e,";"),er||Ht("}")}function yo(le,Ht,ke){var er=le.shared,nr=er.gl,Fe=le.current,Re=le.next,Ve=er.current,ce=er.next,Le=le.cond(Ve,".dirty");Gt.forEach(function(oe){var $e=ye(oe);if(!($e in ke.state)){var ir,Ir;if($e in Re){ir=Re[$e],Ir=Fe[$e];var kr=Cn(bt[$e].length,function(Qr){return Le.def(ir,"[",Qr,"]")});Le(le.cond(kr.map(function(Qr,Xn){return Qr+"!=="+Ir+"["+Xn+"]"}).join("||")).then(nr,".",Zt[$e],"(",kr,");",kr.map(function(Qr,Xn){return Ir+"["+Xn+"]="+Qr}).join(";"),";"))}else{ir=Le.def(ce,".",$e);var _r=le.cond(ir,"!==",Ve,".",$e);Le(_r),$e in te?_r(le.cond(ir).then(nr,".enable(",te[$e],");").else(nr,".disable(",te[$e],");"),Ve,".",$e,"=",ir,";"):_r(nr,".",Zt[$e],"(",ir,");",Ve,".",$e,"=",ir,";")}}}),Object.keys(ke.state).length===0&&Le(Ve,".dirty=false;"),Ht(Le)}function Ao(le,Ht,ke,er){var nr=le.shared,Fe=le.current,Re=nr.current,Ve=nr.gl;rh(Object.keys(ke)).forEach(function(ce){var Le=ke[ce];if(!(er&&!er(Le))){var oe=Le.append(le,Ht);if(te[ce]){var $e=te[ce];xu(Le)?oe?Ht(Ve,".enable(",$e,");"):Ht(Ve,".disable(",$e,");"):Ht(le.cond(oe).then(Ve,".enable(",$e,");").else(Ve,".disable(",$e,");")),Ht(Re,".",ce,"=",oe,";")}else if(ci(oe)){var ir=Fe[ce];Ht(Ve,".",Zt[ce],"(",oe,");",oe.map(function(Ir,kr){return ir+"["+kr+"]="+Ir}).join(";"),";")}else Ht(Ve,".",Zt[ce],"(",oe,");",Re,".",ce,"=",oe,";")}})}function Qi(le,Ht){ct&&(le.instancing=Ht.def(le.shared.extensions,".angle_instanced_arrays"))}function _a(le,Ht,ke,er,nr){var Fe=le.shared,Re=le.stats,Ve=Fe.current,ce=Fe.timer,Le=ke.profile;function oe(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var $e,ir;function Ir(On){$e=Ht.def(),On($e,"=",oe(),";"),typeof nr=="string"?On(Re,".count+=",nr,";"):On(Re,".count++;"),_&&(er?(ir=Ht.def(),On(ir,"=",ce,".getNumPendingQueries();")):On(ce,".beginQuery(",Re,");"))}function kr(On){On(Re,".cpuTime+=",oe(),"-",$e,";"),_&&(er?On(ce,".pushScopeStats(",ir,",",ce,".getNumPendingQueries(),",Re,");"):On(ce,".endQuery();"))}function _r(On){var Qn=Ht.def(Ve,".profile");Ht(Ve,".profile=",On,";"),Ht.exit(Ve,".profile=",Qn,";")}var Qr;if(Le){if(xu(Le)){Le.enable?(Ir(Ht),kr(Ht.exit),_r("true")):_r("false");return}Qr=Le.append(le,Ht),_r(Qr)}else Qr=Ht.def(Ve,".profile");var Xn=le.block();Ir(Xn),Ht("if(",Qr,"){",Xn,"}");var Sa=le.block();kr(Sa),Ht.exit("if(",Qr,"){",Sa,"}")}function Ko(le,Ht,ke,er,nr){var Fe=le.shared;function Re(ce){switch(ce){case Pc:case Rc:case Bc:return 2;case kc:case nc:case Fc:return 3;case rc:case Zu:case Gc:return 4;default:return 1}}function Ve(ce,Le,oe){var $e=Fe.gl,ir=Ht.def(ce,".location"),Ir=Ht.def(Fe.attributes,"[",ir,"]"),kr=oe.state,_r=oe.buffer,Qr=[oe.x,oe.y,oe.z,oe.w],Xn=["buffer","normalized","offset","stride"];function Sa(){Ht("if(!",Ir,".buffer){",$e,".enableVertexAttribArray(",ir,");}");var Qn=oe.type,ma;if(oe.size?ma=Ht.def(oe.size,"||",Le):ma=Le,Ht("if(",Ir,".type!==",Qn,"||",Ir,".size!==",ma,"||",Xn.map(function(Gi){return Ir+"."+Gi+"!=="+oe[Gi]}).join("||"),"){",$e,".bindBuffer(",Ku,",",_r,".buffer);",$e,".vertexAttribPointer(",[ir,ma,Qn,oe.normalized,oe.stride,oe.offset],");",Ir,".type=",Qn,";",Ir,".size=",ma,";",Xn.map(function(Gi){return Ir+"."+Gi+"="+oe[Gi]+";"}).join(""),"}"),ct){var Ra=oe.divisor;Ht("if(",Ir,".divisor!==",Ra,"){",le.instancing,".vertexAttribDivisorANGLE(",[ir,Ra],");",Ir,".divisor=",Ra,";}")}}function On(){Ht("if(",Ir,".buffer){",$e,".disableVertexAttribArray(",ir,");",Ir,".buffer=null;","}if(",hf.map(function(Qn,ma){return Ir+"."+Qn+"!=="+Qr[ma]}).join("||"),"){",$e,".vertexAttrib4f(",ir,",",Qr,");",hf.map(function(Qn,ma){return Ir+"."+Qn+"="+Qr[ma]+";"}).join(""),"}")}kr===vf?Sa():kr===rl?On():(Ht("if(",kr,"===",vf,"){"),Sa(),Ht("}else{"),On(),Ht("}"))}er.forEach(function(ce){var Le=ce.name,oe=ke.attributes[Le],$e;if(oe){if(!nr(oe))return;$e=oe.append(le,Ht)}else{if(!nr(Ml))return;var ir=le.scopeAttrib(Le);Ct.optional(function(){le.assert(Ht,ir+".state","missing attribute "+Le)}),$e={},Object.keys(new Z).forEach(function(Ir){$e[Ir]=Ht.def(ir,".",Ir)})}Ve(le.link(ce),Re(ce.info.type),$e)})}function ni(le,Ht,ke,er,nr){for(var Fe=le.shared,Re=Fe.gl,Ve,ce=0;ce<er.length;++ce){var Le=er[ce],oe=Le.name,$e=Le.info.type,ir=ke.uniforms[oe],Ir=le.link(Le),kr=Ir+".location",_r;if(ir){if(!nr(ir))continue;if(xu(ir)){var Qr=ir.value;if(Ct.command(Qr!==null&&typeof Qr!="undefined",'missing uniform "'+oe+'"',le.commandStr),$e===oc||$e===pu){Ct.command(typeof Qr=="function"&&($e===oc&&(Qr._reglType==="texture2d"||Qr._reglType==="framebuffer")||$e===pu&&(Qr._reglType==="textureCube"||Qr._reglType==="framebufferCube")),"invalid texture for uniform "+oe,le.commandStr);var Xn=le.link(Qr._texture||Qr.color[0]._texture);Ht(Re,".uniform1i(",kr,",",Xn+".bind());"),Ht.exit(Xn,".unbind();")}else if($e===ac||$e===ic||$e===_f){Ct.optional(function(){Ct.command(ci(Qr),"invalid matrix for uniform "+oe,le.commandStr),Ct.command($e===ac&&Qr.length===4||$e===ic&&Qr.length===9||$e===_f&&Qr.length===16,"invalid length for matrix uniform "+oe,le.commandStr)});var Sa=le.global.def("new Float32Array(["+Array.prototype.slice.call(Qr)+"])"),On=2;$e===ic?On=3:$e===_f&&(On=4),Ht(Re,".uniformMatrix",On,"fv(",kr,",false,",Sa,");")}else{switch($e){case Ps:Ct.commandType(Qr,"number","uniform "+oe,le.commandStr),Ve="1f";break;case Pc:Ct.command(ci(Qr)&&Qr.length===2,"uniform "+oe,le.commandStr),Ve="2f";break;case kc:Ct.command(ci(Qr)&&Qr.length===3,"uniform "+oe,le.commandStr),Ve="3f";break;case rc:Ct.command(ci(Qr)&&Qr.length===4,"uniform "+oe,le.commandStr),Ve="4f";break;case El:Ct.commandType(Qr,"boolean","uniform "+oe,le.commandStr),Ve="1i";break;case bl:Ct.commandType(Qr,"number","uniform "+oe,le.commandStr),Ve="1i";break;case Bc:Ct.command(ci(Qr)&&Qr.length===2,"uniform "+oe,le.commandStr),Ve="2i";break;case Rc:Ct.command(ci(Qr)&&Qr.length===2,"uniform "+oe,le.commandStr),Ve="2i";break;case Fc:Ct.command(ci(Qr)&&Qr.length===3,"uniform "+oe,le.commandStr),Ve="3i";break;case nc:Ct.command(ci(Qr)&&Qr.length===3,"uniform "+oe,le.commandStr),Ve="3i";break;case Gc:Ct.command(ci(Qr)&&Qr.length===4,"uniform "+oe,le.commandStr),Ve="4i";break;case Zu:Ct.command(ci(Qr)&&Qr.length===4,"uniform "+oe,le.commandStr),Ve="4i";break}Ht(Re,".uniform",Ve,"(",kr,",",ci(Qr)?Array.prototype.slice.call(Qr):Qr,");")}continue}else _r=ir.append(le,Ht)}else{if(!nr(Ml))continue;_r=Ht.def(Fe.uniforms,"[",qt.id(oe),"]")}$e===oc?(Ct(!Array.isArray(_r),"must specify a scalar prop for textures"),Ht("if(",_r,"&&",_r,'._reglType==="framebuffer"){',_r,"=",_r,".color[0];","}")):$e===pu&&(Ct(!Array.isArray(_r),"must specify a scalar prop for cube maps"),Ht("if(",_r,"&&",_r,'._reglType==="framebufferCube"){',_r,"=",_r,".color[0];","}")),Ct.optional(function(){function ws(bu,kv){le.assert(Ht,bu,'bad data or missing for uniform "'+oe+'".  '+kv)}function fh(bu){Ct(!Array.isArray(_r),"must not specify an array type for uniform"),ws("typeof "+_r+'==="'+bu+'"',"invalid type, expected "+bu)}function js(bu,kv){Array.isArray(_r)?Ct(_r.length===bu,"must have length "+bu):ws(Fe.isArrayLike+"("+_r+")&&"+_r+".length==="+bu,"invalid vector, should have length "+bu,le.commandStr)}function jh(bu){Ct(!Array.isArray(_r),"must not specify a value type"),ws("typeof "+_r+'==="function"&&'+_r+'._reglType==="texture'+(bu===Vl?"2d":"Cube")+'"',"invalid texture type",le.commandStr)}switch($e){case bl:fh("number");break;case Rc:js(2,"number");break;case nc:js(3,"number");break;case Zu:js(4,"number");break;case Ps:fh("number");break;case Pc:js(2,"number");break;case kc:js(3,"number");break;case rc:js(4,"number");break;case El:fh("boolean");break;case Bc:js(2,"boolean");break;case Fc:js(3,"boolean");break;case Gc:js(4,"boolean");break;case ac:js(4,"number");break;case ic:js(9,"number");break;case _f:js(16,"number");break;case oc:jh(Vl);break;case pu:jh(pl);break}});var Qn=1;switch($e){case oc:case pu:var ma=Ht.def(_r,"._texture");Ht(Re,".uniform1i(",kr,",",ma,".bind());"),Ht.exit(ma,".unbind();");continue;case bl:case El:Ve="1i";break;case Rc:case Bc:Ve="2i",Qn=2;break;case nc:case Fc:Ve="3i",Qn=3;break;case Zu:case Gc:Ve="4i",Qn=4;break;case Ps:Ve="1f";break;case Pc:Ve="2f",Qn=2;break;case kc:Ve="3f",Qn=3;break;case rc:Ve="4f",Qn=4;break;case ac:Ve="Matrix2fv";break;case ic:Ve="Matrix3fv";break;case _f:Ve="Matrix4fv";break}if(Ht(Re,".uniform",Ve,"(",kr,","),Ve.charAt(0)==="M"){var Ra=Math.pow($e-ac+2,2),Gi=le.global.def("new Float32Array(",Ra,")");Array.isArray(_r)?Ht("false,(",Cn(Ra,function(ws){return Gi+"["+ws+"]="+_r[ws]}),",",Gi,")"):Ht("false,(Array.isArray(",_r,")||",_r," instanceof Float32Array)?",_r,":(",Cn(Ra,function(ws){return Gi+"["+ws+"]="+_r+"["+ws+"]"}),",",Gi,")")}else Qn>1?Ht(Cn(Qn,function(ws){return Array.isArray(_r)?_r[ws]:_r+"["+ws+"]"})):(Ct(!Array.isArray(_r),"uniform value must not be an array"),Ht(_r));Ht(");")}}function $n(le,Ht,ke,er){var nr=le.shared,Fe=nr.gl,Re=nr.draw,Ve=er.draw;function ce(){var ma=Ve.elements,Ra,Gi=Ht;return ma?((ma.contextDep&&er.contextDynamic||ma.propDep)&&(Gi=ke),Ra=ma.append(le,Gi)):Ra=Gi.def(Re,".",mf),Ra&&Gi("if("+Ra+")"+Fe+".bindBuffer("+Yl+","+Ra+".buffer.buffer);"),Ra}function Le(){var ma=Ve.count,Ra,Gi=Ht;return ma?((ma.contextDep&&er.contextDynamic||ma.propDep)&&(Gi=ke),Ra=ma.append(le,Gi),Ct.optional(function(){ma.MISSING&&le.assert(Ht,"false","missing vertex count"),ma.DYNAMIC&&le.assert(Gi,Ra+">=0","missing vertex count")})):(Ra=Gi.def(Re,".",Nu),Ct.optional(function(){le.assert(Gi,Ra+">=0","missing vertex count")})),Ra}var oe=ce();function $e(ma){var Ra=Ve[ma];return Ra?Ra.contextDep&&er.contextDynamic||Ra.propDep?Ra.append(le,ke):Ra.append(le,Ht):Ht.def(Re,".",ma)}var ir=$e(xf),Ir=$e(Jf),kr=Le();if(typeof kr=="number"){if(kr===0)return}else ke("if(",kr,"){"),ke.exit("}");var _r,Qr;ct&&(_r=$e(Lc),Qr=le.instancing);var Xn=oe+".type",Sa=Ve.elements&&xu(Ve.elements);function On(){function ma(){ke(Qr,".drawElementsInstancedANGLE(",[ir,kr,Xn,Ir+"<<(("+Xn+"-"+Gl+")>>1)",_r],");")}function Ra(){ke(Qr,".drawArraysInstancedANGLE(",[ir,Ir,kr,_r],");")}oe?Sa?ma():(ke("if(",oe,"){"),ma(),ke("}else{"),Ra(),ke("}")):Ra()}function Qn(){function ma(){ke(Fe+".drawElements("+[ir,kr,Xn,Ir+"<<(("+Xn+"-"+Gl+")>>1)"]+");")}function Ra(){ke(Fe+".drawArrays("+[ir,Ir,kr]+");")}oe?Sa?ma():(ke("if(",oe,"){"),ma(),ke("}else{"),Ra(),ke("}")):Ra()}ct&&(typeof _r!="number"||_r>=0)?typeof _r=="string"?(ke("if(",_r,">0){"),On(),ke("}else if(",_r,"<0){"),Qn(),ke("}")):On():Qn()}function ka(le,Ht,ke,er,nr){var Fe=jr(),Re=Fe.proc("body",nr);return Ct.optional(function(){Fe.commandStr=Ht.commandStr,Fe.command=Fe.link(Ht.commandStr)}),ct&&(Fe.instancing=Re.def(Fe.shared.extensions,".angle_instanced_arrays")),le(Fe,Re,ke,er),Fe.compile().body}function Ha(le,Ht,ke,er){Qi(le,Ht),ke.useVAO?ke.drawVAO?Ht(le.shared.vao,".setVAO(",ke.drawVAO.append(le,Ht),");"):Ht(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(Ht(le.shared.vao,".setVAO(null);"),Ko(le,Ht,ke,er.attributes,function(){return!0})),ni(le,Ht,ke,er.uniforms,function(){return!0}),$n(le,Ht,Ht,ke)}function io(le,Ht){var ke=le.proc("draw",1);Qi(le,ke),Mi(le,ke,Ht.context),Fi(le,ke,Ht.framebuffer),yo(le,ke,Ht),Ao(le,ke,Ht.state),_a(le,ke,Ht,!1,!0);var er=Ht.shader.progVar.append(le,ke);if(ke(le.shared.gl,".useProgram(",er,".program);"),Ht.shader.program)Ha(le,ke,Ht,Ht.shader.program);else{ke(le.shared.vao,".setVAO(null);");var nr=le.global.def("{}"),Fe=ke.def(er,".id"),Re=ke.def(nr,"[",Fe,"]");ke(le.cond(Re).then(Re,".call(this,a0);").else(Re,"=",nr,"[",Fe,"]=",le.link(function(Ve){return ka(Ha,le,Ht,Ve,1)}),"(",er,");",Re,".call(this,a0);"))}Object.keys(Ht.state).length>0&&ke(le.shared.current,".dirty=true;")}function Pu(le,Ht,ke,er){le.batchId="a1",Qi(le,Ht);function nr(){return!0}Ko(le,Ht,ke,er.attributes,nr),ni(le,Ht,ke,er.uniforms,nr),$n(le,Ht,Ht,ke)}function uc(le,Ht,ke,er){Qi(le,Ht);var nr=ke.contextDep,Fe=Ht.def(),Re="a0",Ve="a1",ce=Ht.def();le.shared.props=ce,le.batchId=Fe;var Le=le.scope(),oe=le.scope();Ht(Le.entry,"for(",Fe,"=0;",Fe,"<",Ve,";++",Fe,"){",ce,"=",Re,"[",Fe,"];",oe,"}",Le.exit);function $e(Xn){return Xn.contextDep&&nr||Xn.propDep}function ir(Xn){return!$e(Xn)}if(ke.needsContext&&Mi(le,oe,ke.context),ke.needsFramebuffer&&Fi(le,oe,ke.framebuffer),Ao(le,oe,ke.state,$e),ke.profile&&$e(ke.profile)&&_a(le,oe,ke,!1,!0),er)ke.useVAO?ke.drawVAO?$e(ke.drawVAO)?oe(le.shared.vao,".setVAO(",ke.drawVAO.append(le,oe),");"):Le(le.shared.vao,".setVAO(",ke.drawVAO.append(le,Le),");"):Le(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(Le(le.shared.vao,".setVAO(null);"),Ko(le,Le,ke,er.attributes,ir),Ko(le,oe,ke,er.attributes,$e)),ni(le,Le,ke,er.uniforms,ir),ni(le,oe,ke,er.uniforms,$e),$n(le,Le,oe,ke);else{var Ir=le.global.def("{}"),kr=ke.shader.progVar.append(le,oe),_r=oe.def(kr,".id"),Qr=oe.def(Ir,"[",_r,"]");oe(le.shared.gl,".useProgram(",kr,".program);","if(!",Qr,"){",Qr,"=",Ir,"[",_r,"]=",le.link(function(Xn){return ka(Pu,le,ke,Xn,2)}),"(",kr,");}",Qr,".call(this,a0[",Fe,"],",Fe,");")}}function pe(le,Ht){var ke=le.proc("batch",2);le.batchId="0",Qi(le,ke);var er=!1,nr=!0;Object.keys(Ht.context).forEach(function(Ir){er=er||Ht.context[Ir].propDep}),er||(Mi(le,ke,Ht.context),nr=!1);var Fe=Ht.framebuffer,Re=!1;Fe?(Fe.propDep?er=Re=!0:Fe.contextDep&&er&&(Re=!0),Re||Fi(le,ke,Fe)):Fi(le,ke,null),Ht.state.viewport&&Ht.state.viewport.propDep&&(er=!0);function Ve(Ir){return Ir.contextDep&&er||Ir.propDep}yo(le,ke,Ht),Ao(le,ke,Ht.state,function(Ir){return!Ve(Ir)}),(!Ht.profile||!Ve(Ht.profile))&&_a(le,ke,Ht,!1,"a1"),Ht.contextDep=er,Ht.needsContext=nr,Ht.needsFramebuffer=Re;var ce=Ht.shader.progVar;if(ce.contextDep&&er||ce.propDep)uc(le,ke,Ht,null);else{var Le=ce.append(le,ke);if(ke(le.shared.gl,".useProgram(",Le,".program);"),Ht.shader.program)uc(le,ke,Ht,Ht.shader.program);else{ke(le.shared.vao,".setVAO(null);");var oe=le.global.def("{}"),$e=ke.def(Le,".id"),ir=ke.def(oe,"[",$e,"]");ke(le.cond(ir).then(ir,".call(this,a0,a1);").else(ir,"=",oe,"[",$e,"]=",le.link(function(Ir){return ka(uc,le,Ht,Ir,2)}),"(",Le,");",ir,".call(this,a0,a1);"))}}Object.keys(Ht.state).length>0&&ke(le.shared.current,".dirty=true;")}function dr(le,Ht){var ke=le.proc("scope",3);le.batchId="a2";var er=le.shared,nr=er.current;Mi(le,ke,Ht.context),Ht.framebuffer&&Ht.framebuffer.append(le,ke),rh(Object.keys(Ht.state)).forEach(function(Re){var Ve=Ht.state[Re],ce=Ve.append(le,ke);ci(ce)?ce.forEach(function(Le,oe){ke.set(le.next[Re],"["+oe+"]",Le)}):ke.set(er.next,"."+Re,ce)}),_a(le,ke,Ht,!0,!0),[mf,Jf,Nu,Lc,xf].forEach(function(Re){var Ve=Ht.draw[Re];Ve&&ke.set(er.draw,"."+Re,""+Ve.append(le,ke))}),Object.keys(Ht.uniforms).forEach(function(Re){var Ve=Ht.uniforms[Re].append(le,ke);Array.isArray(Ve)&&(Ve="["+Ve.join()+"]"),ke.set(er.uniforms,"["+qt.id(Re)+"]",Ve)}),Object.keys(Ht.attributes).forEach(function(Re){var Ve=Ht.attributes[Re].append(le,ke),ce=le.scopeAttrib(Re);Object.keys(new Z).forEach(function(Le){ke.set(ce,"."+Le,Ve[Le])})}),Ht.scopeVAO&&ke.set(er.vao,".targetVAO",Ht.scopeVAO.append(le,ke));function Fe(Re){var Ve=Ht.shader[Re];Ve&&ke.set(er.shader,"."+Re,Ve.append(le,ke))}Fe(gu),Fe(Hu),Object.keys(Ht.state).length>0&&(ke(nr,".dirty=true;"),ke.exit(nr,".dirty=true;")),ke("a1(",le.shared.context,",a0,",le.batchId,");")}function ur(le){if(!(typeof le!="object"||ci(le))){for(var Ht=Object.keys(le),ke=0;ke<Ht.length;++ke)if(rr.isDynamic(le[Ht[ke]]))return!0;return!1}}function Sn(le,Ht,ke){var er=Ht.static[ke];if(!er||!ur(er))return;var nr=le.global,Fe=Object.keys(er),Re=!1,Ve=!1,ce=!1,Le=le.global.def("{}");Fe.forEach(function($e){var ir=er[$e];if(rr.isDynamic(ir)){typeof ir=="function"&&(ir=er[$e]=rr.unbox(ir));var Ir=Ro(ir,null);Re=Re||Ir.thisDep,ce=ce||Ir.propDep,Ve=Ve||Ir.contextDep}else{switch(nr(Le,".",$e,"="),typeof ir){case"number":nr(ir);break;case"string":nr('"',ir,'"');break;case"object":Array.isArray(ir)&&nr("[",ir.join(),"]");break;default:nr(le.link(ir));break}nr(";")}});function oe($e,ir){Fe.forEach(function(Ir){var kr=er[Ir];if(rr.isDynamic(kr)){var _r=$e.invoke(ir,kr);ir(Le,".",Ir,"=",_r,";")}})}Ht.dynamic[ke]=new rr.DynamicVariable(Kf,{thisDep:Re,contextDep:Ve,propDep:ce,ref:Le,append:oe}),delete Ht.static[ke]}function Na(le,Ht,ke,er,nr){var Fe=jr();Fe.stats=Fe.link(nr),Object.keys(Ht.static).forEach(function(Ve){Sn(Fe,Ht,Ve)}),Xl.forEach(function(Ve){Sn(Fe,le,Ve)});var Re=Pa(le,Ht,ke,er,Fe);return io(Fe,Re),dr(Fe,Re),pe(Fe,Re),z(Fe.compile(),{destroy:function(){Re.shader.program.destroy()}})}return{next:Mt,current:bt,procs:function(){var le=jr(),Ht=le.proc("poll"),ke=le.proc("refresh"),er=le.block();Ht(er),ke(er);var nr=le.shared,Fe=nr.gl,Re=nr.next,Ve=nr.current;er(Ve,".dirty=false;"),Fi(le,Ht),Fi(le,ke,null,!0);var ce;ct&&(ce=le.link(ct)),Ee.oes_vertex_array_object&&ke(le.link(Ee.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Le=0;Le<fr.maxAttributes;++Le){var oe=ke.def(nr.attributes,"[",Le,"]"),$e=le.cond(oe,".buffer");$e.then(Fe,".enableVertexAttribArray(",Le,");",Fe,".bindBuffer(",Ku,",",oe,".buffer.buffer);",Fe,".vertexAttribPointer(",Le,",",oe,".size,",oe,".type,",oe,".normalized,",oe,".stride,",oe,".offset);").else(Fe,".disableVertexAttribArray(",Le,");",Fe,".vertexAttrib4f(",Le,",",oe,".x,",oe,".y,",oe,".z,",oe,".w);",oe,".buffer=null;"),ke($e),ct&&ke(ce,".vertexAttribDivisorANGLE(",Le,",",oe,".divisor);")}return ke(le.shared.vao,".currentVAO=null;",le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"),Object.keys(te).forEach(function(ir){var Ir=te[ir],kr=er.def(Re,".",ir),_r=le.block();_r("if(",kr,"){",Fe,".enable(",Ir,")}else{",Fe,".disable(",Ir,")}",Ve,".",ir,"=",kr,";"),ke(_r),Ht("if(",kr,"!==",Ve,".",ir,"){",_r,"}")}),Object.keys(Zt).forEach(function(ir){var Ir=Zt[ir],kr=bt[ir],_r,Qr,Xn=le.block();if(Xn(Fe,".",Ir,"("),ci(kr)){var Sa=kr.length;_r=le.global.def(Re,".",ir),Qr=le.global.def(Ve,".",ir),Xn(Cn(Sa,function(On){return _r+"["+On+"]"}),");",Cn(Sa,function(On){return Qr+"["+On+"]="+_r+"["+On+"];"}).join("")),Ht("if(",Cn(Sa,function(On){return _r+"["+On+"]!=="+Qr+"["+On+"]"}).join("||"),"){",Xn,"}")}else _r=er.def(Re,".",ir),Qr=er.def(Ve,".",ir),Xn(_r,");",Ve,".",ir,"=",_r,";"),Ht("if(",_r,"!==",Qr,"){",Xn,"}");ke(Xn)}),le.compile()}(),compile:Na}}function ah(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var bh=34918,Eh=34919,Al=35007,ih=function(mt,qt){if(!qt.ext_disjoint_timer_query)return null;var Ee=[];function fr(){return Ee.pop()||qt.ext_disjoint_timer_query.createQueryEXT()}function Lr(ct){Ee.push(ct)}var cr=[];function lr(ct){var gt=fr();qt.ext_disjoint_timer_query.beginQueryEXT(Al,gt),cr.push(gt),_(cr.length-1,cr.length,ct)}function Yr(){qt.ext_disjoint_timer_query.endQueryEXT(Al)}function Vr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var $r=[];function Gr(){return $r.pop()||new Vr}function nn(ct){$r.push(ct)}var v=[];function _(ct,gt,bt){var Mt=Gr();Mt.startQueryIndex=ct,Mt.endQueryIndex=gt,Mt.sum=0,Mt.stats=bt,v.push(Mt)}var F=[],Z=[];function ot(){var ct,gt,bt=cr.length;if(bt!==0){Z.length=Math.max(Z.length,bt+1),F.length=Math.max(F.length,bt+1),F[0]=0,Z[0]=0;var Mt=0;for(ct=0,gt=0;gt<cr.length;++gt){var Gt=cr[gt];qt.ext_disjoint_timer_query.getQueryObjectEXT(Gt,Eh)?(Mt+=qt.ext_disjoint_timer_query.getQueryObjectEXT(Gt,bh),Lr(Gt)):cr[ct++]=Gt,F[gt+1]=Mt,Z[gt+1]=ct}for(cr.length=ct,ct=0,gt=0;gt<v.length;++gt){var te=v[gt],Zt=te.startQueryIndex,ye=te.endQueryIndex;te.sum+=F[ye]-F[Zt];var We=Z[Zt],wr=Z[ye];wr===We?(te.stats.gpuTime+=te.sum/1e6,nn(te)):(te.startQueryIndex=We,te.endQueryIndex=wr,v[ct++]=te)}v.length=ct}}return{beginQuery:lr,endQuery:Yr,pushScopeStats:_,update:ot,getNumPendingQueries:function(){return cr.length},clear:function(){Ee.push.apply(Ee,cr);for(var ct=0;ct<Ee.length;ct++)qt.ext_disjoint_timer_query.deleteQueryEXT(Ee[ct]);cr.length=0,Ee.length=0},restore:function(){cr.length=0,Ee.length=0}}},wh=16384,_h=256,oh=1024,sh=34962,Yc="webglcontextlost",Vc="webglcontextrestored",Cl=1,uh=2,Vs=3;function Tl(mt,qt){for(var Ee=0;Ee<mt.length;++Ee)if(mt[Ee]===qt)return Ee;return-1}function sc(mt){var qt=Wn(mt);if(!qt)return null;var Ee=qt.gl,fr=Ee.getContextAttributes(),Lr=Ee.isContextLost(),cr=Dn(Ee,qt);if(!cr)return null;var lr=en(),Yr=ah(),Vr=cr.extensions,$r=ih(Ee,Vr),Gr=Pr(),nn=Ee.drawingBufferWidth,v=Ee.drawingBufferHeight,_={tick:0,time:0,viewportWidth:nn,viewportHeight:v,framebufferWidth:nn,framebufferHeight:v,drawingBufferWidth:nn,drawingBufferHeight:v,pixelRatio:qt.pixelRatio},F={},Z={elements:null,primitive:4,count:-1,offset:0,instances:-1},ot=Co(Ee,Vr),ct=No(Ee,Yr,qt,bt),gt=ff(Ee,Vr,ot,Yr,ct);function bt($n){return gt.destroyBuffer($n)}var Mt=ts(Ee,Vr,ct,Yr),Gt=cf(Ee,lr,Yr,qt),te=Sc(Ee,Vr,ot,function(){We.procs.poll()},_,Yr,qt),Zt=Hf(Ee,Vr,ot,Yr,qt),ye=uf(Ee,Vr,ot,te,Zt,Yr),We=nh(Ee,lr,Vr,ot,ct,Mt,te,ye,F,gt,Gt,Z,_,$r,qt),wr=ju(Ee,ye,We.procs.poll,_,fr,Vr,ot),Ze=We.next,Je=Ee.canvas,Qe=[],jr=[],hn=[],tn=[qt.onDestroy],kn=null;function In(){if(Qe.length===0){$r&&$r.update(),kn=null;return}kn=vr.next(In),Ao();for(var $n=Qe.length-1;$n>=0;--$n){var ka=Qe[$n];ka&&ka(_,null,0)}Ee.flush(),$r&&$r.update()}function Kn(){!kn&&Qe.length>0&&(kn=vr.next(In))}function ca(){kn&&(vr.cancel(In),kn=null)}function ea($n){$n.preventDefault(),Lr=!0,ca(),jr.forEach(function(ka){ka()})}function mi($n){Ee.getError(),Lr=!1,cr.restore(),Gt.restore(),ct.restore(),te.restore(),Zt.restore(),ye.restore(),gt.restore(),$r&&$r.restore(),We.procs.refresh(),Kn(),hn.forEach(function(ka){ka()})}Je&&(Je.addEventListener(Yc,ea,!1),Je.addEventListener(Vc,mi,!1));function va(){Qe.length=0,ca(),Je&&(Je.removeEventListener(Yc,ea),Je.removeEventListener(Vc,mi)),Gt.clear(),ye.clear(),Zt.clear(),te.clear(),Mt.clear(),ct.clear(),gt.clear(),$r&&$r.clear(),tn.forEach(function($n){$n()})}function Si($n){Ct(!!$n,"invalid args to regl({...})"),Ct.type($n,"object","invalid args to regl({...})");function ka(nr){var Fe=z({},nr);delete Fe.uniforms,delete Fe.attributes,delete Fe.context,delete Fe.vao,"stencil"in Fe&&Fe.stencil.op&&(Fe.stencil.opBack=Fe.stencil.opFront=Fe.stencil.op,delete Fe.stencil.op);function Re(Ve){if(Ve in Fe){var ce=Fe[Ve];delete Fe[Ve],Object.keys(ce).forEach(function(Le){Fe[Ve+"."+Le]=ce[Le]})}}return Re("blend"),Re("depth"),Re("cull"),Re("stencil"),Re("polygonOffset"),Re("scissor"),Re("sample"),"vao"in nr&&(Fe.vao=nr.vao),Fe}function Ha(nr,Fe){var Re={},Ve={};return Object.keys(nr).forEach(function(ce){var Le=nr[ce];if(rr.isDynamic(Le)){Ve[ce]=rr.unbox(Le,ce);return}else if(Fe&&Array.isArray(Le)){for(var oe=0;oe<Le.length;++oe)if(rr.isDynamic(Le[oe])){Ve[ce]=rr.unbox(Le,ce);return}}Re[ce]=Le}),{dynamic:Ve,static:Re}}var io=Ha($n.context||{},!0),Pu=Ha($n.uniforms||{},!0),uc=Ha($n.attributes||{},!1),pe=Ha(ka($n),!1),dr={gpuTime:0,cpuTime:0,count:0},ur=We.compile(pe,uc,Pu,io,dr),Sn=ur.draw,Na=ur.batch,le=ur.scope,Ht=[];function ke(nr){for(;Ht.length<nr;)Ht.push(null);return Ht}function er(nr,Fe){var Re;if(Lr&&Ct.raise("context lost"),typeof nr=="function")return le.call(this,null,nr,0);if(typeof Fe=="function")if(typeof nr=="number")for(Re=0;Re<nr;++Re)le.call(this,null,Fe,Re);else if(Array.isArray(nr))for(Re=0;Re<nr.length;++Re)le.call(this,nr[Re],Fe,Re);else return le.call(this,nr,Fe,0);else if(typeof nr=="number"){if(nr>0)return Na.call(this,ke(nr|0),nr|0)}else if(Array.isArray(nr)){if(nr.length)return Na.call(this,nr,nr.length)}else return Sn.call(this,nr)}return z(er,{stats:dr,destroy:function(){ur.destroy()}})}var di=ye.setFBO=Si({framebuffer:rr.define.call(null,Cl,"framebuffer")});function Pa($n,ka){var Ha=0;We.procs.poll();var io=ka.color;io&&(Ee.clearColor(+io[0]||0,+io[1]||0,+io[2]||0,+io[3]||0),Ha|=wh),"depth"in ka&&(Ee.clearDepth(+ka.depth),Ha|=_h),"stencil"in ka&&(Ee.clearStencil(ka.stencil|0),Ha|=oh),Ct(!!Ha,"called regl.clear with no buffer specified"),Ee.clear(Ha)}function Mi($n){if(Ct(typeof $n=="object"&&$n,"regl.clear() takes an object as input"),"framebuffer"in $n)if($n.framebuffer&&$n.framebuffer_reglType==="framebufferCube")for(var ka=0;ka<6;++ka)di(z({framebuffer:$n.framebuffer.faces[ka]},$n),Pa);else di($n,Pa);else Pa(null,$n)}function Fi($n){Ct.type($n,"function","regl.frame() callback must be a function"),Qe.push($n);function ka(){var Ha=Tl(Qe,$n);Ct(Ha>=0,"cannot cancel a frame twice");function io(){var Pu=Tl(Qe,io);Qe[Pu]=Qe[Qe.length-1],Qe.length-=1,Qe.length<=0&&ca()}Qe[Ha]=io}return Kn(),{cancel:ka}}function yo(){var $n=Ze.viewport,ka=Ze.scissor_box;$n[0]=$n[1]=ka[0]=ka[1]=0,_.viewportWidth=_.framebufferWidth=_.drawingBufferWidth=$n[2]=ka[2]=Ee.drawingBufferWidth,_.viewportHeight=_.framebufferHeight=_.drawingBufferHeight=$n[3]=ka[3]=Ee.drawingBufferHeight}function Ao(){_.tick+=1,_.time=_a(),yo(),We.procs.poll()}function Qi(){te.refresh(),yo(),We.procs.refresh(),$r&&$r.update()}function _a(){return(Pr()-Gr)/1e3}Qi();function Ko($n,ka){Ct.type(ka,"function","listener callback must be a function");var Ha;switch($n){case"frame":return Fi(ka);case"lost":Ha=jr;break;case"restore":Ha=hn;break;case"destroy":Ha=tn;break;default:Ct.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ha.push(ka),{cancel:function(){for(var io=0;io<Ha.length;++io)if(Ha[io]===ka){Ha[io]=Ha[Ha.length-1],Ha.pop();return}}}}var ni=z(Si,{clear:Mi,prop:rr.define.bind(null,Cl),context:rr.define.bind(null,uh),this:rr.define.bind(null,Vs),draw:Si({}),buffer:function($n){return ct.create($n,sh,!1,!1)},elements:function($n){return Mt.create($n,!1)},texture:te.create2D,cube:te.createCube,renderbuffer:Zt.create,framebuffer:ye.create,framebufferCube:ye.createCube,vao:gt.createVAO,attributes:fr,frame:Fi,on:Ko,limits:ot,hasExtension:function($n){return ot.extensions.indexOf($n.toLowerCase())>=0},read:wr,destroy:va,_gl:Ee,_refresh:Qi,poll:function(){Ao(),$r&&$r.update()},now:_a,stats:Yr});return qt.onDone(null,ni),ni}return sc})},364687:function(yr,R,z){var B=z(817061)();yr.exports=B;try{regeneratorRuntime=B}catch(Y){typeof globalThis=="object"?globalThis.regeneratorRuntime=B:Function("r","regeneratorRuntime = r")(B)}}}]);
